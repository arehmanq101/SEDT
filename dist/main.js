(()=>{var qm=Object.create;var ts=Object.defineProperty;var Qm=Object.getOwnPropertyDescriptor;var Zm=Object.getOwnPropertyNames;var tg=Object.getPrototypeOf,eg=Object.prototype.hasOwnProperty;var Nn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),rg=(e,t)=>{for(var r in t)ts(e,r,{get:t[r],enumerable:!0})},og=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let p of Zm(t))!eg.call(e,p)&&p!==r&&ts(e,p,{get:()=>t[p],enumerable:!(s=Qm(t,p))||s.enumerable});return e};var Fn=(e,t,r)=>(r=e!=null?qm(tg(e)):{},og(t||!e||!e.__esModule?ts(r,"default",{value:e,enumerable:!0}):r,e));var tp=Nn((Bs,ma)=>{(function(e){"use strict";var t=e.setTimeout,r=e.clearTimeout,s=e.XMLHttpRequest,p=e.XDomainRequest,m=e.ActiveXObject,i=e.EventSource,u=e.document,o=e.Promise,n=e.fetch,a=e.Response,d=e.TextDecoder,l=e.TextEncoder,c=e.AbortController;if(typeof window<"u"&&typeof u<"u"&&!("readyState"in u)&&u.body==null&&(u.readyState="loading",window.addEventListener("load",function(U){u.readyState="complete"},!1)),s==null&&m!=null&&(s=function(){return new m("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(U){function X(){}return X.prototype=U,new X}),Date.now||(Date.now=function(){return new Date().getTime()}),c==null){var g=n;n=function(U,X){var at=X.signal;return g(U,{headers:X.headers,credentials:X.credentials,cache:X.cache}).then(function(tt){var ct=tt.body.getReader();return at._reader=ct,at._aborted&&at._reader.cancel(),{status:tt.status,statusText:tt.statusText,headers:tt.headers,body:{getReader:function(){return ct}}}})},c=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function h(){this.bitsNeeded=0,this.codePoint=0}h.prototype.decode=function(U){function X(bt,H,G){if(G===1)return bt>=128>>H&&bt<<H<=2047;if(G===2)return bt>=2048>>H&&bt<<H<=55295||bt>=57344>>H&&bt<<H<=65535;if(G===3)return bt>=65536>>H&&bt<<H<=1114111;throw new Error}function at(bt,H){if(bt===6*1)return H>>6>15?3:H>31?2:1;if(bt===6*2)return H>15?3:2;if(bt===6*3)return 3;throw new Error}for(var tt=65533,ct="",K=this.bitsNeeded,V=this.codePoint,st=0;st<U.length;st+=1){var it=U[st];K!==0&&(it<128||it>191||!X(V<<6|it&63,K-6,at(K,V)))&&(K=0,V=tt,ct+=String.fromCharCode(V)),K===0?(it>=0&&it<=127?(K=0,V=it):it>=192&&it<=223?(K=6*1,V=it&31):it>=224&&it<=239?(K=6*2,V=it&15):it>=240&&it<=247?(K=6*3,V=it&7):(K=0,V=tt),K!==0&&!X(V,K,at(K,V))&&(K=0,V=tt)):(K-=6,V=V<<6|it&63),K===0&&(V<=65535?ct+=String.fromCharCode(V):(ct+=String.fromCharCode(55296+(V-65535-1>>10)),ct+=String.fromCharCode(56320+(V-65535-1&1023))))}return this.bitsNeeded=K,this.codePoint=V,ct};var v=function(){try{return new d().decode(new l().encode("test"),{stream:!0})==="test"}catch(U){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+U)}return!1};(d==null||l==null||!v())&&(d=h);var k=function(){};function x(U){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=k,this.onload=k,this.onerror=k,this.onreadystatechange=k,this._contentType="",this._xhr=U,this._sendTimeout=0,this._abort=k}x.prototype.open=function(U,X){this._abort(!0);var at=this,tt=this._xhr,ct=1,K=0;this._abort=function(G){at._sendTimeout!==0&&(r(at._sendTimeout),at._sendTimeout=0),(ct===1||ct===2||ct===3)&&(ct=4,tt.onload=k,tt.onerror=k,tt.onabort=k,tt.onprogress=k,tt.onreadystatechange=k,tt.abort(),K!==0&&(r(K),K=0),G||(at.readyState=4,at.onabort(null),at.onreadystatechange())),ct=0};var V=function(){if(ct===1){var G=0,rt="",ft=void 0;if("contentType"in tt)G=200,rt="OK",ft=tt.contentType;else try{G=tt.status,rt=tt.statusText,ft=tt.getResponseHeader("Content-Type")}catch{G=0,rt="",ft=void 0}G!==0&&(ct=2,at.readyState=2,at.status=G,at.statusText=rt,at._contentType=ft,at.onreadystatechange())}},st=function(){if(V(),ct===2||ct===3){ct=3;var G="";try{G=tt.responseText}catch{}at.readyState=3,at.responseText=G,at.onprogress()}},it=function(G,rt){if((rt==null||rt.preventDefault==null)&&(rt={preventDefault:k}),st(),ct===1||ct===2||ct===3){if(ct=4,K!==0&&(r(K),K=0),at.readyState=4,G==="load")at.onload(rt);else if(G==="error")at.onerror(rt);else if(G==="abort")at.onabort(rt);else throw new TypeError;at.onreadystatechange()}},bt=function(G){tt!=null&&(tt.readyState===4?(!("onload"in tt)||!("onerror"in tt)||!("onabort"in tt))&&it(tt.responseText===""?"error":"load",G):tt.readyState===3?"onprogress"in tt||st():tt.readyState===2&&V())},H=function(){K=t(function(){H()},500),tt.readyState===3&&st()};"onload"in tt&&(tt.onload=function(G){it("load",G)}),"onerror"in tt&&(tt.onerror=function(G){it("error",G)}),"onabort"in tt&&(tt.onabort=function(G){it("abort",G)}),"onprogress"in tt&&(tt.onprogress=st),"onreadystatechange"in tt&&(tt.onreadystatechange=function(G){bt(G)}),("contentType"in tt||!("ontimeout"in s.prototype))&&(X+=(X.indexOf("?")===-1?"?":"&")+"padding=true"),tt.open(U,X,!0),"readyState"in tt&&(K=t(function(){H()},0))},x.prototype.abort=function(){this._abort(!1)},x.prototype.getResponseHeader=function(U){return this._contentType},x.prototype.setRequestHeader=function(U,X){var at=this._xhr;"setRequestHeader"in at&&at.setRequestHeader(U,X)},x.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},x.prototype.send=function(){if((!("ontimeout"in s.prototype)||!("sendAsBinary"in s.prototype)&&!("mozAnon"in s.prototype))&&u!=null&&u.readyState!=null&&u.readyState!=="complete"){var U=this;U._sendTimeout=t(function(){U._sendTimeout=0,U.send()},4);return}var X=this._xhr;"withCredentials"in X&&(X.withCredentials=this.withCredentials);try{X.send(void 0)}catch(at){throw at}};function A(U){return U.replace(/[A-Z]/g,function(X){return String.fromCharCode(X.charCodeAt(0)+32)})}function S(U){for(var X=Object.create(null),at=U.split(`\r
`),tt=0;tt<at.length;tt+=1){var ct=at[tt],K=ct.split(": "),V=K.shift(),st=K.join(": ");X[A(V)]=st}this._map=X}S.prototype.get=function(U){return this._map[A(U)]},s!=null&&s.HEADERS_RECEIVED==null&&(s.HEADERS_RECEIVED=2);function f(){}f.prototype.open=function(U,X,at,tt,ct,K,V){U.open("GET",ct);var st=0;U.onprogress=function(){var bt=U.responseText,H=bt.slice(st);st+=H.length,at(H)},U.onerror=function(bt){bt.preventDefault(),tt(new Error("NetworkError"))},U.onload=function(){tt(null)},U.onabort=function(){tt(null)},U.onreadystatechange=function(){if(U.readyState===s.HEADERS_RECEIVED){var bt=U.status,H=U.statusText,G=U.getResponseHeader("Content-Type"),rt=U.getAllResponseHeaders();X(bt,H,G,new S(rt))}},U.withCredentials=K;for(var it in V)Object.prototype.hasOwnProperty.call(V,it)&&U.setRequestHeader(it,V[it]);return U.send(),U};function L(U){this._headers=U}L.prototype.get=function(U){return this._headers.get(U)};function $(){}$.prototype.open=function(U,X,at,tt,ct,K,V){var st=null,it=new c,bt=it.signal,H=new d;return n(ct,{headers:V,credentials:K?"include":"same-origin",signal:bt,cache:"no-store"}).then(function(G){return st=G.body.getReader(),X(G.status,G.statusText,G.headers.get("Content-Type"),new L(G.headers)),new o(function(rt,ft){var kt=function(){st.read().then(function(Mt){if(Mt.done)rt(void 0);else{var It=H.decode(Mt.value,{stream:!0});at(It),kt()}}).catch(function(Mt){ft(Mt)})};kt()})}).catch(function(G){if(G.name!=="AbortError")return G}).then(function(G){tt(G)}),{abort:function(){st?.cancel(),it.abort()}}};function C(){this._listeners=Object.create(null)}function T(U){t(function(){throw U},0)}C.prototype.dispatchEvent=function(U){U.target=this;var X=this._listeners[U.type];if(X!=null)for(var at=X.length,tt=0;tt<at;tt+=1){var ct=X[tt];try{typeof ct.handleEvent=="function"?ct.handleEvent(U):ct.call(this,U)}catch(K){T(K)}}},C.prototype.addEventListener=function(U,X){U=String(U);var at=this._listeners,tt=at[U];tt==null&&(tt=[],at[U]=tt);for(var ct=!1,K=0;K<tt.length;K+=1)tt[K]===X&&(ct=!0);ct||tt.push(X)},C.prototype.removeEventListener=function(U,X){U=String(U);var at=this._listeners,tt=at[U];if(tt!=null){for(var ct=[],K=0;K<tt.length;K+=1)tt[K]!==X&&ct.push(tt[K]);ct.length===0?delete at[U]:at[U]=ct}};function w(U){this.type=U,this.target=void 0}function y(U,X){w.call(this,U),this.data=X.data,this.lastEventId=X.lastEventId}y.prototype=Object.create(w.prototype);function b(U,X){w.call(this,U),this.status=X.status,this.statusText=X.statusText,this.headers=X.headers}b.prototype=Object.create(w.prototype);function _(U,X){w.call(this,U),this.error=X.error}_.prototype=Object.create(w.prototype);var E=-1,R=0,M=1,I=2,D=-1,O=0,N=1,P=2,F=3,z=/^text\/event\-stream(;.*)?$/i,W=1e3,j=18e6,Z=function(U,X){var at=U==null?X:parseInt(U,10);return at!==at&&(at=X),Y(at)},Y=function(U){return Math.min(Math.max(U,W),j)},q=function(U,X,at){try{typeof X=="function"&&X.call(U,at)}catch(tt){T(tt)}};function nt(U,X){C.call(this),X=X||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Et(this,U,X)}function ot(){return s!=null&&"withCredentials"in s.prototype||p==null?new s:new p}var wt=n!=null&&a!=null&&"body"in a.prototype;function Et(U,X,at){X=String(X);var tt=!!at.withCredentials,ct=at.lastEventIdQueryParameterName||"lastEventId",K=Y(1e3),V=Z(at.heartbeatTimeout,45e3),st="",it=K,bt=!1,H=0,G=at.headers||{},rt=at.Transport,ft=wt&&rt==null?void 0:new x(rt!=null?new rt:ot()),kt=rt!=null&&typeof rt!="string"?new rt:ft==null?new $:new f,Mt=void 0,It=0,Dt=E,Pt="",Lt="",Xt="",er="",he=O,Wi=0,rr=0,Le=function(be,se,te,$e){if(Dt===R)if(be===200&&te!=null&&z.test(te)){Dt=M,bt=Date.now(),it=K,U.readyState=M;var we=new b("open",{status:be,statusText:se,headers:$e});U.dispatchEvent(we),q(U,U.onopen,we)}else{var le="";be!==200?(se&&(se=se.replace(/\s+/g," ")),le="EventSource's response has a status "+be+" "+se+" that is not 200. Aborting the connection."):le="EventSource's response has a Content-Type specifying an unsupported type: "+(te==null?"-":te.replace(/\s+/g," "))+". Aborting the connection.",Vi();var we=new b("error",{status:be,statusText:se,headers:$e});U.dispatchEvent(we),q(U,U.onerror,we),console.error(le)}},So=function(be){if(Dt===M){for(var se=-1,te=0;te<be.length;te+=1){var $e=be.charCodeAt(te);($e===10||$e===13)&&(se=te)}var we=(se!==-1?er:"")+be.slice(0,se+1);er=(se===-1?er:"")+be.slice(se+1),be!==""&&(bt=Date.now(),H+=be.length);for(var le=0;le<we.length;le+=1){var $e=we.charCodeAt(le);if(he===D&&$e===10)he=O;else if(he===D&&(he=O),$e===13||$e===10){if(he!==O){he===N&&(rr=le+1);var fr=we.slice(Wi,rr-1),vr=we.slice(rr+(rr<le&&we.charCodeAt(rr)===32?1:0),le);fr==="data"?(Pt+=`
`,Pt+=vr):fr==="id"?Lt=vr:fr==="event"?Xt=vr:fr==="retry"?(K=Z(vr,K),it=K):fr==="heartbeatTimeout"&&(V=Z(vr,V),It!==0&&(r(It),It=t(function(){Co()},V)))}if(he===O){if(Pt!==""){st=Lt,Xt===""&&(Xt="message");var ao=new y(Xt,{data:Pt.slice(1),lastEventId:Lt});if(U.dispatchEvent(ao),Xt==="open"?q(U,U.onopen,ao):Xt==="message"?q(U,U.onmessage,ao):Xt==="error"&&q(U,U.onerror,ao),Dt===I)return}Pt="",Xt=""}he=$e===13?D:O}else he===O&&(Wi=le,he=N),he===N?$e===58&&(rr=le+1,he=P):he===P&&(he=F)}}},oi=function(be){if(Dt===M||Dt===R){Dt=E,It!==0&&(r(It),It=0),It=t(function(){Co()},it),it=Y(Math.min(K*16,it*2)),U.readyState=R;var se=new _("error",{error:be});U.dispatchEvent(se),q(U,U.onerror,se),be!=null&&console.error(be)}},Vi=function(){Dt=I,Mt!=null&&(Mt.abort(),Mt=void 0),It!==0&&(r(It),It=0),U.readyState=I},Co=function(){if(It=0,Dt!==E){if(!bt&&Mt!=null)oi(new Error("No activity within "+V+" milliseconds. "+(Dt===R?"No response received.":H+" chars received.")+" Reconnecting.")),Mt!=null&&(Mt.abort(),Mt=void 0);else{var be=Math.max((bt||Date.now())+V-Date.now(),1);bt=!1,It=t(function(){Co()},be)}return}bt=!1,H=0,It=t(function(){Co()},V),Dt=R,Pt="",Xt="",Lt=st,er="",Wi=0,rr=0,he=O;var se=X;if(X.slice(0,5)!=="data:"&&X.slice(0,5)!=="blob:"&&st!==""){var te=X.indexOf("?");se=te===-1?X:X.slice(0,te+1)+X.slice(te+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(vr,ao){return ao===ct?"":vr}),se+=(X.indexOf("?")===-1?"?":"&")+ct+"="+encodeURIComponent(st)}var $e=U.withCredentials,we={};we.Accept="text/event-stream";var le=U.headers;if(le!=null)for(var fr in le)Object.prototype.hasOwnProperty.call(le,fr)&&(we[fr]=le[fr]);try{Mt=kt.open(ft,Le,So,oi,se,$e,we)}catch(vr){throw Vi(),vr}};U.url=X,U.readyState=R,U.withCredentials=tt,U.headers=G,U._close=Vi,Co()}nt.prototype=Object.create(C.prototype),nt.prototype.CONNECTING=R,nt.prototype.OPEN=M,nt.prototype.CLOSED=I,nt.prototype.close=function(){this._close()},nt.CONNECTING=R,nt.OPEN=M,nt.CLOSED=I,nt.prototype.withCredentials=void 0;var vt=i;s!=null&&(i==null||!("withCredentials"in i.prototype))&&(vt=nt),function(U){if(typeof ma=="object"&&typeof ma.exports=="object"){var X=U(Bs);X!==void 0&&(ma.exports=X)}else typeof define=="function"&&define.amd?define(["exports"],U):U(e)}(function(U){U.EventSourcePolyfill=nt,U.NativeEventSource=i,U.EventSource=vt})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Bs:globalThis)});var wp=Nn((Qs,Zs)=>{var qs,va;qs=Qs,va=function(){"use strict";function e(E,R){var M=Object.keys(E);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(E);R&&(I=I.filter(function(D){return Object.getOwnPropertyDescriptor(E,D).enumerable})),M.push.apply(M,I)}return M}function t(E){for(var R=1;R<arguments.length;R++){var M=arguments[R]!=null?arguments[R]:{};R%2?e(Object(M),!0).forEach(function(I){s(E,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(M)):e(Object(M)).forEach(function(I){Object.defineProperty(E,I,Object.getOwnPropertyDescriptor(M,I))})}return E}function r(E){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},r(E)}function s(E,R,M){return R in E?Object.defineProperty(E,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[R]=M,E}function p(E){return function(R){if(Array.isArray(R))return i(R)}(E)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(E)||m(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m(E,R){if(E){if(typeof E=="string")return i(E,R);var M=Object.prototype.toString.call(E).slice(8,-1);return M==="Object"&&E.constructor&&(M=E.constructor.name),M==="Map"||M==="Set"?Array.from(E):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?i(E,R):void 0}}function i(E,R){(R==null||R>E.length)&&(R=E.length);for(var M=0,I=new Array(R);M<R;M++)I[M]=E[M];return I}var u=function(E){return typeof E=="string"?document.querySelector(E):E()},o=function(E,R){var M=typeof E=="string"?document.createElement(E):E;for(var I in R){var D=R[I];if(I==="inside")D.append(M);else if(I==="dest")u(D[0]).insertAdjacentElement(D[1],M);else if(I==="around"){var O=D;O.parentNode.insertBefore(M,O),M.append(O),O.getAttribute("autofocus")!=null&&O.focus()}else I in M?M[I]=D:M.setAttribute(I,D)}return M},n=function(E,R){return E=String(E).toLowerCase(),R?E.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):E},a=function(E,R){return o("mark",t({innerHTML:E},typeof R=="string"&&{class:R})).outerHTML},d=function(E,R){R.input.dispatchEvent(new CustomEvent(E,{bubbles:!0,detail:R.feedback,cancelable:!0}))},l=function(E,R,M){var I=M||{},D=I.mode,O=I.diacritics,N=I.highlight,P=n(R,O);if(R=String(R),E=n(E,O),D==="loose"){var F=(E=E.replace(/ /g,"")).length,z=0,W=Array.from(R).map(function(Z,Y){return z<F&&P[Y]===E[z]&&(Z=N?a(Z,N):Z,z++),Z}).join("");if(z===F)return W}else{var j=P.indexOf(E);if(~j)return E=R.substring(j,j+E.length),j=N?R.replace(E,a(E,N)):R}},c=function(E,R){return new Promise(function(M,I){var D;return(D=E.data).cache&&D.store?M():new Promise(function(O,N){return typeof D.src=="function"?D.src(R).then(O,N):O(D.src)}).then(function(O){try{return E.feedback=D.store=O,d("response",E),M()}catch(N){return I(N)}},I)})},g=function(E,R){var M=R.data,I=R.searchEngine,D=[];M.store.forEach(function(N,P){var F=function(j){var Z=j?N[j]:N,Y=typeof I=="function"?I(E,Z):l(E,Z,{mode:I,diacritics:R.diacritics,highlight:R.resultItem.highlight});if(Y){var q={match:Y,value:N};j&&(q.key=j),D.push(q)}};if(M.keys){var z,W=function(j,Z){var Y=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(!Y){if(Array.isArray(j)||(Y=m(j))||Z&&j&&typeof j.length=="number"){Y&&(j=Y);var q=0,nt=function(){};return{s:nt,n:function(){return q>=j.length?{done:!0}:{done:!1,value:j[q++]}},e:function(vt){throw vt},f:nt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ot,wt=!0,Et=!1;return{s:function(){Y=Y.call(j)},n:function(){var vt=Y.next();return wt=vt.done,vt},e:function(vt){Et=!0,ot=vt},f:function(){try{wt||Y.return==null||Y.return()}finally{if(Et)throw ot}}}}(M.keys);try{for(W.s();!(z=W.n()).done;)F(z.value)}catch(j){W.e(j)}finally{W.f()}}else F()}),M.filter&&(D=M.filter(D));var O=D.slice(0,R.resultsList.maxResults);R.feedback={query:E,matches:D,results:O},d("results",R)},h="aria-expanded",v="aria-activedescendant",k="aria-selected",x=function(E,R){E.feedback.selection=t({index:R},E.feedback.results[R])},A=function(E){E.isOpen||((E.wrapper||E.input).setAttribute(h,!0),E.list.removeAttribute("hidden"),E.isOpen=!0,d("open",E))},S=function(E){E.isOpen&&((E.wrapper||E.input).setAttribute(h,!1),E.input.setAttribute(v,""),E.list.setAttribute("hidden",""),E.isOpen=!1,d("close",E))},f=function(E,R){var M=R.resultItem,I=R.list.getElementsByTagName(M.tag),D=!!M.selected&&M.selected.split(" ");if(R.isOpen&&I.length){var O,N,P=R.cursor;E>=I.length&&(E=0),E<0&&(E=I.length-1),R.cursor=E,P>-1&&(I[P].removeAttribute(k),D&&(N=I[P].classList).remove.apply(N,p(D))),I[E].setAttribute(k,!0),D&&(O=I[E].classList).add.apply(O,p(D)),R.input.setAttribute(v,I[R.cursor].id),R.list.scrollTop=I[E].offsetTop-R.list.clientHeight+I[E].clientHeight+5,R.feedback.cursor=R.cursor,x(R,E),d("navigate",R)}},L=function(E){f(E.cursor+1,E)},$=function(E){f(E.cursor-1,E)},C=function(E,R,M){(M=M>=0?M:E.cursor)<0||(E.feedback.event=R,x(E,M),d("selection",E),S(E))};function T(E,R){var M=this;return new Promise(function(I,D){var O,N;return O=R||((N=E.input)instanceof HTMLInputElement||N instanceof HTMLTextAreaElement?N.value:N.innerHTML),function(F,z,W){return z?z(F):F.length>=W}(O=E.query?E.query(O):O,E.trigger,E.threshold)?c(E,O).then(function(F){try{return E.feedback instanceof Error?I():(g(O,E),E.resultsList&&function(z){var W=z.resultsList,j=z.list,Z=z.resultItem,Y=z.feedback,q=Y.matches,nt=Y.results;if(z.cursor=-1,j.innerHTML="",q.length||W.noResults){var ot=new DocumentFragment;nt.forEach(function(wt,Et){var vt=o(Z.tag,t({id:"".concat(Z.id,"_").concat(Et),role:"option",innerHTML:wt.match,inside:ot},Z.class&&{class:Z.class}));Z.element&&Z.element(vt,wt)}),j.append(ot),W.element&&W.element(j,Y),A(z)}else S(z)}(E),P.call(M))}catch(z){return D(z)}},D):(S(E),P.call(M));function P(){return I()}})}var w=function(E,R){for(var M in E)for(var I in E[M])R(M,I)},y=function(E){var R,M,I,D=E.events,O=(R=function(){return T(E)},M=E.debounce,function(){clearTimeout(I),I=setTimeout(function(){return R()},M)}),N=E.events=t({input:t({},D&&D.input)},E.resultsList&&{list:D?t({},D.list):{}}),P={input:{input:function(){O()},keydown:function(F){(function(z,W){switch(z.keyCode){case 40:case 38:z.preventDefault(),z.keyCode===40?L(W):$(W);break;case 13:W.submit||z.preventDefault(),W.cursor>=0&&C(W,z);break;case 9:W.resultsList.tabSelect&&W.cursor>=0&&C(W,z);break;case 27:W.input.value="",S(W)}})(F,E)},blur:function(){S(E)}},list:{mousedown:function(F){F.preventDefault()},click:function(F){(function(z,W){var j=W.resultItem.tag.toUpperCase(),Z=Array.from(W.list.querySelectorAll(j)),Y=z.target.closest(j);Y&&Y.nodeName===j&&C(W,z,Z.indexOf(Y))})(F,E)}}};w(P,function(F,z){(E.resultsList||z==="input")&&(N[F][z]||(N[F][z]=P[F][z]))}),w(N,function(F,z){E[F].addEventListener(z,N[F][z])})};function b(E){var R=this;return new Promise(function(M,I){var D,O,N;if(D=E.placeHolder,N={role:"combobox","aria-owns":(O=E.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},o(E.input,t(t({"aria-controls":O.id,"aria-autocomplete":"both"},D&&{placeholder:D}),!E.wrapper&&t({},N))),E.wrapper&&(E.wrapper=o("div",t({around:E.input,class:E.name+"_wrapper"},N))),O&&(E.list=o(O.tag,t({dest:[O.destination,O.position],id:O.id,role:"listbox",hidden:"hidden"},O.class&&{class:O.class}))),y(E),E.data.cache)return c(E).then(function(F){try{return P.call(R)}catch(z){return I(z)}},I);function P(){return d("init",E),M()}return P.call(R)})}function _(E){var R=E.prototype;R.init=function(){b(this)},R.start=function(M){T(this,M)},R.unInit=function(){if(this.wrapper){var M=this.wrapper.parentNode;M.insertBefore(this.input,this.wrapper),M.removeChild(this.wrapper)}var I;w((I=this).events,function(D,O){I[D].removeEventListener(O,I.events[D][O])})},R.open=function(){A(this)},R.close=function(){S(this)},R.goTo=function(M){f(M,this)},R.next=function(){L(this)},R.previous=function(){$(this)},R.select=function(M){C(this,null,M)},R.search=function(M,I,D){return l(M,I,D)}}return function E(R){this.options=R,this.id=E.instances=(E.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(M){var I=M.name,D=M.options,O=M.resultsList,N=M.resultItem;for(var P in D)if(r(D[P])==="object")for(var F in M[P]||(M[P]={}),D[P])M[P][F]=D[P][F];else M[P]=D[P];M.selector=M.selector||"#"+I,O.destination=O.destination||M.selector,O.id=O.id||I+"_list_"+M.id,N.id=N.id||I+"_result",M.input=u(M.selector)}(this),_.call(this,E),b(this)}},typeof Qs=="object"&&typeof Zs<"u"?Zs.exports=va():typeof define=="function"&&define.amd?define(va):(qs=typeof globalThis<"u"?globalThis:qs||self).autoComplete=va()});var xp=Nn((yp,wa)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var r=function(o,n,a){if(typeof o!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(a=n),r.modules[o]||(r.payloads[o]=a,r.modules[o]=null)};r.modules={},r.payloads={};var s=function(o,n,a){if(typeof n=="string"){var d=i(o,n);if(d!=null)return a&&a(),d}else if(Object.prototype.toString.call(n)==="[object Array]"){for(var l=[],c=0,g=n.length;c<g;++c){var h=i(o,n[c]);if(h==null&&p.original)return;l.push(h)}return a&&a.apply(null,l)||!0}},p=function(o,n){var a=s("",o,n);return a==null&&p.original?p.original.apply(this,arguments):a},m=function(o,n){if(n.indexOf("!")!==-1){var a=n.split("!");return m(o,a[0])+"!"+m(o,a[1])}if(n.charAt(0)=="."){var d=o.split("/").slice(0,-1).join("/");for(n=d+"/"+n;n.indexOf(".")!==-1&&l!=n;){var l=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},i=function(o,n){n=m(o,n);var a=r.modules[n];if(!a){if(a=r.payloads[n],typeof a=="function"){var d={},l={id:n,uri:"",exports:d,packaged:!0},c=function(h,v){return s(n,h,v)},g=a(c,d,l);d=g||l.exports,r.modules[n]=d,delete r.payloads[n]}a=r.modules[n]=d||a}return a};function u(o){var n=t;o&&(t[o]||(t[o]={}),n=t[o]),(!n.define||!n.define.packaged)&&(r.original=n.define,n.define=r,n.define.packaged=!0),(!n.require||!n.require.packaged)&&(p.original=n.require,n.require=p,n.require.packaged=!0)}u(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,r){function s(p,m,i){Object.defineProperty(p,m,{value:i,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||s(String.prototype,"startsWith",function(p,m){return m=m||0,this.lastIndexOf(p,m)===m}),String.prototype.endsWith||s(String.prototype,"endsWith",function(p,m){var i=this;(m===void 0||m>i.length)&&(m=i.length),m-=p.length;var u=i.indexOf(p,m);return u!==-1&&u===m}),String.prototype.repeat||s(String.prototype,"repeat",function(p){for(var m="",i=this;p>0;)p&1&&(m+=i),(p>>=1)&&(i+=i);return m}),String.prototype.includes||s(String.prototype,"includes",function(p,m){return this.indexOf(p,m)!=-1}),Object.assign||(Object.assign=function(p){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var m=Object(p),i=1;i<arguments.length;i++){var u=arguments[i];u!=null&&Object.keys(u).forEach(function(o){m[o]=u[o]})}return m}),Object.values||(Object.values=function(p){return Object.keys(p).map(function(m){return p[m]})}),Array.prototype.find||s(Array.prototype,"find",function(p){for(var m=this.length,i=arguments[1],u=0;u<m;u++){var o=this[u];if(p.call(i,o,u,this))return o}}),Array.prototype.findIndex||s(Array.prototype,"findIndex",function(p){for(var m=this.length,i=arguments[1],u=0;u<m;u++){var o=this[u];if(p.call(i,o,u,this))return u}}),Array.prototype.includes||s(Array.prototype,"includes",function(p,m){return this.indexOf(p,m)!=-1}),Array.prototype.fill||s(Array.prototype,"fill",function(p){for(var m=this,i=m.length>>>0,u=arguments[1],o=u>>0,n=o<0?Math.max(i+o,0):Math.min(o,i),a=arguments[2],d=a===void 0?i:a>>0,l=d<0?Math.max(i+d,0):Math.min(d,i);n<l;)m[n]=p,n++;return m}),Array.of||s(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,r){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,r){t.deepCopy=function s(p){if(typeof p!="object"||!p)return p;var m;if(Array.isArray(p)){m=[];for(var i=0;i<p.length;i++)m[i]=s(p[i]);return m}if(Object.prototype.toString.call(p)!=="[object Object]")return p;m={};for(var i in p)m[i]=s(p[i]);return m}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";t.last=function(m){return m[m.length-1]},t.stringReverse=function(m){return m.split("").reverse().join("")},t.stringRepeat=function(m,i){for(var u="";i>0;)i&1&&(u+=m),(i>>=1)&&(m+=m);return u};var s=/^\s\s*/,p=/\s\s*$/;t.stringTrimLeft=function(m){return m.replace(s,"")},t.stringTrimRight=function(m){return m.replace(p,"")},t.copyObject=function(m){var i={};for(var u in m)i[u]=m[u];return i},t.copyArray=function(m){for(var i=[],u=0,o=m.length;u<o;u++)m[u]&&typeof m[u]=="object"?i[u]=this.copyObject(m[u]):i[u]=m[u];return i},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(m){for(var i={},u=0;u<m.length;u++)i[m[u]]=1;return i},t.createMap=function(m){var i=Object.create(null);for(var u in m)i[u]=m[u];return i},t.arrayRemove=function(m,i){for(var u=0;u<=m.length;u++)i===m[u]&&m.splice(u,1)},t.escapeRegExp=function(m){return m.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(m){return(""+m).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(m,i){var u=[];return m.replace(i,function(o){u.push({offset:arguments[arguments.length-2],length:o.length})}),u},t.deferredCall=function(m){var i=null,u=function(){i=null,m()},o=function(n){return o.cancel(),i=setTimeout(u,n||0),o};return o.schedule=o,o.call=function(){return this.cancel(),m(),o},o.cancel=function(){return clearTimeout(i),i=null,o},o.isPending=function(){return i},o},t.delayedCall=function(m,i){var u=null,o=function(){u=null,m()},n=function(a){u==null&&(u=setTimeout(o,a||i))};return n.delay=function(a){u&&clearTimeout(u),u=setTimeout(o,a||i)},n.schedule=n,n.call=function(){this.cancel(),m()},n.cancel=function(){u&&clearTimeout(u),u=null},n.isPending=function(){return u},n},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(m,i,u){return u&&m.codePointAt(i)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,r){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var s=typeof navigator=="object"?navigator:{},p=(/mac|win|linux/i.exec(s.platform)||["other"])[0].toLowerCase(),m=s.userAgent||"",i=s.appName||"";t.isWin=p=="win",t.isMac=p=="mac",t.isLinux=p=="linux",t.isIE=i=="Microsoft Internet Explorer"||i.indexOf("MSAppHost")>=0?parseFloat((m.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((m.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=m.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(m.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(m.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(m.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(m.split(" Edge/")[1])||void 0,t.isAIR=m.indexOf("AdobeAIR")>=0,t.isAndroid=m.indexOf("Android")>=0,t.isChromeOS=m.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(m)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var s=e("./useragent"),p="http://www.w3.org/1999/xhtml";t.buildDom=function a(d,l,c){if(typeof d=="string"&&d){var g=document.createTextNode(d);return l&&l.appendChild(g),g}if(!Array.isArray(d))return d&&d.appendChild&&l&&l.appendChild(d),d;if(typeof d[0]!="string"||!d[0]){for(var h=[],v=0;v<d.length;v++){var k=a(d[v],l,c);k&&h.push(k)}return h}var x=document.createElement(d[0]),A=d[1],S=1;A&&typeof A=="object"&&!Array.isArray(A)&&(S=2);for(var v=S;v<d.length;v++)a(d[v],x,c);return S==2&&Object.keys(A).forEach(function(f){var L=A[f];f==="class"?x.className=Array.isArray(L)?L.join(" "):L:typeof L=="function"||f=="value"||f[0]=="$"?x[f]=L:f==="ref"?c&&(c[L]=x):f==="style"?typeof L=="string"&&(x.style.cssText=L):L!=null&&x.setAttribute(f,L)}),l&&l.appendChild(x),x},t.getDocumentHead=function(a){return a||(a=document),a.head||a.getElementsByTagName("head")[0]||a.documentElement},t.createElement=function(a,d){return document.createElementNS?document.createElementNS(d||p,a):document.createElement(a)},t.removeChildren=function(a){a.innerHTML=""},t.createTextNode=function(a,d){var l=d?d.ownerDocument:document;return l.createTextNode(a)},t.createFragment=function(a){var d=a?a.ownerDocument:document;return d.createDocumentFragment()},t.hasCssClass=function(a,d){var l=(a.className+"").split(/\s+/g);return l.indexOf(d)!==-1},t.addCssClass=function(a,d){t.hasCssClass(a,d)||(a.className+=" "+d)},t.removeCssClass=function(a,d){for(var l=a.className.split(/\s+/g);;){var c=l.indexOf(d);if(c==-1)break;l.splice(c,1)}a.className=l.join(" ")},t.toggleCssClass=function(a,d){for(var l=a.className.split(/\s+/g),c=!0;;){var g=l.indexOf(d);if(g==-1)break;c=!1,l.splice(g,1)}return c&&l.push(d),a.className=l.join(" "),c},t.setCssClass=function(a,d,l){l?t.addCssClass(a,d):t.removeCssClass(a,d)},t.hasCssString=function(a,d){var l=0,c;if(d=d||document,c=d.querySelectorAll("style")){for(;l<c.length;)if(c[l++].id===a)return!0}},t.removeElementById=function(a,d){d=d||document,d.getElementById(a)&&d.getElementById(a).remove()};var m,i=[];t.useStrictCSP=function(a){m=a,a==!1?u():i||(i=[])};function u(){var a=i;i=null,a&&a.forEach(function(d){o(d[0],d[1])})}function o(a,d,l){if(!(typeof document>"u")){if(i){if(l)u();else if(l===!1)return i.push([a,d])}if(!m){var c=l;!l||!l.getRootNode?c=document:(c=l.getRootNode(),(!c||c==l)&&(c=document));var g=c.ownerDocument||c;if(d&&t.hasCssString(d,c))return null;d&&(a+=`
/*# sourceURL=ace/css/`+d+" */");var h=t.createElement("style");h.appendChild(g.createTextNode(a)),d&&(h.id=d),c==g&&(c=t.getDocumentHead(g)),c.insertBefore(h,c.firstChild)}}}if(t.importCssString=o,t.importCssStylsheet=function(a,d){t.buildDom(["link",{rel:"stylesheet",href:a}],t.getDocumentHead(d))},t.scrollbarWidth=function(a){var d=t.createElement("ace_inner");d.style.width="100%",d.style.minWidth="0px",d.style.height="200px",d.style.display="block";var l=t.createElement("ace_outer"),c=l.style;c.position="absolute",c.left="-10000px",c.overflow="hidden",c.width="200px",c.minWidth="0px",c.height="150px",c.display="block",l.appendChild(d);var g=a&&a.documentElement||document&&document.documentElement;if(!g)return 0;g.appendChild(l);var h=d.offsetWidth;c.overflow="scroll";var v=d.offsetWidth;return h===v&&(v=l.clientWidth),g.removeChild(l),h-v},t.computedStyle=function(a,d){return window.getComputedStyle(a,"")||{}},t.setStyle=function(a,d,l){a[d]!==l&&(a[d]=l)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=s.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,s.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var n=document.createElement("div");t.HI_DPI&&n.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!s.isEdge&&typeof n.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),n=null}t.HAS_CSS_TRANSFORMS?t.translate=function(a,d,l){a.style.transform="translate("+Math.round(d)+"px, "+Math.round(l)+"px)"}:t.translate=function(a,d,l){a.style.top=Math.round(l)+"px",a.style.left=Math.round(d)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var s=e("./dom");t.get=function(p,m){var i=new XMLHttpRequest;i.open("GET",p,!0),i.onreadystatechange=function(){i.readyState===4&&m(i.responseText)},i.send(null)},t.loadScript=function(p,m){var i=s.getDocumentHead(),u=document.createElement("script");u.src=p,i.appendChild(u),u.onload=u.onreadystatechange=function(o,n){(n||!u.readyState||u.readyState=="loaded"||u.readyState=="complete")&&(u=u.onload=u.onreadystatechange=null,n||m())}},t.qualifyURL=function(p){var m=document.createElement("a");return m.href=p,m.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,r){"use strict";t.inherits=function(s,p){s.super_=p,s.prototype=Object.create(p.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(s,p){for(var m in p)s[m]=p[m];return s},t.implement=function(s,p){t.mixin(s,p)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,r){"use strict";var s={},p=function(){this.propagationStopped=!0},m=function(){this.defaultPrevented=!0};s._emit=s._dispatchEvent=function(i,u){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[i]||[],n=this._defaultHandlers[i];if(!(!o.length&&!n)){(typeof u!="object"||!u)&&(u={}),u.type||(u.type=i),u.stopPropagation||(u.stopPropagation=p),u.preventDefault||(u.preventDefault=m),o=o.slice();for(var a=0;a<o.length&&(o[a](u,this),!u.propagationStopped);a++);if(n&&!u.defaultPrevented)return n(u,this)}},s._signal=function(i,u){var o=(this._eventRegistry||{})[i];if(o){o=o.slice();for(var n=0;n<o.length;n++)o[n](u,this)}},s.once=function(i,u){var o=this;if(this.on(i,function n(){o.off(i,n),u.apply(null,arguments)}),!u)return new Promise(function(n){u=n})},s.setDefaultHandler=function(i,u){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[i]){var n=o[i],a=o._disabled_[i];a||(o._disabled_[i]=a=[]),a.push(n);var d=a.indexOf(u);d!=-1&&a.splice(d,1)}o[i]=u},s.removeDefaultHandler=function(i,u){var o=this._defaultHandlers;if(o){var n=o._disabled_[i];if(o[i]==u)n&&this.setDefaultHandler(i,n.pop());else if(n){var a=n.indexOf(u);a!=-1&&n.splice(a,1)}}},s.on=s.addEventListener=function(i,u,o){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[i];return n||(n=this._eventRegistry[i]=[]),n.indexOf(u)==-1&&n[o?"unshift":"push"](u),u},s.off=s.removeListener=s.removeEventListener=function(i,u){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[i];if(o){var n=o.indexOf(u);n!==-1&&o.splice(n,1)}},s.removeAllListeners=function(i){i||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[i]=void 0),this._defaultHandlers&&(this._defaultHandlers[i]=void 0)},t.EventEmitter=s});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,r){t.reportError=function(p,m){var i=new Error(p);i.data=m,typeof console=="object"&&console.error&&console.error(i),setTimeout(function(){throw i})}});ace.define("ace/lib/default_english_messages",["require","exports","module"],function(e,t,r){var s={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages"};t.defaultEnglishMessages=s});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(e,t,r){"no use strict";var s=e("./oop"),p=e("./event_emitter").EventEmitter,m=e("./report_error").reportError,i=e("./default_english_messages").defaultEnglishMessages,u={setOptions:function(l){Object.keys(l).forEach(function(c){this.setOption(c,l[c])},this)},getOptions:function(l){var c={};if(l)Array.isArray(l)||(c=l,l=Object.keys(c));else{var g=this.$options;l=Object.keys(g).filter(function(h){return!g[h].hidden})}return l.forEach(function(h){c[h]=this.getOption(h)},this),c},setOption:function(l,c){if(this["$"+l]!==c){var g=this.$options[l];if(!g)return o('misspelled option "'+l+'"');if(g.forwardTo)return this[g.forwardTo]&&this[g.forwardTo].setOption(l,c);g.handlesSet||(this["$"+l]=c),g&&g.set&&g.set.call(this,c)}},getOption:function(l){var c=this.$options[l];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(l):c&&c.get?c.get.call(this):this["$"+l]:o('misspelled option "'+l+'"')}};function o(l){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var n,a,d=function(){function l(){this.$defaultOptions={},n=i,a="dollarSigns"}return l.prototype.defineOptions=function(c,g,h){return c.$options||(this.$defaultOptions[g]=c.$options={}),Object.keys(h).forEach(function(v){var k=h[v];typeof k=="string"&&(k={forwardTo:k}),k.name||(k.name=v),c.$options[k.name]=k,"initialValue"in k&&(c["$"+k.name]=k.initialValue)}),s.implement(c,u),this},l.prototype.resetOptions=function(c){Object.keys(c.$options).forEach(function(g){var h=c.$options[g];"value"in h&&c.setOption(g,h.value)})},l.prototype.setDefaultValue=function(c,g,h){if(!c){for(c in this.$defaultOptions)if(this.$defaultOptions[c][g])break;if(!this.$defaultOptions[c][g])return!1}var v=this.$defaultOptions[c]||(this.$defaultOptions[c]={});v[g]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,g,h):v[g].value=h)},l.prototype.setDefaultValues=function(c,g){Object.keys(g).forEach(function(h){this.setDefaultValue(c,h,g[h])},this)},l.prototype.setMessages=function(c,g){n=c,g&&g.placeholders&&(a=g.placeholders)},l.prototype.nls=function(c,g,h){n[c]||(o("No message found for the key '"+c+"' in the provided messages, trying to find a translation for the default string '"+g+"'."),n[g]||o("No message found for the default string '"+g+"' in the provided messages. Falling back to the default English message."));var v=n[c]||n[g]||g;return h&&(a==="dollarSigns"&&(v=v.replace(/\$(\$|[\d]+)/g,function(k,x){return x=="$"?"$":h[x]})),a==="curlyBrackets"&&(v=v.replace(/\{([^\}]+)\}/g,function(k,x){return h[x]}))),v},l}();d.prototype.warn=o,d.prototype.reportError=m,s.implement(d.prototype,p),t.AppConfig=d});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,r){r.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,r){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var s=e("../lib/dom");s.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,r){"no use strict";var s=e("./lib/lang"),p=e("./lib/net"),m=e("./lib/dom"),i=e("./lib/app_config").AppConfig;r.exports=t=new i;var u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(d){if(!u.hasOwnProperty(d))throw new Error("Unknown config key: "+d);return u[d]},t.set=function(d,l){if(u.hasOwnProperty(d))u[d]=l;else if(this.setDefaultValue("",d,l)==!1)throw new Error("Unknown config key: "+d);d=="useStrictCSP"&&m.useStrictCSP(l)},t.all=function(){return s.copyObject(u)},t.$modes={},t.moduleUrl=function(d,l){if(u.$moduleUrls[d])return u.$moduleUrls[d];var c=d.split("/");l=l||c[c.length-2]||"";var g=l=="snippets"?"/":"-",h=c[c.length-1];if(l=="worker"&&g=="-"){var v=new RegExp("^"+l+"[\\-_]|[\\-_]"+l+"$","g");h=h.replace(v,"")}(!h||h==l)&&c.length>1&&(h=c[c.length-2]);var k=u[l+"Path"];return k==null?k=u.basePath:g=="/"&&(l=g=""),k&&k.slice(-1)!="/"&&(k+="/"),k+l+g+h+this.get("suffix")},t.setModuleUrl=function(d,l){return u.$moduleUrls[d]=l};var o=function(d,l){if(d==="ace/theme/textmate"||d==="./theme/textmate")return l(null,e("./theme/textmate"));if(n)return n(d,l);console.error("loader is not configured")},n;t.setLoader=function(d){n=d},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(d,l){var c;if(Array.isArray(d))var g=d[0],h=d[1];else if(typeof d=="string")var h=d;var v=function(k){if(k&&!t.$loading[h])return l&&l(k);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(l),!(t.$loading[h].length>1)){var x=function(){o(h,function(A,S){S&&(t.$loaded[h]=S),t._emit("load.module",{name:h,module:S});var f=t.$loading[h];t.$loading[h]=null,f.forEach(function(L){L&&L(S)})})};if(!t.get("packaged"))return x();p.loadScript(t.moduleUrl(h,g),x),a()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(k){k.default?v(k.default):v(k)});else{try{c=this.$require(h)}catch{}v(c||t.$loaded[h])}},t.$require=function(d){if(typeof r.require=="function"){var l="require";return r[l](d)}},t.setModuleLoader=function(d,l){t.dynamicModules[d]=l};var a=function(){!u.basePath&&!u.workerPath&&!u.modePath&&!u.themePath&&!Object.keys(u.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),a=function(){})};t.version="1.35.4"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var s=e("./config");s.setLoader(function(u,o){e([u],function(n){o(null,n)})});var p=function(){return this||typeof window<"u"&&window}();r.exports=function(u){s.init=m,s.$require=e,u.require=e,typeof define=="function"&&(u.define=define)},m(!0);function m(u){if(!(!p||!p.document)){s.set("packaged",u||e.packaged||r.packaged||p.define&&define.packaged);var o={},n="",a=document.currentScript||document._currentScript,d=a&&a.ownerDocument||document;a&&a.src&&(n=a.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var l=d.getElementsByTagName("script"),c=0;c<l.length;c++){var g=l[c],h=g.src||g.getAttribute("src");if(h){for(var v=g.attributes,k=0,x=v.length;k<x;k++){var A=v[k];A.name.indexOf("data-ace-")===0&&(o[i(A.name.replace(/^data-ace-/,""))]=A.value)}var S=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(n=S[1])}}n&&(o.base=o.base||n,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var f in o)typeof o[f]<"u"&&s.set(f,o[f])}}function i(u){return u.replace(/-(.)/g,function(o,n){return n.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,r){"use strict";var s=function(){function p(m,i,u,o){this.start={row:m,column:i},this.end={row:u,column:o}}return p.prototype.isEqual=function(m){return this.start.row===m.start.row&&this.end.row===m.end.row&&this.start.column===m.start.column&&this.end.column===m.end.column},p.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},p.prototype.contains=function(m,i){return this.compare(m,i)==0},p.prototype.compareRange=function(m){var i,u=m.end,o=m.start;return i=this.compare(u.row,u.column),i==1?(i=this.compare(o.row,o.column),i==1?2:i==0?1:0):i==-1?-2:(i=this.compare(o.row,o.column),i==-1?-1:i==1?42:0)},p.prototype.comparePoint=function(m){return this.compare(m.row,m.column)},p.prototype.containsRange=function(m){return this.comparePoint(m.start)==0&&this.comparePoint(m.end)==0},p.prototype.intersects=function(m){var i=this.compareRange(m);return i==-1||i==0||i==1},p.prototype.isEnd=function(m,i){return this.end.row==m&&this.end.column==i},p.prototype.isStart=function(m,i){return this.start.row==m&&this.start.column==i},p.prototype.setStart=function(m,i){typeof m=="object"?(this.start.column=m.column,this.start.row=m.row):(this.start.row=m,this.start.column=i)},p.prototype.setEnd=function(m,i){typeof m=="object"?(this.end.column=m.column,this.end.row=m.row):(this.end.row=m,this.end.column=i)},p.prototype.inside=function(m,i){return this.compare(m,i)==0?!(this.isEnd(m,i)||this.isStart(m,i)):!1},p.prototype.insideStart=function(m,i){return this.compare(m,i)==0?!this.isEnd(m,i):!1},p.prototype.insideEnd=function(m,i){return this.compare(m,i)==0?!this.isStart(m,i):!1},p.prototype.compare=function(m,i){return!this.isMultiLine()&&m===this.start.row?i<this.start.column?-1:i>this.end.column?1:0:m<this.start.row?-1:m>this.end.row?1:this.start.row===m?i>=this.start.column?0:-1:this.end.row===m?i<=this.end.column?0:1:0},p.prototype.compareStart=function(m,i){return this.start.row==m&&this.start.column==i?-1:this.compare(m,i)},p.prototype.compareEnd=function(m,i){return this.end.row==m&&this.end.column==i?1:this.compare(m,i)},p.prototype.compareInside=function(m,i){return this.end.row==m&&this.end.column==i?1:this.start.row==m&&this.start.column==i?-1:this.compare(m,i)},p.prototype.clipRows=function(m,i){if(this.end.row>i)var u={row:i+1,column:0};else if(this.end.row<m)var u={row:m,column:0};if(this.start.row>i)var o={row:i+1,column:0};else if(this.start.row<m)var o={row:m,column:0};return p.fromPoints(o||this.start,u||this.end)},p.prototype.extend=function(m,i){var u=this.compare(m,i);if(u==0)return this;if(u==-1)var o={row:m,column:i};else var n={row:m,column:i};return p.fromPoints(o||this.start,n||this.end)},p.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},p.prototype.isMultiLine=function(){return this.start.row!==this.end.row},p.prototype.clone=function(){return p.fromPoints(this.start,this.end)},p.prototype.collapseRows=function(){return this.end.column==0?new p(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new p(this.start.row,0,this.end.row,0)},p.prototype.toScreenRange=function(m){var i=m.documentToScreenPosition(this.start),u=m.documentToScreenPosition(this.end);return new p(i.row,i.column,u.row,u.column)},p.prototype.moveBy=function(m,i){this.start.row+=m,this.start.column+=i,this.end.row+=m,this.end.column+=i},p}();s.fromPoints=function(p,m){return new s(p.row,p.column,m.row,m.column)},s.comparePoints=function(p,m){return p.row-m.row||p.column-m.column},t.Range=s});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,r){"use strict";for(var s=e("./oop"),p={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},m={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},i=0;i<10;i++)m["Digit"+i]=48+i,m["Numpad"+i]=96+i,p.PRINTABLE_KEYS[48+i]=""+i,p.FUNCTION_KEYS[96+i]="Numpad"+i;for(var i=65;i<91;i++){var u=String.fromCharCode(i+32);m["Key"+u.toUpperCase()]=i,p.PRINTABLE_KEYS[i]=u}for(var i=1;i<13;i++)m["F"+i]=111+i,p.FUNCTION_KEYS[111+i]="F"+i;var o={Shift:16,Control:17,Alt:18,Meta:224};for(var n in o)m[n]=m[n+"Left"]=m[n+"Right"]=o[n];t.$codeToKeyCode=m,p.PRINTABLE_KEYS[173]="-";for(var a in p.FUNCTION_KEYS){var d=p.FUNCTION_KEYS[a].toLowerCase();p[d]=parseInt(a,10)}for(var a in p.PRINTABLE_KEYS){var d=p.PRINTABLE_KEYS[a].toLowerCase();p[d]=parseInt(a,10)}s.mixin(p,p.MODIFIER_KEYS),s.mixin(p,p.PRINTABLE_KEYS),s.mixin(p,p.FUNCTION_KEYS),p.enter=p.return,p.escape=p.esc,p.del=p.delete,function(){for(var l=["cmd","ctrl","alt","shift"],c=Math.pow(2,l.length);c--;)p.KEY_MODS[c]=l.filter(function(g){return c&p.KEY_MODS[g]}).join("-")+"-"}(),p.KEY_MODS[0]="",p.KEY_MODS[-1]="input-",s.mixin(t,p),t.default=t,t.keyCodeToString=function(l){var c=p[l];return typeof c!="string"&&(c=String.fromCharCode(l)),c.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var s=e("./keys"),p=e("./useragent"),m=null,i=0,u;function o(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return u={passive:!1},!0}})}catch{}}function n(){return u==null&&o(),u}function a(k,x,A){this.elem=k,this.type=x,this.callback=A}a.prototype.destroy=function(){l(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var d=t.addListener=function(k,x,A,S){k.addEventListener(x,A,n()),S&&S.$toDestroy.push(new a(k,x,A))},l=t.removeListener=function(k,x,A){k.removeEventListener(x,A,n())};t.stopEvent=function(k){return t.stopPropagation(k),t.preventDefault(k),!1},t.stopPropagation=function(k){k.stopPropagation&&k.stopPropagation()},t.preventDefault=function(k){k.preventDefault&&k.preventDefault()},t.getButton=function(k){return k.type=="dblclick"?0:k.type=="contextmenu"||p.isMac&&k.ctrlKey&&!k.altKey&&!k.shiftKey?2:k.button},t.capture=function(k,x,A){var S=k&&k.ownerDocument||document;function f(L){x&&x(L),A&&A(L),l(S,"mousemove",x),l(S,"mouseup",f),l(S,"dragstart",f)}return d(S,"mousemove",x),d(S,"mouseup",f),d(S,"dragstart",f),f},t.addMouseWheelListener=function(k,x,A){d(k,"wheel",function(S){var f=.15,L=S.deltaX||0,$=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=L*f,S.wheelY=$*f;break;case S.DOM_DELTA_LINE:var C=15;S.wheelX=L*C,S.wheelY=$*C;break;case S.DOM_DELTA_PAGE:var T=150;S.wheelX=L*T,S.wheelY=$*T;break}x(S)},A)},t.addMultiMouseDownListener=function(k,x,A,S,f){var L=0,$,C,T,w={2:"dblclick",3:"tripleclick",4:"quadclick"};function y(b){if(t.getButton(b)!==0?L=0:b.detail>1?(L++,L>4&&(L=1)):L=1,p.isIE){var _=Math.abs(b.clientX-$)>5||Math.abs(b.clientY-C)>5;(!T||_)&&(L=1),T&&clearTimeout(T),T=setTimeout(function(){T=null},x[L-1]||600),L==1&&($=b.clientX,C=b.clientY)}if(b._clicks=L,A[S]("mousedown",b),L>4)L=0;else if(L>1)return A[S](w[L],b)}Array.isArray(k)||(k=[k]),k.forEach(function(b){d(b,"mousedown",y,f)})};function c(k){return 0|(k.ctrlKey?1:0)|(k.altKey?2:0)|(k.shiftKey?4:0)|(k.metaKey?8:0)}t.getModifierString=function(k){return s.KEY_MODS[c(k)]};function g(k,x,A){var S=c(x);if(!A&&x.code&&(A=s.$codeToKeyCode[x.code]||A),!p.isMac&&m){if(x.getModifierState&&(x.getModifierState("OS")||x.getModifierState("Win"))&&(S|=8),m.altGr)if((3&S)!=3)m.altGr=0;else return;if(A===18||A===17){var f=x.location;if(A===17&&f===1)m[A]==1&&(i=x.timeStamp);else if(A===18&&S===3&&f===2){var L=x.timeStamp-i;L<50&&(m.altGr=!0)}}}if(A in s.MODIFIER_KEYS&&(A=-1),!(!S&&A===13&&x.location===3&&(k(x,S,-A),x.defaultPrevented))){if(p.isChromeOS&&S&8){if(k(x,S,A),x.defaultPrevented)return;S&=-9}return!S&&!(A in s.FUNCTION_KEYS)&&!(A in s.PRINTABLE_KEYS)?!1:k(x,S,A)}}t.addCommandKeyListener=function(k,x,A){var S=null;d(k,"keydown",function(f){m[f.keyCode]=(m[f.keyCode]||0)+1;var L=g(x,f,f.keyCode);return S=f.defaultPrevented,L},A),d(k,"keypress",function(f){S&&(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey)&&(t.stopEvent(f),S=null)},A),d(k,"keyup",function(f){m[f.keyCode]=null},A),m||(h(),d(window,"focus",h))};function h(){m=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!p.isOldIE){var v=1;t.nextTick=function(k,x){x=x||window;var A="zero-timeout-message-"+v++,S=function(f){f.data==A&&(t.stopPropagation(f),l(x,"message",S),k())};d(x,"message",S),x.postMessage(A,"*")}}t.$idleBlocked=!1,t.onIdle=function(k,x){return setTimeout(function A(){t.$idleBlocked?setTimeout(A,100):k()},x)},t.$idleBlockId=null,t.blockIdle=function(k){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},k||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(k){setTimeout(k,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,r){"use strict";var s;r.exports={lineMode:!1,pasteCancelled:function(){return s&&s>Date.now()-50?!0:s=!1},cancel:function(){s=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var s=e("../lib/event"),p=e("../config").nls,m=e("../lib/useragent"),i=e("../lib/dom"),u=e("../lib/lang"),o=e("../clipboard"),n=m.isChrome<18,a=m.isIE,d=m.isChrome>63,l=400,c=e("../lib/keys"),g=c.KEY_MODS,h=m.isIOS,v=h?/\s/:/\n/,k=m.isMobile,x;x=function(A,S){var f=i.createElement("textarea");f.className="ace_text-input",f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck","false"),f.style.opacity="0",A.insertBefore(f,A.firstChild);var L=!1,$=!1,C=!1,T=!1,w="";k||(f.style.fontSize="1px");var y=!1,b=!1,_="",E=0,R=0,M=0,I=Number.MAX_SAFE_INTEGER,D=Number.MIN_SAFE_INTEGER,O=0;try{var N=document.activeElement===f}catch{}this.setNumberOfExtraLines=function(H){if(I=Number.MAX_SAFE_INTEGER,D=Number.MIN_SAFE_INTEGER,H<0){O=0;return}O=H},this.setAriaOptions=function(H){if(H.activeDescendant?(f.setAttribute("aria-haspopup","true"),f.setAttribute("aria-autocomplete",H.inline?"both":"list"),f.setAttribute("aria-activedescendant",H.activeDescendant)):(f.setAttribute("aria-haspopup","false"),f.setAttribute("aria-autocomplete","both"),f.removeAttribute("aria-activedescendant")),H.role&&f.setAttribute("role",H.role),H.setLabel){f.setAttribute("aria-roledescription",p("text-input.aria-roledescription","editor"));var G="";if(S.$textInputAriaLabel&&(G+="".concat(S.$textInputAriaLabel,", ")),S.session){var rt=S.session.selection.cursor.row;G+=p("text-input.aria-label","Cursor at row $0",[rt+1])}f.setAttribute("aria-label",G)}},this.setAriaOptions({role:"textbox"}),s.addListener(f,"blur",function(H){b||(S.onBlur(H),N=!1)},S),s.addListener(f,"focus",function(H){if(!b){if(N=!0,m.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(H),m.isEdge?setTimeout(F):F()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),w||d||this.$focusScroll=="browser")return f.focus({preventScroll:!0});var H=f.style.top;f.style.position="fixed",f.style.top="0px";try{var G=f.getBoundingClientRect().top!=0}catch{return}var rt=[];if(G)for(var ft=f.parentElement;ft&&ft.nodeType==1;)rt.push(ft),ft.setAttribute("ace_nocontext","true"),!ft.parentElement&&ft.getRootNode?ft=ft.getRootNode().host:ft=ft.parentElement;f.focus({preventScroll:!0}),G&&rt.forEach(function(kt){kt.removeAttribute("ace_nocontext")}),setTimeout(function(){f.style.position="",f.style.top=="0px"&&(f.style.top=H)},0)},this.blur=function(){f.blur()},this.isFocused=function(){return N},S.on("beforeEndOperation",function(){var H=S.curOp,G=H&&H.command&&H.command.name;if(G!="insertstring"){var rt=G&&(H.docChanged||H.selectionChanged);C&&rt&&(_=f.value="",at()),F()}});var P=function(H,G){for(var rt=G,ft=1;ft<=H-I&&ft<2*O+1;ft++)rt+=S.session.getLine(H-ft).length+1;return rt},F=h?function(H){if(!(!N||L&&!H||T)){H||(H="");var G=`
 ab`+H+`cde fg
`;G!=f.value&&(f.value=_=G);var rt=4,ft=4+(H.length||(S.selection.isEmpty()?0:1));(E!=rt||R!=ft)&&f.setSelectionRange(rt,ft),E=rt,R=ft}}:function(){if(!(C||T)&&!(!N&&!Z)){C=!0;var H=0,G=0,rt="";if(S.session){var ft=S.selection,kt=ft.getRange(),Mt=ft.cursor.row;Mt===D+1?(I=D+1,D=I+2*O):Mt===I-1?(D=I-1,I=D-2*O):(Mt<I-1||Mt>D+1)&&(I=Mt>O?Mt-O:0,D=Mt>O?Mt+O:2*O);for(var It=[],Dt=I;Dt<=D;Dt++)It.push(S.session.getLine(Dt));if(rt=It.join(`
`),H=P(kt.start.row,kt.start.column),G=P(kt.end.row,kt.end.column),kt.start.row<I){var Pt=S.session.getLine(I-1);H=kt.start.row<I-1?0:H,G+=Pt.length+1,rt=Pt+`
`+rt}else if(kt.end.row>D){var Lt=S.session.getLine(D+1);G=kt.end.row>D+1?Lt.length:kt.end.column,G+=rt.length+1,rt=rt+`
`+Lt}else k&&Mt>0&&(rt=`
`+rt,G+=1,H+=1);rt.length>l&&(H<l&&G<l?rt=rt.slice(0,l):(rt=`
`,H==G?H=G=0:(H=0,G=1)));var Xt=rt+`

`;Xt!=_&&(f.value=_=Xt,E=R=Xt.length)}if(Z&&(E=f.selectionStart,R=f.selectionEnd),R!=G||E!=H||f.selectionEnd!=R)try{f.setSelectionRange(H,G),E=H,R=G}catch{}C=!1}};this.resetSelection=F,N&&S.onFocus();var z=function(H){return H.selectionStart===0&&H.selectionEnd>=_.length&&H.value===_&&_&&H.selectionEnd!==R},W=function(H){C||(L?L=!1:z(f)?(S.selectAll(),F()):k&&f.selectionStart!=E&&F())},j=null;this.setInputHandler=function(H){j=H},this.getInputHandler=function(){return j};var Z=!1,Y=function(H,G){if(Z&&(Z=!1),$)return F(),H&&S.onPaste(H),$=!1,"";for(var rt=f.selectionStart,ft=f.selectionEnd,kt=E,Mt=_.length-R,It=H,Dt=H.length-rt,Pt=H.length-ft,Lt=0;kt>0&&_[Lt]==H[Lt];)Lt++,kt--;for(It=It.slice(Lt),Lt=1;Mt>0&&_.length-Lt>E-1&&_[_.length-Lt]==H[H.length-Lt];)Lt++,Mt--;Dt-=Lt-1,Pt-=Lt-1;var Xt=It.length-Lt+1;if(Xt<0&&(kt=-Xt,Xt=0),It=It.slice(0,Xt),!G&&!It&&!Dt&&!kt&&!Mt&&!Pt)return"";T=!0;var er=!1;return m.isAndroid&&It==". "&&(It="  ",er=!0),It&&!kt&&!Mt&&!Dt&&!Pt||y?S.onTextInput(It):S.onTextInput(It,{extendLeft:kt,extendRight:Mt,restoreStart:Dt,restoreEnd:Pt}),T=!1,_=H,E=rt,R=ft,M=Pt,er?`
`:It},q=function(H){if(C)return X();if(H&&H.inputType){if(H.inputType=="historyUndo")return S.execCommand("undo");if(H.inputType=="historyRedo")return S.execCommand("redo")}var G=f.value,rt=Y(G,!0);(G.length>l+100||v.test(rt)||k&&E<1&&E==R)&&F()},nt=function(H,G,rt){var ft=H.clipboardData||window.clipboardData;if(!(!ft||n)){var kt=a||rt?"Text":"text/plain";try{return G?ft.setData(kt,G)!==!1:ft.getData(kt)}catch(Mt){if(!rt)return nt(Mt,G,!0)}}},ot=function(H,G){var rt=S.getCopyText();if(!rt)return s.preventDefault(H);nt(H,rt)?(h&&(F(rt),L=rt,setTimeout(function(){L=!1},10)),G?S.onCut():S.onCopy(),s.preventDefault(H)):(L=!0,f.value=rt,f.select(),setTimeout(function(){L=!1,F(),G?S.onCut():S.onCopy()}))},wt=function(H){ot(H,!0)},Et=function(H){ot(H,!1)},vt=function(H){var G=nt(H);o.pasteCancelled()||(typeof G=="string"?(G&&S.onPaste(G,H),m.isIE&&setTimeout(F),s.preventDefault(H)):(f.value="",$=!0))};s.addCommandKeyListener(f,function(H,G,rt){if(!C)return S.onCommandKey(H,G,rt)},S),s.addListener(f,"select",W,S),s.addListener(f,"input",q,S),s.addListener(f,"cut",wt,S),s.addListener(f,"copy",Et,S),s.addListener(f,"paste",vt,S),(!("oncut"in f)||!("oncopy"in f)||!("onpaste"in f))&&s.addListener(A,"keydown",function(H){if(!(m.isMac&&!H.metaKey||!H.ctrlKey))switch(H.keyCode){case 67:Et(H);break;case 86:vt(H);break;case 88:wt(H);break}},S);var U=function(H){if(!(C||!S.onCompositionStart||S.$readOnly)&&(C={},!y)){H.data&&(C.useTextareaForIME=!1),setTimeout(X,0),S._signal("compositionStart"),S.on("mousedown",tt);var G=S.getSelectionRange();G.end.row=G.start.row,G.end.column=G.start.column,C.markerRange=G,C.selectionStart=E,S.onCompositionStart(C),C.useTextareaForIME?(_=f.value="",E=0,R=0):(f.msGetInputContext&&(C.context=f.msGetInputContext()),f.getInputContext&&(C.context=f.getInputContext()))}},X=function(){if(!(!C||!S.onCompositionUpdate||S.$readOnly)){if(y)return tt();if(C.useTextareaForIME)S.onCompositionUpdate(f.value);else{var H=f.value;Y(H),C.markerRange&&(C.context&&(C.markerRange.start.column=C.selectionStart=C.context.compositionStartOffset),C.markerRange.end.column=C.markerRange.start.column+R-C.selectionStart+M)}}},at=function(H){!S.onCompositionEnd||S.$readOnly||(C=!1,S.onCompositionEnd(),S.off("mousedown",tt),H&&q())};function tt(){b=!0,f.blur(),f.focus(),b=!1}var ct=u.delayedCall(X,50).schedule.bind(null,null);function K(H){H.keyCode==27&&f.value.length<f.selectionStart&&(C||(_=f.value),E=R=-1,F()),ct()}s.addListener(f,"compositionstart",U,S),s.addListener(f,"compositionupdate",X,S),s.addListener(f,"keyup",K,S),s.addListener(f,"keydown",ct,S),s.addListener(f,"compositionend",at,S),this.getElement=function(){return f},this.setCommandMode=function(H){y=H,f.readOnly=!1},this.setReadOnly=function(H){y||(f.readOnly=H)},this.setCopyWithEmptySelection=function(H){},this.onContextMenu=function(H){Z=!0,F(),S._emit("nativecontextmenu",{target:S,domEvent:H}),this.moveToMouse(H,!0)},this.moveToMouse=function(H,G){w||(w=f.style.cssText),f.style.cssText=(G?"z-index:100000;":"")+(m.isIE?"opacity:0.1;":"")+"text-indent: -"+(E+R)*S.renderer.characterWidth*.5+"px;";var rt=S.container.getBoundingClientRect(),ft=i.computedStyle(S.container),kt=rt.top+(parseInt(ft.borderTopWidth)||0),Mt=rt.left+(parseInt(rt.borderLeftWidth)||0),It=rt.bottom-kt-f.clientHeight-2,Dt=function(Pt){i.translate(f,Pt.clientX-Mt-2,Math.min(Pt.clientY-kt-2,It))};Dt(H),H.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(V),m.isWin&&s.capture(S.container,Dt,st))},this.onContextMenuClose=st;var V;function st(){clearTimeout(V),V=setTimeout(function(){w&&(f.style.cssText=w,w=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var it=function(H){S.textInput.onContextMenu(H),st()};s.addListener(f,"mouseup",it,S),s.addListener(f,"mousedown",function(H){H.preventDefault(),st()},S),s.addListener(S.renderer.scroller,"contextmenu",it,S),s.addListener(f,"contextmenu",it,S),h&&bt(A,S,f);function bt(H,G,rt){var ft=null,kt=!1;rt.addEventListener("keydown",function(It){ft&&clearTimeout(ft),kt=!0},!0),rt.addEventListener("keyup",function(It){ft=setTimeout(function(){kt=!1},100)},!0);var Mt=function(It){if(document.activeElement===rt&&!(kt||C||G.$mouseHandler.isMousePressed)&&!L){var Dt=rt.selectionStart,Pt=rt.selectionEnd,Lt=null,Xt=0;if(Dt==0?Lt=c.up:Dt==1?Lt=c.home:Pt>R&&_[Pt]==`
`?Lt=c.end:Dt<E&&_[Dt-1]==" "?(Lt=c.left,Xt=g.option):Dt<E||Dt==E&&R!=E&&Dt==Pt?Lt=c.left:Pt>R&&_.slice(0,Pt).split(`
`).length>2?Lt=c.down:Pt>R&&_[Pt-1]==" "?(Lt=c.right,Xt=g.option):(Pt>R||Pt==R&&R!=E&&Dt==Pt)&&(Lt=c.right),Dt!==Pt&&(Xt|=g.shift),Lt){var er=G.onCommandKey({},Xt,Lt);if(!er&&G.commands){Lt=c.keyCodeToString(Lt);var he=G.commands.findKeyCommand(Xt,Lt);he&&G.execCommand(he)}E=Dt,R=Pt,F("")}}};document.addEventListener("selectionchange",Mt),G.on("destroy",function(){document.removeEventListener("selectionchange",Mt)})}this.destroy=function(){f.parentElement&&f.parentElement.removeChild(f)}},t.TextInput=x,t.$setUserAgentForTests=function(A,S){k=A,h=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var s=e("../lib/useragent"),p=0,m=550,i=function(){function n(a){a.$clickSelection=null;var d=a.editor;d.setDefaultHandler("mousedown",this.onMouseDown.bind(a)),d.setDefaultHandler("dblclick",this.onDoubleClick.bind(a)),d.setDefaultHandler("tripleclick",this.onTripleClick.bind(a)),d.setDefaultHandler("quadclick",this.onQuadClick.bind(a)),d.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a));var l=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];l.forEach(function(c){a[c]=this[c]},this),a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange"),a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}return n.prototype.onMouseDown=function(a){var d=a.inSelection(),l=a.getDocumentPosition();this.mousedownEvent=a;var c=this.editor,g=a.getButton();if(g!==0){var h=c.getSelectionRange(),v=h.isEmpty();(v||g==1)&&c.selection.moveToPosition(l),g==2&&(c.textInput.onContextMenu(a.domEvent),s.isMozilla||a.preventDefault());return}if(this.mousedownEvent.time=Date.now(),d&&!c.isFocused()&&(c.focus(),this.$focusTimeout&&!this.$clickSelection&&!c.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(a);return}return this.captureMouse(a),this.startSelect(l,a.domEvent._clicks>1),a.preventDefault()},n.prototype.startSelect=function(a,d){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var l=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?l.selection.selectToPosition(a):d||l.selection.moveToPosition(a),d||this.select(),l.setStyle("ace_selecting"),this.setState("select"))},n.prototype.select=function(){var a,d=this.editor,l=d.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var c=this.$clickSelection.comparePoint(l);if(c==-1)a=this.$clickSelection.end;else if(c==1)a=this.$clickSelection.start;else{var g=o(this.$clickSelection,l);l=g.cursor,a=g.anchor}d.selection.setSelectionAnchor(a.row,a.column)}d.selection.selectToPosition(l),d.renderer.scrollCursorIntoView()},n.prototype.extendSelectionBy=function(a){var d,l=this.editor,c=l.renderer.screenToTextCoordinates(this.x,this.y),g=l.selection[a](c.row,c.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(g.start),v=this.$clickSelection.comparePoint(g.end);if(h==-1&&v<=0)d=this.$clickSelection.end,(g.end.row!=c.row||g.end.column!=c.column)&&(c=g.start);else if(v==1&&h>=0)d=this.$clickSelection.start,(g.start.row!=c.row||g.start.column!=c.column)&&(c=g.end);else if(h==-1&&v==1)c=g.end,d=g.start;else{var k=o(this.$clickSelection,c);c=k.cursor,d=k.anchor}l.selection.setSelectionAnchor(d.row,d.column)}l.selection.selectToPosition(c),l.renderer.scrollCursorIntoView()},n.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},n.prototype.focusWait=function(){var a=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),d=Date.now();(a>p||d-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},n.prototype.onDoubleClick=function(a){var d=a.getDocumentPosition(),l=this.editor,c=l.session,g=c.getBracketRange(d);g?(g.isEmpty()&&(g.start.column--,g.end.column++),this.setState("select")):(g=l.selection.getWordRange(d.row,d.column),this.setState("selectByWords")),this.$clickSelection=g,this.select()},n.prototype.onTripleClick=function(a){var d=a.getDocumentPosition(),l=this.editor;this.setState("selectByLines");var c=l.getSelectionRange();c.isMultiLine()&&c.contains(d.row,d.column)?(this.$clickSelection=l.selection.getLineRange(c.start.row),this.$clickSelection.end=l.selection.getLineRange(c.end.row).end):this.$clickSelection=l.selection.getLineRange(d.row),this.select()},n.prototype.onQuadClick=function(a){var d=this.editor;d.selectAll(),this.$clickSelection=d.getSelectionRange(),this.setState("selectAll")},n.prototype.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var d=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var l=this.$lastScroll,c=a.domEvent.timeStamp,g=c-l.t,h=g?a.wheelX/g:l.vx,v=g?a.wheelY/g:l.vy;g<m&&(h=(h+l.vx)/2,v=(v+l.vy)/2);var k=Math.abs(h/v),x=!1;if(k>=1&&d.renderer.isScrollableBy(a.wheelX*a.speed,0)&&(x=!0),k<=1&&d.renderer.isScrollableBy(0,a.wheelY*a.speed)&&(x=!0),x)l.allowed=c;else if(c-l.allowed<m){var A=Math.abs(h)<=1.5*Math.abs(l.vx)&&Math.abs(v)<=1.5*Math.abs(l.vy);A?(x=!0,l.allowed=c):l.allowed=0}if(l.t=c,l.vx=h,l.vy=v,x)return d.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()}},n}();i.prototype.selectEnd=i.prototype.selectByLinesEnd,i.prototype.selectAllEnd=i.prototype.selectByLinesEnd,i.prototype.selectByWordsEnd=i.prototype.selectByLinesEnd,t.DefaultHandlers=i;function u(n,a,d,l){return Math.sqrt(Math.pow(d-n,2)+Math.pow(l-a,2))}function o(n,a){if(n.start.row==n.end.row)var d=2*a.column-n.start.column-n.end.column;else if(n.start.row==n.end.row-1&&!n.start.column&&!n.end.column)var d=a.column-4;else var d=2*a.row-n.start.row-n.end.row;return d<0?{cursor:n.start,anchor:n.end}:{cursor:n.end,anchor:n.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,r){t.preventParentScroll=function(p){p.stopPropagation();var m=p.currentTarget,i=m.scrollHeight>m.clientHeight;i||p.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,x){k.__proto__=x}||function(k,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(k[A]=x[A])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function k(){this.constructor=h}h.prototype=v===null?Object.create(v):(k.prototype=v.prototype,new k)}}(),p=this&&this.__values||function(g){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&g[h],k=0;if(v)return v.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&k>=g.length&&(g=void 0),{value:g&&g[k++],done:!g}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},m=e("./lib/dom"),i=e("./lib/event"),u=e("./range").Range,o=e("./lib/scroll").preventParentScroll,n="ace_tooltip",a=function(){function g(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return g.prototype.$init=function(){return this.$element=m.createElement("div"),this.$element.className=n,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},g.prototype.getElement=function(){return this.$element||this.$init()},g.prototype.setText=function(h){this.getElement().textContent=h},g.prototype.setHtml=function(h){this.getElement().innerHTML=h},g.prototype.setPosition=function(h,v){this.getElement().style.left=h+"px",this.getElement().style.top=v+"px"},g.prototype.setClassName=function(h){m.addCssClass(this.getElement(),h)},g.prototype.setTheme=function(h){this.$element.className=n+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},g.prototype.show=function(h,v,k){h!=null&&this.setText(h),v!=null&&k!=null&&this.setPosition(v,k),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},g.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=n,this.isOpen=!1)},g.prototype.getHeight=function(){return this.getElement().offsetHeight},g.prototype.getWidth=function(){return this.getElement().offsetWidth},g.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},g}(),d=function(){function g(){this.popups=[]}return g.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},g.prototype.removePopup=function(h){var v=this.popups.indexOf(h);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},g.prototype.updatePopups=function(){var h,v,k,x;this.popups.sort(function(y,b){return b.priority-y.priority});var A=[];try{for(var S=p(this.popups),f=S.next();!f.done;f=S.next()){var L=f.value,$=!0;try{for(var C=(k=void 0,p(A)),T=C.next();!T.done;T=C.next()){var w=T.value;if(this.doPopupsOverlap(w,L)){$=!1;break}}}catch(y){k={error:y}}finally{try{T&&!T.done&&(x=C.return)&&x.call(C)}finally{if(k)throw k.error}}$?A.push(L):L.hide()}}catch(y){h={error:y}}finally{try{f&&!f.done&&(v=S.return)&&v.call(S)}finally{if(h)throw h.error}}},g.prototype.doPopupsOverlap=function(h,v){var k=h.getElement().getBoundingClientRect(),x=v.getElement().getBoundingClientRect();return k.left<x.right&&k.right>x.left&&k.top<x.bottom&&k.bottom>x.top},g}(),l=new d;t.popupManager=l,t.Tooltip=a;var c=function(g){s(h,g);function h(v){v===void 0&&(v=document.body);var k=g.call(this,v)||this;k.timeout=void 0,k.lastT=0,k.idleTime=350,k.lastEvent=void 0,k.onMouseOut=k.onMouseOut.bind(k),k.onMouseMove=k.onMouseMove.bind(k),k.waitForHover=k.waitForHover.bind(k),k.hide=k.hide.bind(k);var x=k.getElement();return x.style.whiteSpace="pre-wrap",x.style.pointerEvents="auto",x.addEventListener("mouseout",k.onMouseOut),x.tabIndex=-1,x.addEventListener("blur",function(){x.contains(document.activeElement)||this.hide()}.bind(k)),x.addEventListener("wheel",o),k}return h.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(v,k){this.lastEvent=v,this.lastT=Date.now();var x=k.$mouseHandler.isMousePressed;if(this.isOpen){var A=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(A.row,A.column)||x||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||x||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(v){var k=v.editor,x=v.getDocumentPosition(),A=k.session.getLine(x.row);if(x.column==A.length){var S=k.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),f=k.session.documentToScreenPosition(x.row,x.column);if(f.column!=S.column||f.row!=S.row)return!0}return!1},h.prototype.setDataProvider=function(v){this.$gatherData=v},h.prototype.showForRange=function(v,k,x,A){var S=10;if(!(A&&A!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var f=v.renderer;this.isOpen||(l.addPopup(this),this.$registerCloseEvents(),this.setTheme(f.theme)),this.isOpen=!0,this.addMarker(k,v.session),this.range=u.fromPoints(k.start,k.end);var L=f.textToScreenCoordinates(k.start.row,k.start.column),$=f.scroller.getBoundingClientRect();L.pageX<$.left&&(L.pageX=$.left);var C=this.getElement();C.innerHTML="",C.appendChild(x),C.style.maxHeight="",C.style.display="block";var T=C.clientHeight,w=C.clientWidth,y=window.innerHeight-L.pageY-f.lineHeight,b=!0;L.pageY-T<0&&L.pageY<y&&(b=!1),C.style.maxHeight=(b?L.pageY:y)-S+"px",C.style.top=b?"":L.pageY+f.lineHeight+"px",C.style.bottom=b?window.innerHeight-L.pageY+"px":"",C.style.left=Math.min(L.pageX,window.innerWidth-w-S)+"px"}},h.prototype.addMarker=function(v,k){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=k,this.marker=k&&k.addMarker(v,"ace_highlight-marker","text")},h.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,l.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},h}(a);t.HoverTooltip=c});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var l=function(c,g){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},l(c,g)};return function(c,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");l(c,g);function h(){this.constructor=c}c.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}}(),p=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,g=c&&l[c],h=0;if(g)return g.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&h>=l.length&&(l=void 0),{value:l&&l[h++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},m=e("../lib/dom"),i=e("../lib/event"),u=e("../tooltip").Tooltip,o=e("../config").nls,n=e("../lib/lang");function a(l){var c=l.editor,g=c.renderer.$gutterLayer,h=new d(c);l.editor.setDefaultHandler("guttermousedown",function(f){if(!(!c.isFocused()||f.getButton()!=0)){var L=g.getRegion(f);if(L!="foldWidgets"){var $=f.getDocumentPosition().row,C=c.session.selection;if(f.getShiftKey())C.selectTo($,0);else{if(f.domEvent.detail==2)return c.selectAll(),f.preventDefault();l.$clickSelection=c.selection.getLineRange($)}return l.setState("selectByLines"),l.captureMouse(f),f.preventDefault()}}});var v,k;function x(){var f=k.getDocumentPosition().row,L=c.session.getLength();if(f==L){var $=c.renderer.pixelToScreenCoordinates(0,k.y).row,C=k.$pos;if($>c.session.documentToScreenRow(C.row,C.column))return A()}if(h.showTooltip(f),!!h.isOpen)if(c.on("mousewheel",A),l.$tooltipFollowsMouse)S(k);else{var T=k.getGutterRow(),w=g.$lines.get(T);if(w){var y=w.element.querySelector(".ace_gutter_annotation"),b=y.getBoundingClientRect(),_=h.getElement().style;_.left=b.right+"px",_.top=b.bottom+"px"}else S(k)}}function A(){v&&(v=clearTimeout(v)),h.isOpen&&(h.hideTooltip(),c.off("mousewheel",A))}function S(f){h.setPosition(f.x,f.y)}l.editor.setDefaultHandler("guttermousemove",function(f){var L=f.domEvent.target||f.domEvent.srcElement;if(m.hasCssClass(L,"ace_fold-widget"))return A();h.isOpen&&l.$tooltipFollowsMouse&&S(f),k=f,!v&&(v=setTimeout(function(){v=null,k&&!l.isMousePressed?x():A()},50))}),i.addListener(c.renderer.$gutter,"mouseout",function(f){k=null,!(!h.isOpen||v)&&(v=setTimeout(function(){v=null,A()},50))},c),c.on("changeSession",A),c.on("input",A)}t.GutterHandler=a;var d=function(l){s(c,l);function c(g){var h=l.call(this,g.container)||this;return h.editor=g,h}return c.prototype.setPosition=function(g,h){var v=window.innerWidth||document.documentElement.clientWidth,k=window.innerHeight||document.documentElement.clientHeight,x=this.getWidth(),A=this.getHeight();g+=15,h+=15,g+x>v&&(g-=g+x-v),h+A>k&&(h-=20+A),u.prototype.setPosition.call(this,g,h)},Object.defineProperty(c,"annotationLabels",{get:function(){return{error:{singular:o("gutter-tooltip.aria-label.error.singular","error"),plural:o("gutter-tooltip.aria-label.error.plural","errors")},warning:{singular:o("gutter-tooltip.aria-label.warning.singular","warning"),plural:o("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:o("gutter-tooltip.aria-label.info.singular","information message"),plural:o("gutter-tooltip.aria-label.info.plural","information messages")}}},enumerable:!1,configurable:!0}),c.prototype.showTooltip=function(g){var h,v=this.editor.renderer.$gutterLayer,k=v.$annotations[g],x;k?x={displayText:Array.from(k.displayText),type:Array.from(k.type)}:x={displayText:[],type:[]};var A=v.session.getFoldLine(g);if(A&&v.$showFoldedAnnotations){for(var S={error:[],warning:[],info:[]},f,L=g+1;L<=A.end.row;L++)if(v.$annotations[L])for(var $=0;$<v.$annotations[L].text.length;$++){var C=v.$annotations[L].type[$];if(S[C].push(v.$annotations[L].text[$]),C==="error"){f="error_fold";continue}if(C==="warning"){f="warning_fold";continue}}if(f==="error_fold"||f==="warning_fold"){var T="".concat(c.annotationsToSummaryString(S)," in folded code.");x.displayText.push(T),x.type.push(f)}}if(x.displayText.length===0)return this.hide();for(var w={error:[],warning:[],info:[]},y=v.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",L=0;L<x.displayText.length;L++){var b=m.createElement("span"),_=m.createElement("span");(h=_.classList).add.apply(h,["ace_".concat(x.type[L]),y]),_.setAttribute("aria-label","".concat(c.annotationLabels[x.type[L].replace("_fold","")].singular)),_.setAttribute("role","img"),_.appendChild(m.createTextNode(" ")),b.appendChild(_),b.appendChild(m.createTextNode(x.displayText[L])),b.appendChild(m.createElement("br")),w[x.type[L].replace("_fold","")].push(b)}var E=this.getElement();m.removeChildren(E),w.error.forEach(function(R){return E.appendChild(R)}),w.warning.forEach(function(R){return E.appendChild(R)}),w.info.forEach(function(R){return E.appendChild(R)}),E.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},c.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},c.annotationsToSummaryString=function(g){var h,v,k=[],x=["error","warning","info"];try{for(var A=p(x),S=A.next();!S.done;S=A.next()){var f=S.value;if(g[f].length){var L=g[f].length===1?c.annotationLabels[f].singular:c.annotationLabels[f].plural;k.push("".concat(g[f].length," ").concat(L))}}}catch($){h={error:$}}finally{try{S&&!S.done&&(v=A.return)&&v.call(A)}finally{if(h)throw h.error}}return k.join(", ")},c}(u);t.GutterTooltip=d});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var s=e("../lib/event"),p=e("../lib/useragent"),m=function(){function i(u,o){this.speed,this.wheelX,this.wheelY,this.domEvent=u,this.editor=o,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return i.prototype.stopPropagation=function(){s.stopPropagation(this.domEvent),this.propagationStopped=!0},i.prototype.preventDefault=function(){s.preventDefault(this.domEvent),this.defaultPrevented=!0},i.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},i.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},i.prototype.getGutterRow=function(){var u=this.getDocumentPosition().row,o=this.editor.session.documentToScreenRow(u,0),n=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return o-n},i.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,o=u.getSelectionRange();if(o.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=o.contains(n.row,n.column)}return this.$inSelection},i.prototype.getButton=function(){return s.getButton(this.domEvent)},i.prototype.getShiftKey=function(){return this.domEvent.shiftKey},i.prototype.getAccelKey=function(){return p.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},i}();t.MouseEvent=m});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var s=e("../lib/dom"),p=e("../lib/event"),m=e("../lib/useragent"),i=200,u=200,o=5;function n(d){var l=d.editor,c=s.createElement("div");c.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",c.textContent="\xA0";var g=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];g.forEach(function(P){d[P]=this[P]},this),l.on("mousedown",this.onMouseDown.bind(d));var h=l.container,v,k,x,A,S,f,L=0,$,C,T,w,y;this.onDragStart=function(P){if(this.cancelDrag||!h.draggable){var F=this;return setTimeout(function(){F.startSelect(),F.captureMouse(P)},0),P.preventDefault()}S=l.getSelectionRange();var z=P.dataTransfer;z.effectAllowed=l.getReadOnly()?"copy":"copyMove",l.container.appendChild(c),z.setDragImage&&z.setDragImage(c,0,0),setTimeout(function(){l.container.removeChild(c)}),z.clearData(),z.setData("Text",l.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(P){if(h.draggable=!1,C=!1,this.setState(null),!l.getReadOnly()){var F=P.dataTransfer.dropEffect;!$&&F=="move"&&l.session.remove(l.getSelectionRange()),l.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(P){if(!(l.getReadOnly()||!O(P.dataTransfer)))return k=P.clientX,x=P.clientY,v||R(),L++,P.dataTransfer.dropEffect=$=N(P),p.preventDefault(P)},this.onDragOver=function(P){if(!(l.getReadOnly()||!O(P.dataTransfer)))return k=P.clientX,x=P.clientY,v||(R(),L++),I!==null&&(I=null),P.dataTransfer.dropEffect=$=N(P),p.preventDefault(P)},this.onDragLeave=function(P){if(L--,L<=0&&v)return M(),$=null,p.preventDefault(P)},this.onDrop=function(P){if(f){var F=P.dataTransfer;if(C)switch($){case"move":S.contains(f.row,f.column)?S={start:f,end:f}:S=l.moveText(S,f);break;case"copy":S=l.moveText(S,f,!0);break}else{var z=F.getData("Text");S={start:f,end:l.session.insert(f,z)},l.focus(),$=null}return M(),p.preventDefault(P)}},p.addListener(h,"dragstart",this.onDragStart.bind(d),l),p.addListener(h,"dragend",this.onDragEnd.bind(d),l),p.addListener(h,"dragenter",this.onDragEnter.bind(d),l),p.addListener(h,"dragover",this.onDragOver.bind(d),l),p.addListener(h,"dragleave",this.onDragLeave.bind(d),l),p.addListener(h,"drop",this.onDrop.bind(d),l);function b(P,F){var z=Date.now(),W=!F||P.row!=F.row,j=!F||P.column!=F.column;if(!w||W||j)l.moveCursorToPosition(P),w=z,y={x:k,y:x};else{var Z=a(y.x,y.y,k,x);Z>o?w=null:z-w>=u&&(l.renderer.scrollCursorIntoView(),w=null)}}function _(P,F){var z=Date.now(),W=l.renderer.layerConfig.lineHeight,j=l.renderer.layerConfig.characterWidth,Z=l.renderer.scroller.getBoundingClientRect(),Y={x:{left:k-Z.left,right:Z.right-k},y:{top:x-Z.top,bottom:Z.bottom-x}},q=Math.min(Y.x.left,Y.x.right),nt=Math.min(Y.y.top,Y.y.bottom),ot={row:P.row,column:P.column};q/j<=2&&(ot.column+=Y.x.left<Y.x.right?-3:2),nt/W<=1&&(ot.row+=Y.y.top<Y.y.bottom?-1:1);var wt=P.row!=ot.row,Et=P.column!=ot.column,vt=!F||P.row!=F.row;wt||Et&&!vt?T?z-T>=i&&l.renderer.scrollCursorIntoView(ot):T=z:T=null}function E(){var P=f;f=l.renderer.screenToTextCoordinates(k,x),b(f,P),_(f,P)}function R(){S=l.selection.toOrientedRange(),v=l.session.addMarker(S,"ace_selection",l.getSelectionStyle()),l.clearSelection(),l.isFocused()&&l.renderer.$cursorLayer.setBlinking(!1),clearInterval(A),E(),A=setInterval(E,20),L=0,p.addListener(document,"mousemove",D)}function M(){clearInterval(A),l.session.removeMarker(v),v=null,l.selection.fromOrientedRange(S),l.isFocused()&&!C&&l.$resetCursorStyle(),S=null,f=null,L=0,T=null,w=null,p.removeListener(document,"mousemove",D)}var I=null;function D(){I==null&&(I=setTimeout(function(){I!=null&&v&&M()},20))}function O(P){var F=P.types;return!F||Array.prototype.some.call(F,function(z){return z=="text/plain"||z=="Text"})}function N(P){var F=["copy","copymove","all","uninitialized"],z=["move","copymove","linkmove","all","uninitialized"],W=m.isMac?P.altKey:P.ctrlKey,j="uninitialized";try{j=P.dataTransfer.effectAllowed.toLowerCase()}catch{}var Z="none";return W&&F.indexOf(j)>=0?Z="copy":z.indexOf(j)>=0?Z="move":F.indexOf(j)>=0&&(Z="copy"),Z}}(function(){this.dragWait=function(){var d=Date.now()-this.mousedownEvent.time;d>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var d=this.editor.container;d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(d){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var d=this.editor,l=d.container;l.draggable=!0,d.renderer.$cursorLayer.setBlinking(!1),d.setStyle("ace_dragging");var c=m.isWin?"default":"move";d.renderer.setCursorStyle(c),this.setState("dragReady")},this.onMouseDrag=function(d){var l=this.editor.container;if(m.isIE&&this.state=="dragReady"){var c=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&l.dragDrop()}if(this.state==="dragWait"){var c=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(d){if(this.$dragEnabled){this.mousedownEvent=d;var l=this.editor,c=d.inSelection(),g=d.getButton(),h=d.domEvent.detail||1;if(h===1&&g===0&&c){if(d.editor.inMultiSelectMode&&(d.getAccelKey()||d.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=d.domEvent.target||d.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),l.getDragDelay()){if(m.isWebKit){this.cancelDrag=!0;var k=l.container;k.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(d,this.onMouseDrag.bind(this)),d.defaultPrevented=!0}}}}).call(n.prototype);function a(d,l,c,g){return Math.sqrt(Math.pow(c-d,2)+Math.pow(g-l,2))}t.DragdropHandler=n});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,r){"use strict";var s=e("./mouse_event").MouseEvent,p=e("../lib/event"),m=e("../lib/dom");t.addTouchListeners=function(i,u){var o="scroll",n,a,d,l,c,g,h=0,v,k=0,x=0,A=0,S,f;function L(){var b=window.navigator&&window.navigator.clipboard,_=!1,E=function(){var I=u.getCopyText(),D=u.session.getUndoManager().hasUndo();f.replaceChild(m.buildDom(_?["span",!I&&R("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],I&&R("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],I&&R("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],b&&R("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],D&&R("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],R("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],R("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),f.firstChild)},R=function(I){return u.commands.canExecute(I,u)},M=function(I){var D=I.target.getAttribute("action");if(D=="more"||!_)return _=!_,E();D=="paste"?b.readText().then(function(O){u.execCommand(D,O)}):D&&((D=="cut"||D=="copy")&&(b?b.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(D)),f.firstChild.style.display="none",_=!1,D!="openCommandPalette"&&u.focus()};f=m.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(I){o="menu",I.stopPropagation(),I.preventDefault(),u.textInput.focus()},ontouchend:function(I){I.stopPropagation(),I.preventDefault(),M(I)},onclick:M},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function $(){if(!u.getOption("enableMobileMenu")){f&&C();return}f||L();var b=u.selection.cursor,_=u.renderer.textToScreenCoordinates(b.row,b.column),E=u.renderer.textToScreenCoordinates(0,0).pageX,R=u.renderer.scrollLeft,M=u.container.getBoundingClientRect();f.style.top=_.pageY-M.top-3+"px",_.pageX-M.left<M.width-70?(f.style.left="",f.style.right="10px"):(f.style.right="",f.style.left=E+R-M.left+"px"),f.style.display="",f.firstChild.style.display="none",u.on("input",C)}function C(b){f&&(f.style.display="none"),u.off("input",C)}function T(){c=null,clearTimeout(c);var b=u.selection.getRange(),_=b.contains(v.row,v.column);(b.isEmpty()||!_)&&(u.selection.moveToPosition(v),u.selection.selectWord()),o="wait",$()}function w(){c=null,clearTimeout(c),u.selection.moveToPosition(v);var b=k>=2?u.selection.getLineRange(v.row):u.session.getBracketRange(v);b&&!b.isEmpty()?u.selection.setRange(b):u.selection.selectWord(),o="wait"}p.addListener(i,"contextmenu",function(b){if(S){var _=u.textInput.getElement();_.focus()}},u),p.addListener(i,"touchstart",function(b){var _=b.touches;if(c||_.length>1){clearTimeout(c),c=null,d=-1,o="zoom";return}S=u.$mouseHandler.isMousePressed=!0;var E=u.renderer.layerConfig.lineHeight,R=u.renderer.layerConfig.lineHeight,M=b.timeStamp;l=M;var I=_[0],D=I.clientX,O=I.clientY;Math.abs(n-D)+Math.abs(a-O)>E&&(d=-1),n=b.clientX=D,a=b.clientY=O,x=A=0;var N=new s(b,u);if(v=N.getDocumentPosition(),M-d<500&&_.length==1&&!h)k++,b.preventDefault(),b.button=0,w();else{k=0;var P=u.selection.cursor,F=u.selection.isEmpty()?P:u.selection.anchor,z=u.renderer.$cursorLayer.getPixelPosition(P,!0),W=u.renderer.$cursorLayer.getPixelPosition(F,!0),j=u.renderer.scroller.getBoundingClientRect(),Z=u.renderer.layerConfig.offset,Y=u.renderer.scrollLeft,q=function(wt,Et){return wt=wt/R,Et=Et/E-.75,wt*wt+Et*Et};if(b.clientX<j.left){o="zoom";return}var nt=q(b.clientX-j.left-z.left+Y,b.clientY-j.top-z.top+Z),ot=q(b.clientX-j.left-W.left+Y,b.clientY-j.top-W.top+Z);nt<3.5&&ot<3.5&&(o=nt>ot?"cursor":"anchor"),ot<3.5?o="anchor":nt<3.5?o="cursor":o="scroll",c=setTimeout(T,450)}d=M},u),p.addListener(i,"touchend",function(b){S=u.$mouseHandler.isMousePressed=!1,g&&clearInterval(g),o=="zoom"?(o="",h=0):c?(u.selection.moveToPosition(v),h=0,$()):o=="scroll"?(y(),C()):$(),clearTimeout(c),c=null},u),p.addListener(i,"touchmove",function(b){c&&(clearTimeout(c),c=null);var _=b.touches;if(!(_.length>1||o=="zoom")){var E=_[0],R=n-E.clientX,M=a-E.clientY;if(o=="wait")if(R*R+M*M>4)o="cursor";else return b.preventDefault();n=E.clientX,a=E.clientY,b.clientX=E.clientX,b.clientY=E.clientY;var I=b.timeStamp,D=I-l;if(l=I,o=="scroll"){var O=new s(b,u);O.speed=1,O.wheelX=R,O.wheelY=M,10*Math.abs(R)<Math.abs(M)&&(R=0),10*Math.abs(M)<Math.abs(R)&&(M=0),D!=0&&(x=R/D,A=M/D),u._emit("mousewheel",O),O.propagationStopped||(x=A=0)}else{var N=new s(b,u),P=N.getDocumentPosition();o=="cursor"?u.selection.moveCursorToPosition(P):o=="anchor"&&u.selection.setSelectionAnchor(P.row,P.column),u.renderer.scrollCursorIntoView(P),b.preventDefault()}}},u);function y(){h+=60,g=setInterval(function(){h--<=0&&(clearInterval(g),g=null),Math.abs(x)<.01&&(x=0),Math.abs(A)<.01&&(A=0),h<20&&(x=.9*x),h<20&&(A=.9*A);var b=u.session.getScrollTop();u.renderer.scrollBy(10*x,10*A),b==u.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,r){"use strict";var s=e("../lib/event"),p=e("../lib/useragent"),m=e("./default_handlers").DefaultHandlers,i=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,o=e("./dragdrop_handler").DragdropHandler,n=e("./touch_handler").addTouchListeners,a=e("../config"),d=function(){function l(c){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var g=this;this.editor=c,new m(this),new i(this),new o(this);var h=function(x){var A=!document.hasFocus||!document.hasFocus()||!c.isFocused()&&document.activeElement==(c.textInput&&c.textInput.getElement());A&&window.focus(),c.focus(),setTimeout(function(){c.isFocused()||c.focus()})},v=c.renderer.getMouseEventTarget();s.addListener(v,"click",this.onMouseEvent.bind(this,"click"),c),s.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),c),s.addMultiMouseDownListener([v,c.renderer.scrollBarV&&c.renderer.scrollBarV.inner,c.renderer.scrollBarH&&c.renderer.scrollBarH.inner,c.textInput&&c.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",c),s.addMouseWheelListener(c.container,this.onMouseWheel.bind(this,"mousewheel"),c),n(c.container,c);var k=c.renderer.$gutter;s.addListener(k,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),c),s.addListener(k,"click",this.onMouseEvent.bind(this,"gutterclick"),c),s.addListener(k,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),c),s.addListener(k,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),c),s.addListener(v,"mousedown",h,c),s.addListener(k,"mousedown",h,c),p.isIE&&c.renderer.scrollBarV&&(s.addListener(c.renderer.scrollBarV.element,"mousedown",h,c),s.addListener(c.renderer.scrollBarH.element,"mousedown",h,c)),c.on("mousemove",function(x){if(!(g.state||g.$dragDelay||!g.$dragEnabled)){var A=c.renderer.screenToTextCoordinates(x.x,x.y),S=c.session.selection.getRange(),f=c.renderer;!S.isEmpty()&&S.insideStart(A.row,A.column)?f.setCursorStyle("default"):f.setCursorStyle("")}},c)}return l.prototype.onMouseEvent=function(c,g){this.editor.session&&this.editor._emit(c,new u(g,this.editor))},l.prototype.onMouseMove=function(c,g){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(c,new u(g,this.editor))},l.prototype.onMouseWheel=function(c,g){var h=new u(g,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=g.wheelX,h.wheelY=g.wheelY,this.editor._emit(c,h)},l.prototype.setState=function(c){this.state=c},l.prototype.captureMouse=function(c,g){this.x=c.x,this.y=c.y,this.isMousePressed=!0;var h=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var k=this,x=function($){if($){if(p.isWebKit&&!$.which&&k.releaseMouse)return k.releaseMouse();k.x=$.clientX,k.y=$.clientY,g&&g($),k.mouseEvent=new u($,k.editor),k.$mouseMoved=!0}},A=function($){h.off("beforeEndOperation",f),clearInterval(L),h.session&&S(),k[k.state+"End"]&&k[k.state+"End"]($),k.state="",k.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),k.$onCaptureMouseMove=k.releaseMouse=null,$&&k.onMouseEvent("mouseup",$),h.endOperation()},S=function(){k[k.state]&&k[k.state](),k.$mouseMoved=!1};if(p.isOldIE&&c.domEvent.type=="dblclick")return setTimeout(function(){A(c)});var f=function($){k.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(k[k.state+"End"]&&k[k.state+"End"](),k.state="",k.releaseMouse())};h.on("beforeEndOperation",f),h.startOperation({command:{name:"mouse"}}),k.$onCaptureMouseMove=x,k.releaseMouse=s.capture(this.editor.container,x,A);var L=setInterval(S,20)},l.prototype.cancelContextMenu=function(){var c=function(g){g&&g.domEvent&&g.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",c),g&&g.domEvent&&s.stopEvent(g.domEvent))}.bind(this);setTimeout(c,10),this.editor.on("nativecontextmenu",c)},l.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},l}();d.prototype.releaseMouse=null,a.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:p.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=d});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var s=e("../lib/dom"),p=function(){function m(i){i.on("click",function(u){var o=u.getDocumentPosition(),n=i.session,a=n.getFoldAt(o.row,o.column,1);a&&(u.getAccelKey()?n.removeFold(a):n.expandFold(a),u.stop());var d=u.domEvent&&u.domEvent.target;d&&s.hasCssClass(d,"ace_inline_button")&&s.hasCssClass(d,"ace_toggle_wrap")&&(n.setOption("wrap",!n.getUseWrapMode()),i.renderer.scrollCursorIntoView())}),i.on("gutterclick",function(u){var o=i.renderer.$gutterLayer.getRegion(u);if(o=="foldWidgets"){var n=u.getDocumentPosition().row,a=i.session;a.foldWidgets&&a.foldWidgets[n]&&i.session.onFoldWidgetClick(n,u),i.isFocused()||i.focus(),u.stop()}}),i.on("gutterdblclick",function(u){var o=i.renderer.$gutterLayer.getRegion(u);if(o=="foldWidgets"){var n=u.getDocumentPosition().row,a=i.session,d=a.getParentFoldRangeData(n,!0),l=d.range||d.firstRange;if(l){n=l.start.row;var c=a.getFoldAt(n,a.getLine(n).length,1);c?a.removeFold(c):(a.addFold("...",l),i.renderer.scrollCursorIntoView({row:l.start.row,column:0}))}u.stop()}})}return m}();t.FoldHandler=p});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,r){"use strict";var s=e("../lib/keys"),p=e("../lib/event"),m=function(){function i(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)}return i.prototype.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},i.prototype.setKeyboardHandler=function(u){var o=this.$handlers;if(o[o.length-1]!=u){for(;o[o.length-1]&&o[o.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(o[o.length-1]);this.addKeyboardHandler(u,1)}},i.prototype.addKeyboardHandler=function(u,o){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var n=this.$handlers.indexOf(u);n!=-1&&this.$handlers.splice(n,1),o==null?this.$handlers.push(u):this.$handlers.splice(o,0,u),n==-1&&u.attach&&u.attach(this.$editor)}},i.prototype.removeKeyboardHandler=function(u){var o=this.$handlers.indexOf(u);return o==-1?!1:(this.$handlers.splice(o,1),u.detach&&u.detach(this.$editor),!0)},i.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},i.prototype.getStatusText=function(){var u=this.$data,o=u.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(o,u)||""}).filter(Boolean).join(" ")},i.prototype.$callKeyboardHandlers=function(u,o,n,a){for(var d,l=!1,c=this.$editor.commands,g=this.$handlers.length;g--&&(d=this.$handlers[g].handleKeyboard(this.$data,u,o,n,a),!(!(!d||!d.command)&&(d.command=="null"?l=!0:l=c.exec(d.command,this.$editor,d.args,a),l&&a&&u!=-1&&d.passEvent!=!0&&d.command.passEvent!=!0&&p.stopEvent(a),l))););return!l&&u==-1&&(d={command:"insertstring"},l=c.exec("insertstring",this.$editor,o)),l&&this.$editor._signal&&this.$editor._signal("keyboardActivity",d),l},i.prototype.onCommandKey=function(u,o,n){var a=s.keyCodeToString(n);return this.$callKeyboardHandlers(o,a,n,u)},i.prototype.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)},i}();t.KeyBinding=m});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,r){"use strict";var s=["\u0621","\u0641"],p=["\u063A","\u064A"],m=0,i=0,u=!1,o=!1,n=!1,a=!1,d=!1,l=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,v=1,k=0,x=1,A=2,S=3,f=4,L=5,$=6,C=7,T=8,w=9,y=10,b=11,_=12,E=13,R=14,M=15,I=16,D=17,O=18,N=[O,O,O,O,O,O,O,O,O,$,L,$,T,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,L,L,L,$,T,f,f,b,b,b,f,f,f,f,f,y,w,y,w,w,A,A,A,A,A,A,A,A,A,A,w,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,O,O,O,O,O,O,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,w,f,b,b,b,b,f,f,f,f,k,f,f,O,f,f,b,b,A,A,f,k,f,f,f,A,k,f,f,f,f,f],P=[T,T,T,T,T,T,T,T,T,T,T,O,O,O,k,x,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,T,L,E,R,M,I,D,w,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,w,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,T];function F(Y,q,nt,ot){var wt=m?g:c,Et=null,vt=null,U=null,X=0,at=null,tt=null,ct=-1,K=null,V=null,st=[];if(!ot)for(K=0,ot=[];K<nt;K++)ot[K]=j(Y[K]);for(i=m,u=!1,o=!1,n=!1,a=!1,V=0;V<nt;V++){if(Et=X,st[V]=vt=W(Y,ot,st,V),X=wt[Et][vt],at=X&240,X&=15,q[V]=U=wt[X][5],at>0)if(at==16){for(K=ct;K<V;K++)q[K]=1;ct=-1}else ct=-1;if(tt=wt[X][6],tt)ct==-1&&(ct=V);else if(ct>-1){for(K=ct;K<V;K++)q[K]=U;ct=-1}ot[V]==L&&(q[V]=0),i|=U}if(a){for(K=0;K<nt;K++)if(ot[K]==$){q[K]=m;for(var it=K-1;it>=0&&ot[it]==T;it--)q[it]=m}}}function z(Y,q,nt){if(!(i<Y)){if(Y==1&&m==v&&!n){nt.reverse();return}for(var ot=nt.length,wt=0,Et,vt,U,X;wt<ot;){if(q[wt]>=Y){for(Et=wt+1;Et<ot&&q[Et]>=Y;)Et++;for(vt=wt,U=Et-1;vt<U;vt++,U--)X=nt[vt],nt[vt]=nt[U],nt[U]=X;wt=Et}wt++}}}function W(Y,q,nt,ot){var wt=q[ot],Et,vt,U,X;switch(wt){case k:case x:u=!1;case f:case S:return wt;case A:return u?S:A;case C:return u=!0,o=!0,x;case T:return f;case w:return ot<1||ot+1>=q.length||(Et=nt[ot-1])!=A&&Et!=S||(vt=q[ot+1])!=A&&vt!=S?f:(u&&(vt=S),vt==Et?vt:f);case y:return Et=ot>0?nt[ot-1]:L,Et==A&&ot+1<q.length&&q[ot+1]==A?A:f;case b:if(ot>0&&nt[ot-1]==A)return A;if(u)return f;for(X=ot+1,U=q.length;X<U&&q[X]==b;)X++;return X<U&&q[X]==A?A:f;case _:for(U=q.length,X=ot+1;X<U&&q[X]==_;)X++;if(X<U){var at=Y[ot],tt=at>=1425&&at<=2303||at==64286;if(Et=q[X],tt&&(Et==x||Et==C))return x}return ot<1||(Et=q[ot-1])==L?f:nt[ot-1];case L:return u=!1,n=!0,m;case $:return a=!0,f;case E:case R:case I:case D:case M:u=!1;case O:return f}}function j(Y){var q=Y.charCodeAt(0),nt=q>>8;return nt==0?q>191?k:N[q]:nt==5?/[\u0591-\u05f4]/.test(Y)?x:k:nt==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(Y)?_:/[\u0660-\u0669\u066b-\u066c]/.test(Y)?S:q==1642?b:/[\u06f0-\u06f9]/.test(Y)?A:C:nt==32&&q<=8287?P[q&255]:nt==254&&q>=65136?C:f}function Z(Y){return Y>="\u064B"&&Y<="\u0655"}t.L=k,t.R=x,t.EN=A,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(Y,q,nt){if(Y.length<2)return{};var ot=Y.split(""),wt=new Array(ot.length),Et=new Array(ot.length),vt=[];m=nt?v:h,F(ot,vt,ot.length,q);for(var U=0;U<wt.length;wt[U]=U,U++);z(2,vt,wt),z(1,vt,wt);for(var U=0;U<wt.length-1;U++)q[U]===S?vt[U]=t.AN:vt[U]===x&&(q[U]>C&&q[U]<E||q[U]===f||q[U]===O)?vt[U]=t.ON_R:U>0&&ot[U-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(ot[U])&&(vt[U-1]=vt[U]=t.R_H,U++);ot[ot.length-1]===t.DOT&&(vt[ot.length-1]=t.B),ot[0]==="\u202B"&&(vt[0]=t.RLE);for(var U=0;U<wt.length;U++)Et[U]=vt[wt[U]];return{logicalFromVisual:wt,bidiLevels:Et}},t.hasBidiCharacters=function(Y,q){for(var nt=!1,ot=0;ot<Y.length;ot++)q[ot]=j(Y.charAt(ot)),!nt&&(q[ot]==x||q[ot]==C||q[ot]==S)&&(nt=!0);return nt},t.getVisualFromLogicalIdx=function(Y,q){for(var nt=0;nt<q.logicalFromVisual.length;nt++)if(q.logicalFromVisual[nt]==Y)return nt;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,r){"use strict";var s=e("./lib/bidiutil"),p=e("./lib/lang"),m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,i=function(){function u(o){this.session=o,this.bidiMap={},this.currentRow=null,this.bidiUtil=s,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=m.test(o.getValue())}return u.prototype.isBidiRow=function(o,n,a){return this.seenBidi?(o!==this.currentRow&&(this.currentRow=o,this.updateRowLine(n,a),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},u.prototype.onChange=function(o){this.seenBidi?this.currentRow=null:o.action=="insert"&&m.test(o.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},u.prototype.getDocumentRow=function(){var o=0,n=this.session.$screenRowCache;if(n.length){var a=this.session.$getRowCacheIndex(n,this.currentRow);a>=0&&(o=this.session.$docRowCache[a])}return o},u.prototype.getSplitIndex=function(){var o=0,n=this.session.$screenRowCache;if(n.length)for(var a,d=this.session.$getRowCacheIndex(n,this.currentRow);this.currentRow-o>0&&(a=this.session.$getRowCacheIndex(n,this.currentRow-o-1),a===d);)d=a,o++;else o=this.currentRow;return o},u.prototype.updateRowLine=function(o,n){o===void 0&&(o=this.getDocumentRow());var a=o===this.session.getLength()-1,d=a?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(o),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var l=this.session.$wrapData[o];l&&(n===void 0&&(n=this.getSplitIndex()),n>0&&l.length?(this.wrapIndent=l.indent,this.wrapOffset=this.wrapIndent*this.charWidths[s.L],this.line=n<l.length?this.line.substring(l[n-1],l[n]):this.line.substring(l[l.length-1])):this.line=this.line.substring(0,l[n]),n==l.length&&(this.line+=this.showInvisibles?d:s.DOT))}else this.line+=this.showInvisibles?d:s.DOT;var c=this.session,g=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,k){return v==="	"||c.isFullWidth(v.charCodeAt(0))?(h=v==="	"?c.getScreenTabSize(k+g):2,g+=h-1,p.stringRepeat(s.DOT,h)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==s.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},u.prototype.updateBidiMap=function(){var o=[];s.hasBidiCharacters(this.line,o)||this.isRtlDir?this.bidiMap=s.doBidiReorder(this.line,o,this.isRtlDir):this.bidiMap={}},u.prototype.markAsDirty=function(){this.currentRow=null},u.prototype.updateCharacterWidths=function(o){if(this.characterWidth!==o.$characterSize.width){this.fontMetrics=o;var n=this.characterWidth=o.$characterSize.width,a=o.$measureCharWidth("\u05D4");this.charWidths[s.L]=this.charWidths[s.EN]=this.charWidths[s.ON_R]=n,this.charWidths[s.R]=this.charWidths[s.AN]=a,this.charWidths[s.R_H]=a*.45,this.charWidths[s.B]=this.charWidths[s.RLE]=0,this.currentRow=null}},u.prototype.setShowInvisibles=function(o){this.showInvisibles=o,this.currentRow=null},u.prototype.setEolChar=function(o){this.EOL=o},u.prototype.setContentWidth=function(o){this.contentWidth=o},u.prototype.isRtlLine=function(o){return this.$isRtl?!0:o!=null?this.session.getLine(o).charAt(0)==this.RLE:this.isRtlDir},u.prototype.setRtlDirection=function(o,n){for(var a=o.getCursorPosition(),d=o.selection.getSelectionAnchor().row;d<=a.row;d++)!n&&o.session.getLine(d).charAt(0)===o.session.$bidiHandler.RLE?o.session.doc.removeInLine(d,0,1):n&&o.session.getLine(d).charAt(0)!==o.session.$bidiHandler.RLE&&o.session.doc.insert({column:0,row:d},o.session.$bidiHandler.RLE)},u.prototype.getPosLeft=function(o){o-=this.wrapIndent;var n=this.line.charAt(0)===this.RLE?1:0,a=o>n?this.session.getOverwrite()?o:o-1:n,d=s.getVisualFromLogicalIdx(a,this.bidiMap),l=this.bidiMap.bidiLevels,c=0;!this.session.getOverwrite()&&o<=n&&l[d]%2!==0&&d++;for(var g=0;g<d;g++)c+=this.charWidths[l[g]];return!this.session.getOverwrite()&&o>n&&l[d]%2===0&&(c+=this.charWidths[l[d]]),this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(c+=this.rtlLineOffset),c},u.prototype.getSelections=function(o,n){var a=this.bidiMap,d=a.bidiLevels,l,c=[],g=0,h=Math.min(o,n)-this.wrapIndent,v=Math.max(o,n)-this.wrapIndent,k=!1,x=!1,A=0;this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,f=0;f<d.length;f++)S=a.logicalFromVisual[f],l=d[f],k=S>=h&&S<v,k&&!x?A=g:!k&&x&&c.push({left:A,width:g-A}),g+=this.charWidths[l],x=k;if(k&&f===d.length&&c.push({left:A,width:g-A}),this.isRtlDir)for(var L=0;L<c.length;L++)c[L].left+=this.rtlLineOffset;return c},u.prototype.offsetToCol=function(a){this.isRtlDir&&(a-=this.rtlLineOffset);var n=0,a=Math.max(a,0),d=0,l=0,c=this.bidiMap.bidiLevels,g=this.charWidths[c[l]];for(this.wrapIndent&&(a-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);a>d+g/2;){if(d+=g,l===c.length-1){g=0;break}g=this.charWidths[c[++l]]}return l>0&&c[l-1]%2!==0&&c[l]%2===0?(a<d&&l--,n=this.bidiMap.logicalFromVisual[l]):l>0&&c[l-1]%2===0&&c[l]%2!==0?n=1+(a>d?this.bidiMap.logicalFromVisual[l]:this.bidiMap.logicalFromVisual[l-1]):this.isRtlDir&&l===c.length-1&&g===0&&c[l-1]%2===0||!this.isRtlDir&&l===0&&c[l]%2!==0?n=1+this.bidiMap.logicalFromVisual[l]:(l>0&&c[l-1]%2!==0&&g!==0&&l--,n=this.bidiMap.logicalFromVisual[l]),n===0&&this.isRtlDir&&n++,n+this.wrapIndent},u}();t.BidiHandler=i});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,r){"use strict";var s=e("./lib/oop"),p=e("./lib/lang"),m=e("./lib/event_emitter").EventEmitter,i=e("./range").Range,u=function(){function o(n){this.session=n,this.doc=n.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var a=this;this.cursor.on("change",function(d){a.$cursorChanged=!0,a.$silent||a._emit("changeCursor"),!a.$isEmpty&&!a.$silent&&a._emit("changeSelection"),!a.$keepDesiredColumnOnChange&&d.old.column!=d.value.column&&(a.$desiredColumn=null)}),this.anchor.on("change",function(){a.$anchorChanged=!0,!a.$isEmpty&&!a.$silent&&a._emit("changeSelection")})}return o.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},o.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},o.prototype.getCursor=function(){return this.lead.getPosition()},o.prototype.setAnchor=function(n,a){this.$isEmpty=!1,this.anchor.setPosition(n,a)},o.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},o.prototype.getSelectionLead=function(){return this.lead.getPosition()},o.prototype.isBackwards=function(){var n=this.anchor,a=this.lead;return n.row>a.row||n.row==a.row&&n.column>a.column},o.prototype.getRange=function(){var n=this.anchor,a=this.lead;return this.$isEmpty?i.fromPoints(a,a):this.isBackwards()?i.fromPoints(a,n):i.fromPoints(n,a)},o.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},o.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},o.prototype.setRange=function(n,a){var d=a?n.end:n.start,l=a?n.start:n.end;this.$setSelection(d.row,d.column,l.row,l.column)},o.prototype.$setSelection=function(n,a,d,l){if(!this.$silent){var c=this.$isEmpty,g=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(n,a),this.cursor.setPosition(d,l),this.$isEmpty=!i.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||c!=this.$isEmpty||g)&&this._emit("changeSelection")}},o.prototype.$moveSelection=function(n){var a=this.lead;this.$isEmpty&&this.setSelectionAnchor(a.row,a.column),n.call(this)},o.prototype.selectTo=function(n,a){this.$moveSelection(function(){this.moveCursorTo(n,a)})},o.prototype.selectToPosition=function(n){this.$moveSelection(function(){this.moveCursorToPosition(n)})},o.prototype.moveTo=function(n,a){this.clearSelection(),this.moveCursorTo(n,a)},o.prototype.moveToPosition=function(n){this.clearSelection(),this.moveCursorToPosition(n)},o.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},o.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},o.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},o.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},o.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},o.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},o.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},o.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},o.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},o.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},o.prototype.getWordRange=function(n,a){if(typeof a>"u"){var d=n||this.lead;n=d.row,a=d.column}return this.session.getWordRange(n,a)},o.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},o.prototype.selectAWord=function(){var n=this.getCursor(),a=this.session.getAWordRange(n.row,n.column);this.setSelectionRange(a)},o.prototype.getLineRange=function(n,a){var d=typeof n=="number"?n:this.lead.row,l,c=this.session.getFoldLine(d);return c?(d=c.start.row,l=c.end.row):l=d,a===!0?new i(d,0,l,this.session.getLine(l).length):new i(d,0,l+1,0)},o.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},o.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},o.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},o.prototype.wouldMoveIntoSoftTab=function(n,a,d){var l=n.column,c=n.column+a;return d<0&&(l=n.column-a,c=n.column),this.session.isTabStop(n)&&this.doc.getLine(n.row).slice(l,c).split(" ").length-1==a},o.prototype.moveCursorLeft=function(){var n=this.lead.getPosition(),a;if(a=this.session.getFoldAt(n.row,n.column,-1))this.moveCursorTo(a.start.row,a.start.column);else if(n.column===0)n.row>0&&this.moveCursorTo(n.row-1,this.doc.getLine(n.row-1).length);else{var d=this.session.getTabSize();this.wouldMoveIntoSoftTab(n,d,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-d):this.moveCursorBy(0,-1)}},o.prototype.moveCursorRight=function(){var n=this.lead.getPosition(),a;if(a=this.session.getFoldAt(n.row,n.column,1))this.moveCursorTo(a.end.row,a.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var d=this.session.getTabSize(),n=this.lead;this.wouldMoveIntoSoftTab(n,d,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,d):this.moveCursorBy(0,1)}},o.prototype.moveCursorLineStart=function(){var n=this.lead.row,a=this.lead.column,d=this.session.documentToScreenRow(n,a),l=this.session.screenToDocumentPosition(d,0),c=this.session.getDisplayLine(n,null,l.row,l.column),g=c.match(/^\s*/);g[0].length!=a&&!this.session.$useEmacsStyleLineStart&&(l.column+=g[0].length),this.moveCursorToPosition(l)},o.prototype.moveCursorLineEnd=function(){var n=this.lead,a=this.session.getDocumentLastRowColumnPosition(n.row,n.column);if(this.lead.column==a.column){var d=this.session.getLine(a.row);if(a.column==d.length){var l=d.search(/\s+$/);l>0&&(a.column=l)}}this.moveCursorTo(a.row,a.column)},o.prototype.moveCursorFileEnd=function(){var n=this.doc.getLength()-1,a=this.doc.getLine(n).length;this.moveCursorTo(n,a)},o.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},o.prototype.moveCursorLongWordRight=function(){var n=this.lead.row,a=this.lead.column,d=this.doc.getLine(n),l=d.substring(a);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var c=this.session.getFoldAt(n,a,1);if(c){this.moveCursorTo(c.end.row,c.end.column);return}if(this.session.nonTokenRe.exec(l)&&(a+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,l=d.substring(a)),a>=d.length){this.moveCursorTo(n,d.length),this.moveCursorRight(),n<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(l)&&(a+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(n,a)},o.prototype.moveCursorLongWordLeft=function(){var n=this.lead.row,a=this.lead.column,d;if(d=this.session.getFoldAt(n,a,-1)){this.moveCursorTo(d.start.row,d.start.column);return}var l=this.session.getFoldStringAt(n,a,-1);l==null&&(l=this.doc.getLine(n).substring(0,a));var c=p.stringReverse(l);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(c)&&(a-=this.session.nonTokenRe.lastIndex,c=c.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),a<=0){this.moveCursorTo(n,0),this.moveCursorLeft(),n>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(c)&&(a-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(n,a)},o.prototype.$shortWordEndIndex=function(n){var a=0,d,l=/\s/,c=this.session.tokenRe;if(c.lastIndex=0,this.session.tokenRe.exec(n))a=this.session.tokenRe.lastIndex;else{for(;(d=n[a])&&l.test(d);)a++;if(a<1){for(c.lastIndex=0;(d=n[a])&&!c.test(d);)if(c.lastIndex=0,a++,l.test(d))if(a>2){a--;break}else{for(;(d=n[a])&&l.test(d);)a++;if(a>2)break}}}return c.lastIndex=0,a},o.prototype.moveCursorShortWordRight=function(){var n=this.lead.row,a=this.lead.column,d=this.doc.getLine(n),l=d.substring(a),c=this.session.getFoldAt(n,a,1);if(c)return this.moveCursorTo(c.end.row,c.end.column);if(a==d.length){var g=this.doc.getLength();do n++,l=this.doc.getLine(n);while(n<g&&/^\s*$/.test(l));/^\s+/.test(l)||(l=""),a=0}var h=this.$shortWordEndIndex(l);this.moveCursorTo(n,a+h)},o.prototype.moveCursorShortWordLeft=function(){var n=this.lead.row,a=this.lead.column,d;if(d=this.session.getFoldAt(n,a,-1))return this.moveCursorTo(d.start.row,d.start.column);var l=this.session.getLine(n).substring(0,a);if(a===0){do n--,l=this.doc.getLine(n);while(n>0&&/^\s*$/.test(l));a=l.length,/\s+$/.test(l)||(l="")}var c=p.stringReverse(l),g=this.$shortWordEndIndex(c);return this.moveCursorTo(n,a-g)},o.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},o.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},o.prototype.moveCursorBy=function(n,a){var d=this.session.documentToScreenPosition(this.lead.row,this.lead.column),l;if(a===0&&(n!==0&&(this.session.$bidiHandler.isBidiRow(d.row,this.lead.row)?(l=this.session.$bidiHandler.getPosLeft(d.column),d.column=Math.round(l/this.session.$bidiHandler.charWidths[0])):l=d.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?d.column=this.$desiredColumn:this.$desiredColumn=d.column),n!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var c=this.session.lineWidgets[this.lead.row];n<0?n-=c.rowsAbove||0:n>0&&(n+=c.rowCount-(c.rowsAbove||0))}var g=this.session.screenToDocumentPosition(d.row+n,d.column,l);n!==0&&a===0&&g.row===this.lead.row&&(g.column,this.lead.column),this.moveCursorTo(g.row,g.column+a,a===0)},o.prototype.moveCursorToPosition=function(n){this.moveCursorTo(n.row,n.column)},o.prototype.moveCursorTo=function(n,a,d){var l=this.session.getFoldAt(n,a,1);l&&(n=l.start.row,a=l.start.column),this.$keepDesiredColumnOnChange=!0;var c=this.session.getLine(n);/[\uDC00-\uDFFF]/.test(c.charAt(a))&&c.charAt(a-1)&&(this.lead.row==n&&this.lead.column==a+1?a=a-1:a=a+1),this.lead.setPosition(n,a),this.$keepDesiredColumnOnChange=!1,d||(this.$desiredColumn=null)},o.prototype.moveCursorToScreen=function(n,a,d){var l=this.session.screenToDocumentPosition(n,a);this.moveCursorTo(l.row,l.column,d)},o.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},o.prototype.fromOrientedRange=function(n){this.setSelectionRange(n,n.cursor==n.start),this.$desiredColumn=n.desiredColumn||this.$desiredColumn},o.prototype.toOrientedRange=function(n){var a=this.getRange();return n?(n.start.column=a.start.column,n.start.row=a.start.row,n.end.column=a.end.column,n.end.row=a.end.row):n=a,n.cursor=this.isBackwards()?n.start:n.end,n.desiredColumn=this.$desiredColumn,n},o.prototype.getRangeOfMovements=function(n){var a=this.getCursor();try{n(this);var d=this.getCursor();return i.fromPoints(a,d)}catch{return i.fromPoints(a,a)}finally{this.moveCursorToPosition(a)}},o.prototype.toJSON=function(){if(this.rangeCount)var n=this.ranges.map(function(a){var d=a.clone();return d.isBackwards=a.cursor==a.start,d});else{var n=this.getRange();n.isBackwards=this.isBackwards()}return n},o.prototype.fromJSON=function(n){if(n.start==null)if(this.rangeList&&n.length>1){this.toSingleRange(n[0]);for(var a=n.length;a--;){var d=i.fromPoints(n[a].start,n[a].end);n[a].isBackwards&&(d.cursor=d.start),this.addRange(d,!0)}return}else n=n[0];this.rangeList&&this.toSingleRange(n),this.setSelectionRange(n,n.isBackwards)},o.prototype.isEqual=function(n){if((n.length||this.rangeCount)&&n.length!=this.rangeCount)return!1;if(!n.length||!this.ranges)return this.getRange().isEqual(n);for(var a=this.ranges.length;a--;)if(!this.ranges[a].isEqual(n[a]))return!1;return!0},o}();u.prototype.setSelectionAnchor=u.prototype.setAnchor,u.prototype.getSelectionAnchor=u.prototype.getAnchor,u.prototype.setSelectionRange=u.prototype.setRange,s.implement(u.prototype,m),t.Selection=u});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,r){"use strict";var s=e("./lib/report_error").reportError,p=2e3,m=function(){function i(u){this.splitRegex,this.states=u,this.regExps={},this.matchMappings={};for(var o in this.states){for(var n=this.states[o],a=[],d=0,l=this.matchMappings[o]={defaultToken:"text"},c="g",g=[],h=0;h<n.length;h++){var v=n[h];if(v.defaultToken&&(l.defaultToken=v.defaultToken),v.caseInsensitive&&c.indexOf("i")===-1&&(c+="i"),v.unicode&&c.indexOf("u")===-1&&(c+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var k=v.regex,x=new RegExp("(?:("+k+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||x==1?v.token=v.token[0]:x-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:x-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(x>1?v.onMatch=this.$applyToken:v.onMatch=v.token),x>1&&(/\\\d/.test(v.regex)?k=v.regex.replace(/\\([0-9]+)/g,function(A,S){return"\\"+(parseInt(S,10)+d+1)}):(x=1,k=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&g.push(v)),l[d]=h,d+=x,a.push(k),v.onMatch||(v.onMatch=null)}}a.length||(l[0]=0,a.push("$")),g.forEach(function(A){A.splitRegex=this.createSplitterRegexp(A.regex,c)},this),this.regExps[o]=new RegExp("("+a.join(")|(")+")|($)",c)}}return i.prototype.$setMaxTokenCount=function(u){p=u|0},i.prototype.$applyToken=function(u){var o=this.splitRegex.exec(u).slice(1),n=this.token.apply(this,o);if(typeof n=="string")return[{type:n,value:u}];for(var a=[],d=0,l=n.length;d<l;d++)o[d]&&(a[a.length]={type:n[d],value:o[d]});return a},i.prototype.$arrayTokens=function(u){if(!u)return[];var o=this.splitRegex.exec(u);if(!o)return"text";for(var n=[],a=this.tokenArray,d=0,l=a.length;d<l;d++)o[d+1]&&(n[n.length]={type:a[d],value:o[d+1]});return n},i.prototype.removeCapturingGroups=function(u){var o=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(n,a){return a?"(?:":n});return o},i.prototype.createSplitterRegexp=function(u,o){if(u.indexOf("(?=")!=-1){var n=0,a=!1,d={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(l,c,g,h,v,k){return a?a=v!="]":v?a=!0:h?(n==d.stack&&(d.end=k+1,d.stack=-1),n--):g&&(n++,g.length!=1&&(d.stack=n,d.start=k)),l}),d.end!=null&&/^\)*$/.test(u.substr(d.end))&&(u=u.substring(0,d.start)+u.substr(d.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(o||"").replace("g",""))},i.prototype.getLineTokens=function(u,o){if(o&&typeof o!="string"){var n=o.slice(0);o=n[0],o==="#tmp"&&(n.shift(),o=n.shift())}else var n=[];var a=o||"start",d=this.states[a];d||(a="start",d=this.states[a]);var l=this.matchMappings[a],c=this.regExps[a];c.lastIndex=0;for(var g,h=[],v=0,k=0,x={type:null,value:""};g=c.exec(u);){var A=l.defaultToken,S=null,f=g[0],L=c.lastIndex;if(L-f.length>v){var $=u.substring(v,L-f.length);x.type==A?x.value+=$:(x.type&&h.push(x),x={type:A,value:$})}for(var C=0;C<g.length-2;C++)if(g[C+1]!==void 0){S=d[l[C]],S.onMatch?A=S.onMatch(f,a,n,u):A=S.token,S.next&&(typeof S.next=="string"?a=S.next:a=S.next(a,n),d=this.states[a],d||(this.reportError("state doesn't exist",a),a="start",d=this.states[a]),l=this.matchMappings[a],v=L,c=this.regExps[a],c.lastIndex=L),S.consumeLineEnd&&(v=L);break}if(f){if(typeof A=="string")(!S||S.merge!==!1)&&x.type===A?x.value+=f:(x.type&&h.push(x),x={type:A,value:f});else if(A){x.type&&h.push(x),x={type:null,value:""};for(var C=0;C<A.length;C++)h.push(A[C])}}if(v==u.length)break;if(v=L,k++>p){for(k>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:o,line:u});v<u.length;)x.type&&h.push(x),x={value:u.substring(v,v+=500),type:"overflow"};a="start",n=[];break}}return x.type&&h.push(x),n.length>1&&n[0]!==a&&n.unshift("#tmp",a),{tokens:h,state:n.length?n:a}},i}();m.prototype.reportError=s,t.Tokenizer=m});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";var s=e("../lib/deep_copy").deepCopy,p;p=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(u,o){if(!o){for(var n in u)this.$rules[n]=u[n];return}for(var n in u){for(var a=u[n],d=0;d<a.length;d++){var l=a[d];(l.next||l.onMatch)&&(typeof l.next=="string"&&l.next.indexOf(o)!==0&&(l.next=o+l.next),l.nextState&&l.nextState.indexOf(o)!==0&&(l.nextState=o+l.nextState))}this.$rules[o+n]=a}},this.getRules=function(){return this.$rules},this.embedRules=function(u,o,n,a,d){var l=typeof u=="function"?new u().getRules():u;if(a)for(var c=0;c<a.length;c++)a[c]=o+a[c];else{a=[];for(var g in l)a.push(o+g)}if(this.addRules(l,o),n)for(var h=Array.prototype[d?"push":"unshift"],c=0;c<a.length;c++)h.apply(this.$rules[a[c]],s(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(o)},this.getEmbeds=function(){return this.$embeds};var m=function(u,o){return(u!="start"||o.length)&&o.unshift(this.nextState,u),this.nextState},i=function(u,o){return o.shift(),o.shift()||"start"};this.normalizeRules=function(){var u=0,o=this.$rules;function n(a){var d=o[a];d.processed=!0;for(var l=0;l<d.length;l++){var c=d[l],g=null;Array.isArray(c)&&(g=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var h=c.next||c.push;if(h&&Array.isArray(h)){var v=c.stateName;v||(v=c.token,typeof v!="string"&&(v=v[0]||""),o[v]&&(v+=u++)),o[v]=h,c.next=v,n(v)}else h=="pop"&&(c.next=i);if(c.push&&(c.nextState=c.next||c.push,c.next=m,delete c.push),c.rules)for(var k in c.rules)o[k]?o[k].push&&o[k].push.apply(o[k],c.rules[k]):o[k]=c.rules[k];var x=typeof c=="string"?c:c.include;if(x&&(x==="$self"&&(x="start"),Array.isArray(x)?g=x.map(function(S){return o[S]}):g=o[x]),g){var A=[l,1].concat(g);c.noEscape&&(A=A.filter(function(S){return!S.next})),d.splice.apply(d,A),l--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}Object.keys(o).forEach(n,this)},this.createKeywordMapper=function(u,o,n,a){var d=Object.create(null);return this.$keywordList=[],Object.keys(u).forEach(function(l){for(var c=u[l],g=c.split(a||"|"),h=g.length;h--;){var v=g[h];this.$keywordList.push(v),n&&(v=v.toLowerCase()),d[v]=l}},this),u=null,n?function(l){return d[l.toLowerCase()]||o}:function(l){return d[l]||o}},this.getKeywords=function(){return this.$keywords}}.call(p.prototype),t.TextHighlightRules=p});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,r){"use strict";var s;s=function(){this.$behaviours={}},function(){this.add=function(p,m,i){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[p]:this.$behaviours[p]={}}this.$behaviours[p][m]=i},this.addBehaviours=function(p){for(var m in p)for(var i in p[m])this.add(m,i,p[m][i])},this.remove=function(p){this.$behaviours&&this.$behaviours[p]&&delete this.$behaviours[p]},this.inherit=function(p,m){if(typeof p=="function")var i=new p().getBehaviours(m);else var i=p.getBehaviours(m);this.addBehaviours(i)},this.getBehaviours=function(p){if(p){for(var m={},i=0;i<p.length;i++)this.$behaviours[p[i]]&&(m[p[i]]=this.$behaviours[p[i]]);return m}else return this.$behaviours}}.call(s.prototype),t.Behaviour=s});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,r){"use strict";var s=e("./range").Range,p=function(){function m(i,u,o){this.$session=i,this.$row=u,this.$rowTokens=i.getTokens(u);var n=i.getTokenAt(u,o);this.$tokenIndex=n?n.index:-1}return m.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},m.prototype.stepForward=function(){this.$tokenIndex+=1;for(var i;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,i||(i=this.$session.getLength()),this.$row>=i)return this.$row=i-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},m.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},m.prototype.getCurrentTokenRow=function(){return this.$row},m.prototype.getCurrentTokenColumn=function(){var i=this.$rowTokens,u=this.$tokenIndex,o=i[u].start;if(o!==void 0)return o;for(o=0;u>0;)u-=1,o+=i[u].value.length;return o},m.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},m.prototype.getCurrentTokenRange=function(){var i=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new s(this.$row,u,this.$row,u+i.value.length)},m}();t.TokenIterator=p});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,r){"use strict";var s=e("../../lib/oop"),p=e("../behaviour").Behaviour,m=e("../../token_iterator").TokenIterator,i=e("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],o=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],n,a={},d={'"':'"',"'":"'"},l=function(h){var v=-1;if(h.multiSelect&&(v=h.selection.index,a.rangeCount!=h.multiSelect.rangeCount&&(a={rangeCount:h.multiSelect.rangeCount})),a[v])return n=a[v];n=a[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},c=function(h,v,k,x){var A=h.end.row-h.start.row;return{text:k+v+x,selection:[0,h.start.column+1,A,h.end.column+(A?0:1)]}},g;g=function(h){h=h||{},this.add("braces","insertion",function(v,k,x,A,S){var f=x.getCursorPosition(),L=A.doc.getLine(f.row);if(S=="{"){l(x);var $=x.getSelectionRange(),C=A.doc.getTextRange($),T=A.getTokenAt(f.row,f.column);if(C!==""&&C!=="{"&&x.getWrapBehavioursEnabled())return c($,C,"{","}");if(T&&/(?:string)\.quasi|\.xml/.test(T.type)){var w=[/tag\-(?:open|name)/,/attribute\-name/];return w.some(function(I){return I.test(T.type)})||/(string)\.quasi/.test(T.type)&&T.value[f.column-T.start-1]!=="$"?void 0:(g.recordAutoInsert(x,A,"}"),{text:"{}",selection:[1,1]})}else if(g.isSaneInsertion(x,A))return/[\]\}\)]/.test(L[f.column])||x.inMultiSelectMode||h.braces?(g.recordAutoInsert(x,A,"}"),{text:"{}",selection:[1,1]}):(g.recordMaybeInsert(x,A,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){l(x);var y=L.substring(f.column,f.column+1);if(y=="}"){var b=A.$findOpeningBracket("}",{column:f.column+1,row:f.row});if(b!==null&&g.isAutoInsertedClosing(f,L,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){l(x);var _="";g.isMaybeInsertedClosing(f,L)&&(_=i.stringRepeat("}",n.maybeInsertedBrackets),g.clearMaybeInsertedClosing());var y=L.substring(f.column,f.column+1);if(y==="}"){var E=A.findMatchingBracket({row:f.row,column:f.column+1},"}");if(!E)return null;var R=this.$getIndent(A.getLine(E.row))}else if(_)var R=this.$getIndent(L);else{g.clearMaybeInsertedClosing();return}var M=R+A.getTabString();return{text:`
`+M+`
`+R+_,selection:[1,M.length,1,M.length]}}else g.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="{"){l(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.end.column,S.end.column+1);if($=="}")return S.end.column++,S;n.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,k,x,A,S){if(S=="("){l(x);var f=x.getSelectionRange(),L=A.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"(",")");if(g.isSaneInsertion(x,A))return g.recordAutoInsert(x,A,")"),{text:"()",selection:[1,1]}}else if(S==")"){l(x);var $=x.getCursorPosition(),C=A.doc.getLine($.row),T=C.substring($.column,$.column+1);if(T==")"){var w=A.$findOpeningBracket(")",{column:$.column+1,row:$.row});if(w!==null&&g.isAutoInsertedClosing($,C,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="("){l(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($==")")return S.end.column++,S}}),this.add("brackets","insertion",function(v,k,x,A,S){if(S=="["){l(x);var f=x.getSelectionRange(),L=A.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"[","]");if(g.isSaneInsertion(x,A))return g.recordAutoInsert(x,A,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){l(x);var $=x.getCursorPosition(),C=A.doc.getLine($.row),T=C.substring($.column,$.column+1);if(T=="]"){var w=A.$findOpeningBracket("]",{column:$.column+1,row:$.row});if(w!==null&&g.isAutoInsertedClosing($,C,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="["){l(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(v,k,x,A,S){var f=A.$mode.$quotes||d;if(S.length==1&&f[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;l(x);var L=S,$=x.getSelectionRange(),C=A.doc.getTextRange($);if(C!==""&&(C.length!=1||!f[C])&&x.getWrapBehavioursEnabled())return c($,C,L,L);if(!C){var T=x.getCursorPosition(),w=A.doc.getLine(T.row),y=w.substring(T.column-1,T.column),b=w.substring(T.column,T.column+1),_=A.getTokenAt(T.row,T.column),E=A.getTokenAt(T.row,T.column+1);if(y=="\\"&&_&&/escape/.test(_.type))return null;var R=_&&/string|escape/.test(_.type),M=!E||/string|escape/.test(E.type),I;if(b==L)I=R!==M,I&&/string\.end/.test(E.type)&&(I=!1);else{if(R&&!M||R&&M)return null;var D=A.$mode.tokenRe;D.lastIndex=0;var O=D.test(y);D.lastIndex=0;var N=D.test(b),P=A.$mode.$pairQuotesAfter,F=P&&P[L]&&P[L].test(y);if(!F&&O||N||b&&!/[\s;,.})\]\\]/.test(b))return null;var z=w[T.column-2];if(y==L&&(z==L||D.test(z)))return null;I=!0}return{text:I?L+L:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,k,x,A,S){var f=A.$mode.$quotes||d,L=A.doc.getTextRange(S);if(!S.isMultiLine()&&f.hasOwnProperty(L)){l(x);var $=A.doc.getLine(S.start.row),C=$.substring(S.start.column+1,S.start.column+2);if(C==L)return S.end.column++,S}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,k,x,A,S){if(v==="doc-start"&&(S===`
`||S===`\r
`)&&x.selection.isEmpty()){var f=x.getCursorPosition();if(f.column===0)return;for(var L=A.doc.getLine(f.row),$=A.doc.getLine(f.row+1),C=A.getTokens(f.row),T=0,w=0;w<C.length;w++){T+=C[w].value.length;var y=C[w];if(T>=f.column){if(T===f.column){if(!/\.doc/.test(y.type))return;if(/\*\//.test(y.value)){var b=C[w+1];if(!b||!/\.doc/.test(b.type))return}}var _=f.column-(T-y.value.length),E=y.value.indexOf("*/"),R=y.value.indexOf("/**",E>-1?E+2:0);if(R!==-1&&_>R&&_<R+3||E!==-1&&R!==-1&&_>=E&&_<=R||!/\.doc/.test(y.type))return;break}}var M=this.$getIndent(L);if(/\s*\*/.test($))return/^\s*\*/.test(L)?{text:S+M+"* ",selection:[1,2+M.length,1,2+M.length]}:{text:S+M+" * ",selection:[1,3+M.length,1,3+M.length]};if(/\/\*\*/.test(L.substring(0,f.column)))return{text:S+M+" * "+S+" "+M+"*/",selection:[1,4+M.length,1,4+M.length]}}})},g.isSaneInsertion=function(h,v){var k=h.getCursorPosition(),x=new m(v,k.row,k.column);if(!this.$matchTokenType(x.getCurrentToken()||"text",u)){if(/[)}\]]/.test(h.session.getLine(k.row)[k.column]))return!0;var A=new m(v,k.row,k.column+1);if(!this.$matchTokenType(A.getCurrentToken()||"text",u))return!1}return x.stepForward(),x.getCurrentTokenRow()!==k.row||this.$matchTokenType(x.getCurrentToken()||"text",o)},g.$matchTokenType=function(h,v){return v.indexOf(h.type||h)>-1},g.recordAutoInsert=function(h,v,k){var x=h.getCursorPosition(),A=v.doc.getLine(x.row);this.isAutoInsertedClosing(x,A,n.autoInsertedLineEnd[0])||(n.autoInsertedBrackets=0),n.autoInsertedRow=x.row,n.autoInsertedLineEnd=k+A.substr(x.column),n.autoInsertedBrackets++},g.recordMaybeInsert=function(h,v,k){var x=h.getCursorPosition(),A=v.doc.getLine(x.row);this.isMaybeInsertedClosing(x,A)||(n.maybeInsertedBrackets=0),n.maybeInsertedRow=x.row,n.maybeInsertedLineStart=A.substr(0,x.column)+k,n.maybeInsertedLineEnd=A.substr(x.column),n.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(h,v,k){return n.autoInsertedBrackets>0&&h.row===n.autoInsertedRow&&k===n.autoInsertedLineEnd[0]&&v.substr(h.column)===n.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(h,v){return n.maybeInsertedBrackets>0&&h.row===n.maybeInsertedRow&&v.substr(h.column)===n.maybeInsertedLineEnd&&v.substr(0,h.column)==n.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){n.autoInsertedLineEnd=n.autoInsertedLineEnd.substr(1),n.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){n&&(n.maybeInsertedBrackets=0,n.maybeInsertedRow=-1)},s.inherits(g,p),t.CstyleBehaviour=g});ace.define("ace/unicode",["require","exports","module"],function(e,t,r){"use strict";for(var s=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],p=0,m=[],i=0;i<s.length;i+=2)m.push(p+=s[i]),s[i+1]&&m.push(45,p+=s[i+1]);t.wordChars=String.fromCharCode.apply(null,m)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var s=e("../config"),p=e("../tokenizer").Tokenizer,m=e("./text_highlight_rules").TextHighlightRules,i=e("./behaviour/cstyle").CstyleBehaviour,u=e("../unicode"),o=e("../lib/lang"),n=e("../token_iterator").TokenIterator,a=e("../range").Range,d;d=function(){this.HighlightRules=m},function(){this.$defaultBehaviour=new i,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new p(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(l,c,g,h){var v=c.doc,k=!0,x=!0,A=1/0,S=c.getTabSize(),f=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var C=this.lineCommentStart.map(o.escapeRegExp).join("|"),L=this.lineCommentStart[0];else var C=o.escapeRegExp(this.lineCommentStart),L=this.lineCommentStart;C=new RegExp("^(\\s*)(?:"+C+") ?"),f=c.getUseSoftTabs();var y=function(N,P){var F=N.match(C);if(F){var z=F[1].length,W=F[0].length;!E(N,z,W)&&F[0][W-1]==" "&&W--,v.removeInLine(P,z,W)}},_=L+" ",w=function(N,P){(!k||/\S/.test(N))&&(E(N,A,A)?v.insertInLine({row:P,column:A},_):v.insertInLine({row:P,column:A},L))},b=function(N,P){return C.test(N)},E=function(N,P,F){for(var z=0;P--&&N.charAt(P)==" ";)z++;if(z%S!=0)return!1;for(var z=0;N.charAt(F++)==" ";)z++;return S>2?z%S!=S-1:z%S==0}}else{if(!this.blockComment)return!1;var L=this.blockComment.start,$=this.blockComment.end,C=new RegExp("^(\\s*)(?:"+o.escapeRegExp(L)+")"),T=new RegExp("(?:"+o.escapeRegExp($)+")\\s*$"),w=function(I,D){b(I,D)||(!k||/\S/.test(I))&&(v.insertInLine({row:D,column:I.length},$),v.insertInLine({row:D,column:A},L))},y=function(I,D){var O;(O=I.match(T))&&v.removeInLine(D,I.length-O[0].length,I.length),(O=I.match(C))&&v.removeInLine(D,O[1].length,O[0].length)},b=function(I,D){if(C.test(I))return!0;for(var O=c.getTokens(D),N=0;N<O.length;N++)if(O[N].type==="comment")return!0}}function R(I){for(var D=g;D<=h;D++)I(v.getLine(D),D)}var M=1/0;R(function(I,D){var O=I.search(/\S/);O!==-1?(O<A&&(A=O),x&&!b(I,D)&&(x=!1)):M>I.length&&(M=I.length)}),A==1/0&&(A=M,k=!1,x=!1),f&&A%S!=0&&(A=Math.floor(A/S)*S),R(x?y:w)},this.toggleBlockComment=function(l,c,g,h){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var k=new n(c,h.row,h.column),x=k.getCurrentToken(),A=c.selection,S=c.selection.toOrientedRange(),f,L;if(x&&/comment/.test(x.type)){for(var $,C;x&&/comment/.test(x.type);){var T=x.value.indexOf(v.start);if(T!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+T;$=new a(w,y,w,y+v.start.length);break}x=k.stepBackward()}for(var k=new n(c,h.row,h.column),x=k.getCurrentToken();x&&/comment/.test(x.type);){var T=x.value.indexOf(v.end);if(T!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+T;C=new a(w,y,w,y+v.end.length);break}x=k.stepForward()}C&&c.remove(C),$&&(c.remove($),f=$.start.row,L=-v.start.length)}else L=v.start.length,f=g.start.row,c.insert(g.end,v.end),c.insert(g.start,v.start);S.start.row==f&&(S.start.column+=L),S.end.row==f&&(S.end.column+=L),c.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(l,c,g){return this.$getIndent(c)},this.checkOutdent=function(l,c,g){return!1},this.autoOutdent=function(l,c,g){},this.$getIndent=function(l){return l.match(/^\s*/)[0]},this.createWorker=function(l){return null},this.createModeDelegates=function(l){this.$embeds=[],this.$modes={};for(var c in l)if(l[c]){var g=l[c],h=g.prototype.$id,v=s.$modes[h];v||(s.$modes[h]=v=new g),s.$modes[c]||(s.$modes[c]=v),this.$embeds.push(c),this.$modes[c]=v}for(var k=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],x=function(S){(function(f){var L=k[S],$=f[L];f[k[S]]=function(){return this.$delegator(L,arguments,$)}})(A)},A=this,c=0;c<k.length;c++)x(c)},this.$delegator=function(l,c,g){var h=c[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var v=h[2][h[2].length-1],k=this.$modes[v];if(k)return k[l].apply(k,[h[1]].concat([].slice.call(c,1)))}h=h[0]||"start"}for(var x=0;x<this.$embeds.length;x++)if(this.$modes[this.$embeds[x]]){var A=h.split(this.$embeds[x]);if(!A[0]&&A[1]){c[0]=A[1];var k=this.$modes[this.$embeds[x]];return k[l].apply(k,c)}}var S=g.apply(this,c);return g?S:void 0},this.transformAction=function(l,c,g,h,v){if(this.$behaviour){var k=this.$behaviour.getBehaviours();for(var x in k)if(k[x][c]){var A=k[x][c].apply(this,arguments);if(A)return A}}},this.getKeywords=function(l){if(!this.completionKeywords){var c=this.$tokenizer.rules,g=[];for(var h in c)for(var v=c[h],k=0,x=v.length;k<x;k++)if(typeof v[k].token=="string")/keyword|support|storage/.test(v[k].token)&&g.push(v[k].regex);else if(typeof v[k].token=="object"){for(var A=0,S=v[k].token.length;A<S;A++)if(/keyword|support|storage/.test(v[k].token[A])){var h=v[k].regex.match(/\(.+?\)/g)[A];g.push(h.substr(1,h.length-2))}}this.completionKeywords=g}return l?g.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(l,c,g,h){var v=this.$keywordList||this.$createKeywordList();return v.map(function(k){return{name:k,value:k,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(d.prototype),t.Mode=d});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,r){"use strict";function s(i,u){throw console.log("Invalid Delta:",i),"Invalid Delta: "+u}function p(i,u){return u.row>=0&&u.row<i.length&&u.column>=0&&u.column<=i[u.row].length}function m(i,u){u.action!="insert"&&u.action!="remove"&&s(u,"delta.action must be 'insert' or 'remove'"),u.lines instanceof Array||s(u,"delta.lines must be an Array"),(!u.start||!u.end)&&s(u,"delta.start/end must be an present");var o=u.start;p(i,u.start)||s(u,"delta.start must be contained in document");var n=u.end;u.action=="remove"&&!p(i,n)&&s(u,"delta.end must contained in document for 'remove' actions");var a=n.row-o.row,d=n.column-(a==0?o.column:0);(a!=u.lines.length-1||u.lines[a].length!=d)&&s(u,"delta.range must match delta lines")}t.applyDelta=function(i,u,o){var n=u.start.row,a=u.start.column,d=i[n]||"";switch(u.action){case"insert":var l=u.lines;if(l.length===1)i[n]=d.substring(0,a)+u.lines[0]+d.substring(a);else{var c=[n,1].concat(u.lines);i.splice.apply(i,c),i[n]=d.substring(0,a)+i[n],i[n+u.lines.length-1]+=d.substring(a)}break;case"remove":var g=u.end.column,h=u.end.row;n===h?i[n]=d.substring(0,a)+d.substring(g):i.splice(n,h-n+1,d.substring(0,a)+i[h].substring(g));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var s=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,m=function(){function o(n,a,d){this.$onChange=this.onChange.bind(this),this.attach(n),typeof a!="number"?this.setPosition(a.row,a.column):this.setPosition(a,d)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(n){if(!(n.start.row==n.end.row&&n.start.row!=this.row)&&!(n.start.row>this.row)){var a=u(n,{row:this.row,column:this.column},this.$insertRight);this.setPosition(a.row,a.column,!0)}},o.prototype.setPosition=function(n,a,d){var l;if(d?l={row:n,column:a}:l=this.$clipPositionToDocument(n,a),!(this.row==l.row&&this.column==l.column)){var c={row:this.row,column:this.column};this.row=l.row,this.column=l.column,this._signal("change",{old:c,value:l})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(n){this.document=n||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(n,a){var d={};return n>=this.document.getLength()?(d.row=Math.max(0,this.document.getLength()-1),d.column=this.document.getLine(d.row).length):n<0?(d.row=0,d.column=0):(d.row=n,d.column=Math.min(this.document.getLine(d.row).length,Math.max(0,a))),a<0&&(d.column=0),d},o}();m.prototype.$insertRight=!1,s.implement(m.prototype,p);function i(o,n,a){var d=a?o.column<=n.column:o.column<n.column;return o.row<n.row||o.row==n.row&&d}function u(o,n,a){var d=o.action=="insert",l=(d?1:-1)*(o.end.row-o.start.row),c=(d?1:-1)*(o.end.column-o.start.column),g=o.start,h=d?g:o.end;return i(n,g,a)?{row:n.row,column:n.column}:i(h,n,!a)?{row:n.row+l,column:n.column+(n.row==h.row?c:0)}:{row:g.row,column:g.column}}t.Anchor=m});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,r){"use strict";var s=e("./lib/oop"),p=e("./apply_delta").applyDelta,m=e("./lib/event_emitter").EventEmitter,i=e("./range").Range,u=e("./anchor").Anchor,o=function(){function n(a){this.$lines=[""],a.length===0?this.$lines=[""]:Array.isArray(a)?this.insertMergedLines({row:0,column:0},a):this.insert({row:0,column:0},a)}return n.prototype.setValue=function(a){var d=this.getLength()-1;this.remove(new i(0,0,d,this.getLine(d).length)),this.insert({row:0,column:0},a||"")},n.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},n.prototype.createAnchor=function(a,d){return new u(this,a,d)},n.prototype.$detectNewLine=function(a){var d=a.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=d?d[1]:`
`,this._signal("changeNewLineMode")},n.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},n.prototype.setNewLineMode=function(a){this.$newLineMode!==a&&(this.$newLineMode=a,this._signal("changeNewLineMode"))},n.prototype.getNewLineMode=function(){return this.$newLineMode},n.prototype.isNewLine=function(a){return a==`\r
`||a=="\r"||a==`
`},n.prototype.getLine=function(a){return this.$lines[a]||""},n.prototype.getLines=function(a,d){return this.$lines.slice(a,d+1)},n.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},n.prototype.getLength=function(){return this.$lines.length},n.prototype.getTextRange=function(a){return this.getLinesForRange(a).join(this.getNewLineCharacter())},n.prototype.getLinesForRange=function(a){var d;if(a.start.row===a.end.row)d=[this.getLine(a.start.row).substring(a.start.column,a.end.column)];else{d=this.getLines(a.start.row,a.end.row),d[0]=(d[0]||"").substring(a.start.column);var l=d.length-1;a.end.row-a.start.row==l&&(d[l]=d[l].substring(0,a.end.column))}return d},n.prototype.insertLines=function(a,d){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(a,d)},n.prototype.removeLines=function(a,d){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(a,d)},n.prototype.insertNewLine=function(a){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(a,["",""])},n.prototype.insert=function(a,d){return this.getLength()<=1&&this.$detectNewLine(d),this.insertMergedLines(a,this.$split(d))},n.prototype.insertInLine=function(a,d){var l=this.clippedPos(a.row,a.column),c=this.pos(a.row,a.column+d.length);return this.applyDelta({start:l,end:c,action:"insert",lines:[d]},!0),this.clonePos(c)},n.prototype.clippedPos=function(a,d){var l=this.getLength();a===void 0?a=l:a<0?a=0:a>=l&&(a=l-1,d=void 0);var c=this.getLine(a);return d==null&&(d=c.length),d=Math.min(Math.max(d,0),c.length),{row:a,column:d}},n.prototype.clonePos=function(a){return{row:a.row,column:a.column}},n.prototype.pos=function(a,d){return{row:a,column:d}},n.prototype.$clipPosition=function(a){var d=this.getLength();return a.row>=d?(a.row=Math.max(0,d-1),a.column=this.getLine(d-1).length):(a.row=Math.max(0,a.row),a.column=Math.min(Math.max(a.column,0),this.getLine(a.row).length)),a},n.prototype.insertFullLines=function(a,d){a=Math.min(Math.max(a,0),this.getLength());var l=0;a<this.getLength()?(d=d.concat([""]),l=0):(d=[""].concat(d),a--,l=this.$lines[a].length),this.insertMergedLines({row:a,column:l},d)},n.prototype.insertMergedLines=function(a,d){var l=this.clippedPos(a.row,a.column),c={row:l.row+d.length-1,column:(d.length==1?l.column:0)+d[d.length-1].length};return this.applyDelta({start:l,end:c,action:"insert",lines:d}),this.clonePos(c)},n.prototype.remove=function(a){var d=this.clippedPos(a.start.row,a.start.column),l=this.clippedPos(a.end.row,a.end.column);return this.applyDelta({start:d,end:l,action:"remove",lines:this.getLinesForRange({start:d,end:l})}),this.clonePos(d)},n.prototype.removeInLine=function(a,d,l){var c=this.clippedPos(a,d),g=this.clippedPos(a,l);return this.applyDelta({start:c,end:g,action:"remove",lines:this.getLinesForRange({start:c,end:g})},!0),this.clonePos(c)},n.prototype.removeFullLines=function(a,d){a=Math.min(Math.max(0,a),this.getLength()-1),d=Math.min(Math.max(0,d),this.getLength()-1);var l=d==this.getLength()-1&&a>0,c=d<this.getLength()-1,g=l?a-1:a,h=l?this.getLine(g).length:0,v=c?d+1:d,k=c?0:this.getLine(v).length,x=new i(g,h,v,k),A=this.$lines.slice(a,d+1);return this.applyDelta({start:x.start,end:x.end,action:"remove",lines:this.getLinesForRange(x)}),A},n.prototype.removeNewLine=function(a){a<this.getLength()-1&&a>=0&&this.applyDelta({start:this.pos(a,this.getLine(a).length),end:this.pos(a+1,0),action:"remove",lines:["",""]})},n.prototype.replace=function(a,d){if(a instanceof i||(a=i.fromPoints(a.start,a.end)),d.length===0&&a.isEmpty())return a.start;if(d==this.getTextRange(a))return a.end;this.remove(a);var l;return d?l=this.insert(a.start,d):l=a.start,l},n.prototype.applyDeltas=function(a){for(var d=0;d<a.length;d++)this.applyDelta(a[d])},n.prototype.revertDeltas=function(a){for(var d=a.length-1;d>=0;d--)this.revertDelta(a[d])},n.prototype.applyDelta=function(a,d){var l=a.action=="insert";(l?a.lines.length<=1&&!a.lines[0]:!i.comparePoints(a.start,a.end))||(l&&a.lines.length>2e4?this.$splitAndapplyLargeDelta(a,2e4):(p(this.$lines,a,d),this._signal("change",a)))},n.prototype.$safeApplyDelta=function(a){var d=this.$lines.length;(a.action=="remove"&&a.start.row<d&&a.end.row<d||a.action=="insert"&&a.start.row<=d)&&this.applyDelta(a)},n.prototype.$splitAndapplyLargeDelta=function(a,d){for(var l=a.lines,c=l.length-d+1,g=a.start.row,h=a.start.column,v=0,k=0;v<c;v=k){k+=d-1;var x=l.slice(v,k);x.push(""),this.applyDelta({start:this.pos(g+v,h),end:this.pos(g+k,h=0),action:a.action,lines:x},!0)}a.lines=l.slice(v),a.start.row=g+v,a.start.column=h,this.applyDelta(a,!0)},n.prototype.revertDelta=function(a){this.$safeApplyDelta({start:this.clonePos(a.start),end:this.clonePos(a.end),action:a.action=="insert"?"remove":"insert",lines:a.lines.slice()})},n.prototype.indexToPosition=function(a,d){for(var l=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,g=d||0,h=l.length;g<h;g++)if(a-=l[g].length+c,a<0)return{row:g,column:a+l[g].length+c};return{row:h-1,column:a+l[h-1].length+c}},n.prototype.positionToIndex=function(a,d){for(var l=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,g=0,h=Math.min(a.row,l.length),v=d||0;v<h;++v)g+=l[v].length+c;return g+a.column},n.prototype.$split=function(a){return a.split(/\r\n|\r|\n/)},n}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",s.implement(o.prototype,m),t.Document=o});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var s=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,m=function(){function i(u,o){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var n=this;this.$worker=function(){if(n.running){for(var a=new Date,d=n.currentLine,l=-1,c=n.doc,g=d;n.lines[d];)d++;var h=c.getLength(),v=0;for(n.running=!1;d<h;){n.$tokenizeRow(d),l=d;do d++;while(n.lines[d]);if(v++,v%5===0&&new Date-a>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=d,l==-1&&(l=d),g<=l&&n.fireUpdateEvent(g,l)}}}return i.prototype.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},i.prototype.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},i.prototype.fireUpdateEvent=function(u,o){var n={first:u,last:o};this._signal("update",{data:n})},i.prototype.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},i.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},i.prototype.$updateOnChange=function(u){var o=u.start.row,n=u.end.row-o;if(n===0)this.lines[o]=null;else if(u.action=="remove")this.lines.splice(o,n+1,null),this.states.splice(o,n+1,null);else{var a=Array(n+1);a.unshift(o,1),this.lines.splice.apply(this.lines,a),this.states.splice.apply(this.states,a)}this.currentLine=Math.min(o,this.currentLine,this.doc.getLength()),this.stop()},i.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},i.prototype.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},i.prototype.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},i.prototype.$tokenizeRow=function(u){var o=this.doc.getLine(u),n=this.states[u-1],a=this.tokenizer.getLineTokens(o,n,u);return this.states[u]+""!=a.state+""?(this.states[u]=a.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=a.tokens},i.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},i}();s.implement(m.prototype,p),t.BackgroundTokenizer=m});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,r){"use strict";var s=e("./lib/lang"),p=e("./range").Range,m=function(){function i(u,o,n){n===void 0&&(n="text"),this.setRegexp(u),this.clazz=o,this.type=n}return i.prototype.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},i.prototype.update=function(u,o,n,a){if(this.regExp)for(var d=a.firstRow,l=a.lastRow,c={},g=d;g<=l;g++){var h=this.cache[g];h==null&&(h=s.getMatchOffsets(n.getLine(g),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(A){return new p(g,A.offset,g,A.offset+A.length)}),this.cache[g]=h.length?h:"");for(var v=h.length;v--;){var k=h[v].toScreenRange(n),x=k.toString();c[x]||(c[x]=!0,o.drawSingleLineMarker(u,k,this.clazz,a))}}},i}();m.prototype.MAX_RANGES=500,t.SearchHighlight=m});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,r){"use strict";var s=function(){function f(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return f.prototype.addSession=function(L){this.$session=L},f.prototype.add=function(L,$,C){if(!this.$fromUndo&&L!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),$===!1||!this.lastDeltas){this.lastDeltas=[];var T=this.$undoStack.length;T>this.$undoDepth-1&&this.$undoStack.splice(0,T-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),L.id=this.$rev=++this.$maxRev}(L.action=="remove"||L.action=="insert")&&(this.$lastDelta=L),this.lastDeltas.push(L)}},f.prototype.addSelection=function(L,$){this.selections.push({value:L,rev:$||this.$rev})},f.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},f.prototype.markIgnored=function(L,$){$==null&&($=this.$rev+1);for(var C=this.$undoStack,T=C.length;T--;){var w=C[T][0];if(w.id<=L)break;w.id<$&&(w.ignore=!0)}this.lastDeltas=null},f.prototype.getSelection=function(L,$){for(var C=this.selections,T=C.length;T--;){var w=C[T];if(w.rev<L)return $&&(w=C[T+1]),w}},f.prototype.getRevision=function(){return this.$rev},f.prototype.getDeltas=function(L,$){$==null&&($=this.$rev+1);for(var C=this.$undoStack,T=null,w=0,y=C.length;y--;){var b=C[y][0];if(b.id<$&&!T&&(T=y+1),b.id<=L){w=y+1;break}}return C.slice(w,T)},f.prototype.getChangedRanges=function(L,$){$==null&&($=this.$rev+1)},f.prototype.getChangedLines=function(L,$){$==null&&($=this.$rev+1)},f.prototype.undo=function(L,$){this.lastDeltas=null;var C=this.$undoStack;if(p(C,C.length)){L||(L=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var T=C.pop(),w=null;return T&&(w=L.undoChanges(T,$),this.$redoStack.push(T),this.$syncRev()),this.$fromUndo=!1,w}},f.prototype.redo=function(L,$){if(this.lastDeltas=null,L||(L=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var C=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,C),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(y){y[0].id=++this.$maxRev},this)}var T=this.$redoStack.pop(),w=null;return T&&(w=L.redoChanges(T,$),this.$undoStack.push(T),this.$syncRev()),this.$fromUndo=!1,w},f.prototype.$syncRev=function(){var L=this.$undoStack,$=L[L.length-1],C=$&&$[0].id||0;this.$redoStackBaseRev=C,this.$rev=C},f.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},f.prototype.canUndo=function(){return this.$undoStack.length>0},f.prototype.canRedo=function(){return this.$redoStack.length>0},f.prototype.bookmark=function(L){L==null&&(L=this.$rev),this.mark=L},f.prototype.isAtBookmark=function(){return this.$rev===this.mark},f.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},f.prototype.fromJSON=function(L){this.reset(),this.$undoStack=L.$undoStack,this.$redoStack=L.$redoStack},f.prototype.$prettyPrint=function(L){return L?d(L):d(this.$undoStack)+`
---
`+d(this.$redoStack)},f}();s.prototype.hasUndo=s.prototype.canUndo,s.prototype.hasRedo=s.prototype.canRedo,s.prototype.isClean=s.prototype.isAtBookmark,s.prototype.markClean=s.prototype.bookmark;function p(f,L){for(var $=L;$--;){var C=f[$];if(C&&!C[0].ignore){for(;$<L-1;){var T=g(f[$],f[$+1]);f[$]=T[0],f[$+1]=T[1],$++}return!0}}}var m=e("./range").Range,i=m.comparePoints,u=m.comparePoints;function o(f){var L=f.action=="insert",$=f.start,C=f.end,T=(C.row-$.row)*(L?1:-1),w=(C.column-$.column)*(L?1:-1);L&&(C=$);for(var y in this.marks){var b=this.marks[y],_=u(b,$);if(!(_<0)){if(_===0&&L)if(b.bias==1)_=1;else{b.bias==-1;continue}var E=L?_:u(b,C);if(E>0){b.row+=T,b.column+=b.row==C.row?w:0;continue}!L&&E<=0&&(b.row=$.row,b.column=$.column,E===0&&(b.bias=1))}}}function n(f){return{row:f.row,column:f.column}}function a(f){return{start:n(f.start),end:n(f.end),action:f.action,lines:f.lines.slice()}}function d(f){if(f=f||this,Array.isArray(f))return f.map(d).join(`
`);var L="";return f.action?(L=f.action=="insert"?"+":"-",L+="["+f.lines+"]"):f.value&&(Array.isArray(f.value)?L=f.value.map(l).join(`
`):L=l(f.value)),f.start&&(L+=l(f)),(f.id||f.rev)&&(L+="	("+(f.id||f.rev)+")"),L}function l(f){return f.start.row+":"+f.start.column+"=>"+f.end.row+":"+f.end.column}function c(f,L){var $=f.action=="insert",C=L.action=="insert";if($&&C)if(i(L.start,f.end)>=0)v(L,f,-1);else if(i(L.start,f.start)<=0)v(f,L,1);else return null;else if($&&!C)if(i(L.start,f.end)>=0)v(L,f,-1);else if(i(L.end,f.start)<=0)v(f,L,-1);else return null;else if(!$&&C)if(i(L.start,f.start)>=0)v(L,f,1);else if(i(L.start,f.start)<=0)v(f,L,1);else return null;else if(!$&&!C)if(i(L.start,f.start)>=0)v(L,f,1);else if(i(L.end,f.start)<=0)v(f,L,-1);else return null;return[L,f]}function g(f,L){for(var $=f.length;$--;)for(var C=0;C<L.length;C++)if(!c(f[$],L[C])){for(;$<f.length;){for(;C--;)c(L[C],f[$]);C=L.length,$++}return[f,L]}return f.selectionBefore=L.selectionBefore=f.selectionAfter=L.selectionAfter=null,[L,f]}function h(f,L){var $=f.action=="insert",C=L.action=="insert";if($&&C)i(f.start,L.start)<0?v(L,f,1):v(f,L,1);else if($&&!C)i(f.start,L.end)>=0?v(f,L,-1):(i(f.start,L.start)<=0||v(f,m.fromPoints(L.start,f.start),-1),v(L,f,1));else if(!$&&C)i(L.start,f.end)>=0?v(L,f,-1):(i(L.start,f.start)<=0||v(L,m.fromPoints(f.start,L.start),-1),v(f,L,1));else if(!$&&!C)if(i(L.start,f.end)>=0)v(L,f,-1);else if(i(L.end,f.start)<=0)v(f,L,-1);else{var T,w;return i(f.start,L.start)<0&&(T=f,f=x(f,L.start)),i(f.end,L.end)>0&&(w=x(f,L.end)),k(L.end,f.start,f.end,-1),w&&!T&&(f.lines=w.lines,f.start=w.start,f.end=w.end,w=f),[L,T,w].filter(Boolean)}return[L,f]}function v(f,L,$){k(f.start,L.start,L.end,$),k(f.end,L.start,L.end,$)}function k(f,L,$,C){f.row==(C==1?L:$).row&&(f.column+=C*($.column-L.column)),f.row+=C*($.row-L.row)}function x(f,L){var $=f.lines,C=f.end;f.end=n(L);var T=f.end.row-f.start.row,w=$.splice(T,$.length),y=T?L.column:L.column-f.start.column;$.push(w[0].substring(0,y)),w[0]=w[0].substr(y);var b={start:n(L),end:C,lines:w,action:f.action};return b}function A(f,L){L=a(L);for(var $=f.length;$--;){for(var C=f[$],T=0;T<C.length;T++){var w=C[T],y=h(w,L);L=y[0],y.length!=2&&(y[2]?(C.splice(T+1,1,y[1],y[2]),T++):y[1]||(C.splice(T,1),T--))}C.length||f.splice($,1)}return f}function S(f,L){for(var $=0;$<L.length;$++)for(var C=L[$],T=0;T<C.length;T++)A(f,C[T])}t.UndoManager=s});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,r){"use strict";var s=e("../range").Range,p=function(){function m(i,u){this.foldData=i,Array.isArray(u)?this.folds=u:u=this.folds=[u];var o=u[u.length-1];this.range=new s(u[0].start.row,u[0].start.column,o.end.row,o.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(n){n.setFoldLine(this)},this)}return m.prototype.shiftRow=function(i){this.start.row+=i,this.end.row+=i,this.folds.forEach(function(u){u.start.row+=i,u.end.row+=i})},m.prototype.addFold=function(i){if(i.sameRow){if(i.start.row<this.startRow||i.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(i),this.folds.sort(function(u,o){return-u.range.compareEnd(o.start.row,o.start.column)}),this.range.compareEnd(i.start.row,i.start.column)>0?(this.end.row=i.end.row,this.end.column=i.end.column):this.range.compareStart(i.end.row,i.end.column)<0&&(this.start.row=i.start.row,this.start.column=i.start.column)}else if(i.start.row==this.end.row)this.folds.push(i),this.end.row=i.end.row,this.end.column=i.end.column;else if(i.end.row==this.start.row)this.folds.unshift(i),this.start.row=i.start.row,this.start.column=i.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");i.foldLine=this},m.prototype.containsRow=function(i){return i>=this.start.row&&i<=this.end.row},m.prototype.walk=function(i,u,o){var n=0,a=this.folds,d,l,c,g=!0;u==null&&(u=this.end.row,o=this.end.column);for(var h=0;h<a.length;h++){if(d=a[h],l=d.range.compareStart(u,o),l==-1){i(null,u,o,n,g);return}if(c=i(null,d.start.row,d.start.column,n,g),c=!c&&i(d.placeholder,d.start.row,d.start.column,n),c||l===0)return;g=!d.sameRow,n=d.end.column}i(null,u,o,n,g)},m.prototype.getNextFoldTo=function(i,u){for(var o,n,a=0;a<this.folds.length;a++){if(o=this.folds[a],n=o.range.compareEnd(i,u),n==-1)return{fold:o,kind:"after"};if(n===0)return{fold:o,kind:"inside"}}return null},m.prototype.addRemoveChars=function(i,u,o){var n=this.getNextFoldTo(i,u),a,d;if(n){if(a=n.fold,n.kind=="inside"&&a.start.column!=u&&a.start.row!=i)window.console&&window.console.log(i,u,a);else if(a.start.row==i){d=this.folds;var l=d.indexOf(a);for(l===0&&(this.start.column+=o),l;l<d.length;l++){if(a=d[l],a.start.column+=o,!a.sameRow)return;a.end.column+=o}this.end.column+=o}}},m.prototype.split=function(i,u){var o=this.getNextFoldTo(i,u);if(!o||o.kind=="inside")return null;var n=o.fold,a=this.folds,d=this.foldData,l=a.indexOf(n),c=a[l-1];this.end.row=c.end.row,this.end.column=c.end.column,a=a.splice(l,a.length-l);var g=new m(d,a);return d.splice(d.indexOf(this)+1,0,g),g},m.prototype.merge=function(i){for(var u=i.folds,o=0;o<u.length;o++)this.addFold(u[o]);var n=this.foldData;n.splice(n.indexOf(i),1)},m.prototype.toString=function(){var i=[this.range.toString()+": ["];return this.folds.forEach(function(u){i.push("  "+u.toString())}),i.push("]"),i.join(`
`)},m.prototype.idxToPosition=function(i){for(var u=0,o=0;o<this.folds.length;o++){var n=this.folds[o];if(i-=n.start.column-u,i<0)return{row:n.start.row,column:n.start.column+i};if(i-=n.placeholder.length,i<0)return n.start;u=n.end.column}return{row:this.end.row,column:this.end.column+i}},m}();t.FoldLine=p});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,r){"use strict";var s=e("./range").Range,p=s.comparePoints,m=function(){function i(){this.ranges=[],this.$bias=1}return i.prototype.pointIndex=function(u,o,n){for(var a=this.ranges,d=n||0;d<a.length;d++){var l=a[d],c=p(u,l.end);if(!(c>0)){var g=p(u,l.start);return c===0?o&&g!==0?-d-2:d:g>0||g===0&&!o?d:-d-1}}return-d-1},i.prototype.add=function(u){var o=!u.isEmpty(),n=this.pointIndex(u.start,o);n<0&&(n=-n-1);var a=this.pointIndex(u.end,o,n);return a<0?a=-a-1:a++,this.ranges.splice(n,a-n,u)},i.prototype.addList=function(u){for(var o=[],n=u.length;n--;)o.push.apply(o,this.add(u[n]));return o},i.prototype.substractPoint=function(u){var o=this.pointIndex(u);if(o>=0)return this.ranges.splice(o,1)},i.prototype.merge=function(){var u=[],o=this.ranges;o=o.sort(function(c,g){return p(c.start,g.start)});for(var n=o[0],a,d=1;d<o.length;d++){a=n,n=o[d];var l=p(a.end,n.start);l<0||l==0&&!a.isEmpty()&&!n.isEmpty()||(p(a.end,n.end)<0&&(a.end.row=n.end.row,a.end.column=n.end.column),o.splice(d,1),u.push(n),n=a,d--)}return this.ranges=o,u},i.prototype.contains=function(u,o){return this.pointIndex({row:u,column:o})>=0},i.prototype.containsPoint=function(u){return this.pointIndex(u)>=0},i.prototype.rangeAtPoint=function(u){var o=this.pointIndex(u);if(o>=0)return this.ranges[o]},i.prototype.clipRows=function(u,o){var n=this.ranges;if(n[0].start.row>o||n[n.length-1].start.row<u)return[];var a=this.pointIndex({row:u,column:0});a<0&&(a=-a-1);var d=this.pointIndex({row:o,column:0},a);d<0&&(d=-d-1);for(var l=[],c=a;c<d;c++)l.push(n[c]);return l},i.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},i.prototype.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},i.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},i.prototype.$onChange=function(u){for(var o=u.start,n=u.end,a=o.row,d=n.row,l=this.ranges,c=0,g=l.length;c<g;c++){var h=l[c];if(h.end.row>=a)break}if(u.action=="insert")for(var v=d-a,k=-o.column+n.column;c<g;c++){var h=l[c];if(h.start.row>a)break;if(h.start.row==a&&h.start.column>=o.column&&(h.start.column==o.column&&this.$bias<=0||(h.start.column+=k,h.start.row+=v)),h.end.row==a&&h.end.column>=o.column){if(h.end.column==o.column&&this.$bias<0)continue;h.end.column==o.column&&k>0&&c<g-1&&h.end.column>h.start.column&&h.end.column==l[c+1].start.column&&(h.end.column-=k),h.end.column+=k,h.end.row+=v}}else for(var v=a-d,k=o.column-n.column;c<g;c++){var h=l[c];if(h.start.row>d)break;h.end.row<d&&(a<h.end.row||a==h.end.row&&o.column<h.end.column)?(h.end.row=a,h.end.column=o.column):h.end.row==d?h.end.column<=n.column?(v||h.end.column>o.column)&&(h.end.column=o.column,h.end.row=o.row):(h.end.column+=k,h.end.row+=v):h.end.row>d&&(h.end.row+=v),h.start.row<d&&(a<h.start.row||a==h.start.row&&o.column<h.start.column)?(h.start.row=a,h.start.column=o.column):h.start.row==d?h.start.column<=n.column?(v||h.start.column>o.column)&&(h.start.column=o.column,h.start.row=o.row):(h.start.column+=k,h.start.row+=v):h.start.row>d&&(h.start.row+=v)}if(v!=0&&c<g)for(;c<g;c++){var h=l[c];h.start.row+=v,h.end.row+=v}},i}();m.prototype.comparePoints=p,t.RangeList=m});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var a=function(d,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])},a(d,l)};return function(d,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(d,l);function c(){this.constructor=d}d.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}(),p=e("../range_list").RangeList,m=function(a){s(d,a);function d(l,c){var g=a.call(this)||this;return g.foldLine=null,g.placeholder=c,g.range=l,g.start=l.start,g.end=l.end,g.sameRow=l.start.row==l.end.row,g.subFolds=g.ranges=[],g}return d.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},d.prototype.setFoldLine=function(l){this.foldLine=l,this.subFolds.forEach(function(c){c.setFoldLine(l)})},d.prototype.clone=function(){var l=this.range.clone(),c=new d(l,this.placeholder);return this.subFolds.forEach(function(g){c.subFolds.push(g.clone())}),c.collapseChildren=this.collapseChildren,c},d.prototype.addSubFold=function(l){if(!this.range.isEqual(l)){u(l,this.start);for(var k=l.start.row,x=l.start.column,c=0,g=-1;c<this.subFolds.length&&(g=this.subFolds[c].range.compare(k,x),g==1);c++);var h=this.subFolds[c],v=0;if(g==0){if(h.range.containsRange(l))return h.addSubFold(l);v=1}for(var k=l.range.end.row,x=l.range.end.column,A=c,g=-1;A<this.subFolds.length&&(g=this.subFolds[A].range.compare(k,x),g==1);A++);g==0&&A++;for(var S=this.subFolds.splice(c,A-c,l),f=g==0?S.length-1:S.length,L=v;L<f;L++)l.addSubFold(S[L]);return l.setFoldLine(this.foldLine),l}},d.prototype.restoreRange=function(l){return n(l,this.start)},d}(p);function i(a,d){a.row-=d.row,a.row==0&&(a.column-=d.column)}function u(a,d){i(a.start,d),i(a.end,d)}function o(a,d){a.row==0&&(a.column+=d.column),a.row+=d.row}function n(a,d){o(a.start,d),o(a.end,d)}t.Fold=m});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,r){"use strict";var s=e("../range").Range,p=e("./fold_line").FoldLine,m=e("./fold").Fold,i=e("../token_iterator").TokenIterator,u=e("../mouse/mouse_event").MouseEvent;function o(){this.getFoldAt=function(n,a,d){var l=this.getFoldLine(n);if(!l)return null;for(var c=l.folds,g=0;g<c.length;g++){var h=c[g].range;if(h.contains(n,a)){if(d==1&&h.isEnd(n,a)&&!h.isEmpty())continue;if(d==-1&&h.isStart(n,a)&&!h.isEmpty())continue;return c[g]}}},this.getFoldsInRange=function(n){var a=n.start,d=n.end,l=this.$foldData,c=[];a.column+=1,d.column-=1;for(var g=0;g<l.length;g++){var h=l[g].range.compareRange(n);if(h!=2){if(h==-2)break;for(var v=l[g].folds,k=0;k<v.length;k++){var x=v[k];if(h=x.range.compareRange(n),h==-2)break;if(h==2)continue;if(h==42)break;c.push(x)}}}return a.column-=1,d.column+=1,c},this.getFoldsInRangeList=function(n){if(Array.isArray(n)){var a=[];n.forEach(function(d){a=a.concat(this.getFoldsInRange(d))},this)}else var a=this.getFoldsInRange(n);return a},this.getAllFolds=function(){for(var n=[],a=this.$foldData,d=0;d<a.length;d++)for(var l=0;l<a[d].folds.length;l++)n.push(a[d].folds[l]);return n},this.getFoldStringAt=function(n,a,d,l){if(l=l||this.getFoldLine(n),!l)return null;for(var c={end:{column:0}},g,h,v=0;v<l.folds.length;v++){h=l.folds[v];var k=h.range.compareEnd(n,a);if(k==-1){g=this.getLine(h.start.row).substring(c.end.column,h.start.column);break}else if(k===0)return null;c=h}return g||(g=this.getLine(h.start.row).substring(c.end.column)),d==-1?g.substring(0,a-c.end.column):d==1?g.substring(a-c.end.column):g},this.getFoldLine=function(n,a){var d=this.$foldData,l=0;for(a&&(l=d.indexOf(a)),l==-1&&(l=0),l;l<d.length;l++){var c=d[l];if(c.start.row<=n&&c.end.row>=n)return c;if(c.end.row>n)return null}return null},this.getNextFoldLine=function(n,a){var d=this.$foldData,l=0;for(a&&(l=d.indexOf(a)),l==-1&&(l=0),l;l<d.length;l++){var c=d[l];if(c.end.row>=n)return c}return null},this.getFoldedRowCount=function(n,a){for(var d=this.$foldData,l=a-n+1,c=0;c<d.length;c++){var g=d[c],h=g.end.row,v=g.start.row;if(h>=a){v<a&&(v>=n?l-=a-v:l=0);break}else h>=n&&(v>=n?l-=h-v:l-=h-n+1)}return l},this.$addFoldLine=function(n){return this.$foldData.push(n),this.$foldData.sort(function(a,d){return a.start.row-d.start.row}),n},this.addFold=function(n,a){var d=this.$foldData,l=!1,c;n instanceof m?c=n:(c=new m(a,n),c.collapseChildren=a.collapseChildren),this.$clipRangeToDocument(c.range);var g=c.start.row,h=c.start.column,v=c.end.row,k=c.end.column,x=this.getFoldAt(g,h,1),A=this.getFoldAt(v,k,-1);if(x&&A==x)return x.addSubFold(c);x&&!x.range.isStart(g,h)&&this.removeFold(x),A&&!A.range.isEnd(v,k)&&this.removeFold(A);var S=this.getFoldsInRange(c.range);S.length>0&&(this.removeFolds(S),c.collapseChildren||S.forEach(function(C){c.addSubFold(C)}));for(var f=0;f<d.length;f++){var L=d[f];if(v==L.start.row){L.addFold(c),l=!0;break}else if(g==L.end.row){if(L.addFold(c),l=!0,!c.sameRow){var $=d[f+1];if($&&$.start.row==v){L.merge($);break}}break}else if(v<=L.start.row)break}return l||(L=this.$addFoldLine(new p(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData(L.start.row,L.start.row):this.$updateRowLengthCache(L.start.row,L.start.row),this.$modified=!0,this._signal("changeFold",{data:c,action:"add"}),c},this.addFolds=function(n){n.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(n){var a=n.foldLine,d=a.start.row,l=a.end.row,c=this.$foldData,g=a.folds;if(g.length==1)c.splice(c.indexOf(a),1);else if(a.range.isEnd(n.end.row,n.end.column))g.pop(),a.end.row=g[g.length-1].end.row,a.end.column=g[g.length-1].end.column;else if(a.range.isStart(n.start.row,n.start.column))g.shift(),a.start.row=g[0].start.row,a.start.column=g[0].start.column;else if(n.sameRow)g.splice(g.indexOf(n),1);else{var h=a.split(n.start.row,n.start.column);g=h.folds,g.shift(),h.start.row=g[0].start.row,h.start.column=g[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(d,l):this.$updateRowLengthCache(d,l)),this.$modified=!0,this._signal("changeFold",{data:n,action:"remove"})},this.removeFolds=function(n){for(var a=[],d=0;d<n.length;d++)a.push(n[d]);a.forEach(function(l){this.removeFold(l)},this),this.$modified=!0},this.expandFold=function(n){this.removeFold(n),n.subFolds.forEach(function(a){n.restoreRange(a),this.addFold(a)},this),n.collapseChildren>0&&this.foldAll(n.start.row+1,n.end.row,n.collapseChildren-1),n.subFolds=[]},this.expandFolds=function(n){n.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(n,a){var d,l;if(n==null)d=new s(0,0,this.getLength(),0),a==null&&(a=!0);else if(typeof n=="number")d=new s(n,0,n,this.getLine(n).length);else if("row"in n)d=s.fromPoints(n,n);else{if(Array.isArray(n))return l=[],n.forEach(function(g){l=l.concat(this.unfold(g))},this),l;d=n}l=this.getFoldsInRangeList(d);for(var c=l;l.length==1&&s.comparePoints(l[0].start,d.start)<0&&s.comparePoints(l[0].end,d.end)>0;)this.expandFolds(l),l=this.getFoldsInRangeList(d);if(a!=!1?this.removeFolds(l):this.expandFolds(l),c.length)return c},this.isRowFolded=function(n,a){return!!this.getFoldLine(n,a)},this.getRowFoldEnd=function(n,a){var d=this.getFoldLine(n,a);return d?d.end.row:n},this.getRowFoldStart=function(n,a){var d=this.getFoldLine(n,a);return d?d.start.row:n},this.getFoldDisplayLine=function(n,a,d,l,c){l==null&&(l=n.start.row),c==null&&(c=0),a==null&&(a=n.end.row),d==null&&(d=this.getLine(a).length);var g=this.doc,h="";return n.walk(function(v,k,x,A){if(!(k<l)){if(k==l){if(x<c)return;A=Math.max(c,A)}v!=null?h+=v:h+=g.getLine(k).substring(A,x)}},a,d),h},this.getDisplayLine=function(n,a,d,l){var c=this.getFoldLine(n);if(c)return this.getFoldDisplayLine(c,n,a,d,l);var g;return g=this.doc.getLine(n),g.substring(l||0,a||g.length)},this.$cloneFoldData=function(){var n=[];return n=this.$foldData.map(function(a){var d=a.folds.map(function(l){return l.clone()});return new p(n,d)}),n},this.toggleFold=function(n){var a=this.selection,d=a.getRange(),l,c;if(d.isEmpty()){var g=d.start;if(l=this.getFoldAt(g.row,g.column),l){this.expandFold(l);return}else(c=this.findMatchingBracket(g))?d.comparePoint(c)==1?d.end=c:(d.start=c,d.start.column++,d.end.column--):(c=this.findMatchingBracket({row:g.row,column:g.column+1}))?(d.comparePoint(c)==1?d.end=c:d.start=c,d.start.column++):d=this.getCommentFoldRange(g.row,g.column)||d}else{var h=this.getFoldsInRange(d);if(n&&h.length){this.expandFolds(h);return}else h.length==1&&(l=h[0])}if(l||(l=this.getFoldAt(d.start.row,d.start.column)),l&&l.range.toString()==d.toString()){this.expandFold(l);return}var v="...";if(!d.isMultiLine()){if(v=this.getTextRange(d),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,d)},this.getCommentFoldRange=function(n,a,d){var l=new i(this,n,a),c=l.getCurrentToken(),g=c&&c.type;if(c&&/^comment|string/.test(g)){g=g.match(/comment|string/)[0],g=="comment"&&(g+="|doc-start|\\.doc");var h=new RegExp(g),v=new s;if(d!=1){do c=l.stepBackward();while(c&&h.test(c.type));c=l.stepForward()}v.start.row=l.getCurrentTokenRow(),v.start.column=l.getCurrentTokenColumn()+c.value.length,l=new i(this,n,a);var k=this.getState(l.$row);if(d!=-1){var x=-1;do if(c=l.stepForward(),x==-1){var A=this.getState(l.$row);k.toString()!==A.toString()&&(x=l.$row)}else if(l.$row>x)break;while(c&&h.test(c.type));c=l.stepBackward()}else c=l.getCurrentToken();return v.end.row=l.getCurrentTokenRow(),v.end.column=l.getCurrentTokenColumn(),v}},this.foldAll=function(n,a,d,l){d==null&&(d=1e5);var c=this.foldWidgets;if(c){a=a||this.getLength(),n=n||0;for(var g=n;g<a;g++)if(c[g]==null&&(c[g]=this.getFoldWidget(g)),c[g]=="start"&&!(l&&!l(g))){var h=this.getFoldWidgetRange(g);h&&h.isMultiLine()&&h.end.row<=a&&h.start.row>=n&&(g=h.end.row,h.collapseChildren=d,this.addFold("...",h))}}},this.foldToLevel=function(n){for(this.foldAll();n-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var n=this;this.foldAll(null,null,null,function(a){for(var d=n.getTokens(a),l=0;l<d.length;l++){var c=d[l];if(!(c.type=="text"&&/^\s+$/.test(c.value)))return!!/comment/.test(c.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(n){if(!this.$foldStyles[n])throw new Error("invalid fold style: "+n+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=n){this.$foldStyle=n,n=="manual"&&this.unfold();var a=this.$foldMode;this.$setFolding(null),this.$setFolding(a)}},this.$setFolding=function(n){if(this.$foldMode!=n){if(this.$foldMode=n,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!n||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=n.getFoldWidget.bind(n,this,this.$foldStyle),this.getFoldWidgetRange=n.getFoldWidgetRange.bind(n,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(n,a){var d=this.foldWidgets;if(!d||a&&d[n])return{};for(var l=n-1,c;l>=0;){var g=d[l];if(g==null&&(g=d[l]=this.getFoldWidget(l)),g=="start"){var h=this.getFoldWidgetRange(l);if(c||(c=h),h&&h.end.row>=n)break}l--}return{range:l!==-1&&h,firstRange:c}},this.onFoldWidgetClick=function(n,a){a instanceof u&&(a=a.domEvent);var d={children:a.shiftKey,all:a.ctrlKey||a.metaKey,siblings:a.altKey},l=this.$toggleFoldWidget(n,d);if(!l){var c=a.target||a.srcElement;c&&/ace_fold-widget/.test(c.className)&&(c.className+=" ace_invalid")}},this.$toggleFoldWidget=function(n,a){if(this.getFoldWidget){var d=this.getFoldWidget(n),l=this.getLine(n),c=d==="end"?-1:1,g=this.getFoldAt(n,c===-1?0:l.length,c);if(g)return a.children||a.all?this.removeFold(g):this.expandFold(g),g;var h=this.getFoldWidgetRange(n,!0);if(h&&!h.isMultiLine()&&(g=this.getFoldAt(h.start.row,h.start.column,1),g&&h.isEqual(g.range)))return this.removeFold(g),g;if(a.siblings){var v=this.getParentFoldRangeData(n);if(v.range)var k=v.range.start.row+1,x=v.range.end.row;this.foldAll(k,x,a.all?1e4:0)}else a.children?(x=h?h.end.row:this.getLength(),this.foldAll(n+1,x,a.all?1e4:0)):h&&(a.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(n){var a=this.selection.getCursor().row;a=this.getRowFoldStart(a);var d=this.$toggleFoldWidget(a,{});if(!d){var l=this.getParentFoldRangeData(a,!0);if(d=l.range||l.firstRange,d){a=d.start.row;var c=this.getFoldAt(a,this.getLine(a).length,1);c?this.removeFold(c):this.addFold("...",d)}}},this.updateFoldWidgets=function(n){var a=n.start.row,d=n.end.row-a;if(d===0)this.foldWidgets[a]=null;else if(n.action=="remove")this.foldWidgets.splice(a,d+1,null);else{var l=Array(d+1);l.unshift(a,1),this.foldWidgets.splice.apply(this.foldWidgets,l)}},this.tokenizerUpdateFoldWidgets=function(n){var a=n.data;a.first!=a.last&&this.foldWidgets.length>a.first&&this.foldWidgets.splice(a.first,this.foldWidgets.length)}}t.Folding=o});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var s=e("../token_iterator").TokenIterator,p=e("../range").Range;function m(){this.findMatchingBracket=function(i,u){if(i.column==0)return null;var o=u||this.getLine(i.row).charAt(i.column-1);if(o=="")return null;var n=o.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],i):this.$findOpeningBracket(n[2],i):null},this.getBracketRange=function(i){var u=this.getLine(i.row),o=!0,n,a=u.charAt(i.column-1),d=a&&a.match(/([\(\[\{])|([\)\]\}])/);if(d||(a=u.charAt(i.column),i={row:i.row,column:i.column+1},d=a&&a.match(/([\(\[\{])|([\)\]\}])/),o=!1),!d)return null;if(d[1]){var l=this.$findClosingBracket(d[1],i);if(!l)return null;n=p.fromPoints(i,l),o||(n.end.column++,n.start.column--),n.cursor=n.end}else{var l=this.$findOpeningBracket(d[2],i);if(!l)return null;n=p.fromPoints(l,i),o||(n.start.column++,n.end.column--),n.cursor=n.start}return n},this.getMatchingBracketRanges=function(i,u){var o=this.getLine(i.row),n=/([\(\[\{])|([\)\]\}])/,a=!u&&o.charAt(i.column-1),d=a&&a.match(n);if(d||(a=(u===void 0||u)&&o.charAt(i.column),i={row:i.row,column:i.column+1},d=a&&a.match(n)),!d)return null;var l=new p(i.row,i.column-1,i.row,i.column),c=d[1]?this.$findClosingBracket(d[1],i):this.$findOpeningBracket(d[2],i);if(!c)return[l];var g=new p(c.row,c.column,c.row,c.column+1);return[l,g]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(i,u,o){var n=this.$brackets[i],a=1,d=new s(this,u.row,u.column),l=d.getCurrentToken();if(l||(l=d.stepForward()),!!l){o||(o=new RegExp("(\\.?"+l.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var c=u.column-d.getCurrentTokenColumn()-2,g=l.value;;){for(;c>=0;){var h=g.charAt(c);if(h==n){if(a-=1,a==0)return{row:d.getCurrentTokenRow(),column:c+d.getCurrentTokenColumn()}}else h==i&&(a+=1);c-=1}do l=d.stepBackward();while(l&&!o.test(l.type));if(l==null)break;g=l.value,c=g.length-1}return null}},this.$findClosingBracket=function(i,u,o){var n=this.$brackets[i],a=1,d=new s(this,u.row,u.column),l=d.getCurrentToken();if(l||(l=d.stepForward()),!!l){o||(o=new RegExp("(\\.?"+l.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var c=u.column-d.getCurrentTokenColumn();;){for(var g=l.value,h=g.length;c<h;){var v=g.charAt(c);if(v==n){if(a-=1,a==0)return{row:d.getCurrentTokenRow(),column:c+d.getCurrentTokenColumn()}}else v==i&&(a+=1);c+=1}do l=d.stepForward();while(l&&!o.test(l.type));if(l==null)break;c=0}return null}},this.getMatchingTags=function(i){var u=new s(this,i.row,i.column),o=this.$findTagName(u);if(o){var n=u.stepBackward();return n.value==="<"?this.$findClosingTag(u,o):this.$findOpeningTag(u,o)}},this.$findTagName=function(i){var u=i.getCurrentToken(),o=!1,n=!1;if(u&&u.type.indexOf("tag-name")===-1)do n?u=i.stepBackward():u=i.stepForward(),u&&(u.value==="/>"?n=!0:u.type.indexOf("tag-name")!==-1&&(o=!0));while(u&&!o);return u},this.$findClosingTag=function(i,u){var o,n=u.value,a=u.value,d=0,l=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);u=i.stepForward();var c=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u.value.length),g=!1;do{if(o=u,o.type.indexOf("tag-close")!==-1&&!g){var h=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);g=!0}if(u=i.stepForward(),u){if(u.value===">"&&!g){var h=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);g=!0}if(u.type.indexOf("tag-name")!==-1){if(n=u.value,a===n){if(o.value==="<")d++;else if(o.value==="</"&&(d--,d<0)){i.stepBackward();var v=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+2);u=i.stepForward();var k=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=i.stepForward()),u&&u.value===">")var x=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);else return}}}else if(a===n&&u.value==="/>"&&(d--,d<0))var v=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+2),k=v,x=k,h=new p(c.end.row,c.end.column,c.end.row,c.end.column+1)}}while(u&&d>=0);if(l&&h&&v&&x&&c&&k)return{openTag:new p(l.start.row,l.start.column,h.end.row,h.end.column),closeTag:new p(v.start.row,v.start.column,x.end.row,x.end.column),openTagName:c,closeTagName:k}},this.$findOpeningTag=function(i,u){var o=i.getCurrentToken(),n=u.value,a=0,d=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),c=l+2,g=new p(d,l,d,c);i.stepForward();var h=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=i.stepForward()),!(!u||u.value!==">")){var v=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);i.stepBackward(),i.stepBackward();do if(u=o,d=i.getCurrentTokenRow(),l=i.getCurrentTokenColumn(),c=l+u.value.length,o=i.stepBackward(),u){if(u.type.indexOf("tag-name")!==-1){if(n===u.value)if(o.value==="<"){if(a++,a>0){var k=new p(d,l,d,c),x=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);do u=i.stepForward();while(u&&u.value!==">");var A=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1)}}else o.value==="</"&&a--}else if(u.value==="/>"){for(var S=0,f=o;f;){if(f.type.indexOf("tag-name")!==-1&&f.value===n){a--;break}else if(f.value==="<")break;f=i.stepBackward(),S++}for(var L=0;L<S;L++)i.stepForward()}}while(o&&a<=0);if(x&&A&&g&&v&&k&&h)return{openTag:new p(x.start.row,x.start.column,A.end.row,A.end.column),closeTag:new p(g.start.row,g.start.column,v.end.row,v.end.column),openTagName:k,closeTagName:h}}}}t.BracketMatch=m});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,r){"use strict";var s=e("./lib/oop"),p=e("./lib/lang"),m=e("./bidihandler").BidiHandler,i=e("./config"),u=e("./lib/event_emitter").EventEmitter,o=e("./selection").Selection,n=e("./mode/text").Mode,a=e("./range").Range,d=e("./document").Document,l=e("./background_tokenizer").BackgroundTokenizer,c=e("./search_highlight").SearchHighlight,g=e("./undomanager").UndoManager,h=function(){function T(w,y){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++T.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new l(new n().getTokenizer(),this);var b=this;this.bgTokenizer.on("update",function(_){b._signal("tokenizerUpdate",_)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof w!="object"||!w.getLine)&&(w=new d(w)),this.setDocument(w),this.selection=new o(this),this.$bidiHandler=new m(this),i.resetOptions(this),this.setMode(y),i._signal("session",this),this.destroyed=!1}return T.prototype.setDocument=function(w){this.doc&&this.doc.off("change",this.$onChange),this.doc=w,w.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},T.prototype.getDocument=function(){return this.doc},T.prototype.$resetRowCache=function(w){if(!w){this.$docRowCache=[],this.$screenRowCache=[];return}var y=this.$docRowCache.length,b=this.$getRowCacheIndex(this.$docRowCache,w)+1;y>b&&(this.$docRowCache.splice(b,y),this.$screenRowCache.splice(b,y))},T.prototype.$getRowCacheIndex=function(w,y){for(var b=0,_=w.length-1;b<=_;){var E=b+_>>1,R=w[E];if(y>R)b=E+1;else if(y<R)_=E-1;else return E}return b-1},T.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},T.prototype.onChangeFold=function(w){var y=w.data;this.$resetRowCache(y.start.row)},T.prototype.onChange=function(w){this.$modified=!0,this.$bidiHandler.onChange(w),this.$resetRowCache(w.start.row);var y=this.$updateInternalDataOnChange(w);!this.$fromUndo&&this.$undoManager&&(y&&y.length&&(this.$undoManager.add({action:"removeFolds",folds:y},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(w,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(w),this._signal("change",w)},T.prototype.setValue=function(w){this.doc.setValue(w),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},T.fromJSON=function(w){typeof w=="string"&&(w=JSON.parse(w));var y=new g;y.$undoStack=w.history.undo,y.$redoStack=w.history.redo,y.mark=w.history.mark,y.$rev=w.history.rev;var b=new T(w.value);return w.folds.forEach(function(_){b.addFold("...",a.fromPoints(_.start,_.end))}),b.setAnnotations(w.annotations),b.setBreakpoints(w.breakpoints),b.setMode(w.mode),b.setScrollLeft(w.scrollLeft),b.setScrollTop(w.scrollTop),b.setUndoManager(y),b.selection.fromJSON(w.selection),b},T.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(w){return w.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},T.prototype.toString=function(){return this.doc.getValue()},T.prototype.getSelection=function(){return this.selection},T.prototype.getState=function(w){return this.bgTokenizer.getState(w)},T.prototype.getTokens=function(w){return this.bgTokenizer.getTokens(w)},T.prototype.getTokenAt=function(w,y){var b=this.bgTokenizer.getTokens(w),_,E=0;if(y==null){var R=b.length-1;E=this.getLine(w).length}else for(var R=0;R<b.length&&(E+=b[R].value.length,!(E>=y));R++);return _=b[R],_?(_.index=R,_.start=E-_.value.length,_):null},T.prototype.setUndoManager=function(w){if(this.$undoManager=w,this.$informUndoManager&&this.$informUndoManager.cancel(),w){var y=this;w.addSession(this),this.$syncInformUndoManager=function(){y.$informUndoManager.cancel(),y.mergeUndoDeltas=!1},this.$informUndoManager=p.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},T.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},T.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},T.prototype.getTabString=function(){return this.getUseSoftTabs()?p.stringRepeat(" ",this.getTabSize()):"	"},T.prototype.setUseSoftTabs=function(w){this.setOption("useSoftTabs",w)},T.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},T.prototype.setTabSize=function(w){this.setOption("tabSize",w)},T.prototype.getTabSize=function(){return this.$tabSize},T.prototype.isTabStop=function(w){return this.$useSoftTabs&&w.column%this.$tabSize===0},T.prototype.setNavigateWithinSoftTabs=function(w){this.setOption("navigateWithinSoftTabs",w)},T.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},T.prototype.setOverwrite=function(w){this.setOption("overwrite",w)},T.prototype.getOverwrite=function(){return this.$overwrite},T.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},T.prototype.addGutterDecoration=function(w,y){this.$decorations[w]||(this.$decorations[w]=""),this.$decorations[w]+=" "+y,this._signal("changeBreakpoint",{})},T.prototype.removeGutterDecoration=function(w,y){this.$decorations[w]=(this.$decorations[w]||"").replace(" "+y,""),this._signal("changeBreakpoint",{})},T.prototype.getBreakpoints=function(){return this.$breakpoints},T.prototype.setBreakpoints=function(w){this.$breakpoints=[];for(var y=0;y<w.length;y++)this.$breakpoints[w[y]]="ace_breakpoint";this._signal("changeBreakpoint",{})},T.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},T.prototype.setBreakpoint=function(w,y){y===void 0&&(y="ace_breakpoint"),y?this.$breakpoints[w]=y:delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},T.prototype.clearBreakpoint=function(w){delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},T.prototype.addMarker=function(w,y,b,_){var E=this.$markerId++,R={range:w,type:b||"line",renderer:typeof b=="function"?b:null,clazz:y,inFront:!!_,id:E};return _?(this.$frontMarkers[E]=R,this._signal("changeFrontMarker")):(this.$backMarkers[E]=R,this._signal("changeBackMarker")),E},T.prototype.addDynamicMarker=function(w,y){if(w.update){var b=this.$markerId++;return w.id=b,w.inFront=!!y,y?(this.$frontMarkers[b]=w,this._signal("changeFrontMarker")):(this.$backMarkers[b]=w,this._signal("changeBackMarker")),w}},T.prototype.removeMarker=function(w){var y=this.$frontMarkers[w]||this.$backMarkers[w];if(y){var b=y.inFront?this.$frontMarkers:this.$backMarkers;delete b[w],this._signal(y.inFront?"changeFrontMarker":"changeBackMarker")}},T.prototype.getMarkers=function(w){return w?this.$frontMarkers:this.$backMarkers},T.prototype.highlight=function(w){if(!this.$searchHighlight){var y=new c(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(y)}this.$searchHighlight.setRegexp(w)},T.prototype.highlightLines=function(w,y,b,_){typeof y!="number"&&(b=y,y=w),b||(b="ace_step");var E=new a(w,0,y,1/0);return E.id=this.addMarker(E,b,"fullLine",_),E},T.prototype.setAnnotations=function(w){this.$annotations=w,this._signal("changeAnnotation",{})},T.prototype.getAnnotations=function(){return this.$annotations||[]},T.prototype.clearAnnotations=function(){this.setAnnotations([])},T.prototype.$detectNewLine=function(w){var y=w.match(/^.*?(\r?\n)/m);y?this.$autoNewLine=y[1]:this.$autoNewLine=`
`},T.prototype.getWordRange=function(w,y){var b=this.getLine(w),_=!1;if(y>0&&(_=!!b.charAt(y-1).match(this.tokenRe)),_||(_=!!b.charAt(y).match(this.tokenRe)),_)var E=this.tokenRe;else if(/^\s+$/.test(b.slice(y-1,y+1)))var E=/\s/;else var E=this.nonTokenRe;var R=y;if(R>0){do R--;while(R>=0&&b.charAt(R).match(E));R++}for(var M=y;M<b.length&&b.charAt(M).match(E);)M++;return new a(w,R,w,M)},T.prototype.getAWordRange=function(w,y){for(var b=this.getWordRange(w,y),_=this.getLine(b.end.row);_.charAt(b.end.column).match(/[ \t]/);)b.end.column+=1;return b},T.prototype.setNewLineMode=function(w){this.doc.setNewLineMode(w)},T.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},T.prototype.setUseWorker=function(w){this.setOption("useWorker",w)},T.prototype.getUseWorker=function(){return this.$useWorker},T.prototype.onReloadTokenizer=function(w){var y=w.data;this.bgTokenizer.start(y.first),this._signal("tokenizerUpdate",w)},T.prototype.setMode=function(w,y){if(w&&typeof w=="object"){if(w.getTokenizer)return this.$onChangeMode(w);var b=w,_=b.path}else _=w||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new n),this.$modes[_]&&!b){this.$onChangeMode(this.$modes[_]),y&&y();return}this.$modeId=_,i.loadModule(["mode",_],function(E){if(this.$modeId!==_)return y&&y();this.$modes[_]&&!b?this.$onChangeMode(this.$modes[_]):E&&E.Mode&&(E=new E.Mode(b),b||(this.$modes[_]=E,E.$id=_),this.$onChangeMode(E)),y&&y()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},T.prototype.$onChangeMode=function(w,y){if(y||(this.$modeId=w.$id),this.$mode!==w){var b=this.$mode;this.$mode=w,this.$stopWorker(),this.$useWorker&&this.$startWorker();var _=w.getTokenizer();if(_.on!==void 0){var E=this.onReloadTokenizer.bind(this);_.on("update",E)}this.bgTokenizer.setTokenizer(_),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=w.tokenRe,this.nonTokenRe=w.nonTokenRe,y||(w.attachToSession&&w.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(w.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:b,mode:w}))}},T.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},T.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(w){i.warn("Could not load worker",w),this.$worker=null}},T.prototype.getMode=function(){return this.$mode},T.prototype.setScrollTop=function(w){this.$scrollTop===w||isNaN(w)||(this.$scrollTop=w,this._signal("changeScrollTop",w))},T.prototype.getScrollTop=function(){return this.$scrollTop},T.prototype.setScrollLeft=function(w){this.$scrollLeft===w||isNaN(w)||(this.$scrollLeft=w,this._signal("changeScrollLeft",w))},T.prototype.getScrollLeft=function(){return this.$scrollLeft},T.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},T.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var w=0;return this.lineWidgets.forEach(function(y){y&&y.screenWidth>w&&(w=y.screenWidth)}),this.lineWidgetWidth=w},T.prototype.$computeWidth=function(w){if(this.$modified||w){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var y=this.doc.getAllLines(),b=this.$rowLengthCache,_=0,E=0,R=this.$foldData[E],M=R?R.start.row:1/0,I=y.length,D=0;D<I;D++){if(D>M){if(D=R.end.row+1,D>=I)break;R=this.$foldData[E++],M=R?R.start.row:1/0}b[D]==null&&(b[D]=this.$getStringScreenWidth(y[D])[0]),b[D]>_&&(_=b[D])}this.screenWidth=_}},T.prototype.getLine=function(w){return this.doc.getLine(w)},T.prototype.getLines=function(w,y){return this.doc.getLines(w,y)},T.prototype.getLength=function(){return this.doc.getLength()},T.prototype.getTextRange=function(w){return this.doc.getTextRange(w||this.selection.getRange())},T.prototype.insert=function(w,y){return this.doc.insert(w,y)},T.prototype.remove=function(w){return this.doc.remove(w)},T.prototype.removeFullLines=function(w,y){return this.doc.removeFullLines(w,y)},T.prototype.undoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=w.length-1;b!=-1;b--){var _=w[b];_.action=="insert"||_.action=="remove"?this.doc.revertDelta(_):_.folds&&this.addFolds(_.folds)}!y&&this.$undoSelect&&(w.selectionBefore?this.selection.fromJSON(w.selectionBefore):this.selection.setRange(this.$getUndoSelection(w,!0))),this.$fromUndo=!1}},T.prototype.redoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=0;b<w.length;b++){var _=w[b];(_.action=="insert"||_.action=="remove")&&this.doc.$safeApplyDelta(_)}!y&&this.$undoSelect&&(w.selectionAfter?this.selection.fromJSON(w.selectionAfter):this.selection.setRange(this.$getUndoSelection(w,!1))),this.$fromUndo=!1}},T.prototype.setUndoSelect=function(w){this.$undoSelect=w},T.prototype.$getUndoSelection=function(w,y){function b(I){return y?I.action!=="insert":I.action==="insert"}for(var _,E,R=0;R<w.length;R++){var M=w[R];if(M.start){if(!_){b(M)?_=a.fromPoints(M.start,M.end):_=a.fromPoints(M.start,M.start);continue}b(M)?(E=M.start,_.compare(E.row,E.column)==-1&&_.setStart(E),E=M.end,_.compare(E.row,E.column)==1&&_.setEnd(E)):(E=M.start,_.compare(E.row,E.column)==-1&&(_=a.fromPoints(M.start,M.start)))}}return _},T.prototype.replace=function(w,y){return this.doc.replace(w,y)},T.prototype.moveText=function(w,y,b){var _=this.getTextRange(w),E=this.getFoldsInRange(w),R=a.fromPoints(y,y);if(!b){this.remove(w);var M=w.start.row-w.end.row,I=M?-w.end.column:w.start.column-w.end.column;I&&(R.start.row==w.end.row&&R.start.column>w.end.column&&(R.start.column+=I),R.end.row==w.end.row&&R.end.column>w.end.column&&(R.end.column+=I)),M&&R.start.row>=w.end.row&&(R.start.row+=M,R.end.row+=M)}if(R.end=this.insert(R.start,_),E.length){var D=w.start,O=R.start,M=O.row-D.row,I=O.column-D.column;this.addFolds(E.map(function(F){return F=F.clone(),F.start.row==D.row&&(F.start.column+=I),F.end.row==D.row&&(F.end.column+=I),F.start.row+=M,F.end.row+=M,F}))}return R},T.prototype.indentRows=function(w,y,b){b=b.replace(/\t/g,this.getTabString());for(var _=w;_<=y;_++)this.doc.insertInLine({row:_,column:0},b)},T.prototype.outdentRows=function(w){for(var y=w.collapseRows(),b=new a(0,0,0,0),_=this.getTabSize(),E=y.start.row;E<=y.end.row;++E){var R=this.getLine(E);b.start.row=E,b.end.row=E;for(var M=0;M<_&&R.charAt(M)==" ";++M);M<_&&R.charAt(M)=="	"?(b.start.column=M,b.end.column=M+1):(b.start.column=0,b.end.column=M),this.remove(b)}},T.prototype.$moveLines=function(w,y,b){if(w=this.getRowFoldStart(w),y=this.getRowFoldEnd(y),b<0){var _=this.getRowFoldStart(w+b);if(_<0)return 0;var E=_-w}else if(b>0){var _=this.getRowFoldEnd(y+b);if(_>this.doc.getLength()-1)return 0;var E=_-y}else{w=this.$clipRowToDocument(w),y=this.$clipRowToDocument(y);var E=y-w+1}var R=new a(w,0,y,Number.MAX_VALUE),M=this.getFoldsInRange(R).map(function(D){return D=D.clone(),D.start.row+=E,D.end.row+=E,D}),I=b==0?this.doc.getLines(w,y):this.doc.removeFullLines(w,y);return this.doc.insertFullLines(w+E,I),M.length&&this.addFolds(M),E},T.prototype.moveLinesUp=function(w,y){return this.$moveLines(w,y,-1)},T.prototype.moveLinesDown=function(w,y){return this.$moveLines(w,y,1)},T.prototype.duplicateLines=function(w,y){return this.$moveLines(w,y,0)},T.prototype.$clipRowToDocument=function(w){return Math.max(0,Math.min(w,this.doc.getLength()-1))},T.prototype.$clipColumnToRow=function(w,y){return y<0?0:Math.min(this.doc.getLine(w).length,y)},T.prototype.$clipPositionToDocument=function(w,y){if(y=Math.max(0,y),w<0)w=0,y=0;else{var b=this.doc.getLength();w>=b?(w=b-1,y=this.doc.getLine(b-1).length):y=Math.min(this.doc.getLine(w).length,y)}return{row:w,column:y}},T.prototype.$clipRangeToDocument=function(w){w.start.row<0?(w.start.row=0,w.start.column=0):w.start.column=this.$clipColumnToRow(w.start.row,w.start.column);var y=this.doc.getLength()-1;return w.end.row>y?(w.end.row=y,w.end.column=this.doc.getLine(y).length):w.end.column=this.$clipColumnToRow(w.end.row,w.end.column),w},T.prototype.setUseWrapMode=function(w){if(w!=this.$useWrapMode){if(this.$useWrapMode=w,this.$modified=!0,this.$resetRowCache(0),w){var y=this.getLength();this.$wrapData=Array(y),this.$updateWrapData(0,y-1)}this._signal("changeWrapMode")}},T.prototype.getUseWrapMode=function(){return this.$useWrapMode},T.prototype.setWrapLimitRange=function(w,y){(this.$wrapLimitRange.min!==w||this.$wrapLimitRange.max!==y)&&(this.$wrapLimitRange={min:w,max:y},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},T.prototype.adjustWrapLimit=function(w,y){var b=this.$wrapLimitRange;b.max<0&&(b={min:y,max:y});var _=this.$constrainWrapLimit(w,b.min,b.max);return _!=this.$wrapLimit&&_>1?(this.$wrapLimit=_,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},T.prototype.$constrainWrapLimit=function(w,y,b){return y&&(w=Math.max(y,w)),b&&(w=Math.min(b,w)),w},T.prototype.getWrapLimit=function(){return this.$wrapLimit},T.prototype.setWrapLimit=function(w){this.setWrapLimitRange(w,w)},T.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},T.prototype.$updateInternalDataOnChange=function(w){var y=this.$useWrapMode,b=w.action,_=w.start,E=w.end,R=_.row,M=E.row,I=M-R,D=null;if(this.$updating=!0,I!=0)if(b==="remove"){this[y?"$wrapData":"$rowLengthCache"].splice(R,I);var O=this.$foldData;D=this.getFoldsInRange(w),this.removeFolds(D);var N=this.getFoldLine(E.row),P=0;if(N){N.addRemoveChars(E.row,E.column,_.column-E.column),N.shiftRow(-I);var F=this.getFoldLine(R);F&&F!==N&&(F.merge(N),N=F),P=O.indexOf(N)+1}for(P;P<O.length;P++){var N=O[P];N.start.row>=E.row&&N.shiftRow(-I)}M=R}else{var z=Array(I);z.unshift(R,0);var W=y?this.$wrapData:this.$rowLengthCache;W.splice.apply(W,z);var O=this.$foldData,N=this.getFoldLine(R),P=0;if(N){var j=N.range.compareInside(_.row,_.column);j==0?(N=N.split(_.row,_.column),N&&(N.shiftRow(I),N.addRemoveChars(M,0,E.column-_.column))):j==-1&&(N.addRemoveChars(R,0,E.column-_.column),N.shiftRow(I)),P=O.indexOf(N)+1}for(P;P<O.length;P++){var N=O[P];N.start.row>=R&&N.shiftRow(I)}}else{I=Math.abs(w.start.column-w.end.column),b==="remove"&&(D=this.getFoldsInRange(w),this.removeFolds(D),I=-I);var N=this.getFoldLine(R);N&&N.addRemoveChars(R,_.column,I)}return y&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,y?this.$updateWrapData(R,M):this.$updateRowLengthCache(R,M),D},T.prototype.$updateRowLengthCache=function(w,y){this.$rowLengthCache[w]=null,this.$rowLengthCache[y]=null},T.prototype.$updateWrapData=function(w,y){var b=this.doc.getAllLines(),_=this.getTabSize(),E=this.$wrapData,R=this.$wrapLimit,M,I,D=w;for(y=Math.min(y,b.length-1);D<=y;)I=this.getFoldLine(D,I),I?(M=[],I.walk(function(O,N,P,F){var z;if(O!=null){z=this.$getDisplayTokens(O,M.length),z[0]=x;for(var W=1;W<z.length;W++)z[W]=A}else z=this.$getDisplayTokens(b[N].substring(F,P),M.length);M=M.concat(z)}.bind(this),I.end.row,b[I.end.row].length+1),E[I.start.row]=this.$computeWrapSplits(M,R,_),D=I.end.row+1):(M=this.$getDisplayTokens(b[D]),E[D]=this.$computeWrapSplits(M,R,_),D++)},T.prototype.$computeWrapSplits=function(w,y,b){if(w.length==0)return[];var _=[],E=w.length,R=0,M=0,I=this.$wrapAsCode,D=this.$indentedSoftWrap,O=y<=Math.max(2*b,8)||D===!1?0:Math.floor(y/2);function N(){var j=0;if(O===0)return j;if(D)for(var Z=0;Z<w.length;Z++){var Y=w[Z];if(Y==f)j+=1;else if(Y==L)j+=b;else{if(Y==$)continue;break}}return I&&D!==!1&&(j+=b),Math.min(j,O)}function P(j){for(var Z=j-R,Y=R;Y<j;Y++){var q=w[Y];(q===12||q===2)&&(Z-=1)}_.length||(F=N(),_.indent=F),M+=Z,_.push(M),R=j}for(var F=0;E-R>y-F;){var z=R+y-F;if(w[z-1]>=f&&w[z]>=f){P(z);continue}if(w[z]==x||w[z]==A){for(z;z!=R-1&&w[z]!=x;z--);if(z>R){P(z);continue}for(z=R+y,z;z<w.length&&w[z]==A;z++);if(z==w.length)break;P(z);continue}for(var W=Math.max(z-(y-(y>>2)),R-1);z>W&&w[z]<x;)z--;if(I){for(;z>W&&w[z]<x;)z--;for(;z>W&&w[z]==S;)z--}else for(;z>W&&w[z]<f;)z--;if(z>W){P(++z);continue}z=R+y,w[z]==k&&z--,P(z-F)}return _},T.prototype.$getDisplayTokens=function(w,y){var b=[],_;y=y||0;for(var E=0;E<w.length;E++){var R=w.charCodeAt(E);if(R==9){_=this.getScreenTabSize(b.length+y),b.push(L);for(var M=1;M<_;M++)b.push($)}else R==32?b.push(f):R>39&&R<48||R>57&&R<64?b.push(S):R>=4352&&C(R)?b.push(v,k):b.push(v)}return b},T.prototype.$getStringScreenWidth=function(w,y,b){if(y==0)return[0,0];y==null&&(y=1/0),b=b||0;var _,E;for(E=0;E<w.length&&(_=w.charCodeAt(E),_==9?b+=this.getScreenTabSize(b):_>=4352&&C(_)?b+=2:b+=1,!(b>y));E++);return[b,E]},T.prototype.getRowLength=function(w){var y=1;return this.lineWidgets&&(y+=this.lineWidgets[w]&&this.lineWidgets[w].rowCount||0),!this.$useWrapMode||!this.$wrapData[w]?y:this.$wrapData[w].length+y},T.prototype.getRowLineCount=function(w){return!this.$useWrapMode||!this.$wrapData[w]?1:this.$wrapData[w].length+1},T.prototype.getRowWrapIndent=function(w){if(this.$useWrapMode){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE),b=this.$wrapData[y.row];return b.length&&b[0]<y.column?b.indent:0}else return 0},T.prototype.getScreenLastRowColumn=function(w){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE);return this.documentToScreenColumn(y.row,y.column)},T.prototype.getDocumentLastRowColumn=function(w,y){var b=this.documentToScreenRow(w,y);return this.getScreenLastRowColumn(b)},T.prototype.getDocumentLastRowColumnPosition=function(w,y){var b=this.documentToScreenRow(w,y);return this.screenToDocumentPosition(b,Number.MAX_VALUE/10)},T.prototype.getRowSplitData=function(w){if(this.$useWrapMode)return this.$wrapData[w]},T.prototype.getScreenTabSize=function(w){return this.$tabSize-(w%this.$tabSize|0)},T.prototype.screenToDocumentRow=function(w,y){return this.screenToDocumentPosition(w,y).row},T.prototype.screenToDocumentColumn=function(w,y){return this.screenToDocumentPosition(w,y).column},T.prototype.screenToDocumentPosition=function(w,y,b){if(w<0)return{row:0,column:0};var _,E=0,R=0,M,I=0,D=0,O=this.$screenRowCache,N=this.$getRowCacheIndex(O,w),P=O.length;if(P&&N>=0)var I=O[N],E=this.$docRowCache[N],F=w>O[P-1];else var F=!P;for(var z=this.getLength()-1,W=this.getNextFoldLine(E),j=W?W.start.row:1/0;I<=w&&(D=this.getRowLength(E),!(I+D>w||E>=z));)I+=D,E++,E>j&&(E=W.end.row+1,W=this.getNextFoldLine(E,W),j=W?W.start.row:1/0),F&&(this.$docRowCache.push(E),this.$screenRowCache.push(I));if(W&&W.start.row<=E)_=this.getFoldDisplayLine(W),E=W.start.row;else{if(I+D<=w||E>z)return{row:z,column:this.getLine(z).length};_=this.getLine(E),W=null}var Z=0,Y=Math.floor(w-I);if(this.$useWrapMode){var q=this.$wrapData[E];q&&(M=q[Y],Y>0&&q.length&&(Z=q.indent,R=q[Y-1]||q[q.length-1],_=_.substring(R)))}return b!==void 0&&this.$bidiHandler.isBidiRow(I+Y,E,Y)&&(y=this.$bidiHandler.offsetToCol(b)),R+=this.$getStringScreenWidth(_,y-Z)[1],this.$useWrapMode&&R>=M&&(R=M-1),W?W.idxToPosition(R):{row:E,column:R}},T.prototype.documentToScreenPosition=function(w,y){if(typeof y>"u")var b=this.$clipPositionToDocument(w.row,w.column);else b=this.$clipPositionToDocument(w,y);w=b.row,y=b.column;var _=0,E=null,R=null;R=this.getFoldAt(w,y,1),R&&(w=R.start.row,y=R.start.column);var M,I=0,D=this.$docRowCache,O=this.$getRowCacheIndex(D,w),N=D.length;if(N&&O>=0)var I=D[O],_=this.$screenRowCache[O],P=w>D[N-1];else var P=!N;for(var F=this.getNextFoldLine(I),z=F?F.start.row:1/0;I<w;){if(I>=z){if(M=F.end.row+1,M>w)break;F=this.getNextFoldLine(M,F),z=F?F.start.row:1/0}else M=I+1;_+=this.getRowLength(I),I=M,P&&(this.$docRowCache.push(I),this.$screenRowCache.push(_))}var W="";F&&I>=z?(W=this.getFoldDisplayLine(F,w,y),E=F.start.row):(W=this.getLine(w).substring(0,y),E=w);var j=0;if(this.$useWrapMode){var Z=this.$wrapData[E];if(Z){for(var Y=0;W.length>=Z[Y];)_++,Y++;W=W.substring(Z[Y-1]||0,W.length),j=Y>0?Z.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(_+=this.lineWidgets[I].rowsAbove),{row:_,column:j+this.$getStringScreenWidth(W)[0]}},T.prototype.documentToScreenColumn=function(w,y){return this.documentToScreenPosition(w,y).column},T.prototype.documentToScreenRow=function(w,y){return this.documentToScreenPosition(w,y).row},T.prototype.getScreenLength=function(){var w=0,y=null;if(this.$useWrapMode)for(var E=this.$wrapData.length,R=0,_=0,y=this.$foldData[_++],M=y?y.start.row:1/0;R<E;){var I=this.$wrapData[R];w+=I?I.length+1:1,R++,R>M&&(R=y.end.row+1,y=this.$foldData[_++],M=y?y.start.row:1/0)}else{w=this.getLength();for(var b=this.$foldData,_=0;_<b.length;_++)y=b[_],w-=y.end.row-y.start.row}return this.lineWidgets&&(w+=this.$getWidgetScreenLength()),w},T.prototype.$setFontMetrics=function(w){this.$enableVarChar&&(this.$getStringScreenWidth=function(y,b,_){if(b===0)return[0,0];b||(b=1/0),_=_||0;var E,R;for(R=0;R<y.length&&(E=y.charAt(R),E==="	"?_+=this.getScreenTabSize(_):_+=w.getCharacterWidth(E),!(_>b));R++);return[_,R]})},T.prototype.getPrecedingCharacter=function(){var w=this.selection.getCursor();if(w.column===0)return w.row===0?"":this.doc.getNewLineCharacter();var y=this.getLine(w.row);return y[w.column-1]},T.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},T}();h.$uid=0,h.prototype.$modes=i.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=C,s.implement(h.prototype,u);var v=1,k=2,x=3,A=4,S=9,f=10,L=11,$=12;function C(T){return T<4352?!1:T>=4352&&T<=4447||T>=4515&&T<=4519||T>=4602&&T<=4607||T>=9001&&T<=9002||T>=11904&&T<=11929||T>=11931&&T<=12019||T>=12032&&T<=12245||T>=12272&&T<=12283||T>=12288&&T<=12350||T>=12353&&T<=12438||T>=12441&&T<=12543||T>=12549&&T<=12589||T>=12593&&T<=12686||T>=12688&&T<=12730||T>=12736&&T<=12771||T>=12784&&T<=12830||T>=12832&&T<=12871||T>=12880&&T<=13054||T>=13056&&T<=19903||T>=19968&&T<=42124||T>=42128&&T<=42182||T>=43360&&T<=43388||T>=44032&&T<=55203||T>=55216&&T<=55238||T>=55243&&T<=55291||T>=63744&&T<=64255||T>=65040&&T<=65049||T>=65072&&T<=65106||T>=65108&&T<=65126||T>=65128&&T<=65131||T>=65281&&T<=65376||T>=65504&&T<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),i.defineOptions(h.prototype,"session",{wrap:{set:function(T){if(!T||T=="off"?T=!1:T=="free"?T=!0:T=="printMargin"?T=-1:typeof T=="string"&&(T=parseInt(T,10)||!1),this.$wrap!=T)if(this.$wrap=T,!T)this.setUseWrapMode(!1);else{var w=typeof T=="number"?T:null;this.setWrapLimitRange(w,w),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(T){T=T=="auto"?this.$mode.type!="text":T!="text",T!=this.$wrapAsCode&&(this.$wrapAsCode=T,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(T){this.$useWorker=T,this.$stopWorker(),T&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(T){T=parseInt(T),T>0&&this.$tabSize!==T&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=T,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(T){this.setFoldStyle(T)},handlesSet:!0},overwrite:{set:function(T){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(T){this.doc.setNewLineMode(T)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(T){this.setMode(T)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,r){"use strict";var s=e("./lib/lang"),p=e("./lib/oop"),m=e("./range").Range,i=function(){function o(){this.$options={}}return o.prototype.set=function(n){return p.mixin(this.$options,n),this},o.prototype.getOptions=function(){return s.copyObject(this.$options)},o.prototype.setOptions=function(n){this.$options=n},o.prototype.find=function(n){var a=this.$options,d=this.$matchIterator(n,a);if(!d)return!1;var l=null;return d.forEach(function(c,g,h,v){return l=new m(c,g,h,v),g==v&&a.start&&a.start.start&&a.skipCurrent!=!1&&l.isEqual(a.start)?(l=null,!1):!0}),l},o.prototype.findAll=function(n){var a=this.$options;if(!a.needle)return[];this.$assembleRegExp(a);var d=a.range,l=d?n.getLines(d.start.row,d.end.row):n.doc.getAllLines(),c=[],g=a.re;if(a.$isMultiLine){var h=g.length,v=l.length-h,k;t:for(var x=g.offset||0;x<=v;x++){for(var A=0;A<h;A++)if(l[x+A].search(g[A])==-1)continue t;var S=l[x],f=l[x+h-1],L=S.length-S.match(g[0])[0].length,$=f.match(g[h-1])[0].length;k&&k.end.row===x&&k.end.column>L||(c.push(k=new m(x,L,x+h-1,$)),h>2&&(x=x+h-2))}}else for(var C=0;C<l.length;C++)for(var T=s.getMatchOffsets(l[C],g),A=0;A<T.length;A++){var w=T[A];c.push(new m(C,w.offset,C,w.offset+w.length))}if(d){for(var y=d.start.column,b=d.end.column,C=0,A=c.length-1;C<A&&c[C].start.column<y&&c[C].start.row==0;)C++;for(var _=d.end.row-d.start.row;C<A&&c[A].end.column>b&&c[A].end.row==_;)A--;for(c=c.slice(C,A+1),C=0,A=c.length;C<A;C++)c[C].start.row+=d.start.row,c[C].end.row+=d.start.row}return c},o.prototype.replace=function(n,a){var d=this.$options,l=this.$assembleRegExp(d);if(d.$isMultiLine)return a;if(l){var c=l.exec(n);if(!c||c[0].length!=n.length)return null;if(d.regExp||(a=a.replace(/\$/g,"$$$$")),a=n.replace(l,a),d.preserveCase){a=a.split("");for(var g=Math.min(n.length,n.length);g--;){var h=n[g];h&&h.toLowerCase()!=h?a[g]=a[g].toUpperCase():a[g]=a[g].toLowerCase()}a=a.join("")}return a}},o.prototype.$assembleRegExp=function(n,a){if(n.needle instanceof RegExp)return n.re=n.needle;var d=n.needle;if(!n.needle)return n.re=!1;n.regExp||(d=s.escapeRegExp(d));var l=n.caseSensitive?"gm":"gmi";try{new RegExp(d,"u"),n.$supportsUnicodeFlag=!0,l+="u"}catch{n.$supportsUnicodeFlag=!1}if(n.wholeWord&&(d=u(d,n)),n.$isMultiLine=!a&&/[\n\r]/.test(d),n.$isMultiLine)return n.re=this.$assembleMultilineRegExp(d,l);try{var c=new RegExp(d,l)}catch{c=!1}return n.re=c},o.prototype.$assembleMultilineRegExp=function(n,a){for(var d=n.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),l=[],c=0;c<d.length;c++)try{l.push(new RegExp(d[c],a))}catch{return!1}return l},o.prototype.$matchIterator=function(n,a){var d=this.$assembleRegExp(a);if(!d)return!1;var l=a.backwards==!0,c=a.skipCurrent!=!1,g=d.unicode,h=a.range,v=a.start;v||(v=h?h[l?"end":"start"]:n.selection.getRange()),v.start&&(v=v[c!=l?"end":"start"]);var k=h?h.start.row:0,x=h?h.end.row:n.getLength()-1;if(l)var A=function(L){var $=v.row;if(!f($,v.column,L)){for($--;$>=k;$--)if(f($,Number.MAX_VALUE,L))return;if(a.wrap!=!1){for($=x,k=v.row;$>=k;$--)if(f($,Number.MAX_VALUE,L))return}}};else var A=function($){var C=v.row;if(!f(C,v.column,$)){for(C=C+1;C<=x;C++)if(f(C,0,$))return;if(a.wrap!=!1){for(C=k,x=v.row;C<=x;C++)if(f(C,0,$))return}}};if(a.$isMultiLine)var S=d.length,f=function(L,$,C){var T=l?L-S+1:L;if(!(T<0||T+S>n.getLength())){var w=n.getLine(T),y=w.search(d[0]);if(!(!l&&y<$||y===-1)){for(var b=1;b<S;b++)if(w=n.getLine(T+b),w.search(d[b])==-1)return;var _=w.match(d[S-1])[0].length;if(!(l&&_>$)&&C(T,y,T+S-1,_))return!0}}};else if(l)var f=function($,C,T){var w=n.getLine($),y=[],b,_=0;for(d.lastIndex=0;b=d.exec(w);){var E=b[0].length;if(_=b.index,!E){if(_>=w.length)break;d.lastIndex=_+=s.skipEmptyMatch(w,_,g)}if(b.index+E>C)break;y.push(b.index,E)}for(var R=y.length-1;R>=0;R-=2){var M=y[R-1],E=y[R];if(T($,M,$,M+E))return!0}};else var f=function($,C,T){var w=n.getLine($),y,b;for(d.lastIndex=C;b=d.exec(w);){var _=b[0].length;if(y=b.index,T($,y,$,y+_))return!0;if(!_&&(d.lastIndex=y+=s.skipEmptyMatch(w,y,g),y>=w.length))return!1}};return{forEach:A}},o}();function u(o,n){var a=s.supportsLookbehind();function d(h,v){v===void 0&&(v=!0);var k=a&&n.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return k.test(h)||n.regExp?a&&n.$supportsUnicodeFlag?v?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var l=Array.from(o),c=l[0],g=l[l.length-1];return d(c)+o+d(g,!1)}t.Search=i});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var a=function(d,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])},a(d,l)};return function(d,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(d,l);function c(){this.constructor=d}d.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}(),p=e("../lib/keys"),m=e("../lib/useragent"),i=p.KEY_MODS,u=function(){function a(d,l){this.$init(d,l,!1)}return a.prototype.$init=function(d,l,c){this.platform=l||(m.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(d),this.$singleCommand=c},a.prototype.addCommand=function(d){this.commands[d.name]&&this.removeCommand(d),this.commands[d.name]=d,d.bindKey&&this._buildKeyHash(d)},a.prototype.removeCommand=function(d,l){var c=d&&(typeof d=="string"?d:d.name);d=this.commands[c],l||delete this.commands[c];var g=this.commandKeyBinding;for(var h in g){var v=g[h];if(v==d)delete g[h];else if(Array.isArray(v)){var k=v.indexOf(d);k!=-1&&(v.splice(k,1),v.length==1&&(g[h]=v[0]))}}},a.prototype.bindKey=function(d,l,c){if(typeof d=="object"&&d&&(c==null&&(c=d.position),d=d[this.platform]),!!d){if(typeof l=="function")return this.addCommand({exec:l,bindKey:d,name:l.name||d});d.split("|").forEach(function(g){var h="";if(g.indexOf(" ")!=-1){var v=g.split(/\s+/);g=v.pop(),v.forEach(function(A){var S=this.parseKeys(A),f=i[S.hashId]+S.key;h+=(h?" ":"")+f,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var k=this.parseKeys(g),x=i[k.hashId]+k.key;this._addCommandToBinding(h+x,l,c)},this)}},a.prototype._addCommandToBinding=function(d,l,c){var g=this.commandKeyBinding,h;if(!l)delete g[d];else if(!g[d]||this.$singleCommand)g[d]=l;else{Array.isArray(g[d])?(h=g[d].indexOf(l))!=-1&&g[d].splice(h,1):g[d]=[g[d]],typeof c!="number"&&(c=o(l));var v=g[d];for(h=0;h<v.length;h++){var k=v[h],x=o(k);if(x>c)break}v.splice(h,0,l)}},a.prototype.addCommands=function(d){d&&Object.keys(d).forEach(function(l){var c=d[l];if(c){if(typeof c=="string")return this.bindKey(c,l);typeof c=="function"&&(c={exec:c}),typeof c=="object"&&(c.name||(c.name=l),this.addCommand(c))}},this)},a.prototype.removeCommands=function(d){Object.keys(d).forEach(function(l){this.removeCommand(d[l])},this)},a.prototype.bindKeys=function(d){Object.keys(d).forEach(function(l){this.bindKey(l,d[l])},this)},a.prototype._buildKeyHash=function(d){this.bindKey(d.bindKey,d)},a.prototype.parseKeys=function(d){var l=d.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x}),c=l.pop(),g=p[c];if(p.FUNCTION_KEYS[g])c=p.FUNCTION_KEYS[g].toLowerCase();else if(l.length){if(l.length==1&&l[0]=="shift")return{key:c.toUpperCase(),hashId:-1}}else return{key:c,hashId:-1};for(var h=0,v=l.length;v--;){var k=p.KEY_MODS[l[v]];if(k==null)return typeof console<"u"&&console.error("invalid modifier "+l[v]+" in "+d),!1;h|=k}return{key:c,hashId:h}},a.prototype.findKeyCommand=function(d,l){var c=i[d]+l;return this.commandKeyBinding[c]},a.prototype.handleKeyboard=function(d,l,c,g){if(!(g<0)){var h=i[l]+c,v=this.commandKeyBinding[h];return d.$keyChain&&(d.$keyChain+=" "+h,v=this.commandKeyBinding[d.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(d.$keyChain=d.$keyChain||h,{command:"null"}):(d.$keyChain&&((!l||l==4)&&c.length==1?d.$keyChain=d.$keyChain.slice(0,-h.length-1):(l==-1||g>0)&&(d.$keyChain="")),{command:v})}},a.prototype.getStatusText=function(d,l){return l.$keyChain||""},a}();function o(a){return typeof a=="object"&&a.bindKey&&a.bindKey.position||(a.isDefault?-100:0)}var n=function(a){s(d,a);function d(l,c){var g=a.call(this,l,c)||this;return g.$singleCommand=!0,g}return d}(u);n.call=function(a,d,l){u.prototype.$init.call(a,d,l,!0)},u.call=function(a,d,l){u.prototype.$init.call(a,d,l,!1)},t.HashHandler=n,t.MultiHashHandler=u});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var o=function(n,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(d[c]=l[c])},o(n,a)};return function(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(n,a);function d(){this.constructor=n}n.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}(),p=e("../lib/oop"),m=e("../keyboard/hash_handler").MultiHashHandler,i=e("../lib/event_emitter").EventEmitter,u=function(o){s(n,o);function n(a,d){var l=o.call(this,d,a)||this;return l.byName=l.commands,l.setDefaultHandler("exec",function(c){return c.args?c.command.exec(c.editor,c.args,c.event,!1):c.command.exec(c.editor,{},c.event,!0)}),l}return n.prototype.exec=function(a,d,l){if(Array.isArray(a)){for(var c=a.length;c--;)if(this.exec(a[c],d,l))return!0;return!1}if(typeof a=="string"&&(a=this.commands[a]),!this.canExecute(a,d))return!1;var g={editor:d,command:a,args:l};return g.returnValue=this._emit("exec",g),this._signal("afterExec",g),g.returnValue!==!1},n.prototype.canExecute=function(a,d){return typeof a=="string"&&(a=this.commands[a]),!(!a||d&&d.$readOnly&&!a.readOnly||this.$checkCommandState!=!1&&a.isAvailable&&!a.isAvailable(d))},n.prototype.toggleRecording=function(a){if(!this.$inReplay)return a&&a._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(d){this.macro.push([d.command,d.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},n.prototype.replay=function(a){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=!0,this.macro.forEach(function(d){typeof d=="string"?this.exec(d,a):this.exec(d[0],a,d[1])},this)}finally{this.$inReplay=!1}}},n.prototype.trimMacro=function(a){return a.map(function(d){return typeof d[0]!="string"&&(d[0]=d[0].name),d[1]||(d=d[0]),d})},n}(m);p.implement(u.prototype,i),t.CommandManager=u});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,r){"use strict";var s=e("../lib/lang"),p=e("../config"),m=e("../range").Range;function i(o,n){return{win:o,mac:n}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:i("Ctrl-,","Command-,"),exec:function(o){p.loadModule("ace/ext/settings_menu",function(n){n.init(o),o.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:i("Alt-E","F4"),exec:function(o){p.loadModule("ace/ext/error_marker",function(n){n.showErrorMarker(o,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:i("Alt-Shift-E","Shift-F4"),exec:function(o){p.loadModule("ace/ext/error_marker",function(n){n.showErrorMarker(o,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:i("Ctrl-A","Command-A"),exec:function(o){o.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:i(null,"Ctrl-L"),exec:function(o){o.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:i("Ctrl-L","Command-L"),exec:function(o,n){typeof n=="number"&&!isNaN(n)&&o.gotoLine(n),o.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(o){o.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(o){o.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:i("F2","F2"),exec:function(o){o.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:i("Alt-F2","Alt-F2"),exec:function(o){o.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:i("Alt-0","Command-Option-0"),exec:function(o){o.session.foldAll(),o.session.unfold(o.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(o){o.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:i("Ctrl-K","Command-G"),exec:function(o){o.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(o){o.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:i("Alt-K","Ctrl-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:i("Ctrl-F","Command-F"),exec:function(o){p.loadModule("ace/ext/searchbox",function(n){n.Search(o)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(o){o.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:i("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(o){o.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(o){o.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:i("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(o){o.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:i("Up","Up|Ctrl-P"),exec:function(o,n){o.navigateUp(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:i("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(o){o.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(o){o.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:i("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(o){o.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:i("Down","Down|Ctrl-N"),exec:function(o,n){o.navigateDown(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(o){o.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:i("Ctrl-Left","Option-Left"),exec:function(o){o.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:i("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(o){o.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:i("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(o){o.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:i("Left","Left|Ctrl-B"),exec:function(o,n){o.navigateLeft(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(o){o.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:i("Ctrl-Right","Option-Right"),exec:function(o){o.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:i("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(o){o.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:i("Shift-Right","Shift-Right"),exec:function(o){o.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:i("Right","Right|Ctrl-F"),exec:function(o,n){o.navigateRight(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(o){o.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:i(null,"Option-PageDown"),exec:function(o){o.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(o){o.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(o){o.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:i(null,"Option-PageUp"),exec:function(o){o.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(o){o.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:i("Ctrl-Up",null),exec:function(o){o.renderer.scrollBy(0,-2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:i("Ctrl-Down",null),exec:function(o){o.renderer.scrollBy(0,2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(o){o.commands.toggleRecording(o)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(o){o.commands.replay(o)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:i("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(o){o.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:i("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(o){o.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:i("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(o){o.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(o){},readOnly:!0},{name:"cut",description:"Cut",exec:function(o){var n=o.$copyWithEmptySelection&&o.selection.isEmpty(),a=n?o.selection.getLineRange():o.selection.getRange();o._emit("cut",a),a.isEmpty()||o.session.remove(a),o.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(o,n){o.$handlePaste(n)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:i("Ctrl-D","Command-D"),exec:function(o){o.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(o){o.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(o){o.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:i("Ctrl-/","Command-/"),exec:function(o){o.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(o){o.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(o){o.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(o){o.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(o){p.loadModule("ace/ext/searchbox",function(n){n.Search(o,!0)})}},{name:"undo",description:"Undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(o){o.undo()}},{name:"redo",description:"Redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(o){o.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(o){o.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:i("Alt-Up","Option-Up"),exec:function(o){o.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(o){o.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:i("Alt-Down","Option-Down"),exec:function(o){o.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(o){o.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(o){o.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:i("Shift-Delete",null),exec:function(o){if(o.selection.isEmpty())o.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(o){o.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:i("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(o){o.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:i("Ctrl-Shift-Backspace",null),exec:function(o){var n=o.selection.getRange();n.start.column=0,o.session.remove(n)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:i("Ctrl-Shift-Delete",null),exec:function(o){var n=o.selection.getRange();n.end.column=Number.MAX_VALUE,o.session.remove(n)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(o){o.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(o){o.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(o){o.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:i("Tab","Tab"),exec:function(o){o.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(o){o.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(o){o.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(o,n){o.insert(n)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(o,n){o.insert(s.stringRepeat(n.text||"",n.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:i(null,"Ctrl-O"),exec:function(o){o.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:i("Alt-Shift-X","Ctrl-T"),exec:function(o){o.transposeLetters()},multiSelectAction:function(o){o.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(o){o.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(o){o.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:i(null,null),exec:function(o){o.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(o){var n=o.selection.getRange();n.start.column=n.end.column=0,n.end.row++,o.selection.setRange(n,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:i("Ctrl+F3","F3"),exec:function(o){o.openLink()}},{name:"joinlines",description:"Join lines",bindKey:i(null,null),exec:function(o){for(var n=o.selection.isBackwards(),a=n?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),d=n?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),l=o.session.doc.getLine(a.row).length,c=o.session.doc.getTextRange(o.selection.getRange()),g=c.replace(/\n\s*/," ").length,h=o.session.doc.getLine(a.row),v=a.row+1;v<=d.row+1;v++){var k=s.stringTrimLeft(s.stringTrimRight(o.session.doc.getLine(v)));k.length!==0&&(k=" "+k),h+=k}d.row+1<o.session.doc.getLength()-1&&(h+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new m(a.row,0,d.row+2,0),h),g>0?(o.selection.moveCursorTo(a.row,a.column),o.selection.selectTo(a.row,a.column+g)):(l=o.session.doc.getLine(a.row).length>l?l+1:l,o.selection.moveCursorTo(a.row,l))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:i(null,null),exec:function(o){var n=o.session.doc.getLength()-1,a=o.session.doc.getLine(n).length,d=o.selection.rangeList.ranges,l=[];d.length<1&&(d=[o.selection.getRange()]);for(var c=0;c<d.length;c++)c==d.length-1&&(d[c].end.row===n&&d[c].end.column===a||l.push(new m(d[c].end.row,d[c].end.column,n,a))),c===0?d[c].start.row===0&&d[c].start.column===0||l.push(new m(0,0,d[c].start.row,d[c].start.column)):l.push(new m(d[c-1].end.row,d[c-1].end.column,d[c].start.row,d[c].start.column));o.exitMultiSelectMode(),o.clearSelection();for(var c=0;c<l.length;c++)o.selection.addRange(l[c],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(o){o.selection.clearSelection(),o.navigateLineEnd(),o.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(o){o.selection.clearSelection();var n=o.getCursorPosition();o.selection.moveTo(n.row-1,Number.MAX_VALUE),o.insert(`
`),n.row===0&&o.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(o){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),o.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:i("F1","F1"),exec:function(o){o.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:i(null,null),exec:function(o){o.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)t.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(o){o.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var s=e("./lib/dom"),p=function(){function m(i){this.session=i,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return m.prototype.getRowLength=function(i){var u;return this.lineWidgets?u=this.lineWidgets[i]&&this.lineWidgets[i].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[i]?1+u:this.$wrapData[i].length+1+u},m.prototype.$getWidgetScreenLength=function(){var i=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(i+=u.rowCount)}),i},m.prototype.$onChangeEditor=function(i){this.attach(i.editor)},m.prototype.attach=function(i){i&&i.widgetManager&&i.widgetManager!=this&&i.widgetManager.detach(),this.editor!=i&&(this.detach(),this.editor=i,i&&(i.widgetManager=this,i.renderer.on("beforeRender",this.measureWidgets),i.renderer.on("afterRender",this.renderWidgets)))},m.prototype.detach=function(i){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var o=this.session.lineWidgets;o&&o.forEach(function(n){n&&n.el&&n.el.parentNode&&(n._inDocument=!1,n.el.parentNode.removeChild(n.el))})}},m.prototype.updateOnFold=function(i,u){var o=u.lineWidgets;if(!(!o||!i.action)){for(var n=i.data,a=n.start.row,d=n.end.row,l=i.action=="add",c=a+1;c<d;c++)o[c]&&(o[c].hidden=l);o[d]&&(l?o[a]?o[d].hidden=l:o[a]=o[d]:(o[a]==o[d]&&(o[a]=void 0),o[d].hidden=l))}},m.prototype.updateOnChange=function(i){var u=this.session.lineWidgets;if(u){var o=i.start.row,n=i.end.row-o;if(n!==0)if(i.action=="remove"){var a=u.splice(o+1,n);!u[o]&&a[a.length-1]&&(u[o]=a.pop()),a.forEach(function(l){l&&this.removeLineWidget(l)},this),this.$updateRows()}else{var d=new Array(n);u[o]&&u[o].column!=null&&i.start.column>u[o].column&&o++,d.unshift(o,0),u.splice.apply(u,d),this.$updateRows()}}},m.prototype.$updateRows=function(){var i=this.session.lineWidgets;if(i){var u=!0;i.forEach(function(o,n){if(o)for(u=!1,o.row=n;o.$oldWidget;)o.$oldWidget.row=n,o=o.$oldWidget}),u&&(this.session.lineWidgets=null)}},m.prototype.$registerLineWidget=function(i){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[i.row];return u&&(i.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[i.row]=i,i},m.prototype.addLineWidget=function(i){if(this.$registerLineWidget(i),i.session=this.session,!this.editor)return i;var u=this.editor.renderer;i.html&&!i.el&&(i.el=s.createElement("div"),i.el.innerHTML=i.html),i.text&&!i.el&&(i.el=s.createElement("div"),i.el.textContent=i.text),i.el&&(s.addCssClass(i.el,"ace_lineWidgetContainer"),i.className&&s.addCssClass(i.el,i.className),i.el.style.position="absolute",i.el.style.zIndex="5",u.container.appendChild(i.el),i._inDocument=!0,i.coverGutter||(i.el.style.zIndex="3"),i.pixelHeight==null&&(i.pixelHeight=i.el.offsetHeight)),i.rowCount==null&&(i.rowCount=i.pixelHeight/u.layerConfig.lineHeight);var o=this.session.getFoldAt(i.row,0);if(i.$fold=o,o){var n=this.session.lineWidgets;i.row==o.end.row&&!n[o.start.row]?n[o.start.row]=i:i.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:i.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(i),i},m.prototype.removeLineWidget=function(i){if(i._inDocument=!1,i.session=null,i.el&&i.el.parentNode&&i.el.parentNode.removeChild(i.el),i.editor&&i.editor.destroy)try{i.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[i.row];if(u==i)this.session.lineWidgets[i.row]=i.$oldWidget,i.$oldWidget&&this.onWidgetChanged(i.$oldWidget);else for(;u;){if(u.$oldWidget==i){u.$oldWidget=i.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:i.row}}}),this.$updateRows()},m.prototype.getWidgetsAtRow=function(i){for(var u=this.session.lineWidgets,o=u&&u[i],n=[];o;)n.push(o),o=o.$oldWidget;return n},m.prototype.onWidgetChanged=function(i){this.session._changedWidgets.push(i),this.editor&&this.editor.renderer.updateFull()},m.prototype.measureWidgets=function(i,u){var o=this.session._changedWidgets,n=u.layerConfig;if(!(!o||!o.length)){for(var a=1/0,d=0;d<o.length;d++){var l=o[d];if(!(!l||!l.el)&&l.session==this.session){if(!l._inDocument){if(this.session.lineWidgets[l.row]!=l)continue;l._inDocument=!0,u.container.appendChild(l.el)}l.h=l.el.offsetHeight,l.fixedWidth||(l.w=l.el.offsetWidth,l.screenWidth=Math.ceil(l.w/n.characterWidth));var c=l.h/n.lineHeight;l.coverLine&&(c-=this.session.getRowLineCount(l.row),c<0&&(c=0)),l.rowCount!=c&&(l.rowCount=c,l.row<a&&(a=l.row))}}a!=1/0&&(this.session._emit("changeFold",{data:{start:{row:a}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},m.prototype.renderWidgets=function(i,u){var o=u.layerConfig,n=this.session.lineWidgets;if(n){for(var a=Math.min(this.firstRow,o.firstRow),d=Math.max(this.lastRow,o.lastRow,n.length);a>0&&!n[a];)a--;this.firstRow=o.firstRow,this.lastRow=o.lastRow,u.$cursorLayer.config=o;for(var l=a;l<=d;l++){var c=n[l];if(!(!c||!c.el)){if(c.hidden){c.el.style.top=-100-(c.pixelHeight||0)+"px";continue}c._inDocument||(c._inDocument=!0,u.container.appendChild(c.el));var g=u.$cursorLayer.getPixelPosition({row:l,column:0},!0).top;c.coverLine||(g+=o.lineHeight*this.session.getRowLineCount(c.row)),c.el.style.top=g-o.offset+"px";var h=c.coverGutter?0:u.gutterWidth;c.fixedWidth||(h-=u.scrollLeft),c.el.style.left=h+"px",c.fullWidth&&c.screenWidth&&(c.el.style.minWidth=o.width+2*o.padding+"px"),c.fixedWidth?c.el.style.right=u.scrollBar.getWidth()+"px":c.el.style.right=""}}}},m}();t.LineWidgets=p});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,r){"use strict";var s=e("../lib/keys"),p=e("../mouse/default_gutter_handler").GutterTooltip,m=function(){function u(o){this.editor=o,this.gutterLayer=o.renderer.$gutterLayer,this.element=o.renderer.$gutter,this.lines=o.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new p(this.editor)}return u.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},u.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},u.prototype.$onGutterKeyDown=function(o){if(this.annotationTooltip.isOpen){o.preventDefault(),o.keyCode===s.escape&&this.annotationTooltip.hideTooltip();return}if(o.target===this.element){if(o.keyCode!=s.enter)return;o.preventDefault();var n=this.editor.getCursorPosition().row;this.editor.isRowVisible(n)||this.editor.scrollToLine(n,!0,!0),setTimeout(function(){var a=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),d=this.$findNearestFoldWidget(a),l=this.$findNearestAnnotation(a);if(!(d===null&&l===null)){if(d===null&&l!==null){this.activeRowIndex=l,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(d!==null&&l===null){this.activeRowIndex=d,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(l-a)<Math.abs(d-a)){this.activeRowIndex=l,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=d,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(o),setTimeout(function(){this.editor._signal("gutterkeydown",new i(o,this))}.bind(this),10)},u.prototype.$handleGutterKeyboardInteraction=function(o){if(o.keyCode===s.tab){o.preventDefault();return}if(o.keyCode===s.escape){o.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(o.keyCode===s.up){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(o.keyCode===s.down){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(o.keyCode===s.left){o.preventDefault(),this.$switchLane("annotation");return}if(o.keyCode===s.right){o.preventDefault(),this.$switchLane("fold");return}if(o.keyCode===s.enter||o.keyCode===s.space){switch(o.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var n=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),o),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==n&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(n),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var a=this.lines.cells[this.activeRowIndex].element.childNodes[2],d=a.getBoundingClientRect(),l=this.annotationTooltip.getElement().style;l.left=d.right+"px",l.top=d.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},u.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},u.prototype.$isFoldWidgetVisible=function(o){var n=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),a=this.$getFoldWidget(o).style.display!=="none";return n&&a},u.prototype.$isAnnotationVisible=function(o){var n=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),a=this.$getAnnotation(o).style.display!=="none";return n&&a},u.prototype.$getFoldWidget=function(o){var n=this.lines.get(o),a=n.element;return a.childNodes[1]},u.prototype.$getAnnotation=function(o){var n=this.lines.get(o),a=n.element;return a.childNodes[2]},u.prototype.$findNearestFoldWidget=function(o){if(this.$isFoldWidgetVisible(o))return o;for(var n=0;o-n>0||o+n<this.lines.getLength()-1;){if(n++,o-n>=0&&this.$isFoldWidgetVisible(o-n))return o-n;if(o+n<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(o+n))return o+n}return null},u.prototype.$findNearestAnnotation=function(o){if(this.$isAnnotationVisible(o))return o;for(var n=0;o-n>0||o+n<this.lines.getLength()-1;){if(n++,o-n>=0&&this.$isAnnotationVisible(o-n))return o-n;if(o+n<=this.lines.getLength()-1&&this.$isAnnotationVisible(o+n))return o+n}return null},u.prototype.$focusFoldWidget=function(o){if(o!=null){var n=this.$getFoldWidget(o);n.classList.add(this.editor.renderer.keyboardFocusClassName),n.focus()}},u.prototype.$focusAnnotation=function(o){if(o!=null){var n=this.$getAnnotation(o);n.classList.add(this.editor.renderer.keyboardFocusClassName),n.focus()}},u.prototype.$blurFoldWidget=function(o){var n=this.$getFoldWidget(o);n.classList.remove(this.editor.renderer.keyboardFocusClassName),n.blur()},u.prototype.$blurAnnotation=function(o){var n=this.$getAnnotation(o);n.classList.remove(this.editor.renderer.keyboardFocusClassName),n.blur()},u.prototype.$moveFoldWidgetUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveFoldWidgetDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveAnnotationUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$moveAnnotationDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$switchLane=function(o){switch(o){case"annotation":if(this.activeLane==="annotation")break;var n=this.$findNearestAnnotation(this.activeRowIndex);if(n==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=n,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var a=this.$findNearestFoldWidget(this.activeRowIndex);if(a==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=a,this.$focusFoldWidget(this.activeRowIndex);break}},u.prototype.$rowIndexToRow=function(o){var n=this.lines.get(o);return n?n.row:null},u.prototype.$rowToRowIndex=function(o){for(var n=0;n<this.lines.getLength();n++){var a=this.lines.get(n);if(a.row==o)return n}return null},u}();t.GutterKeyboardHandler=m;var i=function(){function u(o,n){this.gutterKeyboardHandler=n,this.domEvent=o}return u.prototype.getKey=function(){return s.keyCodeToString(this.domEvent.keyCode)},u.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},u.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},u.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},u}();t.GutterKeyboardEvent=i});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var s=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,_=b&&y[b],E=0;if(_)return _.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&E>=y.length&&(y=void 0),{value:y&&y[E++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},p=e("./lib/oop"),m=e("./lib/dom"),i=e("./lib/lang"),u=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,n=e("./mouse/mouse_handler").MouseHandler,a=e("./mouse/fold_handler").FoldHandler,d=e("./keyboard/keybinding").KeyBinding,l=e("./edit_session").EditSession,c=e("./search").Search,g=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,k=e("./commands/default_commands").commands,x=e("./config"),A=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,f=e("./keyboard/gutter_handler").GutterKeyboardHandler,L=e("./config").nls,$=e("./clipboard"),C=e("./lib/keys"),T=function(){function y(b,_,E){this.session,this.$toDestroy=[];var R=b.getContainerElement();this.container=R,this.renderer=b,this.id="editor"+ ++y.$uid,this.commands=new v(u.isMac?"mac":"win",k),typeof document=="object"&&(this.textInput=new o(b.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new n(this),new a(this)),this.keyBinding=new d(this),this.$search=new c().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=i.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(M,I){I._$emitInputEvent.schedule(31)}),this.setSession(_||E&&E.session||new l("")),x.resetOptions(this),E&&this.setOptions(E),x._signal("editor",this)}return y.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=i.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},y.prototype.startOperation=function(b){if(this.curOp){if(!b||this.curOp.command)return;this.prevOp=this.curOp}b||(this.previousCommand=null,b={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:b.command||{},args:b.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},y.prototype.endOperation=function(b){if(this.curOp&&this.session){if(b&&b.returnValue===!1||!this.session)return this.curOp=null;if(b==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var _=this.curOp.command,E=_&&_.scrollIntoView;if(E){switch(E){case"center-animate":E="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),M=this.renderer.layerConfig;(R.start.row>=M.lastRow||R.end.row<=M.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}E=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},y.prototype.$historyTracker=function(b){if(this.$mergeUndoDeltas){var _=this.prevOp,E=this.$mergeableCommands,R=_.command&&b.command.name==_.command.name;if(b.command.name=="insertstring"){var M=b.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(M)||/\s/.test(_.args)),this.mergeNextCommand=!0}else R=R&&E.indexOf(b.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:E.indexOf(b.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},y.prototype.setKeyboardHandler=function(b,_){if(b&&typeof b=="string"&&b!="ace"){this.$keybindingId=b;var E=this;x.loadModule(["keybinding",b],function(R){E.$keybindingId==b&&E.keyBinding.setKeyboardHandler(R&&R.handler),_&&_()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(b),_&&_()},y.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},y.prototype.setSession=function(b){if(this.session!=b){this.curOp&&this.endOperation(),this.curOp={};var _=this.session;if(_){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var E=this.session.getSelection();E.off("changeCursor",this.$onCursorChange),E.off("changeSelection",this.$onSelectionChange)}this.session=b,b?(this.$onDocumentChange=this.onDocumentChange.bind(this),b.on("change",this.$onDocumentChange),this.renderer.setSession(b),this.$onChangeMode=this.onChangeMode.bind(this),b.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),b.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),b.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),b.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),b.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),b.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=b.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(b)),this._signal("changeSession",{session:b,oldSession:_}),this.curOp=null,_&&_._signal("changeEditor",{oldEditor:this}),b&&b._signal("changeEditor",{editor:this}),b&&!b.destroyed&&b.bgTokenizer.scheduleStart()}},y.prototype.getSession=function(){return this.session},y.prototype.setValue=function(b,_){return this.session.doc.setValue(b),_?_==1?this.navigateFileEnd():_==-1&&this.navigateFileStart():this.selectAll(),b},y.prototype.getValue=function(){return this.session.getValue()},y.prototype.getSelection=function(){return this.selection},y.prototype.resize=function(b){this.renderer.onResize(b)},y.prototype.setTheme=function(b,_){this.renderer.setTheme(b,_)},y.prototype.getTheme=function(){return this.renderer.getTheme()},y.prototype.setStyle=function(b){this.renderer.setStyle(b)},y.prototype.unsetStyle=function(b){this.renderer.unsetStyle(b)},y.prototype.getFontSize=function(){return this.getOption("fontSize")||m.computedStyle(this.container).fontSize},y.prototype.setFontSize=function(b){this.setOption("fontSize",b)},y.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var b=this;this.$highlightPending=!0,setTimeout(function(){b.$highlightPending=!1;var _=b.session;if(!(!_||_.destroyed)){_.$bracketHighlight&&(_.$bracketHighlight.markerIds.forEach(function(F){_.removeMarker(F)}),_.$bracketHighlight=null);var E=b.getCursorPosition(),R=b.getKeyboardHandler(),M=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(b),I=_.getMatchingBracketRanges(E,M);if(!I){var D=new A(_,E.row,E.column),O=D.getCurrentToken();if(O&&/\b(?:tag-open|tag-name)/.test(O.type)){var N=_.getMatchingTags(E);N&&(I=[N.openTagName.isEmpty()?N.openTag:N.openTagName,N.closeTagName.isEmpty()?N.closeTag:N.closeTagName])}}if(!I&&_.$mode.getMatching&&(I=_.$mode.getMatching(b.session)),!I){b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide();return}var P="ace_bracket";Array.isArray(I)?I.length==1&&(P="ace_error_bracket"):I=[I],I.length==2&&(g.comparePoints(I[0].end,I[1].start)==0?I=[g.fromPoints(I[0].start,I[1].end)]:g.comparePoints(I[0].start,I[1].end)==0&&(I=[g.fromPoints(I[1].start,I[0].end)])),_.$bracketHighlight={ranges:I,markerIds:I.map(function(F){return _.addMarker(F,P,"text")})},b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide()}},50)}},y.prototype.focus=function(){this.textInput.focus()},y.prototype.isFocused=function(){return this.textInput.isFocused()},y.prototype.blur=function(){this.textInput.blur()},y.prototype.onFocus=function(b){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",b))},y.prototype.onBlur=function(b){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",b))},y.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},y.prototype.onDocumentChange=function(b){var _=this.session.$useWrapMode,E=b.start.row==b.end.row?b.end.row:1/0;this.renderer.updateLines(b.start.row,E,_),this._signal("change",b),this.$cursorChange()},y.prototype.onTokenizerUpdate=function(b){var _=b.data;this.renderer.updateLines(_.first,_.last)},y.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},y.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},y.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},y.prototype.$updateHighlightActiveLine=function(){var b=this.getSession(),_;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(_=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(_=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(_=!1)),b.$highlightLineMarker&&!_)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&_){var E=new g(_.row,_.column,_.row,1/0);E.id=b.addMarker(E,"ace_active-line","screenLine"),b.$highlightLineMarker=E}else _&&(b.$highlightLineMarker.start.row=_.row,b.$highlightLineMarker.end.row=_.row,b.$highlightLineMarker.start.column=_.column,b._signal("changeBackMarker"))},y.prototype.onSelectionChange=function(b){var _=this.session;if(_.$selectionMarker&&_.removeMarker(_.$selectionMarker),_.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var E=this.selection.getRange(),R=this.getSelectionStyle();_.$selectionMarker=_.addMarker(E,"ace_selection",R)}var M=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(M),this._signal("changeSelection")},y.prototype.$getSelectionHighLightRegexp=function(){var b=this.session,_=this.getSelectionRange();if(!(_.isEmpty()||_.isMultiLine())){var E=_.start.column,R=_.end.column,M=b.getLine(_.start.row),I=M.substring(E,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var D=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),O=M.substring(E-1,R+1);if(D.test(O))return D}}},y.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},y.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},y.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},y.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},y.prototype.onChangeMode=function(b){this.renderer.updateText(),this._emit("changeMode",b)},y.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},y.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},y.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},y.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},y.prototype.getCopyText=function(){var b=this.getSelectedText(),_=this.session.doc.getNewLineCharacter(),E=!1;if(!b&&this.$copyWithEmptySelection){E=!0;for(var R=this.selection.getAllRanges(),M=0;M<R.length;M++){var I=R[M];M&&R[M-1].start.row==I.start.row||(b+=this.session.getLine(I.start.row)+_)}}var D={text:b};return this._signal("copy",D),$.lineMode=E?D.text:!1,D.text},y.prototype.onCopy=function(){this.commands.exec("copy",this)},y.prototype.onCut=function(){this.commands.exec("cut",this)},y.prototype.onPaste=function(b,_){var E={text:b,event:_};this.commands.exec("paste",this,E)},y.prototype.$handlePaste=function(b){typeof b=="string"&&(b={text:b}),this._signal("paste",b);var _=b.text,E=_===$.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)E?R.insert({row:this.selection.lead.row,column:0},_):this.insert(_);else if(E)this.selection.rangeList.ranges.forEach(function(P){R.insert({row:P.start.row,column:0},_)});else{var M=_.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,D=M.length==2&&(!M[0]||!M[1]);if(M.length!=I.length||D)return this.commands.exec("insertstring",this,_);for(var O=I.length;O--;){var N=I[O];N.isEmpty()||R.remove(N),R.insert(N.start,M[O])}}},y.prototype.execCommand=function(b,_){return this.commands.exec(b,this,_)},y.prototype.insert=function(b,_){var E=this.session,R=E.getMode(),M=this.getCursorPosition();if(this.getBehavioursEnabled()&&!_){var I=R.transformAction(E.getState(M.row),"insertion",this,E,b);I&&(b!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),b=I.text)}if(b=="	"&&(b=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&b.indexOf(`
`)==-1){var D=g.fromPoints(M,M);D.end.column+=b.length,this.session.remove(D)}}else{var D=this.getSelectionRange();M=this.session.remove(D),this.clearSelection()}if(b==`
`||b==`\r
`){var F=E.getLine(M.row);if(M.column>F.search(/\S|$/)){var O=F.substr(M.column).search(/\S|$/);E.doc.removeInLine(M.row,M.column,M.column+O)}}this.clearSelection();var N=M.column,P=E.getState(M.row),F=E.getLine(M.row),z=R.checkOutdent(P,F,b);if(E.insert(M,b),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new g(M.row,N+I.selection[0],M.row,N+I.selection[1])):this.selection.setSelectionRange(new g(M.row+I.selection[0],I.selection[1],M.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(E.getDocument().isNewLine(b)){var W=R.getNextLineIndent(P,F.slice(0,M.column),E.getTabString());E.insert({row:M.row+1,column:0},W)}z&&R.autoOutdent(P,E,M.row)}},y.prototype.autoIndent=function(){for(var b=this.session,_=b.getMode(),E=this.selection.isEmpty()?[new g(0,0,b.doc.getLength()-1,0)]:this.selection.getAllRanges(),R="",M="",I="",D=b.getTabString(),O=0;O<E.length;O++)for(var N=E[O].start.row,P=E[O].end.row,F=N;F<=P;F++){F>0&&(R=b.getState(F-1),M=b.getLine(F-1),I=_.getNextLineIndent(R,M,D));var z=b.getLine(F),W=_.$getIndent(z);if(I!==W){if(W.length>0){var j=new g(F,0,F,W.length);b.remove(j)}I.length>0&&b.insert({row:F,column:0},I)}_.autoOutdent(R,b,F)}},y.prototype.onTextInput=function(b,_){if(!_)return this.keyBinding.onTextInput(b);this.startOperation({command:{name:"insertstring"}});var E=this.applyComposition.bind(this,b,_);this.selection.rangeCount?this.forEachSelection(E):E(),this.endOperation()},y.prototype.applyComposition=function(b,_){if(_.extendLeft||_.extendRight){var E=this.selection.getRange();E.start.column-=_.extendLeft,E.end.column+=_.extendRight,E.start.column<0&&(E.start.row--,E.start.column+=this.session.getLine(E.start.row).length+1),this.selection.setRange(E),!b&&!E.isEmpty()&&this.remove()}if((b||!this.selection.isEmpty())&&this.insert(b,!0),_.restoreStart||_.restoreEnd){var E=this.selection.getRange();E.start.column-=_.restoreStart,E.end.column-=_.restoreEnd,this.selection.setRange(E)}},y.prototype.onCommandKey=function(b,_,E){return this.keyBinding.onCommandKey(b,_,E)},y.prototype.setOverwrite=function(b){this.session.setOverwrite(b)},y.prototype.getOverwrite=function(){return this.session.getOverwrite()},y.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},y.prototype.setScrollSpeed=function(b){this.setOption("scrollSpeed",b)},y.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},y.prototype.setDragDelay=function(b){this.setOption("dragDelay",b)},y.prototype.getDragDelay=function(){return this.getOption("dragDelay")},y.prototype.setSelectionStyle=function(b){this.setOption("selectionStyle",b)},y.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},y.prototype.setHighlightActiveLine=function(b){this.setOption("highlightActiveLine",b)},y.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},y.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},y.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},y.prototype.setHighlightSelectedWord=function(b){this.setOption("highlightSelectedWord",b)},y.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},y.prototype.setAnimatedScroll=function(b){this.renderer.setAnimatedScroll(b)},y.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},y.prototype.setShowInvisibles=function(b){this.renderer.setShowInvisibles(b)},y.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},y.prototype.setDisplayIndentGuides=function(b){this.renderer.setDisplayIndentGuides(b)},y.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},y.prototype.setHighlightIndentGuides=function(b){this.renderer.setHighlightIndentGuides(b)},y.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},y.prototype.setShowPrintMargin=function(b){this.renderer.setShowPrintMargin(b)},y.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},y.prototype.setPrintMarginColumn=function(b){this.renderer.setPrintMarginColumn(b)},y.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},y.prototype.setReadOnly=function(b){this.setOption("readOnly",b)},y.prototype.getReadOnly=function(){return this.getOption("readOnly")},y.prototype.setBehavioursEnabled=function(b){this.setOption("behavioursEnabled",b)},y.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},y.prototype.setWrapBehavioursEnabled=function(b){this.setOption("wrapBehavioursEnabled",b)},y.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},y.prototype.setShowFoldWidgets=function(b){this.setOption("showFoldWidgets",b)},y.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},y.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},y.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},y.prototype.remove=function(b){this.selection.isEmpty()&&(b=="left"?this.selection.selectLeft():this.selection.selectRight());var _=this.getSelectionRange();if(this.getBehavioursEnabled()){var E=this.session,R=E.getState(_.start.row),M=E.getMode().transformAction(R,"deletion",this,E,_);if(_.end.column===0){var I=E.getTextRange(_);if(I[I.length-1]==`
`){var D=E.getLine(_.end.row);/^\s+$/.test(D)&&(_.end.column=D.length)}}M&&(_=M)}this.session.remove(_),this.clearSelection()},y.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var b=this.getSelectionRange();b.start.column==b.end.column&&b.start.row==b.end.row&&(b.end.column=0,b.end.row++),this.session.remove(b),this.clearSelection()},y.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var b=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(b)},y.prototype.setGhostText=function(b,_){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(b,_)},y.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},y.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var b=this.getCursorPosition(),_=b.column;if(_!==0){var E=this.session.getLine(b.row),R,M;_<E.length?(R=E.charAt(_)+E.charAt(_-1),M=new g(b.row,_-1,b.row,_+1)):(R=E.charAt(_-1)+E.charAt(_-2),M=new g(b.row,_-2,b.row,_)),this.session.replace(M,R),this.session.selection.moveToPosition(M.end)}}},y.prototype.toLowerCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var _=this.getSelectionRange(),E=this.session.getTextRange(_);this.session.replace(_,E.toLowerCase()),this.selection.setSelectionRange(b)},y.prototype.toUpperCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var _=this.getSelectionRange(),E=this.session.getTextRange(_);this.session.replace(_,E.toUpperCase()),this.selection.setSelectionRange(b)},y.prototype.indent=function(){var b=this.session,_=this.getSelectionRange();if(_.start.row<_.end.row){var E=this.$getSelectedRows();b.indentRows(E.first,E.last,"	");return}else if(_.start.column<_.end.column){var R=b.getTextRange(_);if(!/^\s+$/.test(R)){var E=this.$getSelectedRows();b.indentRows(E.first,E.last,"	");return}}var M=b.getLine(_.start.row),I=_.start,D=b.getTabSize(),O=b.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var N=D-O%D,P=i.stringRepeat(" ",N);else{for(var N=O%D;M[_.start.column-1]==" "&&N;)_.start.column--,N--;this.selection.setSelectionRange(_),P="	"}return this.insert(P)},y.prototype.blockIndent=function(){var b=this.$getSelectedRows();this.session.indentRows(b.first,b.last,"	")},y.prototype.blockOutdent=function(){var b=this.session.getSelection();this.session.outdentRows(b.getRange())},y.prototype.sortLines=function(){for(var b=this.$getSelectedRows(),_=this.session,E=[],R=b.first;R<=b.last;R++)E.push(_.getLine(R));E.sort(function(D,O){return D.toLowerCase()<O.toLowerCase()?-1:D.toLowerCase()>O.toLowerCase()?1:0});for(var M=new g(0,0,0,0),R=b.first;R<=b.last;R++){var I=_.getLine(R);M.start.row=R,M.end.row=R,M.end.column=I.length,_.replace(M,E[R-b.first])}},y.prototype.toggleCommentLines=function(){var b=this.session.getState(this.getCursorPosition().row),_=this.$getSelectedRows();this.session.getMode().toggleCommentLines(b,this.session,_.first,_.last)},y.prototype.toggleBlockComment=function(){var b=this.getCursorPosition(),_=this.session.getState(b.row),E=this.getSelectionRange();this.session.getMode().toggleBlockComment(_,this.session,E,b)},y.prototype.getNumberAt=function(b,_){var E=/[\-]?[0-9]+(?:\.[0-9]+)?/g;E.lastIndex=0;for(var R=this.session.getLine(b);E.lastIndex<_;){var M=E.exec(R);if(M.index<=_&&M.index+M[0].length>=_){var I={value:M[0],start:M.index,end:M.index+M[0].length};return I}}return null},y.prototype.modifyNumber=function(b){var _=this.selection.getCursor().row,E=this.selection.getCursor().column,R=new g(_,E-1,_,E),M=this.session.getTextRange(R);if(!isNaN(parseFloat(M))&&isFinite(M)){var I=this.getNumberAt(_,E);if(I){var D=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,O=I.start+I.value.length-D,N=parseFloat(I.value);N*=Math.pow(10,O),D!==I.end&&E<D?b*=Math.pow(10,I.end-E-1):b*=Math.pow(10,I.end-E),N+=b,N/=Math.pow(10,O);var P=N.toFixed(O),F=new g(_,I.start,_,I.end);this.session.replace(F,P),this.moveCursorTo(_,Math.max(I.start+1,E+P.length-I.value.length))}}else this.toggleWord()},y.prototype.toggleWord=function(){var b=this.selection.getCursor().row,_=this.selection.getCursor().column;this.selection.selectWord();var E=this.getSelectedText(),R=this.selection.getWordRange().start.column,M=E.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=_-R-1;I<0&&(I=0);var D=0,O=0,N=this;E.match(/[A-Za-z0-9_]+/)&&M.forEach(function(nt,ot){O=D+nt.length,I>=D&&I<=O&&(E=nt,N.selection.clearSelection(),N.moveCursorTo(b,D+R),N.selection.selectTo(b,O+R)),D=O});for(var P=this.$toggleWordPairs,F,z=0;z<P.length;z++)for(var W=P[z],j=0;j<=1;j++){var Z=+!j,Y=E.match(new RegExp("^\\s?_?("+i.escapeRegExp(W[j])+")\\s?$","i"));if(Y){var q=E.match(new RegExp("([_]|^|\\s)("+i.escapeRegExp(Y[1])+")($|\\s)","g"));q&&(F=E.replace(new RegExp(i.escapeRegExp(W[j]),"i"),function(nt){var ot=W[Z];return nt.toUpperCase()==nt?ot=ot.toUpperCase():nt.charAt(0).toUpperCase()==nt.charAt(0)&&(ot=ot.substr(0,0)+W[Z].charAt(0).toUpperCase()+ot.substr(1)),ot}),this.insert(F),F="")}}},y.prototype.findLinkAt=function(b,_){var E,R,M=this.session.getLine(b),I=M.split(/((?:https?|ftp):\/\/[\S]+)/),D=_;D<0&&(D=0);var O=0,N=0,P;try{for(var F=s(I),z=F.next();!z.done;z=F.next()){var W=z.value;if(N=O+W.length,D>=O&&D<=N&&W.match(/((?:https?|ftp):\/\/[\S]+)/)){P=W.replace(/[\s:.,'";}\]]+$/,"");break}O=N}}catch(j){E={error:j}}finally{try{z&&!z.done&&(R=F.return)&&R.call(F)}finally{if(E)throw E.error}}return P},y.prototype.openLink=function(){var b=this.selection.getCursor(),_=this.findLinkAt(b.row,b.column);return _&&window.open(_,"_blank"),_!=null},y.prototype.removeLines=function(){var b=this.$getSelectedRows();this.session.removeFullLines(b.first,b.last),this.clearSelection()},y.prototype.duplicateSelection=function(){var b=this.selection,_=this.session,E=b.getRange(),R=b.isBackwards();if(E.isEmpty()){var M=E.start.row;_.duplicateLines(M,M)}else{var I=R?E.start:E.end,D=_.insert(I,_.getTextRange(E));E.start=I,E.end=D,b.setSelectionRange(E,R)}},y.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},y.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},y.prototype.moveText=function(b,_,E){return this.session.moveText(b,_,E)},y.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},y.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},y.prototype.$moveLines=function(b,_){var E,R,M=this.selection;if(!M.inMultiSelectMode||this.inVirtualSelectionMode){var I=M.toOrientedRange();E=this.$getSelectedRows(I),R=this.session.$moveLines(E.first,E.last,_?0:b),_&&b==-1&&(R=0),I.moveBy(R,0),M.fromOrientedRange(I)}else{var D=M.rangeList.ranges;M.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var O=0,N=0,P=D.length,F=0;F<P;F++){var z=F;D[F].moveBy(O,0),E=this.$getSelectedRows(D[F]);for(var W=E.first,j=E.last;++F<P;){N&&D[F].moveBy(N,0);var Z=this.$getSelectedRows(D[F]);if(_&&Z.first!=j)break;if(!_&&Z.first>j+1)break;j=Z.last}for(F--,O=this.session.$moveLines(W,j,_?0:b),_&&b==-1&&(z=F+1);z<=F;)D[z].moveBy(O,0),z++;_||(O=0),N+=O}M.fromOrientedRange(M.ranges[0]),M.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},y.prototype.$getSelectedRows=function(b){return b=(b||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(b.start.row),last:this.session.getRowFoldEnd(b.end.row)}},y.prototype.onCompositionStart=function(b){this.renderer.showComposition(b)},y.prototype.onCompositionUpdate=function(b){this.renderer.setCompositionText(b)},y.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},y.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},y.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},y.prototype.isRowVisible=function(b){return b>=this.getFirstVisibleRow()&&b<=this.getLastVisibleRow()},y.prototype.isRowFullyVisible=function(b){return b>=this.renderer.getFirstFullyVisibleRow()&&b<=this.renderer.getLastFullyVisibleRow()},y.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},y.prototype.$moveByPage=function(b,_){var E=this.renderer,R=this.renderer.layerConfig,M=b*Math.floor(R.height/R.lineHeight);_===!0?this.selection.$moveSelection(function(){this.moveCursorBy(M,0)}):_===!1&&(this.selection.moveCursorBy(M,0),this.selection.clearSelection());var I=E.scrollTop;E.scrollBy(0,M*R.lineHeight),_!=null&&E.scrollCursorIntoView(null,.5),E.animateScrolling(I)},y.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},y.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},y.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},y.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},y.prototype.scrollPageDown=function(){this.$moveByPage(1)},y.prototype.scrollPageUp=function(){this.$moveByPage(-1)},y.prototype.scrollToRow=function(b){this.renderer.scrollToRow(b)},y.prototype.scrollToLine=function(b,_,E,R){this.renderer.scrollToLine(b,_,E,R)},y.prototype.centerSelection=function(){var b=this.getSelectionRange(),_={row:Math.floor(b.start.row+(b.end.row-b.start.row)/2),column:Math.floor(b.start.column+(b.end.column-b.start.column)/2)};this.renderer.alignCursor(_,.5)},y.prototype.getCursorPosition=function(){return this.selection.getCursor()},y.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},y.prototype.getSelectionRange=function(){return this.selection.getRange()},y.prototype.selectAll=function(){this.selection.selectAll()},y.prototype.clearSelection=function(){this.selection.clearSelection()},y.prototype.moveCursorTo=function(b,_){this.selection.moveCursorTo(b,_)},y.prototype.moveCursorToPosition=function(b){this.selection.moveCursorToPosition(b)},y.prototype.jumpToMatching=function(b,_){var E=this.getCursorPosition(),R=new A(this.session,E.row,E.column),M=R.getCurrentToken(),I=0;M&&M.type.indexOf("tag-name")!==-1&&(M=R.stepBackward());var D=M||R.stepForward();if(D){var O,N=!1,P={},F=E.column-D.start,z,W={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(D.value.match(/[{}()\[\]]/g)){for(;F<D.value.length&&!N;F++)if(W[D.value[F]])switch(z=W[D.value[F]]+"."+D.type.replace("rparen","lparen"),isNaN(P[z])&&(P[z]=0),D.value[F]){case"(":case"[":case"{":P[z]++;break;case")":case"]":case"}":P[z]--,P[z]===-1&&(O="bracket",N=!0);break}}else D.type.indexOf("tag-name")!==-1&&(isNaN(P[D.value])&&(P[D.value]=0),M.value==="<"&&I>1?P[D.value]++:M.value==="</"&&P[D.value]--,P[D.value]===-1&&(O="tag",N=!0));N||(M=D,I++,D=R.stepForward(),F=0)}while(D&&!N);if(O){var j,Z;if(O==="bracket")j=this.session.getBracketRange(E),j||(j=new g(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+F-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+F-1),Z=j.start,(_||Z.row===E.row&&Math.abs(Z.column-E.column)<2)&&(j=this.session.getBracketRange(Z)));else if(O==="tag"){if(!D||D.type.indexOf("tag-name")===-1)return;if(j=new g(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),j.compare(E.row,E.column)===0){var Y=this.session.getMatchingTags(E);Y&&(Y.openTag.contains(E.row,E.column)?(j=Y.closeTag,Z=j.start):(j=Y.openTag,Y.closeTag.start.row===E.row&&Y.closeTag.start.column===E.column?Z=j.end:Z=j.start))}Z=Z||j.start}Z=j&&j.cursor||Z,Z&&(b?j&&_?this.selection.setRange(j):j&&j.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Z.row,Z.column):this.selection.moveTo(Z.row,Z.column))}}},y.prototype.gotoLine=function(b,_,E){this.selection.clearSelection(),this.session.unfold({row:b-1,column:_||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(b-1,_||0),this.isRowFullyVisible(b-1)||this.scrollToLine(b-1,!0,E)},y.prototype.navigateTo=function(b,_){this.selection.moveTo(b,_)},y.prototype.navigateUp=function(b){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var _=this.selection.anchor.getPosition();return this.moveCursorToPosition(_)}this.selection.clearSelection(),this.selection.moveCursorBy(-b||-1,0)},y.prototype.navigateDown=function(b){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var _=this.selection.anchor.getPosition();return this.moveCursorToPosition(_)}this.selection.clearSelection(),this.selection.moveCursorBy(b||1,0)},y.prototype.navigateLeft=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorLeft();else{var _=this.getSelectionRange().start;this.moveCursorToPosition(_)}this.clearSelection()},y.prototype.navigateRight=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorRight();else{var _=this.getSelectionRange().end;this.moveCursorToPosition(_)}this.clearSelection()},y.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},y.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},y.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},y.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},y.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},y.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},y.prototype.replace=function(b,_){_&&this.$search.set(_);var E=this.$search.find(this.session),R=0;return E&&(this.$tryReplace(E,b)&&(R=1),this.selection.setSelectionRange(E),this.renderer.scrollSelectionIntoView(E.start,E.end)),R},y.prototype.replaceAll=function(b,_){_&&this.$search.set(_);var E=this.$search.findAll(this.session),R=0;if(!E.length)return R;var M=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=E.length-1;I>=0;--I)this.$tryReplace(E[I],b)&&R++;return this.selection.setSelectionRange(M),R},y.prototype.$tryReplace=function(b,_){var E=this.session.getTextRange(b);return _=this.$search.replace(E,_),_!==null?(b.end=this.session.replace(b,_),b):null},y.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},y.prototype.find=function(b,_,E){_||(_={}),typeof b=="string"||b instanceof RegExp?_.needle=b:typeof b=="object"&&p.mixin(_,b);var R=this.selection.getRange();_.needle==null&&(b=this.session.getTextRange(R)||this.$search.$options.needle,b||(R=this.session.getWordRange(R.start.row,R.start.column),b=this.session.getTextRange(R)),this.$search.set({needle:b})),this.$search.set(_),_.start||this.$search.set({start:R});var M=this.$search.find(this.session);if(_.preventScroll)return M;if(M)return this.revealRange(M,E),M;_.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},y.prototype.findNext=function(b,_){this.find({skipCurrent:!0,backwards:!1},b,_)},y.prototype.findPrevious=function(b,_){this.find(b,{skipCurrent:!0,backwards:!0},_)},y.prototype.revealRange=function(b,_){this.session.unfold(b),this.selection.setSelectionRange(b);var E=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(b.start,b.end,.5),_!==!1&&this.renderer.animateScrolling(E)},y.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(b){b.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},y.prototype.setAutoScrollEditorIntoView=function(b){if(b){var _,E=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var M=this.$scrollAnchor;M.style.cssText="position:absolute",this.container.insertBefore(M,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),D=this.renderer.on("beforeRender",function(){R&&(_=E.renderer.container.getBoundingClientRect())}),O=this.renderer.on("afterRender",function(){if(R&&_&&(E.isFocused()||E.searchBox&&E.searchBox.isFocused())){var N=E.renderer,P=N.$cursorLayer.$pixelPos,F=N.layerConfig,z=P.top-F.offset;P.top>=0&&z+_.top<0?R=!0:P.top<F.height&&P.top+_.top+F.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(M.style.top=z+"px",M.style.left=P.left+"px",M.style.height=F.lineHeight+"px",M.scrollIntoView(R)),R=_=null}});this.setAutoScrollEditorIntoView=function(N){N||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",O),this.renderer.off("beforeRender",D))}}},y.prototype.$resetCursorStyle=function(){var b=this.$cursorStyle||"ace",_=this.renderer.$cursorLayer;_&&(_.setSmoothBlinking(/smooth/.test(b)),_.isBlinking=!this.$readOnly&&b!="wide",m.setCssClass(_.element,"ace_slim-cursors",/slim/.test(b)))},y.prototype.prompt=function(b,_,E){var R=this;x.loadModule("ace/ext/prompt",function(M){M.prompt(R,b,_,E)})},y}();T.$uid=0,T.prototype.curOp=null,T.prototype.prevOp={},T.prototype.$mergeableCommands=["backspace","del","insertstring"],T.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],p.implement(T.prototype,h),x.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(y){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:y})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(y){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(y){this.textInput.setReadOnly(y),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(y){this.textInput.setCopyWithEmptySelection(y)},initialValue:!1},cursorStyle:{set:function(y){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(y){this.setAutoScrollEditorIntoView(y)}},keyboardHandler:{set:function(y){this.setKeyboardHandler(y)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(y){this.session.setValue(y)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(y){this.setSession(y)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(y){this.renderer.$gutterLayer.setShowLineNumbers(y),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),y&&this.$relativeLineNumbers?w.attach(this):w.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(y){this.$showLineNumbers&&y?w.attach(this):w.detach(this)}},placeholder:{set:function(y){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var b=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(b&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),m.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!b&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),m.addCssClass(this.container,"ace_hasPlaceholder");var _=m.createElement("div");_.className="ace_placeholder",_.textContent=this.$placeholder||"",this.renderer.placeholderNode=_,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!b&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(y){var b={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},_=function(R){if(R.target==this.renderer.scroller&&R.keyCode===C.enter){R.preventDefault();var M=this.getCursorPosition().row;this.isRowVisible(M)||this.scrollToLine(M,!0,!0),this.focus()}},E;y?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(u.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",L("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",L("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",_.bind(this)),this.commands.addCommand(b),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",L("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",L("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),E||(E=new f(this)),E.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",_.bind(this)),this.commands.removeCommand(b),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),E&&E.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(y){this.$textInputAriaLabel=y},initialValue:""},enableMobileMenu:{set:function(y){this.$enableMobileMenu=y},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var w={getText:function(y,b){return(Math.abs(y.selection.lead.row-b)||b+1+(b<9?"\xB7":""))+""},getWidth:function(y,b,_){return Math.max(b.toString().length,(_.lastRow+1).toString().length,2)*_.characterWidth},update:function(y,b){b.renderer.$loop.schedule(b.renderer.CHANGE_GUTTER)},attach:function(y){y.renderer.$gutterLayer.$renderer=this,y.on("changeSelection",this.update),this.update(null,y)},detach:function(y){y.renderer.$gutterLayer.$renderer==this&&(y.renderer.$gutterLayer.$renderer=null),y.off("changeSelection",this.update),this.update(null,y)}};t.Editor=T});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var s=e("../lib/dom"),p=function(){function m(i,u){this.element=i,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return m.prototype.moveContainer=function(i){s.translate(this.element,0,-(i.firstRowScreen*i.lineHeight%this.canvasHeight)-i.offset*this.$offsetCoefficient)},m.prototype.pageChanged=function(i,u){return Math.floor(i.firstRowScreen*i.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},m.prototype.computeLineTop=function(i,u,o){var n=u.firstRowScreen*u.lineHeight,a=Math.floor(n/this.canvasHeight),d=o.documentToScreenRow(i,0)*u.lineHeight;return d-a*this.canvasHeight},m.prototype.computeLineHeight=function(i,u,o){return u.lineHeight*o.getRowLineCount(i)},m.prototype.getLength=function(){return this.cells.length},m.prototype.get=function(i){return this.cells[i]},m.prototype.shift=function(){this.$cacheCell(this.cells.shift())},m.prototype.pop=function(){this.$cacheCell(this.cells.pop())},m.prototype.push=function(i){if(Array.isArray(i)){this.cells.push.apply(this.cells,i);for(var u=s.createFragment(this.element),o=0;o<i.length;o++)u.appendChild(i[o].element);this.element.appendChild(u)}else this.cells.push(i),this.element.appendChild(i.element)},m.prototype.unshift=function(i){if(Array.isArray(i)){this.cells.unshift.apply(this.cells,i);for(var u=s.createFragment(this.element),o=0;o<i.length;o++)u.appendChild(i[o].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(i),this.element.insertAdjacentElement("afterbegin",i.element)},m.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},m.prototype.$cacheCell=function(i){i&&(i.element.remove(),this.cellCache.push(i))},m.prototype.createCell=function(i,u,o,n){var a=this.cellCache.pop();if(!a){var d=s.createElement("div");n&&n(d),this.element.appendChild(d),a={element:d,text:"",row:i}}return a.row=i,a},m}();t.Lines=p});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,r){"use strict";var s=e("../lib/dom"),p=e("../lib/oop"),m=e("../lib/lang"),i=e("../lib/event_emitter").EventEmitter,u=e("./lines").Lines,o=e("../config").nls,n=function(){function d(l){this.element=s.createElement("div"),this.element.className="ace_layer ace_gutter-layer",l.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1}return d.prototype.setSession=function(l){this.session&&this.session.off("change",this.$updateAnnotations),this.session=l,l&&l.on("change",this.$updateAnnotations)},d.prototype.addGutterDecoration=function(l,c){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(l,c)},d.prototype.removeGutterDecoration=function(l,c){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(l,c)},d.prototype.setAnnotations=function(l){this.$annotations=[];for(var c=0;c<l.length;c++){var g=l[c],h=g.row,v=this.$annotations[h];v||(v=this.$annotations[h]={text:[],type:[],displayText:[]});var k=g.text,x=g.text,A=g.type;k=k?m.escapeHTML(k):g.html||"",x=x||g.html||"",v.text.indexOf(k)===-1&&(v.text.push(k),v.type.push(A),v.displayText.push(x));var S=g.className;S?v.className=S:A=="error"?v.className=" ace_error":A=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":A=="info"&&!v.className&&(v.className=" ace_info")}},d.prototype.$updateAnnotations=function(l){if(this.$annotations.length){var c=l.start.row,g=l.end.row-c;if(g!==0)if(l.action=="remove")this.$annotations.splice(c,g+1,null);else{var h=new Array(g+1);h.unshift(c,1),this.$annotations.splice.apply(this.$annotations,h)}}},d.prototype.update=function(l){this.config=l;var c=this.session,g=l.firstRow,h=Math.min(l.lastRow+l.gutterOffset,c.getLength()-1);this.oldLastRow=h,this.config=l,this.$lines.moveContainer(l),this.$updateCursorRow();for(var v=c.getNextFoldLine(g),k=v?v.start.row:1/0,x=null,A=-1,S=g;;){if(S>k&&(S=v.end.row+1,v=c.getNextFoldLine(S,v),k=v?v.start.row:1/0),S>h){for(;this.$lines.getLength()>A+1;)this.$lines.pop();break}x=this.$lines.get(++A),x?x.row=S:(x=this.$lines.createCell(S,l,this.session,a),this.$lines.push(x)),this.$renderCell(x,l,v,S),S++}this._signal("afterRender"),this.$updateGutterWidth(l)},d.prototype.$updateGutterWidth=function(l){var c=this.session,g=c.gutterRenderer||this.$renderer,h=c.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||c.$useWrapMode)&&(v=c.getLength()+h-1);var k=g?g.getWidth(c,v,l):v.toString().length*l.characterWidth,x=this.$padding||this.$computePadding();k+=x.left+x.right,k!==this.gutterWidth&&!isNaN(k)&&(this.gutterWidth=k,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",k))},d.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var l=this.session.selection.getCursor();this.$cursorRow!==l.row&&(this.$cursorRow=l.row)}},d.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var l=this.session.selection.cursor.row;if(this.$cursorRow=l,!(this.$cursorCell&&this.$cursorCell.row==l)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var c=this.$lines.cells;this.$cursorCell=null;for(var g=0;g<c.length;g++){var h=c[g];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(g>0&&v&&v.start.row==c[g-1].row)h=c[g-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},d.prototype.scrollLines=function(l){var c=this.config;if(this.config=l,this.$updateCursorRow(),this.$lines.pageChanged(c,l))return this.update(l);this.$lines.moveContainer(l);var g=Math.min(l.lastRow+l.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=g,!c||h<l.firstRow)return this.update(l);if(g<c.firstRow)return this.update(l);if(c.firstRow<l.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,l.firstRow-1);v>0;v--)this.$lines.shift();if(h>g)for(var v=this.session.getFoldedRowCount(g+1,h);v>0;v--)this.$lines.pop();l.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLines(l,l.firstRow,c.firstRow-1)),g>h&&this.$lines.push(this.$renderLines(l,h+1,g)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(l)},d.prototype.$renderLines=function(l,c,g){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>g);){var A=this.$lines.createCell(v,l,this.session,a);this.$renderCell(A,l,k,v),h.push(A),v++}return h},d.prototype.$renderCell=function(l,c,g,h){var v=l.element,k=this.session,x=v.childNodes[0],A=v.childNodes[1],S=v.childNodes[2],f=S.firstChild,L=k.$firstLineNumber,$=k.$breakpoints,C=k.$decorations,T=k.gutterRenderer||this.$renderer,w=this.$showFoldWidgets&&k.foldWidgets,y=g?g.start.row:Number.MAX_VALUE,b=c.lineHeight+"px",_=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",E=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(T?T.getText(k,h):h+L).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||g&&h<this.$cursorRow&&h>=y&&this.$cursorRow<=g.end.row)&&(_+="ace_gutter-active-line ",this.$cursorCell!=l&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=l)),$[h]&&(_+=$[h]),C[h]&&(_+=C[h]),this.$annotations[h]&&h!==y&&(_+=this.$annotations[h].className),w){var M=w[h];M==null&&(M=w[h]=k.getFoldWidget(h))}if(M){var I="ace_fold-widget ace_"+M,D=M=="start"&&h==y&&h<g.end.row;if(D){I+=" ace_closed";for(var O="",N=!1,P=h+1;P<=g.end.row;P++)if(this.$annotations[P]){if(this.$annotations[P].className===" ace_error"){N=!0,O=" ace_error_fold";break}if(this.$annotations[P].className===" ace_warning"){N=!0,O=" ace_warning_fold";continue}}_+=O}else I+=" ace_open";A.className!=I&&(A.className=I),s.setStyle(A.style,"height",b),s.setStyle(A.style,"display","inline-block"),A.setAttribute("role","button"),A.setAttribute("tabindex","-1");var F=k.getFoldWidgetRange(h);F?A.setAttribute("aria-label",o("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[F.start.row+1,F.end.row+1])):g?A.setAttribute("aria-label",o("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[g.start.row+1,g.end.row+1])):A.setAttribute("aria-label",o("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[h+1])),D?(A.setAttribute("aria-expanded","false"),A.setAttribute("title",o("gutter.code-folding.closed.title","Unfold code"))):(A.setAttribute("aria-expanded","true"),A.setAttribute("title",o("gutter.code-folding.open.title","Fold code")))}else A&&(s.setStyle(A.style,"display","none"),A.setAttribute("tabindex","0"),A.removeAttribute("role"),A.removeAttribute("aria-label"));if(N&&this.$showFoldedAnnotations){S.className="ace_gutter_annotation",f.className=E,f.className+=O,s.setStyle(f.style,"height",b),s.setStyle(S.style,"display","block"),s.setStyle(S.style,"height",b);var z;switch(O){case" ace_error_fold":z=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning_fold":z=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break}S.setAttribute("aria-label",z),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else if(this.$annotations[h]){S.className="ace_gutter_annotation",f.className=E,this.$useSvgGutterIcons?f.className+=this.$annotations[h].className:v.classList.add(this.$annotations[h].className.replace(" ","")),s.setStyle(f.style,"height",b),s.setStyle(S.style,"display","block"),s.setStyle(S.style,"height",b);var z;switch(this.$annotations[h].className){case" ace_error":z=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning":z=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break;case" ace_info":z=o("gutter.annotation.aria-label.info","Read annotations row $0",[R]);break}S.setAttribute("aria-label",z),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else s.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0");return R!==x.data&&(x.data=R),v.className!=_&&(v.className=_),s.setStyle(l.element.style,"height",this.$lines.computeLineHeight(h,c,k)+"px"),s.setStyle(l.element.style,"top",this.$lines.computeLineTop(h,c,k)+"px"),l.text=R,S.style.display==="none"&&A.style.display==="none"?l.element.setAttribute("aria-hidden",!0):l.element.setAttribute("aria-hidden",!1),l},d.prototype.setHighlightGutterLine=function(l){this.$highlightGutterLine=l},d.prototype.setShowLineNumbers=function(l){this.$renderer=!l&&{getWidth:function(){return 0},getText:function(){return""}}},d.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},d.prototype.setShowFoldWidgets=function(l){l?s.addCssClass(this.element,"ace_folding-enabled"):s.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=l,this.$padding=null},d.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},d.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var l=s.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(l.borderLeftWidth)||0)+(parseInt(l.paddingLeft)||0)+1,this.$padding.right=(parseInt(l.borderRightWidth)||0)+(parseInt(l.paddingRight)||0),this.$padding},d.prototype.getRegion=function(l){var c=this.$padding||this.$computePadding(),g=this.element.getBoundingClientRect();if(l.x<c.left+g.left)return"markers";if(this.$showFoldWidgets&&l.x>g.right-c.right)return"foldWidgets"},d}();n.prototype.$fixedWidth=!1,n.prototype.$highlightGutterLine=!0,n.prototype.$renderer="",n.prototype.$showLineNumbers=!0,n.prototype.$showFoldWidgets=!0,p.implement(n.prototype,i);function a(d){var l=document.createTextNode("");d.appendChild(l);var c=s.createElement("span");d.appendChild(c);var g=s.createElement("span");d.appendChild(g);var h=s.createElement("span");return g.appendChild(h),d}t.Gutter=n});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,r){"use strict";var s=e("../range").Range,p=e("../lib/dom"),m=function(){function u(o){this.element=p.createElement("div"),this.element.className="ace_layer ace_marker-layer",o.appendChild(this.element)}return u.prototype.setPadding=function(o){this.$padding=o},u.prototype.setSession=function(o){this.session=o},u.prototype.setMarkers=function(o){this.markers=o},u.prototype.elt=function(o,n){var a=this.i!=-1&&this.element.childNodes[this.i];a?this.i++:(a=document.createElement("div"),this.element.appendChild(a),this.i=-1),a.style.cssText=n,a.className=o},u.prototype.update=function(o){if(o){this.config=o,this.i=0;var n;for(var a in this.markers){var d=this.markers[a];if(!d.range){d.update(n,this,this.session,o);continue}var l=d.range.clipRows(o.firstRow,o.lastRow);if(!l.isEmpty())if(l=l.toScreenRange(this.session),d.renderer){var c=this.$getTop(l.start.row,o),g=this.$padding+l.start.column*o.characterWidth;d.renderer(n,l,g,c,o)}else d.type=="fullLine"?this.drawFullLineMarker(n,l,d.clazz,o):d.type=="screenLine"?this.drawScreenLineMarker(n,l,d.clazz,o):l.isMultiLine()?d.type=="text"?this.drawTextMarker(n,l,d.clazz,o):this.drawMultiLineMarker(n,l,d.clazz,o):this.drawSingleLineMarker(n,l,d.clazz+" ace_start ace_br15",o)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},u.prototype.$getTop=function(o,n){return(o-n.firstRowScreen)*n.lineHeight},u.prototype.drawTextMarker=function(o,n,a,d,l){for(var c=this.session,g=n.start.row,h=n.end.row,v=g,k=0,x=0,A=c.getScreenLastRowColumn(v),S=new s(v,n.start.column,v,x);v<=h;v++)S.start.row=S.end.row=v,S.start.column=v==g?n.start.column:c.getRowWrapIndent(v),S.end.column=A,k=x,x=A,A=v+1<h?c.getScreenLastRowColumn(v+1):v==h?0:n.end.column,this.drawSingleLineMarker(o,S,a+(v==g?" ace_start":"")+" ace_br"+i(v==g||v==g+1&&n.start.column,k<x,x>A,v==h),d,v==h?0:1,l)},u.prototype.drawMultiLineMarker=function(o,n,a,d,l){var c=this.$padding,g=d.lineHeight,h=this.$getTop(n.start.row,d),v=c+n.start.column*d.characterWidth;if(l=l||"",this.session.$bidiHandler.isBidiRow(n.start.row)){var k=n.clone();k.end.row=k.start.row,k.end.column=this.session.getLine(k.start.row).length,this.drawBidiSingleLineMarker(o,k,a+" ace_br1 ace_start",d,null,l)}else this.elt(a+" ace_br1 ace_start","height:"+g+"px;right:0;top:"+h+"px;left:"+v+"px;"+(l||""));if(this.session.$bidiHandler.isBidiRow(n.end.row)){var k=n.clone();k.start.row=k.end.row,k.start.column=0,this.drawBidiSingleLineMarker(o,k,a+" ace_br12",d,null,l)}else{h=this.$getTop(n.end.row,d);var x=n.end.column*d.characterWidth;this.elt(a+" ace_br12","height:"+g+"px;width:"+x+"px;top:"+h+"px;left:"+c+"px;"+(l||""))}if(g=(n.end.row-n.start.row-1)*d.lineHeight,!(g<=0)){h=this.$getTop(n.start.row+1,d);var A=(n.start.column?1:0)|(n.end.column?0:8);this.elt(a+(A?" ace_br"+A:""),"height:"+g+"px;right:0;top:"+h+"px;left:"+c+"px;"+(l||""))}},u.prototype.drawSingleLineMarker=function(o,n,a,d,l,c){if(this.session.$bidiHandler.isBidiRow(n.start.row))return this.drawBidiSingleLineMarker(o,n,a,d,l,c);var g=d.lineHeight,h=(n.end.column+(l||0)-n.start.column)*d.characterWidth,v=this.$getTop(n.start.row,d),k=this.$padding+n.start.column*d.characterWidth;this.elt(a,"height:"+g+"px;width:"+h+"px;top:"+v+"px;left:"+k+"px;"+(c||""))},u.prototype.drawBidiSingleLineMarker=function(o,n,a,d,l,c){var g=d.lineHeight,h=this.$getTop(n.start.row,d),v=this.$padding,k=this.session.$bidiHandler.getSelections(n.start.column,n.end.column);k.forEach(function(x){this.elt(a,"height:"+g+"px;width:"+(x.width+(l||0))+"px;top:"+h+"px;left:"+(v+x.left)+"px;"+(c||""))},this)},u.prototype.drawFullLineMarker=function(o,n,a,d,l){var c=this.$getTop(n.start.row,d),g=d.lineHeight;n.start.row!=n.end.row&&(g+=this.$getTop(n.end.row,d)-c),this.elt(a,"height:"+g+"px;top:"+c+"px;left:0;right:0;"+(l||""))},u.prototype.drawScreenLineMarker=function(o,n,a,d,l){var c=this.$getTop(n.start.row,d),g=d.lineHeight;this.elt(a,"height:"+g+"px;top:"+c+"px;left:0;right:0;"+(l||""))},u}();m.prototype.$padding=0;function i(u,o,n,a){return(u?1:0)|(o?2:0)|(n?4:0)|(a?8:0)}t.Marker=m});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,r){var s=new Set(["text","rparen","lparen"]);t.isTextToken=function(p){return s.has(p)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,r){"use strict";var s=e("../lib/oop"),p=e("../lib/dom"),m=e("../lib/lang"),i=e("./lines").Lines,u=e("../lib/event_emitter").EventEmitter,o=e("../config").nls,n=e("./text_util").isTextToken,a=function(){function d(l){this.dom=p,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",l.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new i(this.element)}return d.prototype.$updateEolChar=function(){var l=this.session.doc,c=l.getNewLineCharacter()==`
`&&l.getNewLineMode()!="windows",g=c?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=g)return this.EOL_CHAR=g,!0},d.prototype.setPadding=function(l){this.$padding=l,this.element.style.margin="0 "+l+"px"},d.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},d.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},d.prototype.$setFontMetrics=function(l){this.$fontMetrics=l,this.$fontMetrics.on("changeCharacterSize",function(c){this._signal("changeCharacterSize",c)}.bind(this)),this.$pollSizeChanges()},d.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},d.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},d.prototype.setSession=function(l){this.session=l,l&&this.$computeTabString()},d.prototype.setShowInvisibles=function(l){return this.showInvisibles==l?!1:(this.showInvisibles=l,typeof l=="string"?(this.showSpaces=/tab/i.test(l),this.showTabs=/space/i.test(l),this.showEOL=/eol/i.test(l)):this.showSpaces=this.showTabs=this.showEOL=l,this.$computeTabString(),!0)},d.prototype.setDisplayIndentGuides=function(l){return this.displayIndentGuides==l?!1:(this.displayIndentGuides=l,this.$computeTabString(),!0)},d.prototype.setHighlightIndentGuides=function(l){return this.$highlightIndentGuides===l?!1:(this.$highlightIndentGuides=l,l)},d.prototype.$computeTabString=function(){var l=this.session.getTabSize();this.tabSize=l;for(var c=this.$tabStrings=[0],g=1;g<l+1;g++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=m.stringRepeat(this.TAB_CHAR,g),c.push(h)}else c.push(this.dom.createTextNode(m.stringRepeat(" ",g),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",k=this.showSpaces?" ace_invisible ace_invisible_space":"",x=this.showSpaces?m.stringRepeat(this.SPACE_CHAR,this.tabSize):m.stringRepeat(" ",this.tabSize),A=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?m.stringRepeat(this.TAB_CHAR,this.tabSize):x,h=this.dom.createElement("span");h.className=v+k,h.textContent=x,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=v+A,h.textContent=S,this.$tabStrings["	"]=h}},d.prototype.updateLines=function(l,c,g){if(this.config.lastRow!=l.lastRow||this.config.firstRow!=l.firstRow)return this.update(l);this.config=l;for(var h=Math.max(c,l.firstRow),v=Math.min(g,l.lastRow),k=this.element.childNodes,x=0,S=l.firstRow;S<h;S++){var f=this.session.getFoldLine(S);if(f)if(f.containsRow(h)){h=f.start.row;break}else S=f.end.row;x++}for(var A=!1,S=h,f=this.session.getNextFoldLine(S),L=f?f.start.row:1/0;S>L&&(S=f.end.row+1,f=this.session.getNextFoldLine(S,f),L=f?f.start.row:1/0),!(S>v);){var $=k[x++];if($){this.dom.removeChildren($),this.$renderLine($,S,S==L?f:!1),A&&($.style.top=this.$lines.computeLineTop(S,l,this.session)+"px");var C=l.lineHeight*this.session.getRowLength(S)+"px";$.style.height!=C&&(A=!0,$.style.height=C)}S++}if(A)for(;x<this.$lines.cells.length;){var T=this.$lines.cells[x++];T.element.style.top=this.$lines.computeLineTop(T.row,l,this.session)+"px"}},d.prototype.scrollLines=function(l){var c=this.config;if(this.config=l,this.$lines.pageChanged(c,l))return this.update(l);this.$lines.moveContainer(l);var g=l.lastRow,h=c?c.lastRow:-1;if(!c||h<l.firstRow)return this.update(l);if(g<c.firstRow)return this.update(l);if(!c||c.lastRow<l.firstRow)return this.update(l);if(l.lastRow<c.firstRow)return this.update(l);if(c.firstRow<l.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,l.firstRow-1);v>0;v--)this.$lines.shift();if(c.lastRow>l.lastRow)for(var v=this.session.getFoldedRowCount(l.lastRow+1,c.lastRow);v>0;v--)this.$lines.pop();l.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLinesFragment(l,l.firstRow,c.firstRow-1)),l.lastRow>c.lastRow&&this.$lines.push(this.$renderLinesFragment(l,c.lastRow+1,l.lastRow)),this.$highlightIndentGuide()},d.prototype.$renderLinesFragment=function(l,c,g){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>g);){var A=this.$lines.createCell(v,l,this.session),S=A.element;this.dom.removeChildren(S),p.setStyle(S.style,"height",this.$lines.computeLineHeight(v,l,this.session)+"px"),p.setStyle(S.style,"top",this.$lines.computeLineTop(v,l,this.session)+"px"),this.$renderLine(S,v,v==x?k:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",h.push(A),v++}return h},d.prototype.update=function(l){this.$lines.moveContainer(l),this.config=l;for(var c=l.firstRow,g=l.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(l,c,g))},d.prototype.$renderToken=function(l,c,g,h){for(var v=this,k=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,x=this.dom.createFragment(this.element),A,S=0;A=k.exec(h);){var f=A[1],L=A[2],$=A[3],C=A[4],T=A[5];if(!(!v.showSpaces&&L)){var w=S!=A.index?h.slice(S,A.index):"";if(S=A.index+A[0].length,w&&x.appendChild(this.dom.createTextNode(w,this.element)),f){var y=v.session.getScreenTabSize(c+A.index);x.appendChild(v.$tabStrings[y].cloneNode(!0)),c+=y-1}else if(L)if(v.showSpaces){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space",b.textContent=m.stringRepeat(v.SPACE_CHAR,L.length),x.appendChild(b)}else x.appendChild(this.dom.createTextNode(L,this.element));else if($){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space ace_invalid",b.textContent=m.stringRepeat(v.SPACE_CHAR,$.length),x.appendChild(b)}else if(C){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",b.textContent=v.showSpaces?v.SPACE_CHAR:C,x.appendChild(b)}else if(T){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className="ace_cjk",b.textContent=T,x.appendChild(b)}}}if(x.appendChild(this.dom.createTextNode(S?h.slice(S):h,this.element)),n(g.type))l.appendChild(x);else{var _="ace_"+g.type.replace(/\./g," ace_"),b=this.dom.createElement("span");g.type=="fold"&&(b.style.width=g.value.length*this.config.characterWidth+"px",b.setAttribute("title",o("inline-fold.closed.title","Unfold code"))),b.className=_,b.appendChild(x),l.appendChild(b)}return c+h.length},d.prototype.renderIndentGuide=function(l,c,g){var h=c.search(this.$indentGuideRe);if(h<=0||h>=g)return c;if(c[0]==" "){h-=h%this.tabSize;for(var v=h/this.tabSize,k=0;k<v;k++)l.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}else if(c[0]=="	"){for(var k=0;k<h;k++)l.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}return this.$highlightIndentGuide(),c},d.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var l=this.session.doc.$lines;if(l){var c=this.session.selection.getCursor(),g=/^\s*/.exec(this.session.doc.getLine(c.row))[0].length,h=Math.floor(g/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:c.row};var v=this.session.$bracketHighlight;if(v){for(var k=this.session.$bracketHighlight.ranges,x=0;x<k.length;x++)if(c.row!==k[x].start.row){this.$highlightIndentGuideMarker.end=k[x].start.row,c.row>k[x].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&l[c.row]!==""&&c.column===l[c.row].length){this.$highlightIndentGuideMarker.dir=1;for(var x=c.row+1;x<l.length;x++){var A=l[x],S=/^\s*/.exec(A)[0].length;if(A!==""&&(this.$highlightIndentGuideMarker.end=x,S<=g))break}}this.$renderHighlightIndentGuide()}}},d.prototype.$clearActiveIndentGuide=function(){for(var l=this.$lines.cells,c=0;c<l.length;c++){var g=l[c],h=g.element.childNodes;if(h.length>0){for(var v=0;v<h.length;v++)if(h[v].classList&&h[v].classList.contains("ace_indent-guide-active")){h[v].classList.remove("ace_indent-guide-active");break}}}},d.prototype.$setIndentGuideActive=function(l,c){var g=this.session.doc.getLine(l.row);if(g!==""){var h=l.element.childNodes;if(h){var v=h[c-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},d.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var l=this.$lines.cells;this.$clearActiveIndentGuide();var c=this.$highlightIndentGuideMarker.indentLevel;if(c!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var g=0;g<l.length;g++){var h=l[g];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}else for(var g=l.length-1;g>=0;g--){var h=l[g];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}}},d.prototype.$createLineElement=function(l){var c=this.dom.createElement("div");return c.className="ace_line",c.style.height=this.config.lineHeight+"px",c},d.prototype.$renderWrappedLine=function(l,c,g){var h=0,v=0,k=g[0],x=0,A=this.$createLineElement();l.appendChild(A);for(var S=0;S<c.length;S++){var f=c[S],L=f.value;if(S==0&&this.displayIndentGuides){if(h=L.length,L=this.renderIndentGuide(A,L,k),!L)continue;h-=L.length}if(h+L.length<k)x=this.$renderToken(A,x,f,L),h+=L.length;else{for(;h+L.length>=k;)x=this.$renderToken(A,x,f,L.substring(0,k-h)),L=L.substring(k-h),h=k,A=this.$createLineElement(),l.appendChild(A),A.appendChild(this.dom.createTextNode(m.stringRepeat("\xA0",g.indent),this.element)),v++,x=0,k=g[v]||Number.MAX_VALUE;L.length!=0&&(h+=L.length,x=this.$renderToken(A,x,f,L))}}g[g.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(A,x,null,"",!0)},d.prototype.$renderSimpleLine=function(l,c){for(var g=0,h=0;h<c.length;h++){var v=c[h],k=v.value;if(!(h==0&&this.displayIndentGuides&&(k=this.renderIndentGuide(l,k),!k))){if(g+k.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(l,g,v,k);g=this.$renderToken(l,g,v,k)}}},d.prototype.$renderOverflowMessage=function(l,c,g,h,v){g&&this.$renderToken(l,c,g,h.slice(0,this.MAX_LINE_LENGTH-c));var k=this.dom.createElement("span");k.className="ace_inline_button ace_keyword ace_toggle_wrap",k.textContent=v?"<hide>":"<click to see more...>",l.appendChild(k)},d.prototype.$renderLine=function(l,c,g){if(!g&&g!=!1&&(g=this.session.getFoldLine(c)),g)var h=this.$getFoldLineTokens(c,g);else var h=this.session.getTokens(c);var v=l;if(h.length){var k=this.session.getRowSplitData(c);if(k&&k.length){this.$renderWrappedLine(l,h,k);var v=l.lastChild}else{var v=l;this.$useLineGroups()&&(v=this.$createLineElement(),l.appendChild(v)),this.$renderSimpleLine(v,h)}}else this.$useLineGroups()&&(v=this.$createLineElement(),l.appendChild(v));if(this.showEOL&&v){g&&(c=g.end.row);var x=this.dom.createElement("span");x.className="ace_invisible ace_invisible_eol",x.textContent=c==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(x)}},d.prototype.$getFoldLineTokens=function(l,c){var g=this.session,h=[];function v(x,A,S){for(var f=0,L=0;L+x[f].value.length<A;)if(L+=x[f].value.length,f++,f==x.length)return;if(L!=A){var $=x[f].value.substring(A-L);$.length>S-A&&($=$.substring(0,S-A)),h.push({type:x[f].type,value:$}),L=A+$.length,f+=1}for(;L<S&&f<x.length;){var $=x[f].value;$.length+L>S?h.push({type:x[f].type,value:$.substring(0,S-L)}):h.push(x[f]),L+=$.length,f+=1}}var k=g.getTokens(l);return c.walk(function(x,A,S,f,L){x!=null?h.push({type:"fold",value:x}):(L&&(k=g.getTokens(A)),k.length&&v(k,f,S))},c.end.row,this.session.getLine(c.end.row).length),h},d.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},d}();a.prototype.EOF_CHAR="\xB6",a.prototype.EOL_CHAR_LF="\xAC",a.prototype.EOL_CHAR_CRLF="\xA4",a.prototype.EOL_CHAR=a.prototype.EOL_CHAR_LF,a.prototype.TAB_CHAR="\u2014",a.prototype.SPACE_CHAR="\xB7",a.prototype.$padding=0,a.prototype.MAX_LINE_LENGTH=1e4,a.prototype.showInvisibles=!1,a.prototype.showSpaces=!1,a.prototype.showTabs=!1,a.prototype.showEOL=!1,a.prototype.displayIndentGuides=!0,a.prototype.$highlightIndentGuides=!0,a.prototype.$tabStrings=[],a.prototype.destroy={},a.prototype.onChangeTabSize=a.prototype.$computeTabString,s.implement(a.prototype,u),t.Text=a});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var s=e("../lib/dom"),p=function(){function m(i){this.element=s.createElement("div"),this.element.className="ace_layer ace_cursor-layer",i.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),s.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return m.prototype.$updateOpacity=function(i){for(var u=this.cursors,o=u.length;o--;)s.setStyle(u[o].style,"opacity",i?"":"0")},m.prototype.$startCssAnimation=function(){for(var i=this.cursors,u=i.length;u--;)i[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&s.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},m.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,s.removeCssClass(this.element,"ace_animate-blinking")},m.prototype.setPadding=function(i){this.$padding=i},m.prototype.setSession=function(i){this.session=i},m.prototype.setBlinking=function(i){i!=this.isBlinking&&(this.isBlinking=i,this.restartTimer())},m.prototype.setBlinkInterval=function(i){i!=this.blinkInterval&&(this.blinkInterval=i,this.restartTimer())},m.prototype.setSmoothBlinking=function(i){i!=this.smoothBlinking&&(this.smoothBlinking=i,s.setCssClass(this.element,"ace_smooth-blinking",i),this.$updateCursors(!0),this.restartTimer())},m.prototype.addCursor=function(){var i=s.createElement("div");return i.className="ace_cursor",this.element.appendChild(i),this.cursors.push(i),i},m.prototype.removeCursor=function(){if(this.cursors.length>1){var i=this.cursors.pop();return i.parentNode.removeChild(i),i}},m.prototype.hideCursor=function(){this.isVisible=!1,s.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},m.prototype.showCursor=function(){this.isVisible=!0,s.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},m.prototype.restartTimer=function(){var i=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,s.removeCssClass(this.element,"ace_smooth-blinking")),i(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&s.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),s.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=function(){this.timeoutId=setTimeout(function(){i(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){i(!0),u()},this.blinkInterval),u()}},m.prototype.getPixelPosition=function(i,u){if(!this.config||!this.session)return{left:0,top:0};i||(i=this.session.selection.getCursor());var o=this.session.documentToScreenPosition(i),n=this.$padding+(this.session.$bidiHandler.isBidiRow(o.row,i.row)?this.session.$bidiHandler.getPosLeft(o.column):o.column*this.config.characterWidth),a=(o.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:n,top:a}},m.prototype.isCursorInView=function(i,u){return i.top>=0&&i.top<u.maxHeight},m.prototype.update=function(i){this.config=i;var u=this.session.$selectionMarkers,o=0,n=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var o=0,a=u.length;o<a;o++){var d=this.getPixelPosition(u[o].cursor,!0);if(!((d.top>i.height+i.offset||d.top<0)&&o>1)){var l=this.cursors[n++]||this.addCursor(),c=l.style;this.drawCursor?this.drawCursor(l,d,i,u[o],this.session):this.isCursorInView(d,i)?(s.setStyle(c,"display","block"),s.translate(l,d.left,d.top),s.setStyle(c,"width",Math.round(i.characterWidth)+"px"),s.setStyle(c,"height",i.lineHeight+"px")):s.setStyle(c,"display","none")}}for(;this.cursors.length>n;)this.removeCursor();var g=this.session.getOverwrite();this.$setOverwrite(g),this.$pixelPos=d,this.restartTimer()},m.prototype.$setOverwrite=function(i){i!=this.overwrite&&(this.overwrite=i,i?s.addCssClass(this.element,"ace_overwrite-cursors"):s.removeCssClass(this.element,"ace_overwrite-cursors"))},m.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},m}();p.prototype.$padding=0,p.prototype.drawCursor=null,t.Cursor=p});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var l=function(c,g){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},l(c,g)};return function(c,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");l(c,g);function h(){this.constructor=c}c.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}}(),p=e("./lib/oop"),m=e("./lib/dom"),i=e("./lib/event"),u=e("./lib/event_emitter").EventEmitter,o=32768,n=function(){function l(c,g){this.element=m.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+g,this.inner=m.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),c.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,i.addListener(this.element,"scroll",this.onScroll.bind(this)),i.addListener(this.element,"mousedown",i.preventDefault)}return l.prototype.setVisible=function(c){this.element.style.display=c?"":"none",this.isVisible=c,this.coeff=1},l}();p.implement(n.prototype,u);var a=function(l){s(c,l);function c(g,h){var v=l.call(this,g,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,h.$scrollbarWidth=v.width=m.scrollbarWidth(g.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return c.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var g=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-g)/(this.coeff-g)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},c.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},c.prototype.setHeight=function(g){this.element.style.height=g+"px"},c.prototype.setScrollHeight=function(g){this.scrollHeight=g,g>o?(this.coeff=o/g,g=o):this.coeff!=1&&(this.coeff=1),this.inner.style.height=g+"px"},c.prototype.setScrollTop=function(g){this.scrollTop!=g&&(this.skipEvent=!0,this.scrollTop=g,this.element.scrollTop=g*this.coeff)},c}(n);a.prototype.setInnerHeight=a.prototype.setScrollHeight;var d=function(l){s(c,l);function c(g,h){var v=l.call(this,g,"-h")||this;return v.scrollLeft=0,v.height=h.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return c.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},c.prototype.getHeight=function(){return this.isVisible?this.height:0},c.prototype.setWidth=function(g){this.element.style.width=g+"px"},c.prototype.setInnerWidth=function(g){this.inner.style.width=g+"px"},c.prototype.setScrollWidth=function(g){this.inner.style.width=g+"px"},c.prototype.setScrollLeft=function(g){this.scrollLeft!=g&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=g)},c}(n);t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=d,t.VScrollBar=a,t.HScrollBar=d});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var s=this&&this.__extends||function(){var d=function(l,c){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},d(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");d(l,c);function g(){this.constructor=l}l.prototype=c===null?Object.create(c):(g.prototype=c.prototype,new g)}}(),p=e("./lib/oop"),m=e("./lib/dom"),i=e("./lib/event"),u=e("./lib/event_emitter").EventEmitter;m.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var o=function(){function d(l,c){this.element=m.createElement("div"),this.element.className="ace_sb"+c,this.inner=m.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,l.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,i.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return d.prototype.setVisible=function(l){this.element.style.display=l?"":"none",this.isVisible=l,this.coeff=1},d}();p.implement(o.prototype,u);var n=function(d){s(l,d);function l(c,g){var h=d.call(this,c,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=c,h.width=h.VScrollWidth,h.renderer=g,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return l.prototype.onMouseDown=function(c,g){if(c==="mousedown"&&!(i.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var h=this,v=g.clientY,k=function(C){v=C.clientY},x=function(){clearInterval(L)},A=g.clientY,S=this.thumbTop,f=function(){if(v!==void 0){var C=h.scrollTopFromThumbTop(S+v-A);C!==h.scrollTop&&h._emit("scroll",{data:C})}};i.capture(this.inner,k,x);var L=setInterval(f,20);return i.preventDefault(g)}var $=g.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop($)}),i.preventDefault(g)}},l.prototype.getHeight=function(){return this.height},l.prototype.scrollTopFromThumbTop=function(c){var g=c*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return g=g>>0,g<0?g=0:g>this.pageHeight-this.viewHeight&&(g=this.pageHeight-this.viewHeight),g},l.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},l.prototype.setHeight=function(c){this.height=Math.max(0,c),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},l.prototype.setScrollHeight=function(c,g){this.pageHeight===c&&!g||(this.pageHeight=c,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},l.prototype.setScrollTop=function(c){this.scrollTop=c,c<0&&(c=0),this.thumbTop=c*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},l}(o);n.prototype.setInnerHeight=n.prototype.setScrollHeight;var a=function(d){s(l,d);function l(c,g){var h=d.call(this,c,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=g,h}return l.prototype.onMouseDown=function(c,g){if(c==="mousedown"&&!(i.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var h=this,v=g.clientX,k=function(C){v=C.clientX},x=function(){clearInterval(L)},A=g.clientX,S=this.thumbLeft,f=function(){if(v!==void 0){var C=h.scrollLeftFromThumbLeft(S+v-A);C!==h.scrollLeft&&h._emit("scroll",{data:C})}};i.capture(this.inner,k,x);var L=setInterval(f,20);return i.preventDefault(g)}var $=g.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft($)}),i.preventDefault(g)}},l.prototype.getHeight=function(){return this.isVisible?this.height:0},l.prototype.scrollLeftFromThumbLeft=function(c){var g=c*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return g=g>>0,g<0?g=0:g>this.pageWidth-this.viewWidth&&(g=this.pageWidth-this.viewWidth),g},l.prototype.setWidth=function(c){this.width=Math.max(0,c),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},l.prototype.setScrollWidth=function(c,g){this.pageWidth===c&&!g||(this.pageWidth=c,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},l.prototype.setScrollLeft=function(c){this.scrollLeft=c,c<0&&(c=0),this.thumbLeft=c*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},l}(o);a.prototype.setInnerWidth=a.prototype.setScrollWidth,t.ScrollBar=n,t.ScrollBarV=n,t.ScrollBarH=a,t.VScrollBar=n,t.HScrollBar=a});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,r){"use strict";var s=e("./lib/event"),p=function(){function m(i,u){this.onRender=i,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var o=this;this._flush=function(n){o.pending=!1;var a=o.changes;if(a&&(s.blockIdle(100),o.changes=0,o.onRender(a)),o.changes){if(o.$recursionLimit--<0)return;o.schedule()}else o.$recursionLimit=2}}return m.prototype.schedule=function(i){this.changes=this.changes|i,this.changes&&!this.pending&&(s.nextFrame(this._flush),this.pending=!0)},m.prototype.clear=function(i){var u=this.changes;return this.changes=0,u},m}();t.RenderLoop=p});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,r){var s=e("../lib/oop"),p=e("../lib/dom"),m=e("../lib/lang"),i=e("../lib/event"),u=e("../lib/useragent"),o=e("../lib/event_emitter").EventEmitter,n=512,a=typeof ResizeObserver=="function",d=200,l=function(){function c(g){this.el=p.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=p.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=p.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),g.appendChild(this.el),this.$measureNode.textContent=m.stringRepeat("X",n),this.$characterSize={width:0,height:0},a?this.$addObserver():this.checkForSizeChanges()}return c.prototype.$setMeasureNodeStyles=function(g,h){g.width=g.height="auto",g.left=g.top="0px",g.visibility="hidden",g.position="absolute",g.whiteSpace="pre",u.isIE<8?g["font-family"]="inherit":g.font="inherit",g.overflow=h?"hidden":"visible"},c.prototype.checkForSizeChanges=function(g){if(g===void 0&&(g=this.$measureSizes()),g&&(this.$characterSize.width!==g.width||this.$characterSize.height!==g.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=g,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===g.width&&h.height===g.height,this._emit("changeCharacterSize",{data:g})}},c.prototype.$addObserver=function(){var g=this;this.$observer=new window.ResizeObserver(function(h){g.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},c.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var g=this;return this.$pollSizeChangesTimer=i.onIdle(function h(){g.checkForSizeChanges(),i.onIdle(h,500)},500)},c.prototype.setPolling=function(g){g?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},c.prototype.$measureSizes=function(g){var h={height:(g||this.$measureNode).clientHeight,width:(g||this.$measureNode).clientWidth/n};return h.width===0||h.height===0?null:h},c.prototype.$measureCharWidth=function(g){this.$main.textContent=m.stringRepeat(g,n);var h=this.$main.getBoundingClientRect();return h.width/n},c.prototype.getCharacterWidth=function(g){var h=this.charSizes[g];return h===void 0&&(h=this.charSizes[g]=this.$measureCharWidth(g)/this.$characterSize.width),h},c.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},c.prototype.$getZoom=function(g){return!g||!g.parentElement?1:(Number(window.getComputedStyle(g).zoom)||1)*this.$getZoom(g.parentElement)},c.prototype.$initTransformMeasureNodes=function(){var g=function(h,v){return["div",{style:"position: absolute;top:"+h+"px;left:"+v+"px;"}]};this.els=p.buildDom([g(0,0),g(d,0),g(0,d),g(d,d)],this.el)},c.prototype.transformCoordinates=function(g,h){if(g){var v=this.$getZoom(this.el);g=S(1/v,g)}function k(D,O,N){var P=D[1]*O[0]-D[0]*O[1];return[(-O[1]*N[0]+O[0]*N[1])/P,(+D[1]*N[0]-D[0]*N[1])/P]}function x(D,O){return[D[0]-O[0],D[1]-O[1]]}function A(D,O){return[D[0]+O[0],D[1]+O[1]]}function S(D,O){return[D*O[0],D*O[1]]}this.els||this.$initTransformMeasureNodes();function f(D){var O=D.getBoundingClientRect();return[O.left,O.top]}var L=f(this.els[0]),$=f(this.els[1]),C=f(this.els[2]),T=f(this.els[3]),w=k(x(T,$),x(T,C),x(A($,C),A(T,L))),y=S(1+w[0],x($,L)),b=S(1+w[1],x(C,L));if(h){var _=h,E=w[0]*_[0]/d+w[1]*_[1]/d+1,R=A(S(_[0],y),S(_[1],b));return A(S(1/E/d,R),L)}var M=x(g,L),I=k(x(y,S(w[0],M)),x(b,S(w[1],M)),M);return S(d,I)},c}();l.prototype.$characterSize={width:0,height:0},s.implement(l.prototype,o),t.FontMetrics=l});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,r){r.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "\u21A9";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var s=e("../lib/dom"),p=e("../lib/oop"),m=e("../lib/event_emitter").EventEmitter,i=function(){function u(o,n){this.canvas=s.createElement("canvas"),this.renderer=n,this.pixelRatio=1,this.maxHeight=n.layerConfig.maxHeight,this.lineHeight=n.layerConfig.lineHeight,this.canvasHeight=o.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=o.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},o.element.appendChild(this.canvas)}return u.prototype.$updateDecorators=function(o){var n=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(o){this.maxHeight=o.maxHeight,this.lineHeight=o.lineHeight,this.canvasHeight=o.height;var a=(o.lastRow+1)*this.lineHeight;a<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var d=this.canvas.getContext("2d");function l(T,w){return T.priority<w.priority?-1:T.priority>w.priority?1:0}var c=this.renderer.session.$annotations;if(d.clearRect(0,0,this.canvas.width,this.canvas.height),c){var g={info:1,warning:2,error:3};c.forEach(function(T){T.priority=g[T.type]||null}),c=c.sort(l);for(var h=this.renderer.session.$foldData,v=0;v<c.length;v++){var k=c[v].row,x=this.compensateFoldRows(k,h),A=Math.round((k-x)*this.lineHeight*this.heightRatio),S=Math.round((k-x)*this.lineHeight*this.heightRatio),f=Math.round(((k-x)*this.lineHeight+this.lineHeight)*this.heightRatio),L=f-S;if(L<this.minDecorationHeight){var $=(S+f)/2|0;$<this.halfMinDecorationHeight?$=this.halfMinDecorationHeight:$+this.halfMinDecorationHeight>this.canvasHeight&&($=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round($-this.halfMinDecorationHeight),f=Math.round($+this.halfMinDecorationHeight)}d.fillStyle=n[c[v].type]||null,d.fillRect(0,A,this.canvasWidth,f-S)}}var C=this.renderer.session.selection.getCursor();if(C){var x=this.compensateFoldRows(C.row,h),A=Math.round((C.row-x)*this.lineHeight*this.heightRatio);d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(0,A,this.canvasWidth,2)}},u.prototype.compensateFoldRows=function(o,n){var a=0;if(n&&n.length>0)for(var d=0;d<n.length;d++)o>n[d].start.row&&o<n[d].end.row?a+=o-n[d].start.row:o>=n[d].end.row&&(a+=n[d].end.row-n[d].start.row);return a},u}();p.implement(i.prototype,m),t.Decorator=i});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(e,t,r){"use strict";var s=e("./lib/oop"),p=e("./lib/dom"),m=e("./lib/lang"),i=e("./config"),u=e("./layer/gutter").Gutter,o=e("./layer/marker").Marker,n=e("./layer/text").Text,a=e("./layer/cursor").Cursor,d=e("./scrollbar").HScrollBar,l=e("./scrollbar").VScrollBar,c=e("./scrollbar_custom").HScrollBar,g=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,k=e("./lib/event_emitter").EventEmitter,x=e("./css/editor-css"),A=e("./layer/decorators").Decorator,S=e("./lib/useragent"),f=e("./layer/text_util").isTextToken;p.importCssString(x,"ace_editor.css",!1);var L=function(){function $(C,T){var w=this;this.container=C||p.createElement("div"),p.addCssClass(this.container,"ace_editor"),p.HI_DPI&&p.addCssClass(this.container,"ace_hidpi"),this.setTheme(T),i.get("useStrictCSP")==null&&i.set("useStrictCSP",!1),this.$gutter=p.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=p.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=p.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new o(this.content);var y=this.$textLayer=new n(this.content);this.canvas=y.element,this.$markerFront=new o(this.content),this.$cursorLayer=new a(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new l(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollTop(b.data-w.scrollMargin.top)}),this.scrollBarH.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollLeft(b.data-w.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(b){w.updateCharacterSize(),w.onResize(!0,w.gutterWidth,w.$size.width,w.$size.height),w._signal("changeCharacterSize",b)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),i.resetOptions(this),i._signal("renderer",this)}return $.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),p.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},$.prototype.setSession=function(C){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=C,C&&this.scrollMargin.top&&C.getScrollTop()<=0&&C.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(C),this.$markerBack.setSession(C),this.$markerFront.setSession(C),this.$gutterLayer.setSession(C),this.$textLayer.setSession(C),C&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},$.prototype.updateLines=function(C,T,w){if(T===void 0&&(T=1/0),this.$changedLines?(this.$changedLines.firstRow>C&&(this.$changedLines.firstRow=C),this.$changedLines.lastRow<T&&(this.$changedLines.lastRow=T)):this.$changedLines={firstRow:C,lastRow:T},this.$changedLines.lastRow<this.layerConfig.firstRow)if(w)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},$.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},$.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},$.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},$.prototype.updateFull=function(C){C?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},$.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},$.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},$.prototype.onResize=function(C,T,w,y){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=C?1:0;var b=this.container;y||(y=b.clientHeight||b.scrollHeight),!y&&this.$maxLines&&this.lineHeight>1&&(!b.style.height||b.style.height=="0px")&&(b.style.height="1px",y=b.clientHeight||b.scrollHeight),w||(w=b.clientWidth||b.scrollWidth);var _=this.$updateCachedSize(C,T,w,y);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!w&&!y)return this.resizing=0;C&&(this.$gutterLayer.$padding=null),C?this.$renderChanges(_|this.$changes,!0):this.$loop.schedule(_|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},$.prototype.$updateCachedSize=function(C,T,w,y){y-=this.$extraHeight||0;var b=0,_=this.$size,E={width:_.width,height:_.height,scrollerHeight:_.scrollerHeight,scrollerWidth:_.scrollerWidth};if(y&&(C||_.height!=y)&&(_.height=y,b|=this.CHANGE_SIZE,_.scrollerHeight=_.height,this.$horizScroll&&(_.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(_.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",b=b|this.CHANGE_SCROLL),w&&(C||_.width!=w)){b|=this.CHANGE_SIZE,_.width=w,T==null&&(T=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=T,p.setStyle(this.scrollBarH.element.style,"left",T+"px"),p.setStyle(this.scroller.style,"left",T+this.margin.left+"px"),_.scrollerWidth=Math.max(0,w-T-this.scrollBarV.getWidth()-this.margin.h),p.setStyle(this.$gutter.style,"left",this.margin.left+"px");var R=this.scrollBarV.getWidth()+"px";p.setStyle(this.scrollBarH.element.style,"right",R),p.setStyle(this.scroller.style,"right",R),p.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(_.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||C)&&(b|=this.CHANGE_FULL)}return _.$dirty=!w||!y,b&&this._signal("resize",E),b},$.prototype.onGutterResize=function(C){var T=this.$showGutter?C:0;T!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,T,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},$.prototype.adjustWrapLimit=function(){var C=this.$size.scrollerWidth-this.$padding*2,T=Math.floor(C/this.characterWidth);return this.session.adjustWrapLimit(T,this.$showPrintMargin&&this.$printMarginColumn)},$.prototype.setAnimatedScroll=function(C){this.setOption("animatedScroll",C)},$.prototype.getAnimatedScroll=function(){return this.$animatedScroll},$.prototype.setShowInvisibles=function(C){this.setOption("showInvisibles",C),this.session.$bidiHandler.setShowInvisibles(C)},$.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},$.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},$.prototype.setDisplayIndentGuides=function(C){this.setOption("displayIndentGuides",C)},$.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},$.prototype.setHighlightIndentGuides=function(C){this.setOption("highlightIndentGuides",C)},$.prototype.setShowPrintMargin=function(C){this.setOption("showPrintMargin",C)},$.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},$.prototype.setPrintMarginColumn=function(C){this.setOption("printMarginColumn",C)},$.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},$.prototype.getShowGutter=function(){return this.getOption("showGutter")},$.prototype.setShowGutter=function(C){return this.setOption("showGutter",C)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.setFadeFoldWidgets=function(C){this.setOption("fadeFoldWidgets",C)},$.prototype.setHighlightGutterLine=function(C){this.setOption("highlightGutterLine",C)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var C=p.createElement("div");C.className="ace_layer ace_print-margin-layer",this.$printMarginEl=p.createElement("div"),this.$printMarginEl.className="ace_print-margin",C.appendChild(this.$printMarginEl),this.content.insertBefore(C,this.content.firstChild)}var T=this.$printMarginEl.style;T.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",T.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},$.prototype.getContainerElement=function(){return this.container},$.prototype.getMouseEventTarget=function(){return this.scroller},$.prototype.getTextAreaContainer=function(){return this.container},$.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var C=this.textarea.style,T=this.$composition;if(!this.$keepTextAreaAtCursor&&!T){p.translate(this.textarea,-100,0);return}var w=this.$cursorLayer.$pixelPos;if(w){T&&T.markerRange&&(w=this.$cursorLayer.getPixelPosition(T.markerRange.start,!0));var y=this.layerConfig,b=w.top,_=w.left;b-=y.offset;var E=T&&T.useTextareaForIME||S.isMobile?this.lineHeight:1;if(b<0||b>y.height-E){p.translate(this.textarea,0,0);return}var R=1,M=this.$size.height-E;if(!T)b+=this.lineHeight;else if(T.useTextareaForIME){var I=this.textarea.value;R=this.characterWidth*this.session.$getStringScreenWidth(I)[0]}else b+=this.lineHeight+2;_-=this.scrollLeft,_>this.$size.scrollerWidth-R&&(_=this.$size.scrollerWidth-R),_+=this.gutterWidth+this.margin.left,p.setStyle(C,"height",E+"px"),p.setStyle(C,"width",R+"px"),p.translate(this.textarea,Math.min(_,this.$size.scrollerWidth-R),Math.min(b,M))}}},$.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},$.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},$.prototype.getLastFullyVisibleRow=function(){var C=this.layerConfig,T=C.lastRow,w=this.session.documentToScreenRow(T,0)*C.lineHeight;return w-this.session.getScrollTop()>C.height-C.lineHeight?T-1:T},$.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},$.prototype.setPadding=function(C){this.$padding=C,this.$textLayer.setPadding(C),this.$cursorLayer.setPadding(C),this.$markerFront.setPadding(C),this.$markerBack.setPadding(C),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},$.prototype.setScrollMargin=function(C,T,w,y){var b=this.scrollMargin;b.top=C|0,b.bottom=T|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,b.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-b.top),this.updateFull()},$.prototype.setMargin=function(C,T,w,y){var b=this.margin;b.top=C|0,b.bottom=T|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},$.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},$.prototype.setHScrollBarAlwaysVisible=function(C){this.setOption("hScrollBarAlwaysVisible",C)},$.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},$.prototype.setVScrollBarAlwaysVisible=function(C){this.setOption("vScrollBarAlwaysVisible",C)},$.prototype.$updateScrollBarV=function(){var C=this.layerConfig.maxHeight,T=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(C-=(T-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>C-T&&(C=this.scrollTop+T,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(C+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},$.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},$.prototype.freeze=function(){this.$frozen=!0},$.prototype.unfreeze=function(){this.$frozen=!1},$.prototype.$renderChanges=function(C,T){if(this.$changes&&(C|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!C&&!T){this.$changes|=C;return}if(this.$size.$dirty)return this.$changes|=C,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",C),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var w=this.layerConfig;if(C&this.CHANGE_FULL||C&this.CHANGE_SIZE||C&this.CHANGE_TEXT||C&this.CHANGE_LINES||C&this.CHANGE_SCROLL||C&this.CHANGE_H_SCROLL){if(C|=this.$computeLayerConfig()|this.$loop.clear(),w.firstRow!=this.layerConfig.firstRow&&w.firstRowScreen==this.layerConfig.firstRowScreen){var y=this.scrollTop+(w.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;y>0&&(this.scrollTop=y,C=C|this.CHANGE_SCROLL,C|=this.$computeLayerConfig()|this.$loop.clear())}w=this.layerConfig,this.$updateScrollBarV(),C&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),p.translate(this.content,-this.scrollLeft,-w.offset);var b=w.width+2*this.$padding+"px",_=w.minHeight+"px";p.setStyle(this.content.style,"width",b),p.setStyle(this.content.style,"height",_)}if(C&this.CHANGE_H_SCROLL&&(p.translate(this.content,-this.scrollLeft,-w.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),C&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}if(C&this.CHANGE_SCROLL){this.$changedLines=null,C&this.CHANGE_TEXT||C&this.CHANGE_LINES?this.$textLayer.update(w):this.$textLayer.scrollLines(w),this.$showGutter&&(C&this.CHANGE_GUTTER||C&this.CHANGE_LINES?this.$gutterLayer.update(w):this.$gutterLayer.scrollLines(w)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}C&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):C&this.CHANGE_LINES?((this.$updateLines()||C&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):C&this.CHANGE_TEXT||C&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):C&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)),C&this.CHANGE_CURSOR&&(this.$cursorLayer.update(w),this.$moveTextAreaToCursor()),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(w),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(w),this._signal("afterRender",C)},$.prototype.$autosize=function(){var C=this.session.getScreenLength()*this.lineHeight,T=this.$maxLines*this.lineHeight,w=Math.min(T,Math.max((this.$minLines||1)*this.lineHeight,C))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(w+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&w>this.$maxPixelHeight&&(w=this.$maxPixelHeight);var y=w<=2*this.lineHeight,b=!y&&C>T;if(w!=this.desiredHeight||this.$size.height!=this.desiredHeight||b!=this.$vScroll){b!=this.$vScroll&&(this.$vScroll=b,this.scrollBarV.setVisible(b));var _=this.container.clientWidth;this.container.style.height=w+"px",this.$updateCachedSize(!0,this.$gutterWidth,_,w),this.desiredHeight=w,this._signal("autosize")}},$.prototype.$computeLayerConfig=function(){var C=this.session,T=this.$size,w=T.height<=2*this.lineHeight,y=this.session.getScreenLength(),b=y*this.lineHeight,_=this.$getLongestLine(),E=!w&&(this.$hScrollBarAlwaysVisible||T.scrollerWidth-_-2*this.$padding<0),R=this.$horizScroll!==E;R&&(this.$horizScroll=E,this.scrollBarH.setVisible(E));var M=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var I=T.scrollerHeight+this.lineHeight,D=!this.$maxLines&&this.$scrollPastEnd?(T.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;b+=D;var O=this.scrollMargin;this.session.setScrollTop(Math.max(-O.top,Math.min(this.scrollTop,b-T.scrollerHeight+O.bottom))),this.session.setScrollLeft(Math.max(-O.left,Math.min(this.scrollLeft,_+2*this.$padding-T.scrollerWidth+O.right)));var N=!w&&(this.$vScrollBarAlwaysVisible||T.scrollerHeight-b+D<0||this.scrollTop>O.top),P=M!==N;P&&(this.$vScroll=N,this.scrollBarV.setVisible(N));var F=this.scrollTop%this.lineHeight,z=Math.ceil(I/this.lineHeight)-1,W=Math.max(0,Math.round((this.scrollTop-F)/this.lineHeight)),j=W+z,Z,Y,q=this.lineHeight;W=C.screenToDocumentRow(W,0);var nt=C.getFoldLine(W);nt&&(W=nt.start.row),Z=C.documentToScreenRow(W,0),Y=C.getRowLength(W)*q,j=Math.min(C.screenToDocumentRow(j,0),C.getLength()-1),I=T.scrollerHeight+C.getRowLength(j)*q+Y,F=this.scrollTop-Z*q;var ot=0;return(this.layerConfig.width!=_||R)&&(ot=this.CHANGE_H_SCROLL),(R||P)&&(ot|=this.$updateCachedSize(!0,this.gutterWidth,T.width,T.height),this._signal("scrollbarVisibilityChanged"),P&&(_=this.$getLongestLine())),this.layerConfig={width:_,padding:this.$padding,firstRow:W,firstRowScreen:Z,lastRow:j,lineHeight:q,characterWidth:this.characterWidth,minHeight:I,maxHeight:b,offset:F,gutterOffset:q?Math.max(0,Math.ceil((F+T.height-T.scrollerHeight)/q)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(_-this.$padding),ot},$.prototype.$updateLines=function(){if(this.$changedLines){var C=this.$changedLines.firstRow,T=this.$changedLines.lastRow;this.$changedLines=null;var w=this.layerConfig;if(!(C>w.lastRow+1)&&!(T<w.firstRow)){if(T===1/0){this.$showGutter&&this.$gutterLayer.update(w),this.$textLayer.update(w);return}return this.$textLayer.updateLines(w,C,T),!0}}},$.prototype.$getLongestLine=function(){var C=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(C+=1),this.$textLayer&&C>this.$textLayer.MAX_LINE_LENGTH&&(C=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(C*this.characterWidth))},$.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},$.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},$.prototype.addGutterDecoration=function(C,T){this.$gutterLayer.addGutterDecoration(C,T)},$.prototype.removeGutterDecoration=function(C,T){this.$gutterLayer.removeGutterDecoration(C,T)},$.prototype.updateBreakpoints=function(C){this._rows=C,this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.setAnnotations=function(C){this.$gutterLayer.setAnnotations(C),this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},$.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},$.prototype.showCursor=function(){this.$cursorLayer.showCursor()},$.prototype.scrollSelectionIntoView=function(C,T,w){this.scrollCursorIntoView(C,w),this.scrollCursorIntoView(T,w)},$.prototype.scrollCursorIntoView=function(C,T,w){if(this.$size.scrollerHeight!==0){var y=this.$cursorLayer.getPixelPosition(C),b=y.left,_=y.top,E=w&&w.top||0,R=w&&w.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var M=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;M+E>_?(T&&M+E>_+this.lineHeight&&(_-=T*this.$size.scrollerHeight),_===0&&(_=-this.scrollMargin.top),this.session.setScrollTop(_)):M+this.$size.scrollerHeight-R<_+this.lineHeight&&(T&&M+this.$size.scrollerHeight-R<_-this.lineHeight&&(_+=T*this.$size.scrollerHeight),this.session.setScrollTop(_+this.lineHeight+R-this.$size.scrollerHeight));var I=this.scrollLeft,D=2*this.layerConfig.characterWidth;b-D<I?(b-=D,b<this.$padding+D&&(b=-this.scrollMargin.left),this.session.setScrollLeft(b)):(b+=D,I+this.$size.scrollerWidth<b+this.characterWidth?this.session.setScrollLeft(Math.round(b+this.characterWidth-this.$size.scrollerWidth)):I<=this.$padding&&b-I<this.characterWidth&&this.session.setScrollLeft(0))}},$.prototype.getScrollTop=function(){return this.session.getScrollTop()},$.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},$.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},$.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},$.prototype.scrollToRow=function(C){this.session.setScrollTop(C*this.lineHeight)},$.prototype.alignCursor=function(C,T){typeof C=="number"&&(C={row:C,column:0});var w=this.$cursorLayer.getPixelPosition(C),y=this.$size.scrollerHeight-this.lineHeight,b=w.top-y*(T||0);return this.session.setScrollTop(b),b},$.prototype.$calcSteps=function(C,T){var w=0,y=this.STEPS,b=[],_=function(E,R,M){return M*(Math.pow(E-1,3)+1)+R};for(w=0;w<y;++w)b.push(_(w/this.STEPS,C,T-C));return b},$.prototype.scrollToLine=function(C,T,w,y){var b=this.$cursorLayer.getPixelPosition({row:C,column:0}),_=b.top;T&&(_-=this.$size.scrollerHeight/2);var E=this.scrollTop;this.session.setScrollTop(_),w!==!1&&this.animateScrolling(E,y)},$.prototype.animateScrolling=function(C,T){var w=this.scrollTop;if(!this.$animatedScroll)return;var y=this;if(C==w)return;if(this.$scrollAnimation){var b=this.$scrollAnimation.steps;if(b.length&&(C=b[0],C==w))return}var _=y.$calcSteps(C,w);this.$scrollAnimation={from:C,to:w,steps:_},clearInterval(this.$timer),y.session.setScrollTop(_.shift()),y.session.$scrollTop=w;function E(){y.$timer=clearInterval(y.$timer),y.$scrollAnimation=null,y.$stopAnimation=!1,T&&T()}this.$timer=setInterval(function(){if(y.$stopAnimation){E();return}if(!y.session)return clearInterval(y.$timer);_.length?(y.session.setScrollTop(_.shift()),y.session.$scrollTop=w):w!=null?(y.session.$scrollTop=-1,y.session.setScrollTop(w),w=null):E()},10)},$.prototype.scrollToY=function(C){this.scrollTop!==C&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=C)},$.prototype.scrollToX=function(C){this.scrollLeft!==C&&(this.scrollLeft=C),this.$loop.schedule(this.CHANGE_H_SCROLL)},$.prototype.scrollTo=function(C,T){this.session.setScrollTop(T),this.session.setScrollLeft(C)},$.prototype.scrollBy=function(C,T){T&&this.session.setScrollTop(this.session.getScrollTop()+T),C&&this.session.setScrollLeft(this.session.getScrollLeft()+C)},$.prototype.isScrollableBy=function(C,T){if(T<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||T>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||C<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||C>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},$.prototype.pixelToScreenCoordinates=function(C,T){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([C,T]);C=y[1]-this.gutterWidth-this.margin.left,T=y[0]}else w=this.scroller.getBoundingClientRect();var b=C+this.scrollLeft-w.left-this.$padding,_=b/this.characterWidth,E=Math.floor((T+this.scrollTop-w.top)/this.lineHeight),R=this.$blockCursor?Math.floor(_):Math.round(_);return{row:E,column:R,side:_-R>0?1:-1,offsetX:b}},$.prototype.screenToTextCoordinates=function(C,T){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([C,T]);C=y[1]-this.gutterWidth-this.margin.left,T=y[0]}else w=this.scroller.getBoundingClientRect();var b=C+this.scrollLeft-w.left-this.$padding,_=b/this.characterWidth,E=this.$blockCursor?Math.floor(_):Math.round(_),R=Math.floor((T+this.scrollTop-w.top)/this.lineHeight);return this.session.screenToDocumentPosition(R,Math.max(E,0),b)},$.prototype.textToScreenCoordinates=function(C,T){var w=this.scroller.getBoundingClientRect(),y=this.session.documentToScreenPosition(C,T),b=this.$padding+(this.session.$bidiHandler.isBidiRow(y.row,C)?this.session.$bidiHandler.getPosLeft(y.column):Math.round(y.column*this.characterWidth)),_=y.row*this.lineHeight;return{pageX:w.left+b-this.scrollLeft,pageY:w.top+_-this.scrollTop}},$.prototype.visualizeFocus=function(){p.addCssClass(this.container,"ace_focus")},$.prototype.visualizeBlur=function(){p.removeCssClass(this.container,"ace_focus")},$.prototype.showComposition=function(C){this.$composition=C,C.cssText||(C.cssText=this.textarea.style.cssText),C.useTextareaForIME==null&&(C.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(p.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):C.markerId=this.session.addMarker(C.markerRange,"ace_composition_marker","text")},$.prototype.setCompositionText=function(C){var T=this.session.selection.cursor;this.addToken(C,"composition_placeholder",T.row,T.column),this.$moveTextAreaToCursor()},$.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),p.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var C=this.session.selection.cursor;this.removeExtraToken(C.row,C.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},$.prototype.setGhostText=function(C,T){var w=this.session.selection.cursor,y=T||{row:w.row,column:w.column};this.removeGhostText();var b=this.$calculateWrappedTextChunks(C,y);this.addToken(b[0].text,"ghost_text",y.row,y.column),this.$ghostText={text:C,position:{row:y.row,column:y.column}};var _=p.createElement("div");if(b.length>1){var E=this.hideTokensAfterPosition(y.row,y.column),R;b.slice(1).forEach(function(P){var F=p.createElement("div"),z=p.createElement("span");z.className="ace_ghost_text",P.wrapped&&(F.className="ghost_text_line_wrapped"),P.text.length===0&&(P.text=" "),z.appendChild(p.createTextNode(P.text)),F.appendChild(z),_.appendChild(F),R=F}),E.forEach(function(P){var F=p.createElement("span");f(P.type)||(F.className="ace_"+P.type.replace(/\./g," ace_")),F.appendChild(p.createTextNode(P.value)),R.appendChild(F)}),this.$ghostTextWidget={el:_,row:y.row,column:y.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var M=this.$cursorLayer.getPixelPosition(y,!0),I=this.container,D=I.getBoundingClientRect().height,O=b.length*this.lineHeight,N=O<D-M.top;if(N)return;O<D?this.scrollBy(0,(b.length-1)*this.lineHeight):this.scrollToRow(y.row)}},$.prototype.$calculateWrappedTextChunks=function(C,T){var w=this.$size.scrollerWidth-this.$padding*2,y=Math.floor(w/this.characterWidth)-2;y=y<=0?60:y;for(var b=C.split(/\r?\n/),_=[],E=0;E<b.length;E++){var R=this.session.$getDisplayTokens(b[E],T.column),M=this.session.$computeWrapSplits(R,y,this.session.$tabSize);if(M.length>0){var I=0;M.push(b[E].length);for(var D=0;D<M.length;D++){var O=b[E].slice(I,M[D]);_.push({text:O,wrapped:!0}),I=M[D]}}else _.push({text:b[E],wrapped:!1})}return _},$.prototype.removeGhostText=function(){if(this.$ghostText){var C=this.$ghostText.position;this.removeExtraToken(C.row,C.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},$.prototype.addToken=function(C,T,w,y){var b=this.session;b.bgTokenizer.lines[w]=null;var _={type:T,value:C},E=b.getTokens(w);if(y==null||!E.length)E.push(_);else for(var R=0,M=0;M<E.length;M++){var I=E[M];if(R+=I.value.length,y<=R){var D=I.value.length-(R-y),O=I.value.slice(0,D),N=I.value.slice(D);E.splice(M,1,{type:I.type,value:O},_,{type:I.type,value:N});break}}this.updateLines(w,w)},$.prototype.hideTokensAfterPosition=function(C,T){for(var w=this.session.getTokens(C),y=0,b=!1,_=[],E=0;E<w.length;E++){var R=w[E];if(y+=R.value.length,R.type!=="ghost_text"){if(b){_.push({type:R.type,value:R.value}),R.type="hidden_token";continue}y===T&&(b=!0)}}return this.updateLines(C,C),_},$.prototype.removeExtraToken=function(C,T){this.session.bgTokenizer.lines[C]=null,this.updateLines(C,C)},$.prototype.setTheme=function(C,T){var w=this;if(this.$themeId=C,w._dispatchEvent("themeChange",{theme:C}),!C||typeof C=="string"){var y=C||this.$options.theme.initialValue;i.loadModule(["theme",y],b)}else b(C);function b(_){if(w.$themeId!=C)return T&&T();if(!_||!_.cssClass)throw new Error("couldn't load module "+C+" or it didn't call define");_.$id&&(w.$themeId=_.$id),p.importCssString(_.cssText,_.cssClass,w.container),w.theme&&p.removeCssClass(w.container,w.theme.cssClass);var E="padding"in _?_.padding:"padding"in(w.theme||{})?4:w.$padding;w.$padding&&E!=w.$padding&&w.setPadding(E),w.$theme=_.cssClass,w.theme=_,p.addCssClass(w.container,_.cssClass),p.setCssClass(w.container,"ace_dark",_.isDark),w.$size&&(w.$size.width=0,w.$updateSizeAsync()),w._dispatchEvent("themeLoaded",{theme:_}),T&&T(),S.isSafari&&w.scroller&&(w.scroller.style.background="red",w.scroller.style.background="")}},$.prototype.getTheme=function(){return this.$themeId},$.prototype.setStyle=function(C,T){p.setCssClass(this.container,C,T!==!1)},$.prototype.unsetStyle=function(C){p.removeCssClass(this.container,C)},$.prototype.setCursorStyle=function(C){p.setStyle(this.scroller.style,"cursor",C)},$.prototype.setMouseCursor=function(C){p.setStyle(this.scroller.style,"cursor",C)},$.prototype.attachToShadowRoot=function(){p.importCssString(x,"ace_editor.css",this.container)},$.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},$.prototype.$updateCustomScrollbar=function(C){var T=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,C===!0?(this.scrollBarV=new g(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollTop(w.data-T.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollLeft(w.data-T.scrollMargin.left)}),this.$scrollDecorator=new A(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new l(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollTop(w.data-T.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollLeft(w.data-T.scrollMargin.left)}))},$.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var C=this;this.$resizeTimer=m.delayedCall(function(){C.destroyed||C.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(T){var w=T[0].contentRect.width,y=T[0].contentRect.height;Math.abs(C.$size.width-w)>1||Math.abs(C.$size.height-y)>1?C.$resizeTimer.delay():C.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},$}();L.prototype.CHANGE_CURSOR=1,L.prototype.CHANGE_MARKER=2,L.prototype.CHANGE_GUTTER=4,L.prototype.CHANGE_SCROLL=8,L.prototype.CHANGE_LINES=16,L.prototype.CHANGE_TEXT=32,L.prototype.CHANGE_SIZE=64,L.prototype.CHANGE_MARKER_BACK=128,L.prototype.CHANGE_MARKER_FRONT=256,L.prototype.CHANGE_FULL=512,L.prototype.CHANGE_H_SCROLL=1024,L.prototype.$changes=0,L.prototype.$padding=null,L.prototype.$frozen=!1,L.prototype.STEPS=8,s.implement(L.prototype,k),i.defineOptions(L.prototype,"renderer",{useResizeObserver:{set:function($){!$&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):$&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function($){this.$textLayer.setShowInvisibles($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function($){typeof $=="number"&&(this.$printMarginColumn=$),this.$showPrintMargin=!!$,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function($){this.$gutter.style.display=$?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function($){this.$gutterLayer.$useSvgGutterIcons=$},initialValue:!1},showFoldedAnnotations:{set:function($){this.$gutterLayer.$showFoldedAnnotations=$},initialValue:!1},fadeFoldWidgets:{set:function($){p.setCssClass(this.$gutter,"ace_fade-fold-widgets",$)},initialValue:!1},showFoldWidgets:{set:function($){this.$gutterLayer.setShowFoldWidgets($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function($){this.$textLayer.setDisplayIndentGuides($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function($){this.$textLayer.setHighlightIndentGuides($)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function($){this.$gutterLayer.setHighlightGutterLine($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function($){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function($){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function($){typeof $=="number"&&($=$+"px"),this.container.style.fontSize=$,this.updateFontSize()},initialValue:12},fontFamily:{set:function($){this.container.style.fontFamily=$,this.updateFontSize()}},maxLines:{set:function($){this.updateFull()}},minLines:{set:function($){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function($){this.updateFull()},initialValue:0},scrollPastEnd:{set:function($){$=+$||0,this.$scrollPastEnd!=$&&(this.$scrollPastEnd=$,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function($){this.$gutterLayer.$fixedWidth=!!$,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function($){this.$updateCustomScrollbar($)},initialValue:!1},theme:{set:function($){this.setTheme($)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=L});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,r){"use strict";var s=e("../lib/oop"),p=e("../lib/net"),m=e("../lib/event_emitter").EventEmitter,i=e("../config");function u(d){var l="importScripts('"+p.qualifyURL(d)+"');";try{return new Blob([l],{type:"application/javascript"})}catch{var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,g=new c;return g.append(l),g.getBlob("application/javascript")}}function o(d){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(i.get("loadWorkerFromBlob")){var l=u(d),c=window.URL||window.webkitURL,g=c.createObjectURL(l);return new Worker(g)}return new Worker(d)}var n=function(d){d.postMessage||(d=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=d,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){s.implement(this,m),this.$createWorkerFromOldConfig=function(d,l,c,g,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),i.get("packaged")||!e.toUrl)g=g||i.moduleUrl(l,"worker");else{var v=this.$normalizePath;g=g||v(e.toUrl("ace/worker/worker.js",null,"_"));var k={};d.forEach(function(x){k[x]=v(e.toUrl(x,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=o(g),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:k,module:l,classname:c}),this.$worker},this.onMessage=function(d){var l=d.data;switch(l.type){case"event":this._signal(l.name,{data:l.data});break;case"call":var c=this.callbacks[l.id];c&&(c(l.data),delete this.callbacks[l.id]);break;case"error":this.reportError(l.data);break;case"log":window.console&&console.log&&console.log.apply(console,l.data);break}},this.reportError=function(d){window.console&&console.error&&console.error(d)},this.$normalizePath=function(d){return p.qualifyURL(d)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(d){d.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(d,l){this.$worker.postMessage({command:d,args:l})},this.call=function(d,l,c){if(c){var g=this.callbackId++;this.callbacks[g]=c,l.push(g)}this.send(d,l)},this.emit=function(d,l){try{l.data&&l.data.err&&(l.data.err={message:l.data.err.message,stack:l.data.err.stack,code:l.data.err.code}),this.$worker&&this.$worker.postMessage({event:d,data:{data:l.data}})}catch(c){console.error(c.stack)}},this.attachToDocument=function(d){this.$doc&&this.terminate(),this.$doc=d,this.call("setValue",[d.getValue()]),d.on("change",this.changeListener,!0)},this.changeListener=function(d){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),d.action=="insert"?this.deltaQueue.push(d.start,d.lines):this.deltaQueue.push(d.start,d.end)},this.$sendDeltaQueue=function(){var d=this.deltaQueue;d&&(this.deltaQueue=null,d.length>50&&d.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:d}))}}).call(n.prototype);var a=function(d,l,c){var g=null,h=!1,v=Object.create(m),k=[],x=new n({messageBuffer:k,terminate:function(){},postMessage:function(S){k.push(S),g&&(h?setTimeout(A):A())}});x.setEmitSync=function(S){h=S};var A=function(){var S=k.shift();S.command?g[S.command].apply(g,S.args):S.event&&v._signal(S.event,S.data)};return v.postMessage=function(S){x.onMessage({data:S})},v.callback=function(S,f){this.postMessage({type:"call",id:f,data:S})},v.emit=function(S,f){this.postMessage({type:"event",name:S,data:f})},i.loadModule(["worker",l],function(S){for(g=new S[c](v);k.length;)A()}),x};t.UIWorkerClient=a,t.WorkerClient=n,t.createWorker=o});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,r){"use strict";var s=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,m=e("./lib/oop"),i=function(){function u(o,n,a,d,l,c){var g=this;this.length=n,this.session=o,this.doc=o.getDocument(),this.mainClass=l,this.othersClass=c,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=a;var h=o.getUndoManager().$undoStack||o.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),o.selection.on("changeCursor",this.$onCursorChange)}return u.prototype.setup=function(){var o=this,n=this.doc,a=this.session;this.selectionBefore=a.selection.toJSON(),a.selection.inMultiSelectMode&&a.selection.toSingleRange(),this.pos=n.createAnchor(this.$pos.row,this.$pos.column);var d=this.pos;d.$insertRight=!0,d.detach(),d.markerId=a.addMarker(new s(d.row,d.column,d.row,d.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(l){var c=n.createAnchor(l.row,l.column);c.$insertRight=!0,c.detach(),o.others.push(c)}),a.setUndoSelect(!1)},u.prototype.showOtherMarkers=function(){if(!this.othersActive){var o=this.session,n=this;this.othersActive=!0,this.others.forEach(function(a){a.markerId=o.addMarker(new s(a.row,a.column,a.row,a.column+n.length),n.othersClass,null,!1)})}},u.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var o=0;o<this.others.length;o++)this.session.removeMarker(this.others[o].markerId)}},u.prototype.onUpdate=function(o){if(this.$updating)return this.updateAnchors(o);var n=o;if(n.start.row===n.end.row&&n.start.row===this.pos.row){this.$updating=!0;var a=o.action==="insert"?n.end.column-n.start.column:n.start.column-n.end.column,d=n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1,l=n.start.column-this.pos.column;if(this.updateAnchors(o),d&&(this.length+=a),d&&!this.session.$fromUndo){if(o.action==="insert")for(var c=this.others.length-1;c>=0;c--){var g=this.others[c],h={row:g.row,column:g.column+l};this.doc.insertMergedLines(h,o.lines)}else if(o.action==="remove")for(var c=this.others.length-1;c>=0;c--){var g=this.others[c],h={row:g.row,column:g.column+l};this.doc.remove(new s(h.row,h.column,h.row,h.column-a))}}this.$updating=!1,this.updateMarkers()}},u.prototype.updateAnchors=function(o){this.pos.onChange(o);for(var n=this.others.length;n--;)this.others[n].onChange(o);this.updateMarkers()},u.prototype.updateMarkers=function(){if(!this.$updating){var o=this,n=this.session,a=function(l,c){n.removeMarker(l.markerId),l.markerId=n.addMarker(new s(l.row,l.column,l.row,l.column+o.length),c,null,!1)};a(this.pos,this.mainClass);for(var d=this.others.length;d--;)a(this.others[d],this.othersClass)}},u.prototype.onCursorChange=function(o){if(!(this.$updating||!this.session)){var n=this.session.selection.getCursor();n.row===this.pos.row&&n.column>=this.pos.column&&n.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",o)):(this.hideOtherMarkers(),this._emit("cursorLeave",o))}},u.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},u.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var o=this.session.getUndoManager(),n=(o.$undoStack||o.$undostack).length-this.$undoStackDepth,a=0;a<n;a++)o.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},u}();m.implement(i.prototype,p),t.PlaceHolder=i});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){var s=e("../lib/event"),p=e("../lib/useragent");function m(u,o){return u.row==o.row&&u.column==o.column}function i(u){var o=u.domEvent,n=o.altKey,a=o.shiftKey,d=o.ctrlKey,l=u.getAccelKey(),c=u.getButton();if(d&&p.isMac&&(c=o.button),u.editor.inMultiSelectMode&&c==2){u.editor.textInput.onContextMenu(u.domEvent);return}if(!d&&!n&&!l){c===0&&u.editor.inMultiSelectMode&&u.editor.exitMultiSelectMode();return}if(c===0){var g=u.editor,h=g.selection,v=g.inMultiSelectMode,k=u.getDocumentPosition(),x=h.getCursor(),A=u.inSelection()||h.isEmpty()&&m(k,x),S=u.x,f=u.y,L=function(O){S=O.clientX,f=O.clientY},$=g.session,C=g.renderer.pixelToScreenCoordinates(S,f),T=C,w;if(g.$mouseHandler.$enableJumpToDef)d&&n||l&&n?w=a?"block":"add":n&&g.$blockSelectEnabled&&(w="block");else if(l&&!n){if(w="add",!v&&a)return}else n&&g.$blockSelectEnabled&&(w="block");if(w&&p.isMac&&o.ctrlKey&&g.$mouseHandler.cancelContextMenu(),w=="add"){if(!v&&A)return;if(!v){var y=h.toOrientedRange();g.addSelectionMarker(y)}var b=h.rangeList.rangeAtPoint(k);g.inVirtualSelectionMode=!0,a&&(b=null,y=h.ranges[0]||y,g.removeSelectionMarker(y)),g.once("mouseup",function(){var O=h.toOrientedRange();b&&O.isEmpty()&&m(b.cursor,O.cursor)?h.substractPoint(O.cursor):(a?h.substractPoint(y.cursor):y&&(g.removeSelectionMarker(y),h.addRange(y)),h.addRange(O)),g.inVirtualSelectionMode=!1})}else if(w=="block"){u.stop(),g.inVirtualSelectionMode=!0;var _,E=[],R=function(){var O=g.renderer.pixelToScreenCoordinates(S,f),N=$.screenToDocumentPosition(O.row,O.column,O.offsetX);m(T,O)&&m(N,h.lead)||(T=O,g.selection.moveToPosition(N),g.renderer.scrollCursorIntoView(),g.removeSelectionMarkers(E),E=h.rectangularRangeBlock(T,C),g.$mouseHandler.$clickSelection&&E.length==1&&E[0].isEmpty()&&(E[0]=g.$mouseHandler.$clickSelection.clone()),E.forEach(g.addSelectionMarker,g),g.updateSelectionMarkers())};v&&!l?h.toSingleRange():!v&&l&&(_=h.toOrientedRange(),g.addSelectionMarker(_)),a?C=$.documentToScreenPosition(h.lead):h.moveToPosition(k),T={row:-1,column:-1};var M=function(O){R(),clearInterval(D),g.removeSelectionMarkers(E),E.length||(E=[h.toOrientedRange()]),_&&(g.removeSelectionMarker(_),h.toSingleRange(_));for(var N=0;N<E.length;N++)h.addRange(E[N]);g.inVirtualSelectionMode=!1,g.$mouseHandler.$clickSelection=null},I=R;s.capture(g.container,L,M);var D=setInterval(function(){I()},20);return u.preventDefault()}}}t.onMouseDown=i});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,r){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(p){p.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(p){p.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(p){p.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(p){p.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(p){p.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(p){p.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(p){p.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(p){p.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(p){p.multiSelect.rangeCount>1?p.multiSelect.joinSelections():p.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(p){p.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(p){p.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(p){p.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(p){p.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(p){return p&&p.inMultiSelectMode}}];var s=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new s(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,r){var s=e("./range_list").RangeList,p=e("./range").Range,m=e("./selection").Selection,i=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),o=e("./lib/lang"),n=e("./commands/multi_select_commands");t.commands=n.defaultCommands.concat(n.multiSelectCommands);var a=e("./search").Search,d=new a;function l(x,A,S){return d.$options.wrap=!0,d.$options.needle=A,d.$options.backwards=S==-1,d.find(x)}var c=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(c.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(x,A){if(x){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(x),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),A||this.fromOrientedRange(x);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}x.cursor||(x.cursor=x.end);var f=this.rangeList.add(x);return this.$onAddRange(x),f.length&&this.$onRemoveRange(f),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),A||this.fromOrientedRange(x)}},this.toSingleRange=function(x){x=x||this.ranges[0];var A=this.rangeList.removeAll();A.length&&this.$onRemoveRange(A),x&&this.fromOrientedRange(x)},this.substractPoint=function(x){var A=this.rangeList.substractPoint(x);if(A)return this.$onRemoveRange(A),A[0]},this.mergeOverlappingRanges=function(){var x=this.rangeList.merge();x.length&&this.$onRemoveRange(x)},this.$onAddRange=function(x){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(x),this._signal("addRange",{range:x})},this.$onRemoveRange=function(x){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var A=this.rangeList.ranges.pop();x.push(A),this.rangeCount=0}for(var S=x.length;S--;){var f=this.ranges.indexOf(x[S]);this.ranges.splice(f,1)}this._signal("removeRange",{ranges:x}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),A=A||this.ranges[0],A&&!A.isEqual(this.getRange())&&this.fromOrientedRange(A)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var x=this.ranges.length?this.ranges:[this.getRange()],A=[],S=0;S<x.length;S++){var f=x[S],L=f.start.row,$=f.end.row;if(L===$)A.push(f.clone());else{for(A.push(new p(L,f.start.column,L,this.session.getLine(L).length));++L<$;)A.push(this.getLineRange(L,!0));A.push(new p($,0,$,f.end.column))}S==0&&!this.isBackwards()&&(A=A.reverse())}this.toSingleRange();for(var S=A.length;S--;)this.addRange(A[S])},this.joinSelections=function(){var x=this.rangeList.ranges,A=x[x.length-1],S=p.fromPoints(x[0].start,A.end);this.toSingleRange(),this.setSelectionRange(S,A.cursor==A.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var x=this.rangeList.ranges,A=x[x.length-1],S=p.fromPoints(x[0].start,A.end);this.toSingleRange(),this.setSelectionRange(S,A.cursor==A.start)}else{var f=this.session.documentToScreenPosition(this.cursor),L=this.session.documentToScreenPosition(this.anchor),$=this.rectangularRangeBlock(f,L);$.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(x,A,S){var f=[],L=x.column<A.column;if(L)var $=x.column,C=A.column,T=x.offsetX,w=A.offsetX;else var $=A.column,C=x.column,T=A.offsetX,w=x.offsetX;var y=x.row<A.row;if(y)var b=x.row,_=A.row;else var b=A.row,_=x.row;$<0&&($=0),b<0&&(b=0),b==_&&(S=!0);for(var E,R=b;R<=_;R++){var M=p.fromPoints(this.session.screenToDocumentPosition(R,$,T),this.session.screenToDocumentPosition(R,C,w));if(M.isEmpty()){if(E&&h(M.end,E))break;E=M.end}M.cursor=L?M.start:M.end,f.push(M)}if(y&&f.reverse(),!S){for(var I=f.length-1;f[I].isEmpty()&&I>0;)I--;if(I>0)for(var D=0;f[D].isEmpty();)D++;for(var O=I;O>=D;O--)f[O].isEmpty()&&f.splice(O,1)}return f}}.call(m.prototype);var g=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(x){x.cursor||(x.cursor=x.end);var A=this.getSelectionStyle();return x.marker=this.session.addMarker(x,"ace_selection",A),this.session.$selectionMarkers.push(x),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,x},this.removeSelectionMarker=function(x){if(x.marker){this.session.removeMarker(x.marker);var A=this.session.$selectionMarkers.indexOf(x);A!=-1&&this.session.$selectionMarkers.splice(A,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(x){for(var A=this.session.$selectionMarkers,S=x.length;S--;){var f=x[S];if(f.marker){this.session.removeMarker(f.marker);var L=A.indexOf(f);L!=-1&&A.splice(L,1)}}this.session.selectionMarkerCount=A.length},this.$onAddRange=function(x){this.addSelectionMarker(x.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(x){this.removeSelectionMarkers(x.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(x){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(n.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(x){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(n.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(x){var A=x.command,S=x.editor;if(S.multiSelect){if(A.multiSelectAction)A.multiSelectAction=="forEach"?f=S.forEachSelection(A,x.args):A.multiSelectAction=="forEachLine"?f=S.forEachSelection(A,x.args,!0):A.multiSelectAction=="single"?(S.exitMultiSelectMode(),f=A.exec(S,x.args||{})):f=A.multiSelectAction(S,x.args||{});else{var f=A.exec(S,x.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return f}},this.forEachSelection=function(x,A,S){if(!this.inVirtualSelectionMode){var f=S&&S.keepOrder,L=S==!0||S&&S.$byLines,$=this.session,C=this.selection,T=C.rangeList,w=(f?C:T).ranges,y;if(!w.length)return x.exec?x.exec(this,A||{}):x(this,A||{});var b=C._eventRegistry;C._eventRegistry={};var _=new m($);this.inVirtualSelectionMode=!0;for(var E=w.length;E--;){if(L)for(;E>0&&w[E].start.row==w[E-1].end.row;)E--;_.fromOrientedRange(w[E]),_.index=E,this.selection=$.selection=_;var R=x.exec?x.exec(this,A||{}):x(this,A||{});!y&&R!==void 0&&(y=R),_.toOrientedRange(w[E])}_.detach(),this.selection=$.selection=C,this.inVirtualSelectionMode=!1,C._eventRegistry=b,C.mergeOverlappingRanges(),C.ranges[0]&&C.fromOrientedRange(C.ranges[0]);var M=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),M&&M.from==M.to&&this.renderer.animateScrolling(M.from),y}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var x="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var A=this.multiSelect.rangeList.ranges,S=[],f=0;f<A.length;f++)S.push(this.session.getTextRange(A[f]));var L=this.session.getDocument().getNewLineCharacter();x=S.join(L),x.length==(S.length-1)*L.length&&(x="")}else this.selection.isEmpty()||(x=this.session.getTextRange(this.getSelectionRange()));return x},this.$checkMultiselectChange=function(x,A){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&A==this.multiSelect.anchor)return;var f=A==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;f.row!=A.row||this.session.$clipPositionToDocument(f.row,f.column).column!=A.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(x,A,S){if(A=A||{},A.needle=x||A.needle,A.needle==null){var f=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();A.needle=this.session.getTextRange(f)}this.$search.set(A);var L=this.$search.findAll(this.session);if(!L.length)return 0;var $=this.multiSelect;S||$.toSingleRange(L[0]);for(var C=L.length;C--;)$.addRange(L[C],!0);return f&&$.rangeList.rangeAtPoint(f.start)&&$.addRange(f,!0),L.length},this.selectMoreLines=function(x,A){var S=this.selection.toOrientedRange(),f=S.cursor==S.end,L=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(L.column=this.selection.$desiredColumn);var $=this.session.screenToDocumentPosition(L.row+x,L.column);if(S.isEmpty())var T=$;else var C=this.session.documentToScreenPosition(f?S.end:S.start),T=this.session.screenToDocumentPosition(C.row+x,C.column);if(f){var w=p.fromPoints($,T);w.cursor=w.start}else{var w=p.fromPoints(T,$);w.cursor=w.end}if(w.desiredColumn=L.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(A)var y=S.cursor;this.selection.addRange(w),y&&this.selection.substractPoint(y)},this.transposeSelections=function(x){for(var A=this.session,S=A.multiSelect,f=S.ranges,L=f.length;L--;){var $=f[L];if($.isEmpty()){var C=A.getWordRange($.start.row,$.start.column);$.start.row=C.start.row,$.start.column=C.start.column,$.end.row=C.end.row,$.end.column=C.end.column}}S.mergeOverlappingRanges();for(var T=[],L=f.length;L--;){var $=f[L];T.unshift(A.getTextRange($))}x<0?T.unshift(T.pop()):T.push(T.shift());for(var L=f.length;L--;){var $=f[L],w=$.clone();A.replace($,T[L]),$.start.row=w.start.row,$.start.column=w.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(x,A,S){var f=this.session,L=f.multiSelect,$=L.toOrientedRange();if(!($.isEmpty()&&($=f.getWordRange($.start.row,$.start.column),$.cursor=x==-1?$.start:$.end,this.multiSelect.addRange($),S))){var C=f.getTextRange($),T=l(f,C,x);T&&(T.cursor=x==-1?T.start:T.end,this.session.unfold(T),this.multiSelect.addRange(T),this.renderer.scrollCursorIntoView(null,.5)),A&&this.multiSelect.substractPoint($.cursor)}},this.alignCursors=function(){var x=this.session,A=x.multiSelect,S=A.ranges,f=-1,L=S.filter(function(I){if(I.cursor.row==f)return!0;f=I.cursor.row});if(!S.length||L.length==S.length-1){var $=this.selection.getRange(),C=$.start.row,T=$.end.row,w=C==T;if(w){var y=this.session.getLength(),b;do b=this.session.getLine(T);while(/[=:]/.test(b)&&++T<y);do b=this.session.getLine(C);while(/[=:]/.test(b)&&--C>0);C<0&&(C=0),T>=y&&(T=y-1)}var _=this.session.removeFullLines(C,T);_=this.$reAlignText(_,w),this.session.insert({row:C,column:0},_.join(`
`)+`
`),w||($.start.column=0,$.end.column=_[_.length-1].length),this.selection.setRange($)}else{L.forEach(function(I){A.substractPoint(I.cursor)});var E=0,R=1/0,M=S.map(function(I){var D=I.cursor,O=x.getLine(D.row),N=O.substr(D.column).search(/\S/g);return N==-1&&(N=0),D.column>E&&(E=D.column),N<R&&(R=N),N});S.forEach(function(I,D){var O=I.cursor,N=E-O.column,P=M[D]-R;N>P?x.insert(O,o.stringRepeat(" ",N-P)):x.remove(new p(O.row,O.column,O.row,O.column-N+P)),I.start.column=I.end.column=E,I.start.row=I.end.row=O.row,I.cursor=I.end}),A.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(x,A){var S=!0,f=!0,L,$,C;return x.map(function(_){var E=_.match(/(\s*)(.*?)(\s*)([=:].*)/);return E?L==null?(L=E[1].length,$=E[2].length,C=E[3].length,E):(L+$+C!=E[1].length+E[2].length+E[3].length&&(f=!1),L!=E[1].length&&(S=!1),L>E[1].length&&(L=E[1].length),$<E[2].length&&($=E[2].length),C>E[3].length&&(C=E[3].length),E):[_]}).map(A?w:S?f?y:w:b);function T(_){return o.stringRepeat(" ",_)}function w(_){return _[2]?T(L)+_[2]+T($-_[2].length+C)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}function y(_){return _[2]?T(L+$-_[2].length)+_[2]+T(C)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}function b(_){return _[2]?T(L)+_[2]+T(C)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}}}).call(g.prototype);function h(x,A){return x.row==A.row&&x.column==A.column}t.onSessionChange=function(x){var A=x.session;A&&!A.multiSelect&&(A.$selectionMarkers=[],A.selection.$initRangeList(),A.multiSelect=A.selection),this.multiSelect=A&&A.multiSelect;var S=x.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),A&&(A.multiSelect.on("addRange",this.$onAddRange),A.multiSelect.on("removeRange",this.$onRemoveRange),A.multiSelect.on("multiSelect",this.$onMultiSelect),A.multiSelect.on("singleSelect",this.$onSingleSelect),A.multiSelect.lead.on("change",this.$checkMultiselectChange),A.multiSelect.anchor.on("change",this.$checkMultiselectChange)),A&&this.inMultiSelectMode!=A.selection.inMultiSelectMode&&(A.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(x){x.$multiselectOnSessionChange||(x.$onAddRange=x.$onAddRange.bind(x),x.$onRemoveRange=x.$onRemoveRange.bind(x),x.$onMultiSelect=x.$onMultiSelect.bind(x),x.$onSingleSelect=x.$onSingleSelect.bind(x),x.$multiselectOnSessionChange=t.onSessionChange.bind(x),x.$checkMultiselectChange=x.$checkMultiselectChange.bind(x),x.$multiselectOnSessionChange(x),x.on("changeSession",x.$multiselectOnSessionChange),x.on("mousedown",i),x.commands.addCommands(n.defaultCommands),k(x))}function k(x){if(!x.textInput)return;var A=x.textInput.getElement(),S=!1;u.addListener(A,"keydown",function(L){var $=L.keyCode==18&&!(L.ctrlKey||L.shiftKey||L.metaKey);x.$blockSelectEnabled&&$?S||(x.renderer.setMouseCursor("crosshair"),S=!0):S&&f()},x),u.addListener(A,"keyup",f,x),u.addListener(A,"blur",f,x);function f(L){S&&(x.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=v,e("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(x){v(this),x?this.on("mousedown",i):this.off("mousedown",i)},value:!0},enableBlockSelect:{set:function(x){this.$blockSelectEnabled=x},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,r){"use strict";var s=e("../../range").Range,p=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(m,i,u){var o=m.getLine(u);return this.foldingStartMarker.test(o)?"start":i=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(o)?"end":""},this.getFoldWidgetRange=function(m,i,u){return null},this.indentationBlock=function(m,i,u){var o=/\S/,n=m.getLine(i),a=n.search(o);if(a!=-1){for(var d=u||n.length,l=m.getLength(),c=i,g=i;++i<l;){var h=m.getLine(i).search(o);if(h!=-1){if(h<=a){var v=m.getTokenAt(i,0);if(!v||v.type!=="string")break}g=i}}if(g>c){var k=m.getLine(g).length;return new s(c,d,g,k)}}},this.openingBracketBlock=function(m,i,u,o,n){var a={row:u,column:o+1},d=m.$findClosingBracket(i,a,n);if(d){var l=m.foldWidgets[d.row];return l==null&&(l=m.getFoldWidget(d.row)),l=="start"&&d.row>a.row&&(d.row--,d.column=m.getLine(d.row).length),s.fromPoints(a,d)}},this.closingBracketBlock=function(m,i,u,o,n){var a={row:u,column:o},d=m.$findOpeningBracket(i,a);if(d)return d.column++,a.column--,s.fromPoints(d,a)}}).call(p.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,r){"use strict";var s=e("../line_widgets").LineWidgets,p=e("../lib/dom"),m=e("../range").Range,i=e("../config").nls;function u(n,a,d){for(var l=0,c=n.length-1;l<=c;){var g=l+c>>1,h=d(a,n[g]);if(h>0)l=g+1;else if(h<0)c=g-1;else return g}return-(l+1)}function o(n,a,d){var l=n.getAnnotations().sort(m.comparePoints);if(l.length){var c=u(l,{row:a,column:-1},m.comparePoints);c<0&&(c=-c-1),c>=l.length?c=d>0?0:l.length-1:c===0&&d<0&&(c=l.length-1);var g=l[c];if(!(!g||!d)){if(g.row===a){do g=l[c+=d];while(g&&g.row===a);if(!g)return l.slice()}var h=[];a=g.row;do h[d<0?"unshift":"push"](g),g=l[c+=d];while(g&&g.row==a);return h.length&&h}}}t.showErrorMarker=function(n,a){var d=n.session;d.widgetManager||(d.widgetManager=new s(d),d.widgetManager.attach(n));var l=n.getCursorPosition(),c=l.row,g=d.widgetManager.getWidgetsAtRow(c).filter(function($){return $.type=="errorMarker"})[0];g?g.destroy():c-=a;var h=o(d,c,a),v;if(h){var k=h[0];l.column=(k.pos&&typeof k.column!="number"?k.pos.sc:k.column)||0,l.row=k.row,v=n.renderer.$gutterLayer.$annotations[l.row]}else{if(g)return;v={displayText:[i("error-marker.good-state","Looks good!")],className:"ace_ok"}}n.session.unfold(l.row),n.selection.moveToPosition(l);var x={row:l.row,fixedWidth:!0,coverGutter:!0,el:p.createElement("div"),type:"errorMarker"},A=x.el.appendChild(p.createElement("div")),S=x.el.appendChild(p.createElement("div"));S.className="error_widget_arrow "+v.className;var f=n.renderer.$cursorLayer.getPixelPosition(l).left;S.style.left=f+n.renderer.gutterWidth-5+"px",x.el.className="error_widget_wrapper",A.className="error_widget "+v.className,v.displayText.forEach(function($,C){A.appendChild(p.createTextNode($)),C<v.displayText.length-1&&A.appendChild(p.createElement("br"))}),A.appendChild(p.createElement("div"));var L=function($,C,T){if(C===0&&(T==="esc"||T==="return"))return x.destroy(),{command:"null"}};x.destroy=function(){n.$mouseHandler.isMousePressed||(n.keyBinding.removeKeyboardHandler(L),d.widgetManager.removeLineWidget(x),n.off("changeSelection",x.destroy),n.off("changeSession",x.destroy),n.off("mouseup",x.destroy),n.off("change",x.destroy))},n.keyBinding.addKeyboardHandler(L),n.on("changeSelection",x.destroy),n.on("changeSession",x.destroy),n.on("mouseup",x.destroy),n.on("change",x.destroy),n.session.widgetManager.addLineWidget(x),x.el.onmousedown=n.focus.bind(n),n.renderer.scrollCursorIntoView(null,.5,{bottom:x.el.offsetHeight})},p.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,r){"use strict";e("./loader_build")(t);var s=e("./lib/dom"),p=e("./range").Range,m=e("./editor").Editor,i=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,o=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(n,a){if(typeof n=="string"){var d=n;if(n=document.getElementById(d),!n)throw new Error("ace.edit can't find div #"+d)}if(n&&n.env&&n.env.editor instanceof m)return n.env.editor;var l="";if(n&&/input|textarea/i.test(n.tagName)){var c=n;l=c.value,n=s.createElement("pre"),c.parentNode.replaceChild(n,c)}else n&&(l=n.textContent,n.innerHTML="");var g=t.createEditSession(l),h=new m(new o(n),g,a),v={document:g,editor:h,onResize:h.resize.bind(h,null)};return c&&(v.textarea=c),h.on("destroy",function(){v.editor.container.env=null}),h.container.env=h.env=v,h},t.createEditSession=function(n,a){var d=new i(n,a);return d.setUndoManager(new u),d},t.Range=p,t.Editor=m,t.EditSession=i,t.UndoManager=u,t.VirtualRenderer=o,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var r in e)e.hasOwnProperty(r)&&(t.ace[r]=e[r]);t.ace.default=t.ace,typeof wa=="object"&&typeof yp=="object"&&wa&&(wa.exports=t.ace)})})()});var kp=Nn((tl,el)=>{(function(e,t){typeof tl=="object"&&typeof el<"u"?el.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.DOMPurify=t())})(tl,function(){"use strict";let{entries:e,setPrototypeOf:t,isFrozen:r,getPrototypeOf:s,getOwnPropertyDescriptor:p}=Object,{freeze:m,seal:i,create:u}=Object,{apply:o,construct:n}=typeof Reflect<"u"&&Reflect;m||(m=function(V){return V}),i||(i=function(V){return V}),o||(o=function(V,st,it){return V.apply(st,it)}),n||(n=function(V,st){return new V(...st)});let a=L(Array.prototype.forEach),d=L(Array.prototype.pop),l=L(Array.prototype.push),c=L(String.prototype.toLowerCase),g=L(String.prototype.toString),h=L(String.prototype.match),v=L(String.prototype.replace),k=L(String.prototype.indexOf),x=L(String.prototype.trim),A=L(Object.prototype.hasOwnProperty),S=L(RegExp.prototype.test),f=$(TypeError);function L(K){return function(V){for(var st=arguments.length,it=new Array(st>1?st-1:0),bt=1;bt<st;bt++)it[bt-1]=arguments[bt];return o(K,V,it)}}function $(K){return function(){for(var V=arguments.length,st=new Array(V),it=0;it<V;it++)st[it]=arguments[it];return n(K,st)}}function C(K,V){let st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c;t&&t(K,null);let it=V.length;for(;it--;){let bt=V[it];if(typeof bt=="string"){let H=st(bt);H!==bt&&(r(V)||(V[it]=H),bt=H)}K[bt]=!0}return K}function T(K){for(let V=0;V<K.length;V++)A(K,V)||(K[V]=null);return K}function w(K){let V=u(null);for(let[st,it]of e(K))A(K,st)&&(Array.isArray(it)?V[st]=T(it):it&&typeof it=="object"&&it.constructor===Object?V[st]=w(it):V[st]=it);return V}function y(K,V){for(;K!==null;){let it=p(K,V);if(it){if(it.get)return L(it.get);if(typeof it.value=="function")return L(it.value)}K=s(K)}function st(){return null}return st}let b=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),E=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=m(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=m(["#text"]),O=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),N=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=i(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=i(/<%[\w\W]*|[\w\W]*%>/gm),j=i(/\${[\w\W]*}/gm),Z=i(/^data-[\-\w.\u00B7-\uFFFF]/),Y=i(/^aria-[\-\w]+$/),q=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nt=i(/^(?:\w+script|data):/i),ot=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wt=i(/^html$/i),Et=i(/^[a-z][.\w]*(-[.\w]+)+$/i);var vt=Object.freeze({__proto__:null,MUSTACHE_EXPR:z,ERB_EXPR:W,TMPLIT_EXPR:j,DATA_ATTR:Z,ARIA_ATTR:Y,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:nt,ATTR_WHITESPACE:ot,DOCTYPE_NAME:wt,CUSTOM_ELEMENT:Et});let U={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},X=function(){return typeof window>"u"?null:window},at=function(V,st){if(typeof V!="object"||typeof V.createPolicy!="function")return null;let it=null,bt="data-tt-policy-suffix";st&&st.hasAttribute(bt)&&(it=st.getAttribute(bt));let H="dompurify"+(it?"#"+it:"");try{return V.createPolicy(H,{createHTML(G){return G},createScriptURL(G){return G}})}catch{return console.warn("TrustedTypes policy "+H+" could not be created."),null}};function tt(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X(),V=ut=>tt(ut);if(V.version="3.1.6",V.removed=[],!K||!K.document||K.document.nodeType!==U.document)return V.isSupported=!1,V;let{document:st}=K,it=st,bt=it.currentScript,{DocumentFragment:H,HTMLTemplateElement:G,Node:rt,Element:ft,NodeFilter:kt,NamedNodeMap:Mt=K.NamedNodeMap||K.MozNamedAttrMap,HTMLFormElement:It,DOMParser:Dt,trustedTypes:Pt}=K,Lt=ft.prototype,Xt=y(Lt,"cloneNode"),er=y(Lt,"remove"),he=y(Lt,"nextSibling"),Wi=y(Lt,"childNodes"),rr=y(Lt,"parentNode");if(typeof G=="function"){let ut=st.createElement("template");ut.content&&ut.content.ownerDocument&&(st=ut.content.ownerDocument)}let Le,So="",{implementation:oi,createNodeIterator:Vi,createDocumentFragment:Co,getElementsByTagName:be}=st,{importNode:se}=it,te={};V.isSupported=typeof e=="function"&&typeof rr=="function"&&oi&&oi.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:$e,ERB_EXPR:we,TMPLIT_EXPR:le,DATA_ATTR:fr,ARIA_ATTR:vr,IS_SCRIPT_OR_DATA:ao,ATTR_WHITESPACE:ad,CUSTOM_ELEMENT:Hm}=vt,{IS_ALLOWED_URI:sd}=vt,xe=null,ld=C({},[...b,..._,...E,...M,...D]),ke=null,dd=C({},[...O,...N,...P,...F]),de=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Gi=null,Wa=null,cd=!0,Va=!0,pd=!1,ud=!0,ii=!1,Ga=!0,To=!1,Ka=!1,Ya=!1,ni=!1,Mn=!1,In=!1,md=!0,gd=!1,jm="user-content-",Xa=!0,Ki=!1,ai={},si=null,hd=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),bd=null,fd=C({},["audio","video","img","source","image","track"]),Ja=null,vd=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),On="http://www.w3.org/1998/Math/MathML",Dn="http://www.w3.org/2000/svg",Ur="http://www.w3.org/1999/xhtml",li=Ur,qa=!1,Qa=null,Wm=C({},[On,Dn,Ur],g),Yi=null,Vm=["application/xhtml+xml","text/html"],Gm="text/html",_e=null,di=null,Km=st.createElement("form"),wd=function(B){return B instanceof RegExp||B instanceof Function},Za=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(di&&di===B)){if((!B||typeof B!="object")&&(B={}),B=w(B),Yi=Vm.indexOf(B.PARSER_MEDIA_TYPE)===-1?Gm:B.PARSER_MEDIA_TYPE,_e=Yi==="application/xhtml+xml"?g:c,xe=A(B,"ALLOWED_TAGS")?C({},B.ALLOWED_TAGS,_e):ld,ke=A(B,"ALLOWED_ATTR")?C({},B.ALLOWED_ATTR,_e):dd,Qa=A(B,"ALLOWED_NAMESPACES")?C({},B.ALLOWED_NAMESPACES,g):Wm,Ja=A(B,"ADD_URI_SAFE_ATTR")?C(w(vd),B.ADD_URI_SAFE_ATTR,_e):vd,bd=A(B,"ADD_DATA_URI_TAGS")?C(w(fd),B.ADD_DATA_URI_TAGS,_e):fd,si=A(B,"FORBID_CONTENTS")?C({},B.FORBID_CONTENTS,_e):hd,Gi=A(B,"FORBID_TAGS")?C({},B.FORBID_TAGS,_e):{},Wa=A(B,"FORBID_ATTR")?C({},B.FORBID_ATTR,_e):{},ai=A(B,"USE_PROFILES")?B.USE_PROFILES:!1,cd=B.ALLOW_ARIA_ATTR!==!1,Va=B.ALLOW_DATA_ATTR!==!1,pd=B.ALLOW_UNKNOWN_PROTOCOLS||!1,ud=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ii=B.SAFE_FOR_TEMPLATES||!1,Ga=B.SAFE_FOR_XML!==!1,To=B.WHOLE_DOCUMENT||!1,ni=B.RETURN_DOM||!1,Mn=B.RETURN_DOM_FRAGMENT||!1,In=B.RETURN_TRUSTED_TYPE||!1,Ya=B.FORCE_BODY||!1,md=B.SANITIZE_DOM!==!1,gd=B.SANITIZE_NAMED_PROPS||!1,Xa=B.KEEP_CONTENT!==!1,Ki=B.IN_PLACE||!1,sd=B.ALLOWED_URI_REGEXP||q,li=B.NAMESPACE||Ur,de=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&wd(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(de.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&wd(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(de.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(de.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ii&&(Va=!1),Mn&&(ni=!0),ai&&(xe=C({},D),ke=[],ai.html===!0&&(C(xe,b),C(ke,O)),ai.svg===!0&&(C(xe,_),C(ke,N),C(ke,F)),ai.svgFilters===!0&&(C(xe,E),C(ke,N),C(ke,F)),ai.mathMl===!0&&(C(xe,M),C(ke,P),C(ke,F))),B.ADD_TAGS&&(xe===ld&&(xe=w(xe)),C(xe,B.ADD_TAGS,_e)),B.ADD_ATTR&&(ke===dd&&(ke=w(ke)),C(ke,B.ADD_ATTR,_e)),B.ADD_URI_SAFE_ATTR&&C(Ja,B.ADD_URI_SAFE_ATTR,_e),B.FORBID_CONTENTS&&(si===hd&&(si=w(si)),C(si,B.FORBID_CONTENTS,_e)),Xa&&(xe["#text"]=!0),To&&C(xe,["html","head","body"]),xe.table&&(C(xe,["tbody"]),delete Gi.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw f('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw f('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Le=B.TRUSTED_TYPES_POLICY,So=Le.createHTML("")}else Le===void 0&&(Le=at(Pt,bt)),Le!==null&&typeof So=="string"&&(So=Le.createHTML(""));m&&m(B),di=B}},yd=C({},["mi","mo","mn","ms","mtext"]),xd=C({},["foreignobject","annotation-xml"]),Ym=C({},["title","style","font","a","script"]),kd=C({},[..._,...E,...R]),_d=C({},[...M,...I]),Xm=function(B){let et=rr(B);(!et||!et.tagName)&&(et={namespaceURI:li,tagName:"template"});let dt=c(B.tagName),Jt=c(et.tagName);return Qa[B.namespaceURI]?B.namespaceURI===Dn?et.namespaceURI===Ur?dt==="svg":et.namespaceURI===On?dt==="svg"&&(Jt==="annotation-xml"||yd[Jt]):!!kd[dt]:B.namespaceURI===On?et.namespaceURI===Ur?dt==="math":et.namespaceURI===Dn?dt==="math"&&xd[Jt]:!!_d[dt]:B.namespaceURI===Ur?et.namespaceURI===Dn&&!xd[Jt]||et.namespaceURI===On&&!yd[Jt]?!1:!_d[dt]&&(Ym[dt]||!kd[dt]):!!(Yi==="application/xhtml+xml"&&Qa[B.namespaceURI]):!1},$r=function(B){l(V.removed,{element:B});try{rr(B).removeChild(B)}catch{er(B)}},Pn=function(B,et){try{l(V.removed,{attribute:et.getAttributeNode(B),from:et})}catch{l(V.removed,{attribute:null,from:et})}if(et.removeAttribute(B),B==="is"&&!ke[B])if(ni||Mn)try{$r(et)}catch{}else try{et.setAttribute(B,"")}catch{}},Ed=function(B){let et=null,dt=null;if(Ya)B="<remove></remove>"+B;else{let Re=h(B,/^[\r\n\t ]+/);dt=Re&&Re[0]}Yi==="application/xhtml+xml"&&li===Ur&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");let Jt=Le?Le.createHTML(B):B;if(li===Ur)try{et=new Dt().parseFromString(Jt,Yi)}catch{}if(!et||!et.documentElement){et=oi.createDocument(li,"template",null);try{et.documentElement.innerHTML=qa?So:Jt}catch{}}let Oe=et.body||et.documentElement;return B&&dt&&Oe.insertBefore(st.createTextNode(dt),Oe.childNodes[0]||null),li===Ur?be.call(et,To?"html":"body")[0]:To?et.documentElement:Oe},Sd=function(B){return Vi.call(B.ownerDocument||B,B,kt.SHOW_ELEMENT|kt.SHOW_COMMENT|kt.SHOW_TEXT|kt.SHOW_PROCESSING_INSTRUCTION|kt.SHOW_CDATA_SECTION,null)},Cd=function(B){return B instanceof It&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof Mt)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Td=function(B){return typeof rt=="function"&&B instanceof rt},Hr=function(B,et,dt){te[B]&&a(te[B],Jt=>{Jt.call(V,et,dt,di)})},Ad=function(B){let et=null;if(Hr("beforeSanitizeElements",B,null),Cd(B))return $r(B),!0;let dt=_e(B.nodeName);if(Hr("uponSanitizeElement",B,{tagName:dt,allowedTags:xe}),B.hasChildNodes()&&!Td(B.firstElementChild)&&S(/<[/\w]/g,B.innerHTML)&&S(/<[/\w]/g,B.textContent)||B.nodeType===U.progressingInstruction||Ga&&B.nodeType===U.comment&&S(/<[/\w]/g,B.data))return $r(B),!0;if(!xe[dt]||Gi[dt]){if(!Gi[dt]&&$d(dt)&&(de.tagNameCheck instanceof RegExp&&S(de.tagNameCheck,dt)||de.tagNameCheck instanceof Function&&de.tagNameCheck(dt)))return!1;if(Xa&&!si[dt]){let Jt=rr(B)||B.parentNode,Oe=Wi(B)||B.childNodes;if(Oe&&Jt){let Re=Oe.length;for(let We=Re-1;We>=0;--We){let Rr=Xt(Oe[We],!0);Rr.__removalCount=(B.__removalCount||0)+1,Jt.insertBefore(Rr,he(B))}}}return $r(B),!0}return B instanceof ft&&!Xm(B)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&S(/<\/no(script|embed|frames)/i,B.innerHTML)?($r(B),!0):(ii&&B.nodeType===U.text&&(et=B.textContent,a([$e,we,le],Jt=>{et=v(et,Jt," ")}),B.textContent!==et&&(l(V.removed,{element:B.cloneNode()}),B.textContent=et)),Hr("afterSanitizeElements",B,null),!1)},Ld=function(B,et,dt){if(md&&(et==="id"||et==="name")&&(dt in st||dt in Km))return!1;if(!(Va&&!Wa[et]&&S(fr,et))){if(!(cd&&S(vr,et))){if(!ke[et]||Wa[et]){if(!($d(B)&&(de.tagNameCheck instanceof RegExp&&S(de.tagNameCheck,B)||de.tagNameCheck instanceof Function&&de.tagNameCheck(B))&&(de.attributeNameCheck instanceof RegExp&&S(de.attributeNameCheck,et)||de.attributeNameCheck instanceof Function&&de.attributeNameCheck(et))||et==="is"&&de.allowCustomizedBuiltInElements&&(de.tagNameCheck instanceof RegExp&&S(de.tagNameCheck,dt)||de.tagNameCheck instanceof Function&&de.tagNameCheck(dt))))return!1}else if(!Ja[et]){if(!S(sd,v(dt,ad,""))){if(!((et==="src"||et==="xlink:href"||et==="href")&&B!=="script"&&k(dt,"data:")===0&&bd[B])){if(!(pd&&!S(ao,v(dt,ad,"")))){if(dt)return!1}}}}}}return!0},$d=function(B){return B!=="annotation-xml"&&h(B,Hm)},Rd=function(B){Hr("beforeSanitizeAttributes",B,null);let{attributes:et}=B;if(!et)return;let dt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke},Jt=et.length;for(;Jt--;){let Oe=et[Jt],{name:Re,namespaceURI:We,value:Rr}=Oe,Xi=_e(Re),Be=Re==="value"?Rr:x(Rr);if(dt.attrName=Xi,dt.attrValue=Be,dt.keepAttr=!0,dt.forceKeepAttr=void 0,Hr("uponSanitizeAttribute",B,dt),Be=dt.attrValue,Ga&&S(/((--!?|])>)|<\/(style|title)/i,Be)){Pn(Re,B);continue}if(dt.forceKeepAttr||(Pn(Re,B),!dt.keepAttr))continue;if(!ud&&S(/\/>/i,Be)){Pn(Re,B);continue}ii&&a([$e,we,le],Id=>{Be=v(Be,Id," ")});let Md=_e(B.nodeName);if(Ld(Md,Xi,Be)){if(gd&&(Xi==="id"||Xi==="name")&&(Pn(Re,B),Be=jm+Be),Le&&typeof Pt=="object"&&typeof Pt.getAttributeType=="function"&&!We)switch(Pt.getAttributeType(Md,Xi)){case"TrustedHTML":{Be=Le.createHTML(Be);break}case"TrustedScriptURL":{Be=Le.createScriptURL(Be);break}}try{We?B.setAttributeNS(We,Re,Be):B.setAttribute(Re,Be),Cd(B)?$r(B):d(V.removed)}catch{}}}Hr("afterSanitizeAttributes",B,null)},Jm=function ut(B){let et=null,dt=Sd(B);for(Hr("beforeSanitizeShadowDOM",B,null);et=dt.nextNode();)Hr("uponSanitizeShadowNode",et,null),!Ad(et)&&(et.content instanceof H&&ut(et.content),Rd(et));Hr("afterSanitizeShadowDOM",B,null)};return V.sanitize=function(ut){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=null,dt=null,Jt=null,Oe=null;if(qa=!ut,qa&&(ut="<!-->"),typeof ut!="string"&&!Td(ut))if(typeof ut.toString=="function"){if(ut=ut.toString(),typeof ut!="string")throw f("dirty is not a string, aborting")}else throw f("toString is not a function");if(!V.isSupported)return ut;if(Ka||Za(B),V.removed=[],typeof ut=="string"&&(Ki=!1),Ki){if(ut.nodeName){let Rr=_e(ut.nodeName);if(!xe[Rr]||Gi[Rr])throw f("root node is forbidden and cannot be sanitized in-place")}}else if(ut instanceof rt)et=Ed("<!---->"),dt=et.ownerDocument.importNode(ut,!0),dt.nodeType===U.element&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?et=dt:et.appendChild(dt);else{if(!ni&&!ii&&!To&&ut.indexOf("<")===-1)return Le&&In?Le.createHTML(ut):ut;if(et=Ed(ut),!et)return ni?null:In?So:""}et&&Ya&&$r(et.firstChild);let Re=Sd(Ki?ut:et);for(;Jt=Re.nextNode();)Ad(Jt)||(Jt.content instanceof H&&Jm(Jt.content),Rd(Jt));if(Ki)return ut;if(ni){if(Mn)for(Oe=Co.call(et.ownerDocument);et.firstChild;)Oe.appendChild(et.firstChild);else Oe=et;return(ke.shadowroot||ke.shadowrootmode)&&(Oe=se.call(it,Oe,!0)),Oe}let We=To?et.outerHTML:et.innerHTML;return To&&xe["!doctype"]&&et.ownerDocument&&et.ownerDocument.doctype&&et.ownerDocument.doctype.name&&S(wt,et.ownerDocument.doctype.name)&&(We="<!DOCTYPE "+et.ownerDocument.doctype.name+`>
`+We),ii&&a([$e,we,le],Rr=>{We=v(We,Rr," ")}),Le&&In?Le.createHTML(We):We},V.setConfig=function(){let ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Za(ut),Ka=!0},V.clearConfig=function(){di=null,Ka=!1},V.isValidAttribute=function(ut,B,et){di||Za({});let dt=_e(ut),Jt=_e(B);return Ld(dt,Jt,et)},V.addHook=function(ut,B){typeof B=="function"&&(te[ut]=te[ut]||[],l(te[ut],B))},V.removeHook=function(ut){if(te[ut])return d(te[ut])},V.removeHooks=function(ut){te[ut]&&(te[ut]=[])},V.removeAllHooks=function(){te={}},V}var ct=tt();return ct})});var Yn={};rg(Yn,{afterMain:()=>zd,afterRead:()=>Pd,afterWrite:()=>Hd,applyStyles:()=>pi,arrow:()=>Bn,auto:()=>Ji,basePlacements:()=>jr,beforeMain:()=>Nd,beforeRead:()=>Od,beforeWrite:()=>Bd,bottom:()=>fe,clippingParents:()=>es,computeStyles:()=>mi,createPopper:()=>an,createPopperBase:()=>qd,createPopperLite:()=>Qd,detectOverflow:()=>He,end:()=>so,eventListeners:()=>gi,flip:()=>Wn,hide:()=>Vn,left:()=>ne,main:()=>Fd,modifierPhases:()=>os,offset:()=>Gn,placements:()=>Qi,popper:()=>Ao,popperGenerator:()=>Po,popperOffsets:()=>fi,preventOverflow:()=>Kn,read:()=>Dd,reference:()=>rs,right:()=>ce,start:()=>Mr,top:()=>oe,variationPlacements:()=>zn,viewport:()=>qi,write:()=>Ud});var oe="top",fe="bottom",ce="right",ne="left",Ji="auto",jr=[oe,fe,ce,ne],Mr="start",so="end",es="clippingParents",qi="viewport",Ao="popper",rs="reference",zn=jr.reduce(function(e,t){return e.concat([t+"-"+Mr,t+"-"+so])},[]),Qi=[].concat(jr,[Ji]).reduce(function(e,t){return e.concat([t,t+"-"+Mr,t+"-"+so])},[]),Od="beforeRead",Dd="read",Pd="afterRead",Nd="beforeMain",Fd="main",zd="afterMain",Bd="beforeWrite",Ud="write",Hd="afterWrite",os=[Od,Dd,Pd,Nd,Fd,zd,Bd,Ud,Hd];function Ee(e){return e?(e.nodeName||"").toLowerCase():null}function ee(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function or(e){var t=ee(e).Element;return e instanceof t||e instanceof Element}function ye(e){var t=ee(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ci(e){if(typeof ShadowRoot>"u")return!1;var t=ee(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ig(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var s=t.styles[r]||{},p=t.attributes[r]||{},m=t.elements[r];!ye(m)||!Ee(m)||(Object.assign(m.style,s),Object.keys(p).forEach(function(i){var u=p[i];u===!1?m.removeAttribute(i):m.setAttribute(i,u===!0?"":u)}))})}function ng(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(s){var p=t.elements[s],m=t.attributes[s]||{},i=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:r[s]),u=i.reduce(function(o,n){return o[n]="",o},{});!ye(p)||!Ee(p)||(Object.assign(p.style,u),Object.keys(m).forEach(function(o){p.removeAttribute(o)}))})}}var pi={name:"applyStyles",enabled:!0,phase:"write",fn:ig,effect:ng,requires:["computeStyles"]};function Se(e){return e.split("-")[0]}var wr=Math.max,Lo=Math.min,Wr=Math.round;function ui(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Zi(){return!/^((?!chrome|android).)*safari/i.test(ui())}function ir(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var s=e.getBoundingClientRect(),p=1,m=1;t&&ye(e)&&(p=e.offsetWidth>0&&Wr(s.width)/e.offsetWidth||1,m=e.offsetHeight>0&&Wr(s.height)/e.offsetHeight||1);var i=or(e)?ee(e):window,u=i.visualViewport,o=!Zi()&&r,n=(s.left+(o&&u?u.offsetLeft:0))/p,a=(s.top+(o&&u?u.offsetTop:0))/m,d=s.width/p,l=s.height/m;return{width:d,height:l,top:a,right:n+d,bottom:a+l,left:n,x:n,y:a}}function $o(e){var t=ir(e),r=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:s}}function tn(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&ci(r)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ue(e){return ee(e).getComputedStyle(e)}function is(e){return["table","td","th"].indexOf(Ee(e))>=0}function Me(e){return((or(e)?e.ownerDocument:e.document)||window.document).documentElement}function Vr(e){return Ee(e)==="html"?e:e.assignedSlot||e.parentNode||(ci(e)?e.host:null)||Me(e)}function jd(e){return!ye(e)||Ue(e).position==="fixed"?null:e.offsetParent}function ag(e){var t=/firefox/i.test(ui()),r=/Trident/i.test(ui());if(r&&ye(e)){var s=Ue(e);if(s.position==="fixed")return null}var p=Vr(e);for(ci(p)&&(p=p.host);ye(p)&&["html","body"].indexOf(Ee(p))<0;){var m=Ue(p);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||t&&m.willChange==="filter"||t&&m.filter&&m.filter!=="none")return p;p=p.parentNode}return null}function yr(e){for(var t=ee(e),r=jd(e);r&&is(r)&&Ue(r).position==="static";)r=jd(r);return r&&(Ee(r)==="html"||Ee(r)==="body"&&Ue(r).position==="static")?t:r||ag(e)||t}function Ro(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Mo(e,t,r){return wr(e,Lo(t,r))}function Wd(e,t,r){var s=Mo(e,t,r);return s>r?r:s}function en(){return{top:0,right:0,bottom:0,left:0}}function rn(e){return Object.assign({},en(),e)}function on(e,t){return t.reduce(function(r,s){return r[s]=e,r},{})}var sg=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,rn(typeof t!="number"?t:on(t,jr))};function lg(e){var t,r=e.state,s=e.name,p=e.options,m=r.elements.arrow,i=r.modifiersData.popperOffsets,u=Se(r.placement),o=Ro(u),n=[ne,ce].indexOf(u)>=0,a=n?"height":"width";if(!(!m||!i)){var d=sg(p.padding,r),l=$o(m),c=o==="y"?oe:ne,g=o==="y"?fe:ce,h=r.rects.reference[a]+r.rects.reference[o]-i[o]-r.rects.popper[a],v=i[o]-r.rects.reference[o],k=yr(m),x=k?o==="y"?k.clientHeight||0:k.clientWidth||0:0,A=h/2-v/2,S=d[c],f=x-l[a]-d[g],L=x/2-l[a]/2+A,$=Mo(S,L,f),C=o;r.modifiersData[s]=(t={},t[C]=$,t.centerOffset=$-L,t)}}function dg(e){var t=e.state,r=e.options,s=r.element,p=s===void 0?"[data-popper-arrow]":s;p!=null&&(typeof p=="string"&&(p=t.elements.popper.querySelector(p),!p)||tn(t.elements.popper,p)&&(t.elements.arrow=p))}var Bn={name:"arrow",enabled:!0,phase:"main",fn:lg,effect:dg,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nr(e){return e.split("-")[1]}var cg={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pg(e,t){var r=e.x,s=e.y,p=t.devicePixelRatio||1;return{x:Wr(r*p)/p||0,y:Wr(s*p)/p||0}}function Vd(e){var t,r=e.popper,s=e.popperRect,p=e.placement,m=e.variation,i=e.offsets,u=e.position,o=e.gpuAcceleration,n=e.adaptive,a=e.roundOffsets,d=e.isFixed,l=i.x,c=l===void 0?0:l,g=i.y,h=g===void 0?0:g,v=typeof a=="function"?a({x:c,y:h}):{x:c,y:h};c=v.x,h=v.y;var k=i.hasOwnProperty("x"),x=i.hasOwnProperty("y"),A=ne,S=oe,f=window;if(n){var L=yr(r),$="clientHeight",C="clientWidth";if(L===ee(r)&&(L=Me(r),Ue(L).position!=="static"&&u==="absolute"&&($="scrollHeight",C="scrollWidth")),L=L,p===oe||(p===ne||p===ce)&&m===so){S=fe;var T=d&&L===f&&f.visualViewport?f.visualViewport.height:L[$];h-=T-s.height,h*=o?1:-1}if(p===ne||(p===oe||p===fe)&&m===so){A=ce;var w=d&&L===f&&f.visualViewport?f.visualViewport.width:L[C];c-=w-s.width,c*=o?1:-1}}var y=Object.assign({position:u},n&&cg),b=a===!0?pg({x:c,y:h},ee(r)):{x:c,y:h};if(c=b.x,h=b.y,o){var _;return Object.assign({},y,(_={},_[S]=x?"0":"",_[A]=k?"0":"",_.transform=(f.devicePixelRatio||1)<=1?"translate("+c+"px, "+h+"px)":"translate3d("+c+"px, "+h+"px, 0)",_))}return Object.assign({},y,(t={},t[S]=x?h+"px":"",t[A]=k?c+"px":"",t.transform="",t))}function ug(e){var t=e.state,r=e.options,s=r.gpuAcceleration,p=s===void 0?!0:s,m=r.adaptive,i=m===void 0?!0:m,u=r.roundOffsets,o=u===void 0?!0:u,n={placement:Se(t.placement),variation:nr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:p,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Vd(Object.assign({},n,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vd(Object.assign({},n,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var mi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ug,data:{}};var Un={passive:!0};function mg(e){var t=e.state,r=e.instance,s=e.options,p=s.scroll,m=p===void 0?!0:p,i=s.resize,u=i===void 0?!0:i,o=ee(t.elements.popper),n=[].concat(t.scrollParents.reference,t.scrollParents.popper);return m&&n.forEach(function(a){a.addEventListener("scroll",r.update,Un)}),u&&o.addEventListener("resize",r.update,Un),function(){m&&n.forEach(function(a){a.removeEventListener("scroll",r.update,Un)}),u&&o.removeEventListener("resize",r.update,Un)}}var gi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mg,data:{}};var gg={left:"right",right:"left",bottom:"top",top:"bottom"};function hi(e){return e.replace(/left|right|bottom|top/g,function(t){return gg[t]})}var hg={start:"end",end:"start"};function Hn(e){return e.replace(/start|end/g,function(t){return hg[t]})}function Io(e){var t=ee(e),r=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:r,scrollTop:s}}function Oo(e){return ir(Me(e)).left+Io(e).scrollLeft}function ns(e,t){var r=ee(e),s=Me(e),p=r.visualViewport,m=s.clientWidth,i=s.clientHeight,u=0,o=0;if(p){m=p.width,i=p.height;var n=Zi();(n||!n&&t==="fixed")&&(u=p.offsetLeft,o=p.offsetTop)}return{width:m,height:i,x:u+Oo(e),y:o}}function as(e){var t,r=Me(e),s=Io(e),p=(t=e.ownerDocument)==null?void 0:t.body,m=wr(r.scrollWidth,r.clientWidth,p?p.scrollWidth:0,p?p.clientWidth:0),i=wr(r.scrollHeight,r.clientHeight,p?p.scrollHeight:0,p?p.clientHeight:0),u=-s.scrollLeft+Oo(e),o=-s.scrollTop;return Ue(p||r).direction==="rtl"&&(u+=wr(r.clientWidth,p?p.clientWidth:0)-m),{width:m,height:i,x:u,y:o}}function Do(e){var t=Ue(e),r=t.overflow,s=t.overflowX,p=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+p+s)}function jn(e){return["html","body","#document"].indexOf(Ee(e))>=0?e.ownerDocument.body:ye(e)&&Do(e)?e:jn(Vr(e))}function lo(e,t){var r;t===void 0&&(t=[]);var s=jn(e),p=s===((r=e.ownerDocument)==null?void 0:r.body),m=ee(s),i=p?[m].concat(m.visualViewport||[],Do(s)?s:[]):s,u=t.concat(i);return p?u:u.concat(lo(Vr(i)))}function bi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bg(e,t){var r=ir(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Gd(e,t,r){return t===qi?bi(ns(e,r)):or(t)?bg(t,r):bi(as(Me(e)))}function fg(e){var t=lo(Vr(e)),r=["absolute","fixed"].indexOf(Ue(e).position)>=0,s=r&&ye(e)?yr(e):e;return or(s)?t.filter(function(p){return or(p)&&tn(p,s)&&Ee(p)!=="body"}):[]}function ss(e,t,r,s){var p=t==="clippingParents"?fg(e):[].concat(t),m=[].concat(p,[r]),i=m[0],u=m.reduce(function(o,n){var a=Gd(e,n,s);return o.top=wr(a.top,o.top),o.right=Lo(a.right,o.right),o.bottom=Lo(a.bottom,o.bottom),o.left=wr(a.left,o.left),o},Gd(e,i,s));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function nn(e){var t=e.reference,r=e.element,s=e.placement,p=s?Se(s):null,m=s?nr(s):null,i=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,o;switch(p){case oe:o={x:i,y:t.y-r.height};break;case fe:o={x:i,y:t.y+t.height};break;case ce:o={x:t.x+t.width,y:u};break;case ne:o={x:t.x-r.width,y:u};break;default:o={x:t.x,y:t.y}}var n=p?Ro(p):null;if(n!=null){var a=n==="y"?"height":"width";switch(m){case Mr:o[n]=o[n]-(t[a]/2-r[a]/2);break;case so:o[n]=o[n]+(t[a]/2-r[a]/2);break;default:}}return o}function He(e,t){t===void 0&&(t={});var r=t,s=r.placement,p=s===void 0?e.placement:s,m=r.strategy,i=m===void 0?e.strategy:m,u=r.boundary,o=u===void 0?es:u,n=r.rootBoundary,a=n===void 0?qi:n,d=r.elementContext,l=d===void 0?Ao:d,c=r.altBoundary,g=c===void 0?!1:c,h=r.padding,v=h===void 0?0:h,k=rn(typeof v!="number"?v:on(v,jr)),x=l===Ao?rs:Ao,A=e.rects.popper,S=e.elements[g?x:l],f=ss(or(S)?S:S.contextElement||Me(e.elements.popper),o,a,i),L=ir(e.elements.reference),$=nn({reference:L,element:A,strategy:"absolute",placement:p}),C=bi(Object.assign({},A,$)),T=l===Ao?C:L,w={top:f.top-T.top+k.top,bottom:T.bottom-f.bottom+k.bottom,left:f.left-T.left+k.left,right:T.right-f.right+k.right},y=e.modifiersData.offset;if(l===Ao&&y){var b=y[p];Object.keys(w).forEach(function(_){var E=[ce,fe].indexOf(_)>=0?1:-1,R=[oe,fe].indexOf(_)>=0?"y":"x";w[_]+=b[R]*E})}return w}function ls(e,t){t===void 0&&(t={});var r=t,s=r.placement,p=r.boundary,m=r.rootBoundary,i=r.padding,u=r.flipVariations,o=r.allowedAutoPlacements,n=o===void 0?Qi:o,a=nr(s),d=a?u?zn:zn.filter(function(g){return nr(g)===a}):jr,l=d.filter(function(g){return n.indexOf(g)>=0});l.length===0&&(l=d);var c=l.reduce(function(g,h){return g[h]=He(e,{placement:h,boundary:p,rootBoundary:m,padding:i})[Se(h)],g},{});return Object.keys(c).sort(function(g,h){return c[g]-c[h]})}function vg(e){if(Se(e)===Ji)return[];var t=hi(e);return[Hn(e),t,Hn(t)]}function wg(e){var t=e.state,r=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var p=r.mainAxis,m=p===void 0?!0:p,i=r.altAxis,u=i===void 0?!0:i,o=r.fallbackPlacements,n=r.padding,a=r.boundary,d=r.rootBoundary,l=r.altBoundary,c=r.flipVariations,g=c===void 0?!0:c,h=r.allowedAutoPlacements,v=t.options.placement,k=Se(v),x=k===v,A=o||(x||!g?[hi(v)]:vg(v)),S=[v].concat(A).reduce(function(W,j){return W.concat(Se(j)===Ji?ls(t,{placement:j,boundary:a,rootBoundary:d,padding:n,flipVariations:g,allowedAutoPlacements:h}):j)},[]),f=t.rects.reference,L=t.rects.popper,$=new Map,C=!0,T=S[0],w=0;w<S.length;w++){var y=S[w],b=Se(y),_=nr(y)===Mr,E=[oe,fe].indexOf(b)>=0,R=E?"width":"height",M=He(t,{placement:y,boundary:a,rootBoundary:d,altBoundary:l,padding:n}),I=E?_?ce:ne:_?fe:oe;f[R]>L[R]&&(I=hi(I));var D=hi(I),O=[];if(m&&O.push(M[b]<=0),u&&O.push(M[I]<=0,M[D]<=0),O.every(function(W){return W})){T=y,C=!1;break}$.set(y,O)}if(C)for(var N=g?3:1,P=function(j){var Z=S.find(function(Y){var q=$.get(Y);if(q)return q.slice(0,j).every(function(nt){return nt})});if(Z)return T=Z,"break"},F=N;F>0;F--){var z=P(F);if(z==="break")break}t.placement!==T&&(t.modifiersData[s]._skip=!0,t.placement=T,t.reset=!0)}}var Wn={name:"flip",enabled:!0,phase:"main",fn:wg,requiresIfExists:["offset"],data:{_skip:!1}};function Kd(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Yd(e){return[oe,ce,fe,ne].some(function(t){return e[t]>=0})}function yg(e){var t=e.state,r=e.name,s=t.rects.reference,p=t.rects.popper,m=t.modifiersData.preventOverflow,i=He(t,{elementContext:"reference"}),u=He(t,{altBoundary:!0}),o=Kd(i,s),n=Kd(u,p,m),a=Yd(o),d=Yd(n);t.modifiersData[r]={referenceClippingOffsets:o,popperEscapeOffsets:n,isReferenceHidden:a,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":d})}var Vn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:yg};function xg(e,t,r){var s=Se(e),p=[ne,oe].indexOf(s)>=0?-1:1,m=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,i=m[0],u=m[1];return i=i||0,u=(u||0)*p,[ne,ce].indexOf(s)>=0?{x:u,y:i}:{x:i,y:u}}function kg(e){var t=e.state,r=e.options,s=e.name,p=r.offset,m=p===void 0?[0,0]:p,i=Qi.reduce(function(a,d){return a[d]=xg(d,t.rects,m),a},{}),u=i[t.placement],o=u.x,n=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=n),t.modifiersData[s]=i}var Gn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kg};function _g(e){var t=e.state,r=e.name;t.modifiersData[r]=nn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var fi={name:"popperOffsets",enabled:!0,phase:"read",fn:_g,data:{}};function ds(e){return e==="x"?"y":"x"}function Eg(e){var t=e.state,r=e.options,s=e.name,p=r.mainAxis,m=p===void 0?!0:p,i=r.altAxis,u=i===void 0?!1:i,o=r.boundary,n=r.rootBoundary,a=r.altBoundary,d=r.padding,l=r.tether,c=l===void 0?!0:l,g=r.tetherOffset,h=g===void 0?0:g,v=He(t,{boundary:o,rootBoundary:n,padding:d,altBoundary:a}),k=Se(t.placement),x=nr(t.placement),A=!x,S=Ro(k),f=ds(S),L=t.modifiersData.popperOffsets,$=t.rects.reference,C=t.rects.popper,T=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,w=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,b={x:0,y:0};if(L){if(m){var _,E=S==="y"?oe:ne,R=S==="y"?fe:ce,M=S==="y"?"height":"width",I=L[S],D=I+v[E],O=I-v[R],N=c?-C[M]/2:0,P=x===Mr?$[M]:C[M],F=x===Mr?-C[M]:-$[M],z=t.elements.arrow,W=c&&z?$o(z):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:en(),Z=j[E],Y=j[R],q=Mo(0,$[M],W[M]),nt=A?$[M]/2-N-q-Z-w.mainAxis:P-q-Z-w.mainAxis,ot=A?-$[M]/2+N+q+Y+w.mainAxis:F+q+Y+w.mainAxis,wt=t.elements.arrow&&yr(t.elements.arrow),Et=wt?S==="y"?wt.clientTop||0:wt.clientLeft||0:0,vt=(_=y?.[S])!=null?_:0,U=I+nt-vt-Et,X=I+ot-vt,at=Mo(c?Lo(D,U):D,I,c?wr(O,X):O);L[S]=at,b[S]=at-I}if(u){var tt,ct=S==="x"?oe:ne,K=S==="x"?fe:ce,V=L[f],st=f==="y"?"height":"width",it=V+v[ct],bt=V-v[K],H=[oe,ne].indexOf(k)!==-1,G=(tt=y?.[f])!=null?tt:0,rt=H?it:V-$[st]-C[st]-G+w.altAxis,ft=H?V+$[st]+C[st]-G-w.altAxis:bt,kt=c&&H?Wd(rt,V,ft):Mo(c?rt:it,V,c?ft:bt);L[f]=kt,b[f]=kt-V}t.modifiersData[s]=b}}var Kn={name:"preventOverflow",enabled:!0,phase:"main",fn:Eg,requiresIfExists:["offset"]};function cs(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ps(e){return e===ee(e)||!ye(e)?Io(e):cs(e)}function Sg(e){var t=e.getBoundingClientRect(),r=Wr(t.width)/e.offsetWidth||1,s=Wr(t.height)/e.offsetHeight||1;return r!==1||s!==1}function us(e,t,r){r===void 0&&(r=!1);var s=ye(t),p=ye(t)&&Sg(t),m=Me(t),i=ir(e,p,r),u={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(s||!s&&!r)&&((Ee(t)!=="body"||Do(m))&&(u=ps(t)),ye(t)?(o=ir(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):m&&(o.x=Oo(m))),{x:i.left+u.scrollLeft-o.x,y:i.top+u.scrollTop-o.y,width:i.width,height:i.height}}function Cg(e){var t=new Map,r=new Set,s=[];e.forEach(function(m){t.set(m.name,m)});function p(m){r.add(m.name);var i=[].concat(m.requires||[],m.requiresIfExists||[]);i.forEach(function(u){if(!r.has(u)){var o=t.get(u);o&&p(o)}}),s.push(m)}return e.forEach(function(m){r.has(m.name)||p(m)}),s}function ms(e){var t=Cg(e);return os.reduce(function(r,s){return r.concat(t.filter(function(p){return p.phase===s}))},[])}function gs(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function hs(e){var t=e.reduce(function(r,s){var p=r[s.name];return r[s.name]=p?Object.assign({},p,s,{options:Object.assign({},p.options,s.options),data:Object.assign({},p.data,s.data)}):s,r},{});return Object.keys(t).map(function(r){return t[r]})}var Xd={placement:"bottom",modifiers:[],strategy:"absolute"};function Jd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Po(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,s=r===void 0?[]:r,p=t.defaultOptions,m=p===void 0?Xd:p;return function(u,o,n){n===void 0&&(n=m);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xd,m),modifiersData:{},elements:{reference:u,popper:o},attributes:{},styles:{}},d=[],l=!1,c={state:a,setOptions:function(k){var x=typeof k=="function"?k(a.options):k;h(),a.options=Object.assign({},m,a.options,x),a.scrollParents={reference:or(u)?lo(u):u.contextElement?lo(u.contextElement):[],popper:lo(o)};var A=ms(hs([].concat(s,a.options.modifiers)));return a.orderedModifiers=A.filter(function(S){return S.enabled}),g(),c.update()},forceUpdate:function(){if(!l){var k=a.elements,x=k.reference,A=k.popper;if(Jd(x,A)){a.rects={reference:us(x,yr(A),a.options.strategy==="fixed"),popper:$o(A)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(w){return a.modifiersData[w.name]=Object.assign({},w.data)});for(var S=0;S<a.orderedModifiers.length;S++){if(a.reset===!0){a.reset=!1,S=-1;continue}var f=a.orderedModifiers[S],L=f.fn,$=f.options,C=$===void 0?{}:$,T=f.name;typeof L=="function"&&(a=L({state:a,options:C,name:T,instance:c})||a)}}}},update:gs(function(){return new Promise(function(v){c.forceUpdate(),v(a)})}),destroy:function(){h(),l=!0}};if(!Jd(u,o))return c;c.setOptions(n).then(function(v){!l&&n.onFirstUpdate&&n.onFirstUpdate(v)});function g(){a.orderedModifiers.forEach(function(v){var k=v.name,x=v.options,A=x===void 0?{}:x,S=v.effect;if(typeof S=="function"){var f=S({state:a,name:k,instance:c,options:A}),L=function(){};d.push(f||L)}})}function h(){d.forEach(function(v){return v()}),d=[]}return c}}var qd=Po();var Tg=[gi,fi,mi,pi],Qd=Po({defaultModifiers:Tg});var Ag=[gi,fi,mi,pi,Gn,Wn,Kn,Bn,Vn],an=Po({defaultModifiers:Ag});var co=new Map,bs={set(e,t,r){co.has(e)||co.set(e,new Map);let s=co.get(e);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,r)},get(e,t){return co.has(e)&&co.get(e).get(t)||null},remove(e,t){if(!co.has(e))return;let r=co.get(e);r.delete(t),r.size===0&&co.delete(e)}},Lg=1e6,$g=1e3,Rs="transitionend",Tc=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,r)=>`#${CSS.escape(r)}`)),e),Rg=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Mg=e=>{do e+=Math.floor(Math.random()*Lg);while(document.getElementById(e));return e},Ig=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e),s=Number.parseFloat(t),p=Number.parseFloat(r);return!s&&!p?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*$g)},Ac=e=>{e.dispatchEvent(new Event(Rs))},Gr=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),po=e=>Gr(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(Tc(e)):null,Ei=e=>{if(!Gr(e)||e.getClientRects().length===0)return!1;let t=getComputedStyle(e).getPropertyValue("visibility")==="visible",r=e.closest("details:not([open])");if(!r)return t;if(r!==e){let s=e.closest("summary");if(s&&s.parentNode!==r||s===null)return!1}return t},uo=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",Lc=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Lc(e.parentNode):null},oa=()=>{},un=e=>{e.offsetHeight},$c=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,fs=[],Og=e=>{document.readyState==="loading"?(fs.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of fs)t()}),fs.push(e)):e()},ar=()=>document.documentElement.dir==="rtl",lr=e=>{Og(()=>{let t=$c();if(t){let r=e.NAME,s=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=s,e.jQueryInterface)}})},Ve=(e,t=[],r=e)=>typeof e=="function"?e(...t):r,Rc=(e,t,r=!0)=>{if(!r){Ve(e);return}let p=Ig(t)+5,m=!1,i=({target:u})=>{u===t&&(m=!0,t.removeEventListener(Rs,i),Ve(e))};t.addEventListener(Rs,i),setTimeout(()=>{m||Ac(t)},p)},Ps=(e,t,r,s)=>{let p=e.length,m=e.indexOf(t);return m===-1?!r&&s?e[p-1]:e[0]:(m+=r?1:-1,s&&(m=(m+p)%p),e[Math.max(0,Math.min(m,p-1))])},Dg=/[^.]*(?=\..*)\.|.*/,Pg=/\..*/,Ng=/::\d+$/,vs={},Zd=1,Mc={mouseenter:"mouseover",mouseleave:"mouseout"},Fg=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ic(e,t){return t&&`${t}::${Zd++}`||e.uidEvent||Zd++}function Oc(e){let t=Ic(e);return e.uidEvent=t,vs[t]=vs[t]||{},vs[t]}function zg(e,t){return function r(s){return Ns(s,{delegateTarget:e}),r.oneOff&&J.off(e,s.type,t),t.apply(e,[s])}}function Bg(e,t,r){return function s(p){let m=e.querySelectorAll(t);for(let{target:i}=p;i&&i!==this;i=i.parentNode)for(let u of m)if(u===i)return Ns(p,{delegateTarget:i}),s.oneOff&&J.off(e,p.type,t,r),r.apply(i,[p])}}function Dc(e,t,r=null){return Object.values(e).find(s=>s.callable===t&&s.delegationSelector===r)}function Pc(e,t,r){let s=typeof t=="string",p=s?r:t||r,m=Nc(e);return Fg.has(m)||(m=e),[s,p,m]}function tc(e,t,r,s,p){if(typeof t!="string"||!e)return;let[m,i,u]=Pc(t,r,s);t in Mc&&(i=(g=>function(h){if(!h.relatedTarget||h.relatedTarget!==h.delegateTarget&&!h.delegateTarget.contains(h.relatedTarget))return g.call(this,h)})(i));let o=Oc(e),n=o[u]||(o[u]={}),a=Dc(n,i,m?r:null);if(a){a.oneOff=a.oneOff&&p;return}let d=Ic(i,t.replace(Dg,"")),l=m?Bg(e,r,i):zg(e,i);l.delegationSelector=m?r:null,l.callable=i,l.oneOff=p,l.uidEvent=d,n[d]=l,e.addEventListener(u,l,m)}function Ms(e,t,r,s,p){let m=Dc(t[r],s,p);m&&(e.removeEventListener(r,m,!!p),delete t[r][m.uidEvent])}function Ug(e,t,r,s){let p=t[r]||{};for(let[m,i]of Object.entries(p))m.includes(s)&&Ms(e,t,r,i.callable,i.delegationSelector)}function Nc(e){return e=e.replace(Pg,""),Mc[e]||e}var J={on(e,t,r,s){tc(e,t,r,s,!1)},one(e,t,r,s){tc(e,t,r,s,!0)},off(e,t,r,s){if(typeof t!="string"||!e)return;let[p,m,i]=Pc(t,r,s),u=i!==t,o=Oc(e),n=o[i]||{},a=t.startsWith(".");if(typeof m<"u"){if(!Object.keys(n).length)return;Ms(e,o,i,m,p?r:null);return}if(a)for(let d of Object.keys(o))Ug(e,o,d,t.slice(1));for(let[d,l]of Object.entries(n)){let c=d.replace(Ng,"");(!u||t.includes(c))&&Ms(e,o,i,l.callable,l.delegationSelector)}},trigger(e,t,r){if(typeof t!="string"||!e)return null;let s=$c(),p=Nc(t),m=t!==p,i=null,u=!0,o=!0,n=!1;m&&s&&(i=s.Event(t,r),s(e).trigger(i),u=!i.isPropagationStopped(),o=!i.isImmediatePropagationStopped(),n=i.isDefaultPrevented());let a=Ns(new Event(t,{bubbles:u,cancelable:!0}),r);return n&&a.preventDefault(),o&&e.dispatchEvent(a),a.defaultPrevented&&i&&i.preventDefault(),a}};function Ns(e,t={}){for(let[r,s]of Object.entries(t))try{e[r]=s}catch{Object.defineProperty(e,r,{configurable:!0,get(){return s}})}return e}function ec(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function ws(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var Kr={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${ws(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ws(t)}`)},getDataAttributes(e){if(!e)return{};let t={},r=Object.keys(e.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(let s of r){let p=s.replace(/^bs/,"");p=p.charAt(0).toLowerCase()+p.slice(1,p.length),t[p]=ec(e.dataset[s])}return t},getDataAttribute(e,t){return ec(e.getAttribute(`data-bs-${ws(t)}`))}},zo=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,r){let s=Gr(r)?Kr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Gr(r)?Kr.getDataAttributes(r):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,r=this.constructor.DefaultType){for(let[s,p]of Object.entries(r)){let m=t[s],i=Gr(m)?"element":Rg(m);if(!new RegExp(p).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${i}" but expected type "${p}".`)}}},Hg="5.3.3",Je=class extends zo{constructor(t,r){super(),t=po(t),t&&(this._element=t,this._config=this._getConfig(r),bs.set(this._element,this.constructor.DATA_KEY,this))}dispose(){bs.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,r,s=!0){Rc(t,r,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return bs.get(po(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return Hg}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},ys=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t?t.split(",").map(r=>Tc(r)).join(","):null},gt={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){let r=[],s=e.parentNode.closest(t);for(;s;)r.push(s),s=s.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(r=>!uo(r)&&Ei(r))},getSelectorFromElement(e){let t=ys(e);return t&&gt.findOne(t)?t:null},getElementFromSelector(e){let t=ys(e);return t?gt.findOne(t):null},getMultipleElementsFromSelector(e){let t=ys(e);return t?gt.find(t):[]}},ua=(e,t="hide")=>{let r=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;J.on(document,r,`[data-bs-dismiss="${s}"]`,function(p){if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),uo(this))return;let m=gt.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(m)[t]()})},jg="alert",Wg="bs.alert",Fc=`.${Wg}`,Vg=`close${Fc}`,Gg=`closed${Fc}`,Kg="fade",Yg="show",ia=class e extends Je{static get NAME(){return jg}close(){if(J.trigger(this._element,Vg).defaultPrevented)return;this._element.classList.remove(Yg);let r=this._element.classList.contains(Kg);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),J.trigger(this._element,Gg),this.dispose()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};ua(ia,"close");lr(ia);var Xg="button",Jg="bs.button",qg=`.${Jg}`,Qg=".data-api",Zg="active",rc='[data-bs-toggle="button"]',th=`click${qg}${Qg}`,na=class e extends Je{static get NAME(){return Xg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Zg))}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);t==="toggle"&&r[t]()})}};J.on(document,th,rc,e=>{e.preventDefault();let t=e.target.closest(rc);na.getOrCreateInstance(t).toggle()});lr(na);var eh="swipe",Si=".bs.swipe",rh=`touchstart${Si}`,oh=`touchmove${Si}`,ih=`touchend${Si}`,nh=`pointerdown${Si}`,ah=`pointerup${Si}`,sh="touch",lh="pen",dh="pointer-event",ch=40,ph={endCallback:null,leftCallback:null,rightCallback:null},uh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},aa=class e extends zo{constructor(t,r){super(),this._element=t,!(!t||!e.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return ph}static get DefaultType(){return uh}static get NAME(){return eh}dispose(){J.off(this._element,Si)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ve(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=ch)return;let r=t/this._deltaX;this._deltaX=0,r&&Ve(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,nh,t=>this._start(t)),J.on(this._element,ah,t=>this._end(t)),this._element.classList.add(dh)):(J.on(this._element,rh,t=>this._start(t)),J.on(this._element,oh,t=>this._move(t)),J.on(this._element,ih,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===lh||t.pointerType===sh)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},mh="carousel",gh="bs.carousel",go=`.${gh}`,zc=".data-api",hh="ArrowLeft",bh="ArrowRight",fh=500,sn="next",vi="prev",yi="left",ea="right",vh=`slide${go}`,xs=`slid${go}`,wh=`keydown${go}`,yh=`mouseenter${go}`,xh=`mouseleave${go}`,kh=`dragstart${go}`,_h=`load${go}${zc}`,Eh=`click${go}${zc}`,Bc="carousel",Xn="active",Sh="slide",Ch="carousel-item-end",Th="carousel-item-start",Ah="carousel-item-next",Lh="carousel-item-prev",Uc=".active",Hc=".carousel-item",$h=Uc+Hc,Rh=".carousel-item img",Mh=".carousel-indicators",Ih="[data-bs-slide], [data-bs-slide-to]",Oh='[data-bs-ride="carousel"]',Dh={[hh]:ea,[bh]:yi},Ph={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Nh={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},dn=class e extends Je{constructor(t,r){super(t,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=gt.findOne(Mh,this._element),this._addEventListeners(),this._config.ride===Bc&&this.cycle()}static get Default(){return Ph}static get DefaultType(){return Nh}static get NAME(){return mh}next(){this._slide(sn)}nextWhenVisible(){!document.hidden&&Ei(this._element)&&this.next()}prev(){this._slide(vi)}pause(){this._isSliding&&Ac(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){J.one(this._element,xs,()=>this.cycle());return}this.cycle()}}to(t){let r=this._getItems();if(t>r.length-1||t<0)return;if(this._isSliding){J.one(this._element,xs,()=>this.to(t));return}let s=this._getItemIndex(this._getActive());if(s===t)return;let p=t>s?sn:vi;this._slide(p,r[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&J.on(this._element,wh,t=>this._keydown(t)),this._config.pause==="hover"&&(J.on(this._element,yh,()=>this.pause()),J.on(this._element,xh,()=>this._maybeEnableCycle())),this._config.touch&&aa.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let s of gt.find(Rh,this._element))J.on(s,kh,p=>p.preventDefault());let r={leftCallback:()=>this._slide(this._directionToOrder(yi)),rightCallback:()=>this._slide(this._directionToOrder(ea)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),fh+this._config.interval))}};this._swipeHelper=new aa(this._element,r)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let r=Dh[t.key];r&&(t.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let r=gt.findOne(Uc,this._indicatorsElement);r.classList.remove(Xn),r.removeAttribute("aria-current");let s=gt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(Xn),s.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let r=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(t,r=null){if(this._isSliding)return;let s=this._getActive(),p=t===sn,m=r||Ps(this._getItems(),s,p,this._config.wrap);if(m===s)return;let i=this._getItemIndex(m),u=c=>J.trigger(this._element,c,{relatedTarget:m,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:i});if(u(vh).defaultPrevented||!s||!m)return;let n=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=m;let a=p?Th:Ch,d=p?Ah:Lh;m.classList.add(d),un(m),s.classList.add(a),m.classList.add(a);let l=()=>{m.classList.remove(a,d),m.classList.add(Xn),s.classList.remove(Xn,d,a),this._isSliding=!1,u(xs)};this._queueCallback(l,s,this._isAnimated()),n&&this.cycle()}_isAnimated(){return this._element.classList.contains(Sh)}_getActive(){return gt.findOne($h,this._element)}_getItems(){return gt.find(Hc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ar()?t===yi?vi:sn:t===yi?sn:vi}_orderToDirection(t){return ar()?t===vi?yi:ea:t===vi?ea:yi}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="number"){r.to(t);return}if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};J.on(document,Eh,Ih,function(e){let t=gt.getElementFromSelector(this);if(!t||!t.classList.contains(Bc))return;e.preventDefault();let r=dn.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){r.to(s),r._maybeEnableCycle();return}if(Kr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});J.on(window,_h,()=>{let e=gt.find(Oh);for(let t of e)dn.getOrCreateInstance(t)});lr(dn);var Fh="collapse",zh="bs.collapse",mn=`.${zh}`,Bh=".data-api",Uh=`show${mn}`,Hh=`shown${mn}`,jh=`hide${mn}`,Wh=`hidden${mn}`,Vh=`click${mn}${Bh}`,ks="show",ki="collapse",Jn="collapsing",Gh="collapsed",Kh=`:scope .${ki} .${ki}`,Yh="collapse-horizontal",Xh="width",Jh="height",qh=".collapse.show, .collapse.collapsing",Is='[data-bs-toggle="collapse"]',Qh={parent:null,toggle:!0},Zh={parent:"(null|element)",toggle:"boolean"},sa=class e extends Je{constructor(t,r){super(t,r),this._isTransitioning=!1,this._triggerArray=[];let s=gt.find(Is);for(let p of s){let m=gt.getSelectorFromElement(p),i=gt.find(m).filter(u=>u===this._element);m!==null&&i.length&&this._triggerArray.push(p)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Qh}static get DefaultType(){return Zh}static get NAME(){return Fh}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(qh).filter(u=>u!==this._element).map(u=>e.getOrCreateInstance(u,{toggle:!1}))),t.length&&t[0]._isTransitioning||J.trigger(this._element,Uh).defaultPrevented)return;for(let u of t)u.hide();let s=this._getDimension();this._element.classList.remove(ki),this._element.classList.add(Jn),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let p=()=>{this._isTransitioning=!1,this._element.classList.remove(Jn),this._element.classList.add(ki,ks),this._element.style[s]="",J.trigger(this._element,Hh)},i=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(p,this._element,!0),this._element.style[s]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,jh).defaultPrevented)return;let r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,un(this._element),this._element.classList.add(Jn),this._element.classList.remove(ki,ks);for(let p of this._triggerArray){let m=gt.getElementFromSelector(p);m&&!this._isShown(m)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0;let s=()=>{this._isTransitioning=!1,this._element.classList.remove(Jn),this._element.classList.add(ki),J.trigger(this._element,Wh)};this._element.style[r]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(ks)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=po(t.parent),t}_getDimension(){return this._element.classList.contains(Yh)?Xh:Jh}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(Is);for(let r of t){let s=gt.getElementFromSelector(r);s&&this._addAriaAndCollapsedClass([r],this._isShown(s))}}_getFirstLevelChildren(t){let r=gt.find(Kh,this._config.parent);return gt.find(t,this._config.parent).filter(s=>!r.includes(s))}_addAriaAndCollapsedClass(t,r){if(t.length)for(let s of t)s.classList.toggle(Gh,!r),s.setAttribute("aria-expanded",r)}static jQueryInterface(t){let r={};return typeof t=="string"&&/show|hide/.test(t)&&(r.toggle=!1),this.each(function(){let s=e.getOrCreateInstance(this,r);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}};J.on(document,Vh,Is,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(let t of gt.getMultipleElementsFromSelector(this))sa.getOrCreateInstance(t,{toggle:!1}).toggle()});lr(sa);var oc="dropdown",tb="bs.dropdown",Uo=`.${tb}`,Fs=".data-api",eb="Escape",ic="Tab",rb="ArrowUp",nc="ArrowDown",ob=2,ib=`hide${Uo}`,nb=`hidden${Uo}`,ab=`show${Uo}`,sb=`shown${Uo}`,jc=`click${Uo}${Fs}`,Wc=`keydown${Uo}${Fs}`,lb=`keyup${Uo}${Fs}`,xi="show",db="dropup",cb="dropend",pb="dropstart",ub="dropup-center",mb="dropdown-center",No='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',gb=`${No}.${xi}`,ra=".dropdown-menu",hb=".navbar",bb=".navbar-nav",fb=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",vb=ar()?"top-end":"top-start",wb=ar()?"top-start":"top-end",yb=ar()?"bottom-end":"bottom-start",xb=ar()?"bottom-start":"bottom-end",kb=ar()?"left-start":"right-start",_b=ar()?"right-start":"left-start",Eb="top",Sb="bottom",Cb={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Tb={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},Ir=class e extends Je{constructor(t,r){super(t,r),this._popper=null,this._parent=this._element.parentNode,this._menu=gt.next(this._element,ra)[0]||gt.prev(this._element,ra)[0]||gt.findOne(ra,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Cb}static get DefaultType(){return Tb}static get NAME(){return oc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(uo(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!J.trigger(this._element,ab,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(bb))for(let s of[].concat(...document.body.children))J.on(s,"mouseover",oa);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(xi),this._element.classList.add(xi),J.trigger(this._element,sb,t)}}hide(){if(uo(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!J.trigger(this._element,ib,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let s of[].concat(...document.body.children))J.off(s,"mouseover",oa);this._popper&&this._popper.destroy(),this._menu.classList.remove(xi),this._element.classList.remove(xi),this._element.setAttribute("aria-expanded","false"),Kr.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,nb,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Gr(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${oc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Yn>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Gr(this._config.reference)?t=po(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let r=this._getPopperConfig();this._popper=an(t,this._menu,r)}_isShown(){return this._menu.classList.contains(xi)}_getPlacement(){let t=this._parent;if(t.classList.contains(cb))return kb;if(t.classList.contains(pb))return _b;if(t.classList.contains(ub))return Eb;if(t.classList.contains(mb))return Sb;let r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(db)?r?wb:vb:r?xb:yb}_detectNavbar(){return this._element.closest(hb)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Kr.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ve(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:r}){let s=gt.find(fb,this._menu).filter(p=>Ei(p));s.length&&Ps(s,r,t===nc,!s.includes(r)).focus()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}static clearMenus(t){if(t.button===ob||t.type==="keyup"&&t.key!==ic)return;let r=gt.find(gb);for(let s of r){let p=e.getInstance(s);if(!p||p._config.autoClose===!1)continue;let m=t.composedPath(),i=m.includes(p._menu);if(m.includes(p._element)||p._config.autoClose==="inside"&&!i||p._config.autoClose==="outside"&&i||p._menu.contains(t.target)&&(t.type==="keyup"&&t.key===ic||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let u={relatedTarget:p._element};t.type==="click"&&(u.clickEvent=t),p._completeHide(u)}}static dataApiKeydownHandler(t){let r=/input|textarea/i.test(t.target.tagName),s=t.key===eb,p=[rb,nc].includes(t.key);if(!p&&!s||r&&!s)return;t.preventDefault();let m=this.matches(No)?this:gt.prev(this,No)[0]||gt.next(this,No)[0]||gt.findOne(No,t.delegateTarget.parentNode),i=e.getOrCreateInstance(m);if(p){t.stopPropagation(),i.show(),i._selectMenuItem(t);return}i._isShown()&&(t.stopPropagation(),i.hide(),m.focus())}};J.on(document,Wc,No,Ir.dataApiKeydownHandler);J.on(document,Wc,ra,Ir.dataApiKeydownHandler);J.on(document,jc,Ir.clearMenus);J.on(document,lb,Ir.clearMenus);J.on(document,jc,No,function(e){e.preventDefault(),Ir.getOrCreateInstance(this).toggle()});lr(Ir);var Vc="backdrop",Ab="fade",ac="show",sc=`mousedown.bs.${Vc}`,Lb={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},$b={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},la=class extends zo{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Lb}static get DefaultType(){return $b}static get NAME(){return Vc}show(t){if(!this._config.isVisible){Ve(t);return}this._append();let r=this._getElement();this._config.isAnimated&&un(r),r.classList.add(ac),this._emulateAnimation(()=>{Ve(t)})}hide(t){if(!this._config.isVisible){Ve(t);return}this._getElement().classList.remove(ac),this._emulateAnimation(()=>{this.dispose(),Ve(t)})}dispose(){this._isAppended&&(J.off(this._element,sc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Ab),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=po(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),J.on(t,sc,()=>{Ve(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Rc(t,this._getElement(),this._config.isAnimated)}},Rb="focustrap",Mb="bs.focustrap",da=`.${Mb}`,Ib=`focusin${da}`,Ob=`keydown.tab${da}`,Db="Tab",Pb="forward",lc="backward",Nb={autofocus:!0,trapElement:null},Fb={autofocus:"boolean",trapElement:"element"},ca=class extends zo{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Nb}static get DefaultType(){return Fb}static get NAME(){return Rb}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,da),J.on(document,Ib,t=>this._handleFocusin(t)),J.on(document,Ob,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,J.off(document,da))}_handleFocusin(t){let{trapElement:r}=this._config;if(t.target===document||t.target===r||r.contains(t.target))return;let s=gt.focusableChildren(r);s.length===0?r.focus():this._lastTabNavDirection===lc?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Db&&(this._lastTabNavDirection=t.shiftKey?lc:Pb)}},dc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cc=".sticky-top",qn="padding-right",pc="margin-right",cn=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,qn,r=>r+t),this._setElementAttributes(dc,qn,r=>r+t),this._setElementAttributes(cc,pc,r=>r-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,qn),this._resetElementAttributes(dc,qn),this._resetElementAttributes(cc,pc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,s){let p=this.getWidth(),m=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+p)return;this._saveInitialAttribute(i,r);let u=window.getComputedStyle(i).getPropertyValue(r);i.style.setProperty(r,`${s(Number.parseFloat(u))}px`)};this._applyManipulationCallback(t,m)}_saveInitialAttribute(t,r){let s=t.style.getPropertyValue(r);s&&Kr.setDataAttribute(t,r,s)}_resetElementAttributes(t,r){let s=p=>{let m=Kr.getDataAttribute(p,r);if(m===null){p.style.removeProperty(r);return}Kr.removeDataAttribute(p,r),p.style.setProperty(r,m)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,r){if(Gr(t)){r(t);return}for(let s of gt.find(t,this._element))r(s)}},zb="modal",Bb="bs.modal",sr=`.${Bb}`,Ub=".data-api",Hb="Escape",jb=`hide${sr}`,Wb=`hidePrevented${sr}`,Gc=`hidden${sr}`,Kc=`show${sr}`,Vb=`shown${sr}`,Gb=`resize${sr}`,Kb=`click.dismiss${sr}`,Yb=`mousedown.dismiss${sr}`,Xb=`keydown.dismiss${sr}`,Jb=`click${sr}${Ub}`,uc="modal-open",qb="fade",mc="show",_s="modal-static",Qb=".modal.show",Zb=".modal-dialog",tf=".modal-body",ef='[data-bs-toggle="modal"]',rf={backdrop:!0,focus:!0,keyboard:!0},of={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Or=class e extends Je{constructor(t,r){super(t,r),this._dialog=gt.findOne(Zb,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new cn,this._addEventListeners()}static get Default(){return rf}static get DefaultType(){return of}static get NAME(){return zb}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||J.trigger(this._element,Kc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(uc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||J.trigger(this._element,jb).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(mc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){J.off(window,sr),J.off(this._dialog,sr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new la({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ca({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let r=gt.findOne(tf,this._dialog);r&&(r.scrollTop=0),un(this._element),this._element.classList.add(mc);let s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,Vb,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,Xb,t=>{if(t.key===Hb){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),J.on(window,Gb,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,Yb,t=>{J.one(this._element,Kb,r=>{if(!(this._element!==t.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(uc),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,Gc)})}_isAnimated(){return this._element.classList.contains(qb)}_triggerBackdropTransition(){if(J.trigger(this._element,Wb).defaultPrevented)return;let r=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(_s)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(_s),this._queueCallback(()=>{this._element.classList.remove(_s),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),s=r>0;if(s&&!t){let p=ar()?"paddingLeft":"paddingRight";this._element.style[p]=`${r}px`}if(!s&&t){let p=ar()?"paddingRight":"paddingLeft";this._element.style[p]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){let s=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](r)}})}};J.on(document,Jb,ef,function(e){let t=gt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),J.one(t,Kc,p=>{p.defaultPrevented||J.one(t,Gc,()=>{Ei(this)&&this.focus()})});let r=gt.findOne(Qb);r&&Or.getInstance(r).hide(),Or.getOrCreateInstance(t).toggle(this)});ua(Or);lr(Or);var nf="offcanvas",af="bs.offcanvas",Yr=`.${af}`,Yc=".data-api",sf=`load${Yr}${Yc}`,lf="Escape",gc="show",hc="showing",bc="hiding",df="offcanvas-backdrop",Xc=".offcanvas.show",cf=`show${Yr}`,pf=`shown${Yr}`,uf=`hide${Yr}`,fc=`hidePrevented${Yr}`,Jc=`hidden${Yr}`,mf=`resize${Yr}`,gf=`click${Yr}${Yc}`,hf=`keydown.dismiss${Yr}`,bf='[data-bs-toggle="offcanvas"]',ff={backdrop:!0,keyboard:!0,scroll:!1},vf={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},mo=class e extends Je{constructor(t,r){super(t,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ff}static get DefaultType(){return vf}static get NAME(){return nf}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||J.trigger(this._element,cf,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new cn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(hc);let s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(gc),this._element.classList.remove(hc),J.trigger(this._element,pf,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||J.trigger(this._element,uf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(bc),this._backdrop.hide();let r=()=>{this._element.classList.remove(gc,bc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new cn().reset(),J.trigger(this._element,Jc)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){J.trigger(this._element,fc);return}this.hide()},r=!!this._config.backdrop;return new la({className:df,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?t:null})}_initializeFocusTrap(){return new ca({trapElement:this._element})}_addEventListeners(){J.on(this._element,hf,t=>{if(t.key===lf){if(this._config.keyboard){this.hide();return}J.trigger(this._element,fc)}})}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};J.on(document,gf,bf,function(e){let t=gt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),uo(this))return;J.one(t,Jc,()=>{Ei(this)&&this.focus()});let r=gt.findOne(Xc);r&&r!==t&&mo.getInstance(r).hide(),mo.getOrCreateInstance(t).toggle(this)});J.on(window,sf,()=>{for(let e of gt.find(Xc))mo.getOrCreateInstance(e).show()});J.on(window,mf,()=>{for(let e of gt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&mo.getOrCreateInstance(e).hide()});ua(mo);lr(mo);var wf=/^aria-[\w-]*$/i,qc={"*":["class","dir","id","lang","role",wf],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},yf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,kf=(e,t)=>{let r=e.nodeName.toLowerCase();return t.includes(r)?yf.has(r)?!!xf.test(e.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(r))};function _f(e,t,r){if(!e.length)return e;if(r&&typeof r=="function")return r(e);let p=new window.DOMParser().parseFromString(e,"text/html"),m=[].concat(...p.body.querySelectorAll("*"));for(let i of m){let u=i.nodeName.toLowerCase();if(!Object.keys(t).includes(u)){i.remove();continue}let o=[].concat(...i.attributes),n=[].concat(t["*"]||[],t[u]||[]);for(let a of o)kf(a,n)||i.removeAttribute(a.nodeName)}return p.body.innerHTML}var Ef="TemplateFactory",Sf={allowList:qc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Cf={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Tf={entry:"(string|element|function|null)",selector:"(string|element)"},Os=class extends zo{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Sf}static get DefaultType(){return Cf}static get NAME(){return Ef}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[p,m]of Object.entries(this._config.content))this._setContent(t,m,p);let r=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&r.classList.add(...s.split(" ")),r}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[r,s]of Object.entries(t))super._typeCheckConfig({selector:r,entry:s},Tf)}_setContent(t,r,s){let p=gt.findOne(s,t);if(p){if(r=this._resolvePossibleFunction(r),!r){p.remove();return}if(Gr(r)){this._putElementInTemplate(po(r),p);return}if(this._config.html){p.innerHTML=this._maybeSanitize(r);return}p.textContent=r}}_maybeSanitize(t){return this._config.sanitize?_f(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ve(t,[this])}_putElementInTemplate(t,r){if(this._config.html){r.innerHTML="",r.append(t);return}r.textContent=t.textContent}},Af="tooltip",Lf=new Set(["sanitize","allowList","sanitizeFn"]),Es="fade",$f="modal",Qn="show",Rf=".tooltip-inner",vc=`.${$f}`,wc="hide.bs.modal",ln="hover",Ss="focus",Mf="click",If="manual",Of="hide",Df="hidden",Pf="show",Nf="shown",Ff="inserted",zf="click",Bf="focusin",Uf="focusout",Hf="mouseenter",jf="mouseleave",Wf={AUTO:"auto",TOP:"top",RIGHT:ar()?"left":"right",BOTTOM:"bottom",LEFT:ar()?"right":"left"},Vf={allowList:qc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Gf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},_i=class e extends Je{constructor(t,r){if(typeof Yn>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Vf}static get DefaultType(){return Gf}static get NAME(){return Af}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),J.off(this._element.closest(vc),wc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=J.trigger(this._element,this.constructor.eventName(Pf)),s=(Lc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();let p=this._getTipElement();this._element.setAttribute("aria-describedby",p.getAttribute("id"));let{container:m}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(m.append(p),J.trigger(this._element,this.constructor.eventName(Ff))),this._popper=this._createPopper(p),p.classList.add(Qn),"ontouchstart"in document.documentElement)for(let u of[].concat(...document.body.children))J.on(u,"mouseover",oa);let i=()=>{J.trigger(this._element,this.constructor.eventName(Nf)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||J.trigger(this._element,this.constructor.eventName(Of)).defaultPrevented)return;if(this._getTipElement().classList.remove(Qn),"ontouchstart"in document.documentElement)for(let p of[].concat(...document.body.children))J.off(p,"mouseover",oa);this._activeTrigger[Mf]=!1,this._activeTrigger[Ss]=!1,this._activeTrigger[ln]=!1,this._isHovered=null;let s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName(Df)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let r=this._getTemplateFactory(t).toHtml();if(!r)return null;r.classList.remove(Es,Qn),r.classList.add(`bs-${this.constructor.NAME}-auto`);let s=Mg(this.constructor.NAME).toString();return r.setAttribute("id",s),this._isAnimated()&&r.classList.add(Es),r}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Os({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Rf]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Es)}_isShown(){return this.tip&&this.tip.classList.contains(Qn)}_createPopper(t){let r=Ve(this._config.placement,[this,t,this._element]),s=Wf[r.toUpperCase()];return an(this._element,t,this._getPopperConfig(s))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_resolvePossibleFunction(t){return Ve(t,[this._element])}_getPopperConfig(t){let r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...r,...Ve(this._config.popperConfig,[r])}}_setListeners(){let t=this._config.trigger.split(" ");for(let r of t)if(r==="click")J.on(this._element,this.constructor.eventName(zf),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(r!==If){let s=r===ln?this.constructor.eventName(Hf):this.constructor.eventName(Bf),p=r===ln?this.constructor.eventName(jf):this.constructor.eventName(Uf);J.on(this._element,s,this._config.selector,m=>{let i=this._initializeOnDelegatedTarget(m);i._activeTrigger[m.type==="focusin"?Ss:ln]=!0,i._enter()}),J.on(this._element,p,this._config.selector,m=>{let i=this._initializeOnDelegatedTarget(m);i._activeTrigger[m.type==="focusout"?Ss:ln]=i._element.contains(m.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest(vc),wc,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,r){clearTimeout(this._timeout),this._timeout=setTimeout(t,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let r=Kr.getDataAttributes(this._element);for(let s of Object.keys(r))Lf.has(s)&&delete r[s];return t={...r,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:po(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[r,s]of Object.entries(this._config))this.constructor.Default[r]!==s&&(t[r]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};lr(_i);var Kf="popover",Yf=".popover-header",Xf=".popover-body",Jf={..._i.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},qf={..._i.DefaultType,content:"(null|string|element|function)"},Ds=class e extends _i{static get Default(){return Jf}static get DefaultType(){return qf}static get NAME(){return Kf}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Yf]:this._getTitle(),[Xf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};lr(Ds);var Qf="scrollspy",Zf="bs.scrollspy",zs=`.${Zf}`,tv=".data-api",ev=`activate${zs}`,yc=`click${zs}`,rv=`load${zs}${tv}`,ov="dropdown-item",wi="active",iv='[data-bs-spy="scroll"]',Cs="[href]",nv=".nav, .list-group",xc=".nav-link",av=".nav-item",sv=".list-group-item",lv=`${xc}, ${av} > ${xc}, ${sv}`,dv=".dropdown",cv=".dropdown-toggle",pv={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},uv={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},pa=class e extends Je{constructor(t,r){super(t,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return pv}static get DefaultType(){return uv}static get NAME(){return Qf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=po(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(r=>Number.parseFloat(r))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(J.off(this._config.target,yc),J.on(this._config.target,yc,Cs,t=>{let r=this._observableSections.get(t.target.hash);if(r){t.preventDefault();let s=this._rootElement||window,p=r.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:p,behavior:"smooth"});return}s.scrollTop=p}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),t)}_observerCallback(t){let r=i=>this._targetLinks.get(`#${i.target.id}`),s=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(r(i))},p=(this._rootElement||document.documentElement).scrollTop,m=p>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=p;for(let i of t){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(i));continue}let u=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(m&&u){if(s(i),!p)return;continue}!m&&!u&&s(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=gt.find(Cs,this._config.target);for(let r of t){if(!r.hash||uo(r))continue;let s=gt.findOne(decodeURI(r.hash),this._element);Ei(s)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(wi),this._activateParents(t),J.trigger(this._element,ev,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(ov)){gt.findOne(cv,t.closest(dv)).classList.add(wi);return}for(let r of gt.parents(t,nv))for(let s of gt.prev(r,lv))s.classList.add(wi)}_clearActiveClass(t){t.classList.remove(wi);let r=gt.find(`${Cs}.${wi}`,t);for(let s of r)s.classList.remove(wi)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};J.on(window,rv,()=>{for(let e of gt.find(iv))pa.getOrCreateInstance(e)});lr(pa);var mv="tab",gv="bs.tab",Ho=`.${gv}`,hv=`hide${Ho}`,bv=`hidden${Ho}`,fv=`show${Ho}`,vv=`shown${Ho}`,wv=`click${Ho}`,yv=`keydown${Ho}`,xv=`load${Ho}`,kv="ArrowLeft",kc="ArrowRight",_v="ArrowUp",_c="ArrowDown",Ts="Home",Ec="End",Fo="active",Sc="fade",As="show",Ev="dropdown",Qc=".dropdown-toggle",Sv=".dropdown-menu",Ls=`:not(${Qc})`,Cv='.list-group, .nav, [role="tablist"]',Tv=".nav-item, .list-group-item",Av=`.nav-link${Ls}, .list-group-item${Ls}, [role="tab"]${Ls}`,Zc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',$s=`${Av}, ${Zc}`,Lv=`.${Fo}[data-bs-toggle="tab"], .${Fo}[data-bs-toggle="pill"], .${Fo}[data-bs-toggle="list"]`,pn=class e extends Je{constructor(t){super(t),this._parent=this._element.closest(Cv),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,yv,r=>this._keydown(r)))}static get NAME(){return mv}show(){let t=this._element;if(this._elemIsActive(t))return;let r=this._getActiveElem(),s=r?J.trigger(r,hv,{relatedTarget:t}):null;J.trigger(t,fv,{relatedTarget:r}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(r,t),this._activate(t,r))}_activate(t,r){if(!t)return;t.classList.add(Fo),this._activate(gt.getElementFromSelector(t));let s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(As);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),J.trigger(t,vv,{relatedTarget:r})};this._queueCallback(s,t,t.classList.contains(Sc))}_deactivate(t,r){if(!t)return;t.classList.remove(Fo),t.blur(),this._deactivate(gt.getElementFromSelector(t));let s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(As);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),J.trigger(t,bv,{relatedTarget:r})};this._queueCallback(s,t,t.classList.contains(Sc))}_keydown(t){if(![kv,kc,_v,_c,Ts,Ec].includes(t.key))return;t.stopPropagation(),t.preventDefault();let r=this._getChildren().filter(p=>!uo(p)),s;if([Ts,Ec].includes(t.key))s=r[t.key===Ts?0:r.length-1];else{let p=[kc,_c].includes(t.key);s=Ps(r,t.target,p,!0)}s&&(s.focus({preventScroll:!0}),e.getOrCreateInstance(s).show())}_getChildren(){return gt.find($s,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,r){this._setAttributeIfNotExists(t,"role","tablist");for(let s of r)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let r=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",r),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),r||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let r=gt.getElementFromSelector(t);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,r){let s=this._getOuterElement(t);if(!s.classList.contains(Ev))return;let p=(m,i)=>{let u=gt.findOne(m,s);u&&u.classList.toggle(i,r)};p(Qc,Fo),p(Sv,As),s.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(t,r,s){t.hasAttribute(r)||t.setAttribute(r,s)}_elemIsActive(t){return t.classList.contains(Fo)}_getInnerElement(t){return t.matches($s)?t:gt.findOne($s,t)}_getOuterElement(t){return t.closest(Tv)||t}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};J.on(document,wv,Zc,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!uo(this)&&pn.getOrCreateInstance(this).show()});J.on(window,xv,()=>{for(let e of gt.find(Lv))pn.getOrCreateInstance(e)});lr(pn);var $v="toast",Rv="bs.toast",ho=`.${Rv}`,Mv=`mouseover${ho}`,Iv=`mouseout${ho}`,Ov=`focusin${ho}`,Dv=`focusout${ho}`,Pv=`hide${ho}`,Nv=`hidden${ho}`,Fv=`show${ho}`,zv=`shown${ho}`,Bv="fade",Cc="hide",Zn="show",ta="showing",Uv={animation:"boolean",autohide:"boolean",delay:"number"},Hv={animation:!0,autohide:!0,delay:5e3},Bo=class e extends Je{constructor(t,r){super(t,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Hv}static get DefaultType(){return Uv}static get NAME(){return $v}show(){if(J.trigger(this._element,Fv).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Bv);let r=()=>{this._element.classList.remove(ta),J.trigger(this._element,zv),this._maybeScheduleHide()};this._element.classList.remove(Cc),un(this._element),this._element.classList.add(Zn,ta),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||J.trigger(this._element,Pv).defaultPrevented)return;let r=()=>{this._element.classList.add(Cc),this._element.classList.remove(ta,Zn),J.trigger(this._element,Nv)};this._element.classList.add(ta),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Zn),super.dispose()}isShown(){return this._element.classList.contains(Zn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,r){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}let s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,Mv,t=>this._onInteraction(t,!0)),J.on(this._element,Iv,t=>this._onInteraction(t,!1)),J.on(this._element,Ov,t=>this._onInteraction(t,!0)),J.on(this._element,Dv,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};ua(Bo);lr(Bo);var Tu=Fn(tp());var jo=class extends Error{};jo.prototype.name="InvalidTokenError";function jv(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let s=r.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function Wv(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return jv(t)}catch{return atob(t)}}function ep(e,t){if(typeof e!="string")throw new jo("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,s=e.split(".")[r];if(typeof s!="string")throw new jo(`Invalid token specified: missing part #${r+1}`);let p;try{p=Wv(s)}catch(m){throw new jo(`Invalid token specified: invalid base64 for part #${r+1} (${m.message})`)}try{return JSON.parse(p)}catch(m){throw new jo(`Invalid token specified: invalid json for part #${r+1} (${m.message})`)}}var Vv={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},Pr,Nr,ha=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(ha||{});(e=>{function t(){Pr=3,Nr=Vv}e.reset=t;function r(p){if(!(0<=p&&p<=4))throw new Error("Invalid log level");Pr=p}e.setLevel=r;function s(p){Nr=p}e.setLogger=s})(ha||(ha={}));var Ft=class Dr{constructor(t){this._name=t}debug(...t){Pr>=4&&Nr.debug(Dr._format(this._name,this._method),...t)}info(...t){Pr>=3&&Nr.info(Dr._format(this._name,this._method),...t)}warn(...t){Pr>=2&&Nr.warn(Dr._format(this._name,this._method),...t)}error(...t){Pr>=1&&Nr.error(Dr._format(this._name,this._method),...t)}throw(t){throw this.error(t),t}create(t){let r=Object.create(this);return r._method=t,r.debug("begin"),r}static createStatic(t,r){let s=new Dr(`${t}.${r}`);return s.debug("begin"),s}static _format(t,r){let s=`[${t}]`;return r?`${s} ${r}:`:s}static debug(t,...r){Pr>=4&&Nr.debug(Dr._format(t),...r)}static info(t,...r){Pr>=3&&Nr.info(Dr._format(t),...r)}static warn(t,...r){Pr>=2&&Nr.warn(Dr._format(t),...r)}static error(t,...r){Pr>=1&&Nr.error(Dr._format(t),...r)}};ha.reset();var Gv="10000000-1000-4000-8000-100000000000",rp=e=>btoa([...new Uint8Array(e)].map(t=>String.fromCharCode(t)).join("")),Ci=class gn{static _randomWord(){let t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}static generateUUIDv4(){return Gv.replace(/[018]/g,r=>(+r^gn._randomWord()&15>>+r/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return gn.generateUUIDv4()+gn.generateUUIDv4()+gn.generateUUIDv4()}static async generateCodeChallenge(t){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{let s=new TextEncoder().encode(t),p=await crypto.subtle.digest("SHA-256",s);return rp(p).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw Ft.error("CryptoUtils.generateCodeChallenge",r),r}}static generateBasicAuth(t,r){let p=new TextEncoder().encode([t,r].join(":"));return rp(p)}},bo=class{constructor(e){this._name=e,this._logger=new Ft(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){let t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}async raise(...e){this._logger.debug("raise:",...e);for(let t of this._callbacks)await t(...e)}},js=class{static decode(e){try{return ep(e)}catch(t){throw Ft.error("JwtUtils.decode",t),t}}},op=class{static center({...e}){var t,r,s;return e.width==null&&(e.width=(t=[800,720,600,480].find(p=>p<=window.outerWidth/1.618))!=null?t:360),(r=e.left)!=null||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),e.height!=null&&((s=e.top)!=null||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}=${typeof r!="boolean"?r:r?"yes":"no"}`).join(",")}},Xr=class ga extends bo{constructor(){super(...arguments),this._logger=new Ft(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{let t=this._expiration-ga.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=ga.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){let r=this._logger.create("init");t=Math.max(Math.floor(t),1);let s=ga.getEpochTime()+t;if(this.expiration===s&&this._timerHandle){r.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),r.debug("using duration",t),this._expiration=s;let p=Math.min(t,5);this._timerHandle=setInterval(this._callback,p*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},Ws=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");let s=new URL(e,"http://127.0.0.1")[t==="fragment"?"hash":"search"];return new URLSearchParams(s.slice(1))}},Vs=";",Wo=class extends Error{constructor(e,t){var r,s,p;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw Ft.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=(r=e.error_description)!=null?r:null,this.error_uri=(s=e.error_uri)!=null?s:null,this.state=e.userState,this.session_state=(p=e.session_state)!=null?p:null,this.url_state=e.url_state}},Xs=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},Kv=class{constructor(e){this._logger=new Ft("AccessTokenEvents"),this._expiringTimer=new Xr("Access token expiring"),this._expiredTimer=new Xr("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){let t=this._logger.create("load");if(e.access_token&&e.expires_in!==void 0){let r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){let p=r-this._expiringNotificationTimeInSeconds;p<=0&&(p=1),t.debug("registering expiring timer, raising in",p,"seconds"),this._expiringTimer.init(p)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();let s=r+1;t.debug("registering expired timer, raising in",s,"seconds"),this._expiredTimer.init(s)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},Yv=class{constructor(e,t,r,s,p){this._callback=e,this._client_id=t,this._intervalInSeconds=s,this._stopOnError=p,this._logger=new Ft("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=i=>{i.origin===this._frame_origin&&i.source===this._frame.contentWindow&&(i.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):i.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(i.data+" message from check session op iframe"))};let m=new URL(r);this._frame_origin=m.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=m.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;let t=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},sp=class{constructor(){this._logger=new Ft("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},Js=class{constructor(e=[],t=null,r={}){this._jwtHandler=t,this._extraHeaders=r,this._logger=new Ft("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){let{timeoutInSeconds:r,...s}=t;if(!r)return await fetch(e,s);let p=new AbortController,m=setTimeout(()=>p.abort(),r*1e3);try{return await fetch(e,{...t,signal:p.signal})}catch(i){throw i instanceof DOMException&&i.name==="AbortError"?new Xs("Network timed out"):i}finally{clearTimeout(m)}}async getJson(e,{token:t,credentials:r}={}){let s=this._logger.create("getJson"),p={Accept:this._contentTypes.join(", ")};t&&(s.debug("token passed, setting Authorization header"),p.Authorization="Bearer "+t),this.appendExtraHeaders(p);let m;try{s.debug("url:",e),m=await this.fetchWithTimeout(e,{method:"GET",headers:p,credentials:r})}catch(o){throw s.error("Network Error"),o}s.debug("HTTP response received, status",m.status);let i=m.headers.get("Content-Type");if(i&&!this._contentTypes.find(o=>i.startsWith(o))&&s.throw(new Error(`Invalid response Content-Type: ${i??"undefined"}, from URL: ${e}`)),m.ok&&this._jwtHandler&&i?.startsWith("application/jwt"))return await this._jwtHandler(await m.text());let u;try{u=await m.json()}catch(o){throw s.error("Error parsing JSON response",o),m.ok?o:new Error(`${m.statusText} (${m.status})`)}if(!m.ok)throw s.error("Error from server:",u),u.error?new Wo(u):new Error(`${m.statusText} (${m.status}): ${JSON.stringify(u)}`);return u}async postForm(e,{body:t,basicAuth:r,timeoutInSeconds:s,initCredentials:p}){let m=this._logger.create("postForm"),i={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};r!==void 0&&(i.Authorization="Basic "+r),this.appendExtraHeaders(i);let u;try{m.debug("url:",e),u=await this.fetchWithTimeout(e,{method:"POST",headers:i,body:t,timeoutInSeconds:s,credentials:p})}catch(d){throw m.error("Network error"),d}m.debug("HTTP response received, status",u.status);let o=u.headers.get("Content-Type");if(o&&!this._contentTypes.find(d=>o.startsWith(d)))throw new Error(`Invalid response Content-Type: ${o??"undefined"}, from URL: ${e}`);let n=await u.text(),a={};if(n)try{a=JSON.parse(n)}catch(d){throw m.error("Error parsing JSON response",d),u.ok?d:new Error(`${u.statusText} (${u.status})`)}if(!u.ok)throw m.error("Error from server:",a),a.error?new Wo(a,t):new Error(`${u.statusText} (${u.status}): ${JSON.stringify(a)}`);return a}appendExtraHeaders(e){let t=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),s=["authorization","accept","content-type"];r.length!==0&&r.forEach(p=>{if(s.includes(p.toLocaleLowerCase())){t.warn("Protected header could not be overridden",p,s);return}let m=typeof this._extraHeaders[p]=="function"?this._extraHeaders[p]():this._extraHeaders[p];m&&m!==""&&(e[p]=m)})}},Xv=class{constructor(e){this._settings=e,this._logger=new Ft("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Js(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){let e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);let t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){let r=this._logger.create(`_getMetadataProperty('${e}')`),s=await this.getMetadata();if(r.debug("resolved"),s[e]===void 0){if(t===!0){r.warn("Metadata does not contain optional property");return}r.throw(new Error("Metadata does not contain property "+e))}return s[e]}async getSigningKeys(){let e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;let t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);let r=await this._jsonService.getJson(t);if(e.debug("got key set",r),!Array.isArray(r.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},lp=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new Ft("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){return this._logger.create(`get('${e}')`),e=this._prefix+e,await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;let t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");let e=await this._store.length,t=[];for(let r=0;r<e;r++){let s=await this._store.key(r);s&&s.indexOf(this._prefix)===0&&t.push(s.substr(this._prefix.length))}return t}},Jv="code",qv="openid",Qv="client_secret_post",Zv=60*15,Gs=class{constructor({authority:e,metadataUrl:t,metadata:r,signingKeys:s,metadataSeed:p,client_id:m,client_secret:i,response_type:u=Jv,scope:o=qv,redirect_uri:n,post_logout_redirect_uri:a,client_authentication:d=Qv,prompt:l,display:c,max_age:g,ui_locales:h,acr_values:v,resource:k,response_mode:x,filterProtocolClaims:A=!0,loadUserInfo:S=!1,staleStateAgeInSeconds:f=Zv,mergeClaimsStrategy:L={array:"replace"},disablePKCE:$=!1,stateStore:C,revokeTokenAdditionalContentTypes:T,fetchRequestCredentials:w,refreshTokenAllowedScope:y,extraQueryParams:b={},extraTokenParams:_={},extraHeaders:E={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=p,this.signingKeys=s,this.client_id=m,this.client_secret=i,this.response_type=u,this.scope=o,this.redirect_uri=n,this.post_logout_redirect_uri=a,this.client_authentication=d,this.prompt=l,this.display=c,this.max_age=g,this.ui_locales=h,this.acr_values=v,this.resource=k,this.response_mode=x,this.filterProtocolClaims=A??!0,this.loadUserInfo=!!S,this.staleStateAgeInSeconds=f,this.mergeClaimsStrategy=L,this.disablePKCE=!!$,this.revokeTokenAdditionalContentTypes=T,this.fetchRequestCredentials=w||"same-origin",C)this.stateStore=C;else{let R=typeof window<"u"?window.localStorage:new sp;this.stateStore=new lp({store:R})}this.refreshTokenAllowedScope=y,this.extraQueryParams=b,this.extraTokenParams=_,this.extraHeaders=E}},t0=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ft("UserInfoService"),this._getClaimsFromJwt=async r=>{let s=this._logger.create("_getClaimsFromJwt");try{let p=js.decode(r);return s.debug("JWT decoding successful"),p}catch(p){throw s.error("Error parsing JWT response"),p}},this._jsonService=new Js(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){let t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));let r=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",r);let s=await this._jsonService.getJson(r,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",s),s}},dp=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ft("TokenClient"),this._jsonService=new Js(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:s=this._settings.client_secret,...p}){let m=this._logger.create("exchangeCode");r||m.throw(new Error("A client_id is required")),t||m.throw(new Error("A redirect_uri is required")),p.code||m.throw(new Error("A code is required"));let i=new URLSearchParams({grant_type:e,redirect_uri:t});for(let[a,d]of Object.entries(p))d!=null&&i.set(a,d);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!s)throw m.throw(new Error("A client_secret is required")),null;u=Ci.generateBasicAuth(r,s);break;case"client_secret_post":i.append("client_id",r),s&&i.append("client_secret",s);break}let o=await this._metadataService.getTokenEndpoint(!1);m.debug("got token endpoint");let n=await this._jsonService.postForm(o,{body:i,basicAuth:u,initCredentials:this._settings.fetchRequestCredentials});return m.debug("got response"),n}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:s=this._settings.scope,...p}){let m=this._logger.create("exchangeCredentials");t||m.throw(new Error("A client_id is required"));let i=new URLSearchParams({grant_type:e,scope:s});for(let[a,d]of Object.entries(p))d!=null&&i.set(a,d);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw m.throw(new Error("A client_secret is required")),null;u=Ci.generateBasicAuth(t,r);break;case"client_secret_post":i.append("client_id",t),r&&i.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);m.debug("got token endpoint");let n=await this._jsonService.postForm(o,{body:i,basicAuth:u,initCredentials:this._settings.fetchRequestCredentials});return m.debug("got response"),n}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:s,...p}){let m=this._logger.create("exchangeRefreshToken");t||m.throw(new Error("A client_id is required")),p.refresh_token||m.throw(new Error("A refresh_token is required"));let i=new URLSearchParams({grant_type:e});for(let[a,d]of Object.entries(p))Array.isArray(d)?d.forEach(l=>i.append(a,l)):d!=null&&i.set(a,d);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw m.throw(new Error("A client_secret is required")),null;u=Ci.generateBasicAuth(t,r);break;case"client_secret_post":i.append("client_id",t),r&&i.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);m.debug("got token endpoint");let n=await this._jsonService.postForm(o,{body:i,basicAuth:u,timeoutInSeconds:s,initCredentials:this._settings.fetchRequestCredentials});return m.debug("got response"),n}async revoke(e){var t;let r=this._logger.create("revoke");e.token||r.throw(new Error("A token is required"));let s=await this._metadataService.getRevocationEndpoint(!1);r.debug(`got revocation endpoint, revoking ${(t=e.token_type_hint)!=null?t:"default token type"}`);let p=new URLSearchParams;for(let[m,i]of Object.entries(e))i!=null&&p.set(m,i);p.set("client_id",this._settings.client_id),this._settings.client_secret&&p.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(s,{body:p}),r.debug("got response")}},e0=class{constructor(e,t,r){this._settings=e,this._metadataService=t,this._claimsService=r,this._logger=new Ft("ResponseValidator"),this._userInfoService=new t0(this._settings,this._metadataService),this._tokenClient=new dp(this._settings,this._metadataService)}async validateSigninResponse(e,t){let r=this._logger.create("validateSigninResponse");this._processSigninState(e,t),r.debug("state processed"),await this._processCode(e,t),r.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t?.skipUserInfo,e.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(e,t){let r=this._logger.create("validateCredentialsResponse");e.isOpenId&&e.id_token&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),r.debug("claims processed")}async validateRefreshResponse(e,t){var r,s;let p=this._logger.create("validateRefreshResponse");e.userState=t.data,(r=e.session_state)!=null||(e.session_state=t.session_state),(s=e.scope)!=null||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),p.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);let m=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,m),p.debug("claims processed")}validateSignoutResponse(e,t){let r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new Wo(e)}_processSigninState(e,t){var r;let s=this._logger.create("_processSigninState");if(t.id!==e.state&&s.throw(new Error("State does not match")),t.client_id||s.throw(new Error("No client_id on state")),t.authority||s.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&s.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&s.throw(new Error("client_id mismatch on settings vs. signin state")),s.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,(r=e.scope)!=null||(e.scope=t.scope),e.error)throw s.warn("Response was error",e.error),new Wo(e);t.code_verifier&&!e.code&&s.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,r=!0){let s=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token){s.debug("not loading user info");return}s.debug("loading user info");let p=await this._userInfoService.getClaims(e.access_token);s.debug("user info claims received from user info endpoint"),r&&p.sub!==e.profile.sub&&s.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(p)),s.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){let r=this._logger.create("_processCode");if(e.code){r.debug("Validating code");let s=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,s)}else r.debug("No code to process")}_validateIdTokenAttributes(e,t){var r;let s=this._logger.create("_validateIdTokenAttributes");s.debug("decoding ID Token JWT");let p=js.decode((r=e.id_token)!=null?r:"");if(p.sub||s.throw(new Error("ID Token is missing a subject claim")),t){let m=js.decode(t);p.sub!==m.sub&&s.throw(new Error("sub in id_token does not match current sub")),p.auth_time&&p.auth_time!==m.auth_time&&s.throw(new Error("auth_time in id_token does not match original auth_time")),p.azp&&p.azp!==m.azp&&s.throw(new Error("azp in id_token does not match original azp")),!p.azp&&m.azp&&s.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=p}},ba=class Ks{constructor(t){this.id=t.id||Ci.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=Xr.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}toStorageString(){return new Ft("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return Ft.createStatic("State","fromStorageString"),Promise.resolve(new Ks(JSON.parse(t)))}static async clearStaleState(t,r){let s=Ft.createStatic("State","clearStaleState"),p=Xr.getEpochTime()-r,m=await t.getAllKeys();s.debug("got keys",m);for(let i=0;i<m.length;i++){let u=m[i],o=await t.get(u),n=!1;if(o)try{let a=await Ks.fromStorageString(o);s.debug("got item from key:",u,a.created),a.created<=p&&(n=!0)}catch(a){s.error("Error parsing state for key:",u,a),n=!0}else s.debug("no item in storage for key:",u),n=!0;n&&(s.debug("removed item for key:",u),t.remove(u))}}},cp=class Ys extends ba{constructor(t){super(t),this.code_verifier=t.code_verifier,this.code_challenge=t.code_challenge,this.authority=t.authority,this.client_id=t.client_id,this.redirect_uri=t.redirect_uri,this.scope=t.scope,this.client_secret=t.client_secret,this.extraTokenParams=t.extraTokenParams,this.response_mode=t.response_mode,this.skipUserInfo=t.skipUserInfo}static async create(t){let r=t.code_verifier===!0?Ci.generateCodeVerifier():t.code_verifier||void 0,s=r?await Ci.generateCodeChallenge(r):void 0;return new Ys({...t,code_verifier:r,code_challenge:s})}toStorageString(){return new Ft("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){Ft.createStatic("SigninState","fromStorageString");let r=JSON.parse(t);return Ys.create(r)}},pp=class up{constructor(t){this.url=t.url,this.state=t.state}static async create({url:t,authority:r,client_id:s,redirect_uri:p,response_type:m,scope:i,state_data:u,response_mode:o,request_type:n,client_secret:a,nonce:d,url_state:l,resource:c,skipUserInfo:g,extraQueryParams:h,extraTokenParams:v,disablePKCE:k,...x}){if(!t)throw this._logger.error("create: No url passed"),new Error("url");if(!s)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!p)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!m)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!i)throw this._logger.error("create: No scope passed"),new Error("scope");if(!r)throw this._logger.error("create: No authority passed"),new Error("authority");let A=await cp.create({data:u,request_type:n,url_state:l,code_verifier:!k,client_id:s,authority:r,redirect_uri:p,response_mode:o,client_secret:a,scope:i,extraTokenParams:v,skipUserInfo:g}),S=new URL(t);S.searchParams.append("client_id",s),S.searchParams.append("redirect_uri",p),S.searchParams.append("response_type",m),S.searchParams.append("scope",i),d&&S.searchParams.append("nonce",d);let f=A.id;l&&(f=`${f}${Vs}${l}`),S.searchParams.append("state",f),A.code_challenge&&(S.searchParams.append("code_challenge",A.code_challenge),S.searchParams.append("code_challenge_method","S256")),c&&(Array.isArray(c)?c:[c]).forEach($=>S.searchParams.append("resource",$));for(let[L,$]of Object.entries({response_mode:o,...x,...h}))$!=null&&S.searchParams.append(L,$.toString());return new up({url:S.href,state:A})}};pp._logger=new Ft("SigninRequest");var r0=pp,o0="openid",Us=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){let t=decodeURIComponent(this.state).split(Vs);this.state=t[0],t.length>1&&(this.url_state=t.slice(1).join(Vs))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Xr.getEpochTime()}set expires_in(e){typeof e=="string"&&(e=Number(e)),e!==void 0&&e>=0&&(this.expires_at=Math.floor(e)+Xr.getEpochTime())}get isOpenId(){var e;return((e=this.scope)==null?void 0:e.split(" ").includes(o0))||!!this.id_token}},i0=class{constructor({url:e,state_data:t,id_token_hint:r,post_logout_redirect_uri:s,extraQueryParams:p,request_type:m,client_id:i}){if(this._logger=new Ft("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");let u=new URL(e);r&&u.searchParams.append("id_token_hint",r),i&&u.searchParams.append("client_id",i),s&&(u.searchParams.append("post_logout_redirect_uri",s),t&&(this.state=new ba({data:t,request_type:m}),u.searchParams.append("state",this.state.id)));for(let[o,n]of Object.entries({...p}))n!=null&&u.searchParams.append(o,n.toString());this.url=u.href}},n0=class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},a0=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],s0=["sub","iss","aud","exp","iat"],l0=class{constructor(e){this._settings=e,this._logger=new Ft("ClaimsService")}filterProtocolClaims(e){let t={...e};if(this._settings.filterProtocolClaims){let r;Array.isArray(this._settings.filterProtocolClaims)?r=this._settings.filterProtocolClaims:r=a0;for(let s of r)s0.includes(s)||delete t[s]}return t}mergeClaims(e,t){let r={...e};for(let[s,p]of Object.entries(t))if(r[s]!==p)if(Array.isArray(r[s])||Array.isArray(p))if(this._settings.mergeClaimsStrategy.array=="replace")r[s]=p;else{let m=Array.isArray(r[s])?r[s]:[r[s]];for(let i of Array.isArray(p)?p:[p])m.includes(i)||m.push(i);r[s]=m}else typeof r[s]=="object"&&typeof p=="object"?r[s]=this.mergeClaims(r[s],p):r[s]=p;return r}},d0=class{constructor(e,t){this._logger=new Ft("OidcClient"),this.settings=e instanceof Gs?e:new Gs(e),this.metadataService=t??new Xv(this.settings),this._claimsService=new l0(this.settings),this._validator=new e0(this.settings,this.metadataService,this._claimsService),this._tokenClient=new dp(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:r,request_type:s,id_token_hint:p,login_hint:m,skipUserInfo:i,nonce:u,url_state:o,response_type:n=this.settings.response_type,scope:a=this.settings.scope,redirect_uri:d=this.settings.redirect_uri,prompt:l=this.settings.prompt,display:c=this.settings.display,max_age:g=this.settings.max_age,ui_locales:h=this.settings.ui_locales,acr_values:v=this.settings.acr_values,resource:k=this.settings.resource,response_mode:x=this.settings.response_mode,extraQueryParams:A=this.settings.extraQueryParams,extraTokenParams:S=this.settings.extraTokenParams}){let f=this._logger.create("createSigninRequest");if(n!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");let L=await this.metadataService.getAuthorizationEndpoint();f.debug("Received authorization endpoint",L);let $=await r0.create({url:L,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:d,response_type:n,scope:a,state_data:e,url_state:o,prompt:l,display:c,max_age:g,ui_locales:h,id_token_hint:p,login_hint:m,acr_values:v,resource:k,request:t,request_uri:r,extraQueryParams:A,extraTokenParams:S,request_type:s,response_mode:x,client_secret:this.settings.client_secret,skipUserInfo:i,nonce:u,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();let C=$.state;return await this.settings.stateStore.set(C.id,C.toStorageString()),$}async readSigninResponseState(e,t=!1){let r=this._logger.create("readSigninResponseState"),s=new Us(Ws.readParams(e,this.settings.response_mode));if(!s.state)throw r.throw(new Error("No state in response")),null;let p=await this.settings.stateStore[t?"remove":"get"](s.state);if(!p)throw r.throw(new Error("No matching state found in storage")),null;return{state:await cp.fromStorageString(p),response:s}}async processSigninResponse(e){let t=this._logger.create("processSigninResponse"),{state:r,response:s}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(s,r),s}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r=!1,extraTokenParams:s={}}){let p=await this._tokenClient.exchangeCredentials({username:e,password:t,...s}),m=new Us(new URLSearchParams);return Object.assign(m,p),await this._validator.validateCredentialsResponse(m,r),m}async useRefreshToken({state:e,redirect_uri:t,resource:r,timeoutInSeconds:s,extraTokenParams:p}){var m;let i=this._logger.create("useRefreshToken"),u;if(this.settings.refreshTokenAllowedScope===void 0)u=e.scope;else{let a=this.settings.refreshTokenAllowedScope.split(" ");u=(((m=e.scope)==null?void 0:m.split(" "))||[]).filter(l=>a.includes(l)).join(" ")}let o=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:u,redirect_uri:t,resource:r,timeoutInSeconds:s,...p}),n=new Us(new URLSearchParams);return Object.assign(n,o),i.debug("validating response",n),await this._validator.validateRefreshResponse(n,{...e,scope:u}),n}async createSignoutRequest({state:e,id_token_hint:t,client_id:r,request_type:s,post_logout_redirect_uri:p=this.settings.post_logout_redirect_uri,extraQueryParams:m=this.settings.extraQueryParams}={}){let i=this._logger.create("createSignoutRequest"),u=await this.metadataService.getEndSessionEndpoint();if(!u)throw i.throw(new Error("No end session endpoint")),null;i.debug("Received end session endpoint",u),!r&&p&&!t&&(r=this.settings.client_id);let o=new i0({url:u,id_token_hint:t,client_id:r,post_logout_redirect_uri:p,state_data:e,extraQueryParams:m,request_type:s});await this.clearStaleState();let n=o.state;return n&&(i.debug("Signout request has state to persist"),await this.settings.stateStore.set(n.id,n.toStorageString())),o}async readSignoutResponseState(e,t=!1){let r=this._logger.create("readSignoutResponseState"),s=new n0(Ws.readParams(e,this.settings.response_mode));if(!s.state){if(r.debug("No state in response"),s.error)throw r.warn("Response was error:",s.error),new Wo(s);return{state:void 0,response:s}}let p=await this.settings.stateStore[t?"remove":"get"](s.state);if(!p)throw r.throw(new Error("No matching state found in storage")),null;return{state:await ba.fromStorageString(p),response:s}}async processSignoutResponse(e){let t=this._logger.create("processSignoutResponse"),{state:r,response:s}=await this.readSignoutResponseState(e,!0);return r?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(s,r)):t.debug("No state from storage; skipping response validation"),s}clearStaleState(){return this._logger.create("clearStaleState"),ba.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},c0=class{constructor(e){this._userManager=e,this._logger=new Ft("SessionMonitor"),this._start=async t=>{let r=t.session_state;if(!r)return;let s=this._logger.create("_start");if(t.profile?(this._sub=t.profile.sub,s.debug("session_state",r,", sub",this._sub)):(this._sub=void 0,s.debug("session_state",r,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(r);return}try{let p=await this._userManager.metadataService.getCheckSessionIframe();if(p){s.debug("initializing check session iframe");let m=this._userManager.settings.client_id,i=this._userManager.settings.checkSessionIntervalInSeconds,u=this._userManager.settings.stopCheckSessionOnError,o=new Yv(this._callback,m,p,i,u);await o.load(),this._checkSessionIFrame=o,o.start(r)}else s.warn("no check session iframe found in the metadata")}catch(p){s.error("Error from getCheckSessionIframe:",p instanceof Error?p.message:p)}},this._stop=()=>{let t=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){let r=setInterval(async()=>{clearInterval(r);try{let s=await this._userManager.querySessionStatus();if(s){let p={session_state:s.session_state,profile:s.sub?{sub:s.sub}:null};this._start(p)}}catch(s){t.error("error from querySessionStatus",s instanceof Error?s.message:s)}},1e3)}},this._callback=async()=>{let t=this._logger.create("_callback");try{let r=await this._userManager.querySessionStatus(),s=!0;r&&this._checkSessionIFrame?r.sub===this._sub?(s=!1,this._checkSessionIFrame.start(r.session_state),t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",r.session_state),await this._userManager.events._raiseUserSessionChanged()):t.debug("different subject signed into OP",r.sub):t.debug("subject no longer signed into OP"),s?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():t.debug("no change in session detected, no event to raise")}catch(r){this._sub&&(t.debug("Error calling queryCurrentSigninSession; raising signed out event",r),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(t=>{this._logger.error(t)})}async _init(){this._logger.create("_init");let e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){let t=await this._userManager.querySessionStatus();if(t){let r={session_state:t.session_state,profile:t.sub?{sub:t.sub}:null};this._start(r)}}}},Hs=class mp{constructor(t){var r;this.id_token=t.id_token,this.session_state=(r=t.session_state)!=null?r:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Xr.getEpochTime()}set expires_in(t){t!==void 0&&(this.expires_at=Math.floor(t)+Xr.getEpochTime())}get expired(){let t=this.expires_in;if(t!==void 0)return t<=0}get scopes(){var t,r;return(r=(t=this.scope)==null?void 0:t.split(" "))!=null?r:[]}toStorageString(){return new Ft("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return Ft.createStatic("User","fromStorageString"),new mp(JSON.parse(t))}},ip="oidc-client",gp=class{constructor(){this._abort=new bo("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){let t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);let{url:r,keepOpen:s}=await new Promise((p,m)=>{let i=u=>{var o;let n=u.data,a=(o=e.scriptOrigin)!=null?o:window.location.origin;if(!(u.origin!==a||n?.source!==ip)){try{let d=Ws.readParams(n.url,e.response_mode).get("state");if(d||t.warn("no state found in response url"),u.source!==this._window&&d!==e.state)return}catch{this._dispose(),m(new Error("Invalid response from window"))}p(n)}};window.addEventListener("message",i,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",i,!1)),this._disposeHandlers.add(this._abort.addHandler(u=>{this._dispose(),m(u)}))});return t.debug("got response from window"),this._dispose(),s||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(let e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,r=!1,s=window.location.origin){e.postMessage({source:ip,url:t,keepOpen:r},s)}},hp={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},bp="_blank",p0=60,u0=2,fp=10,m0=class extends Gs{constructor(e){let{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:r=e.post_logout_redirect_uri,popupWindowFeatures:s=hp,popupWindowTarget:p=bp,redirectMethod:m="assign",redirectTarget:i="self",iframeNotifyParentOrigin:u=e.iframeNotifyParentOrigin,iframeScriptOrigin:o=e.iframeScriptOrigin,silent_redirect_uri:n=e.redirect_uri,silentRequestTimeoutInSeconds:a=fp,automaticSilentRenew:d=!0,validateSubOnSilentRenew:l=!0,includeIdTokenInSilentRenew:c=!1,monitorSession:g=!1,monitorAnonymousSession:h=!1,checkSessionIntervalInSeconds:v=u0,query_status_response_type:k="code",stopCheckSessionOnError:x=!0,revokeTokenTypes:A=["access_token","refresh_token"],revokeTokensOnSignout:S=!1,includeIdTokenInSilentSignout:f=!1,accessTokenExpiringNotificationTimeInSeconds:L=p0,userStore:$}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=s,this.popupWindowTarget=p,this.redirectMethod=m,this.redirectTarget=i,this.iframeNotifyParentOrigin=u,this.iframeScriptOrigin=o,this.silent_redirect_uri=n,this.silentRequestTimeoutInSeconds=a,this.automaticSilentRenew=d,this.validateSubOnSilentRenew=l,this.includeIdTokenInSilentRenew=c,this.monitorSession=g,this.monitorAnonymousSession=h,this.checkSessionIntervalInSeconds=v,this.stopCheckSessionOnError=x,this.query_status_response_type=k,this.revokeTokenTypes=A,this.revokeTokensOnSignout=S,this.includeIdTokenInSilentSignout=f,this.accessTokenExpiringNotificationTimeInSeconds=L,$)this.userStore=$;else{let C=typeof window<"u"?window.sessionStorage:new sp;this.userStore=new lp({store:C})}}},np=class vp extends gp{constructor({silentRequestTimeoutInSeconds:t=fp}){super(),this._logger=new Ft("IFrameWindow"),this._timeoutInSeconds=t,this._frame=vp.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){let t=window.document.createElement("iframe");return t.style.visibility="hidden",t.style.position="fixed",t.style.left="-1000px",t.style.top="0",t.width="0",t.height="0",window.document.body.appendChild(t),t}async navigate(t){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);let r=setTimeout(()=>void this._abort.raise(new Xs("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(r)),await super.navigate(t)}close(){var t;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",r=>{var s;let p=r.target;(s=p.parentNode)==null||s.removeChild(p),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(t=this._frame.contentWindow)==null||t.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(t,r){return super._notifyParent(window.parent,t,!1,r)}},g0=class{constructor(e){this._settings=e,this._logger=new Ft("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new np({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),np.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},h0=500,b0=1e3,ap=class extends gp{constructor({popupWindowTarget:e=bp,popupWindowFeatures:t={}}){super(),this._logger=new Ft("PopupWindow");let r=op.center({...hp,...t});this._window=window.open(void 0,e,op.serialize(r)),t.closePopupWindowAfterInSeconds&&t.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},t.closePopupWindowAfterInSeconds*b0)}async navigate(e){var t;(t=this._window)==null||t.focus();let r=setInterval(()=>{(!this._window||this._window.closed)&&this._abort.raise(new Error("Popup closed by user"))},h0);return this._disposeHandlers.add(()=>clearInterval(r)),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},f0=class{constructor(e){this._settings=e,this._logger=new Ft("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new ap({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,{keepOpen:t=!1}){this._logger.create("callback"),ap.notifyOpener(e,t)}},v0=class{constructor(e){this._settings=e,this._logger=new Ft("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var r;this._logger.create("prepare");let s=window.self;t==="top"&&(s=(r=window.top)!=null?r:window.self);let p=s.location[e].bind(s.location),m;return{navigate:async i=>{this._logger.create("navigate");let u=new Promise((o,n)=>{m=n});return p(i.url),await u},close:()=>{this._logger.create("close"),m?.(new Error("Redirect aborted")),s.stop()}}}async callback(){}},w0=class extends Kv{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new Ft("UserManagerEvents"),this._userLoaded=new bo("User loaded"),this._userUnloaded=new bo("User unloaded"),this._silentRenewError=new bo("Silent renew error"),this._userSignedIn=new bo("User signed in"),this._userSignedOut=new bo("User signed out"),this._userSessionChanged=new bo("User session changed")}async load(e,t=!0){super.load(e),t&&await this._userLoaded.raise(e)}async unload(){super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},y0=class{constructor(e){this._userManager=e,this._logger=new Ft("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Xr("Retry Silent Renew"),this._tokenExpiring=async()=>{let t=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),t.debug("silent token renewal successful")}catch(r){if(r instanceof Xs){t.warn("ErrorTimeout from signinSilent:",r,"retry in 5s"),this._retryTimer.init(5);return}t.error("Error from signinSilent:",r),await this._userManager.events._raiseSilentRenewError(r)}}}async start(){let e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},x0=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},fa=class{constructor(e,t,r,s){this._logger=new Ft("UserManager"),this.settings=new m0(e),this._client=new d0(e),this._redirectNavigator=t??new v0(this.settings),this._popupNavigator=r??new f0(this.settings),this._iframeNavigator=s??new g0(this.settings),this._events=new w0(this.settings),this._silentRenewService=new y0(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new c0(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){let e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),await this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){let e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");let{redirectMethod:t,...r}=e,s=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...r},s)}async signinRedirectCallback(e=window.location.href){let t=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(e);return r.profile&&r.profile.sub?t.info("success, signed in subject",r.profile.sub):t.info("no subject"),r}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:r=!1}){let s=this._logger.create("signinResourceOwnerCredential"),p=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});s.debug("got signin response");let m=await this._buildUser(p);return m.profile&&m.profile.sub?s.info("success, signed in subject",m.profile.sub):s.info("no subject"),m}async signinPopup(e={}){let t=this._logger.create("signinPopup"),{popupWindowFeatures:r,popupWindowTarget:s,...p}=e,m=this.settings.popup_redirect_uri;m||t.throw(new Error("No popup_redirect_uri configured"));let i=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:s}),u=await this._signin({request_type:"si:p",redirect_uri:m,display:"popup",...p},i);return u&&(u.profile&&u.profile.sub?t.info("success, signed in subject",u.profile.sub):t.info("no subject")),u}async signinPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async signinSilent(e={}){var t;let r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:s,...p}=e,m=await this._loadUser();if(m?.refresh_token){r.debug("using refresh token");let n=new x0(m);return await this._useRefreshToken({state:n,redirect_uri:p.redirect_uri,resource:p.resource,extraTokenParams:p.extraTokenParams,timeoutInSeconds:s})}let i=this.settings.silent_redirect_uri;i||r.throw(new Error("No silent_redirect_uri configured"));let u;m&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",m.profile.sub),u=m.profile.sub);let o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});return m=await this._signin({request_type:"si:s",redirect_uri:i,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?m?.id_token:void 0,...p},o,u),m&&((t=m.profile)!=null&&t.sub?r.info("success, signed in subject",m.profile.sub):r.info("no subject")),m}async _useRefreshToken(e){let t=await this._client.useRefreshToken({...e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),r=new Hs({...e.state,...t});return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(e=window.location.href){let t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){let{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){let{state:r}=await this._client.readSignoutResponseState(e);if(r)switch(r.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){let t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...s}=e,p=this.settings.silent_redirect_uri;p||t.throw(new Error("No silent_redirect_uri configured"));let m=await this._loadUser(),i=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),u=await this._signinStart({request_type:"si:s",redirect_uri:p,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?m?.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...s},i);try{let o=await this._client.processSigninResponse(u.url);return t.debug("got signin response"),o.session_state&&o.profile.sub?(t.info("success for subject",o.profile.sub),{session_state:o.session_state,sub:o.profile.sub}):(t.info("success, user not authenticated"),null)}catch(o){if(this.settings.monitorAnonymousSession&&o instanceof Wo)switch(o.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:o.session_state}}throw o}}async _signin(e,t,r){let s=await this._signinStart(e,t);return await this._signinEnd(s.url,r)}async _signinStart(e,t){let r=this._logger.create("_signinStart");try{let s=await this._client.createSigninRequest(e);return r.debug("got signin request"),await t.navigate({url:s.url,state:s.state.id,response_mode:s.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(s){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),s}}async _signinEnd(e,t){let r=this._logger.create("_signinEnd"),s=await this._client.processSigninResponse(e);return r.debug("got signin response"),await this._buildUser(s,t)}async _buildUser(e,t){let r=this._logger.create("_buildUser"),s=new Hs(e);if(t){if(t!==s.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",s.profile.sub),new Wo({...e,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(s),r.debug("user stored"),await this._events.load(s),s}async signoutRedirect(e={}){let t=this._logger.create("signoutRedirect"),{redirectMethod:r,...s}=e,p=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...s},p),t.info("success")}async signoutRedirectCallback(e=window.location.href){let t=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(e);return t.info("success"),r}async signoutPopup(e={}){let t=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:s,...p}=e,m=this.settings.popup_post_logout_redirect_uri,i=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:s});await this._signout({request_type:"so:p",post_logout_redirect_uri:m,state:m==null?void 0:{},...p},i),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async _signout(e,t){let r=await this._signoutStart(e,t);return await this._signoutEnd(r.url)}async _signoutStart(e={},t){var r;let s=this._logger.create("_signoutStart");try{let p=await this._loadUser();s.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(p);let m=e.id_token_hint||p&&p.id_token;m&&(s.debug("setting id_token_hint in signout request"),e.id_token_hint=m),await this.removeUser(),s.debug("user removed, creating signout request");let i=await this._client.createSignoutRequest(e);return s.debug("got signout request"),await t.navigate({url:i.url,state:(r=i.state)==null?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(p){throw s.debug("error after preparing navigator, closing navigator window"),t.close(),p}}async _signoutEnd(e){let t=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(e);return t.debug("got signout response"),r}async signoutSilent(e={}){var t;let r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:s,...p}=e,m=this.settings.includeIdTokenInSilentSignout?(t=await this._loadUser())==null?void 0:t.id_token:void 0,i=this.settings.popup_post_logout_redirect_uri,u=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});await this._signout({request_type:"so:s",post_logout_redirect_uri:i,id_token_hint:m,...p},u),r.info("success")}async signoutSilentCallback(e=window.location.href){let t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){let t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){let r=this._logger.create("_revokeInternal");if(!e)return;let s=t.filter(p=>typeof e[p]=="string");if(!s.length){r.debug("no need to revoke due to no token(s)");return}for(let p of s)await this._client.revokeToken(e[p],p),r.info(`${p} revoked successfully`),p!=="access_token"&&(e[p]=null);await this.storeUser(e),r.debug("user stored"),await this._events.load(e)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){let e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),Hs.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){let t=this._logger.create("storeUser");if(e){t.debug("storing user");let r=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}};var Ep=Fn(wp()),Sp=Fn(xp());var Cp=Fn(kp()),Ti={modalBodyConfirm:null,buttonConfirmed:null,toastContainer:null};function Tp(){ht(Ti)}var Ut=function(e,t,r,s,...p){let m=e.insertRow();m.id=t,fo(m,t,t,0);let i=t;return p.forEach(u=>{fo(m,u),i=u}),r&&m.classList.add("table-active"),s&&ol(m,_p,_0(_p,k0,s),"Copy to clipboard"),m};function Ai(e,t,r,s=!1,p=null){let m=e.insertCell(0);m.style.verticalAlign="middle",m.style.width="25px";let i=document.createElement("input");return i.classList.add("form-check-input"),i.type="checkbox",i.id=t,i.checked=r,i.disabled=s,p&&(i.onchange=p),m.append(i),i}function fo(e,t,r=null,s=-1){let p=e.insertCell(s);return p.textContent=t,p.setAttribute("data-bs-toggle","tooltip"),p.title=r??t,p}function ol(e,t,r,s){let p=e.insertCell();p.classList.add("table-action-column");let m=document.createElement("button");m.classList.add("btn"),m.style.padding="0",m.innerHTML=`<i class="bi ${t}"></i>`,s&&(m.title=s),m.onclick=r,p.appendChild(m)}var _p="bi-copy",k0="bi-check-lg";function _0(e,t,r){return s=>{navigator.clipboard.writeText(r);let p=s.currentTarget.querySelector(".bi");p.classList.replace(e,t),setTimeout(()=>p.classList.replace(t,e),500)}}function ya(e,t){let r=document.createElement("th");r.textContent=t,e.appendChild(r)}function Ge(e,t){e.textContent="",t.forEach(r=>{let s=document.createElement("option");s.text=r,e.appendChild(s)})}function il(e,t){e.textContent="",t.forEach(r=>{let s=document.createElement("option");s.value=r.key,s.text=r.text,e.appendChild(s)})}function vo(e,t){t.forEach(r=>{Vo(e,r)})}function Vo(e,t,r=!1,s){let p=document.createElement("li");p.innerHTML=r?`<h6 class="dropdown-header" data-value='${s}'>${Jr(t)}</h6>`:`<a class="dropdown-item" data-value='${s}'>${Jr(t)}</a>`,e.appendChild(p)}function Li(e,t,r,s,p=null){let m="tab"+Math.random().toString(36).replace("0.",""),i=document.createElement("li");i.classList.add("nav-item"),p&&(i.setAttribute("data-bs-toggle","tooltip"),i.setAttribute("title",p)),i.innerHTML=`<a class="nav-link" data-bs-toggle="tab" data-bs-target="#${m}">${r}</a>`,e.appendChild(i);let u=document.createElement("template");return u.innerHTML=s,u.content.firstElementChild.id=m,t.appendChild(u.content.firstElementChild),m}function ht(e,t=null){Object.keys(e).forEach(r=>{if(e[r]=(t??document).getElementById(r),!e[r])throw new Error(`Element ${r} not found.`)})}function Jr(e){return Cp.sanitize(e)}function nl(e,t="Info"){let r=document.createElement("div");r.classList.add("toast"),r.innerHTML=`<div class="toast-header toast-header-info">
  <i class="bi me-2 bi-info-circle-fill"></i>
  <strong class="me-auto">${Jr(t)}</strong>
  <small>${status}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Jr(e)}</div>`,Ti.toastContainer.appendChild(r),r.addEventListener("hidden.bs.toast",()=>{r.remove()}),new Bo(r).show()}function ae(e,t="Error",r=""){let s=document.createElement("div");s.classList.add("toast"),s.innerHTML=`<div class="toast-header toast-header-warn alert-danger">
  <i class="bi me-2 bi-exclamation-triangle-fill"></i>
  <strong class="me-auto">${Jr(t)}</strong>
  <small>${r}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Jr(e)}</div>`,Ti.toastContainer.appendChild(s),s.addEventListener("hidden.bs.toast",()=>{s.remove()}),new Bo(s).show()}function E0(e){this.message=e,this.name="UserException"}function lt(e,t,r=null){if(r&&r.classList.remove("is-invalid"),!e)throw r?(r.parentNode.getElementsByClassName("invalid-feedback")[0].textContent=t,r.classList.add("is-invalid")):ae(t,"Error"),new E0(t)}function hn(e,t=!1){return t?e.replace("T"," ").replace("Z","").replace("."," "):e.split(".")[0].replace("T"," ")}var rl;function Ke(e,t,r){rl=rl??new Or("#modalConfirm"),Ti.modalBodyConfirm.textContent=e,Ti.buttonConfirmed.innerText=t,Ti.buttonConfirmed.onclick=r,rl.show()}function Nt(e,t,r=!1,s=!1){let p=Sp.edit(e);return p.setOption("wrap",s),p.setOption("useWorker",!1),p.session.setMode(t),r&&(p.setReadOnly(!0),p.renderer.setShowGutter(!1)),p}function Ap(e,t,r){return new Ep.default({selector:e,data:{src:t,keys:["label","group"]},placeHolder:r,resultsList:{class:"dropdown-menu show",maxResults:30},resultItem:{class:"dropdown-item",highlight:!0,element:(s,p)=>{s.style="display: flex;",s.innerHTML=`<span style="flex-grow: 1;" >${Jr(p.key==="label"?p.match:p.value.label)}</span>
            <span style="color: 3a8c9a;" class="fw-light fst-italic ms-1">
              ${p.key==="group"?p.match:p.value.group}</span>`}},events:{input:{results:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(s=>{s.style.overflow="unset"})},close:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(s=>{s.style.overflow="auto"})}}}})}function dr(e,t){e.addEventListener("click",()=>{t.classList.remove("is-invalid")})}function Lp(e,t){Array.from(e.rows).forEach(r=>{t(r)?r.classList.add("table-active"):r.classList.remove("table-active")})}function Tt(e){return JSON.stringify(e,null,2)}function $p(e,t){let r=e.value.indexOf(t);return r>=0?(e.focus(),e.setSelectionRange(r,r+t.length),!0):!1}function bn(e,t,r){!r||r.length===t.length?e.textContent=t.length>0?t.length.toString():"":e.textContent=`${r.length}/${t.length}`}var Rp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="row resizable_pane" style="height: 80vh">
    <div class="col-md-4 resizable_flex_column">
        <div class="input-group has-validation">
            <input class="form-control" id="tableValidationEnvironments" hidden="true"></input>
            <div class="invalid-feedback"></div>
        </div>
        <div class="table-wrap">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyEnvironments"></tbody>
            </table>
        </div>
    </div>
    <div class="col-md-8 resizable_flex_column">
        <ul class="nav nav-tabs nav-fill">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabEnvDetails">Manage</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabEnvJson">JSON</a>
            </li>
        </ul>
        <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
            <div class="tab-pane container active no-margin" id="tabEnvDetails">
                <crud-toolbar label="Name" id="crudEnvironmentFields" allowIdChange>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="URI including protocol, host and port (e.g. http://localhost:8080)">API URI</label>
                        <input type="text" class="form-control form-control-sm" id="inputApiUri" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="A comma-separated list of namespaces (e.g. com.example.namespace). The given namespaces are used as a parameter for the Things search">Search Namespaces</label>
                        <input type="text" class="form-control form-control-sm" spellcheck="false" id="inputSearchNamespaces" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1 mb-3">
                        <label class="input-group-text">Ditto Version</label>
                        <select class="form-select form-select-sm" id="selectDittoVersion" disabled>
                            <option selected value="3">3</option>
                            <option value="2">2</option>
                        </select>
                    </div>    
                    <label class="form-label">Optional Tabs</label>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabPolicies" disabled>
                        <label class="form-check-label" for="inputTabPolicies">Policies</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabConnections" disabled>
                        <label class="form-check-label" for="inputTabConnections">Connections</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabOperations" disabled>
                        <label class="form-check-label" for="inputTabOperations">Operations</label>
                      </div>
            </crud-toolbar>
            </div>
            <div class="tab-pane container no-margin" id="tabEnvJson">
                <crud-toolbar label="Name" id="crudEnvironmentJson" allowIdChange>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div>
                            <div class="script_editor" id="settingsEditor"></div>
                        </div>
                    </div>
                </crud-toolbar>
            </div>
        </div>
    </div>
</div>`;var Mp={local_ditto:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},local_ditto_ide:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"pre",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:"pre:ditto"}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},ditto_sandbox:{api_uri:"https://ditto.eclipseprojects.io",ditto_version:3,disablePolicies:!1,disableConnections:!0,disableOperations:!0,authSettings:{main:{method:"basic",oidc:{enabled:!0,defaultProvider:"fake"},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!1}},oidc:{}}},oidc_example:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0}},oidc:{providers:{fake:{displayName:"Fake IDP to test",extractBearerTokenFrom:"access_token",authority:"http://localhost:9900/fake",client_id:"some-client-id",redirect_uri:"http://localhost:8000",response_type:"code",scope:"openid"}}}}}};var T0="state",$i="primaryEnvironmentName",xa="oidcProvider",A0="environmentsURL",Np="ditto-ui-env",Go=(p=>(p.oidc="oidc",p.basic="basic",p.bearer="bearer",p.pre="pre",p))(Go||{}),L0={main:{method:"basic",oidc:{enabled:!1,defaultProvider:null,autoSso:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null,autoSso:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!1}},oidc:{}},qt,re,wo,mt={environmentSelector:null,tbodyEnvironments:null,tableValidationEnvironments:null,crudEnvironmentFields:null,crudEnvironmentJson:null,inputApiUri:null,inputSearchNamespaces:null,selectDittoVersion:null,inputTabPolicies:null,inputTabConnections:null,inputTabOperations:null},Fp=[];document.getElementById("environmentsHTML").innerHTML=Rp;function al(e){Object.assign(this,e),this.authSettings||(this.authSettings=L0),this.authSettings.main.oidc.provider=e.authSettings?.main?.oidc?.defaultProvider,Up(e.authSettings?.main?.basic?.defaultUsernamePassword),this.authSettings.main.pre.dittoPreAuthenticatedUsername=e.authSettings?.main?.pre?.defaultDittoPreAuthenticatedUsername,this.authSettings.devops.oidc.provider=e.authSettings?.devops?.oidc?.defaultProvider,Hp(e.authSettings?.devops?.basic?.defaultUsernamePassword)}function fn(){return mt.environmentSelector.value}function Q(){return qt[fn()]}function Ye(e){Fp.push(e)}async function zp(e,t=null){await jp(e),Fp.forEach(r=>r.call(null,t))}async function Bp(){ht(mt),dr(mt.tbodyEnvironments,mt.tableValidationEnvironments),qt=await M0(),wo=Nt("settingsEditor","ace/mode/json",!0),mt.tbodyEnvironments.addEventListener("click",R0),mt.crudEnvironmentJson.addEventListener("onCreateClick",Op),mt.crudEnvironmentJson.addEventListener("onUpdateClick",Dp),mt.crudEnvironmentJson.addEventListener("onDeleteClick",Ip),mt.crudEnvironmentJson.addEventListener("onEditToggle",Pp),mt.crudEnvironmentFields.addEventListener("onCreateClick",Op),mt.crudEnvironmentFields.addEventListener("onUpdateClick",Dp),mt.crudEnvironmentFields.addEventListener("onDeleteClick",Ip),mt.crudEnvironmentFields.addEventListener("onEditToggle",Pp),mt.environmentSelector.onchange=$0,document.querySelector('a[data-bs-target="#tabEnvJson"]').addEventListener("shown.bs.tab",()=>{wo.renderer.updateFull()}),await ie(!0)}async function $0(){let e=new URLSearchParams(window.location.search);e.set($i,fn()),window.history.replaceState(null,null,`${window.location.pathname}?${e}`),await zp(!1)}async function Ip(){lt(re,"No environment selected",mt.tableValidationEnvironments),lt(Object.keys(qt).length>=2,"At least one environment is required",mt.tableValidationEnvironments),delete qt[re],re=null,await ie(!1)}async function Op(e){lt(e.target.idValue,"Environment name must not be empty",e.target.validationElement),lt(!qt[e.target.idValue],"Environment name already used",e.target.validationElement),e.target===mt.crudEnvironmentFields?qt[e.target.idValue]=new al({api_uri:mt.inputApiUri.value??"",searchNamespaces:mt.inputSearchNamespaces.value??"",ditto_version:mt.selectDittoVersion.value?mt.selectDittoVersion.value:"3"}):qt[e.target.idValue]=new al(JSON.parse(wo.getValue())),re=e.target.idValue,e.target.toggleEdit(),await ie(!1)}function R0(e){e.target&&e.target.tagName==="TD"&&(re&&re===e.target.parentNode.id?re=null:re=e.target.parentNode.id,sl())}async function Dp(e){re!==e.target.idValue&&t(),e.target===mt.crudEnvironmentFields?(qt[re].api_uri=mt.inputApiUri.value,qt[re].ditto_version=mt.selectDittoVersion.value,qt[re].searchNamespaces=mt.inputSearchNamespaces.value,qt[re].disablePolicies=!mt.inputTabPolicies.checked,qt[re].disableConnections=!mt.inputTabConnections.checked,qt[re].disableOperations=!mt.inputTabOperations.checked):qt[re]=JSON.parse(wo.getValue()),e.target.toggleEdit(),await ie(!1);function t(){qt[e.target.idValue]=qt[re],delete qt[re],re=e.target.idValue}}function Ko(){qt&&localStorage.setItem(Np,JSON.stringify(qt))}async function ie(e,t=null){r(),Ko(),sl(),s(),await zp(e,t);function r(){let p=mt.environmentSelector.value,m=new URLSearchParams(window.location.search);p||(p=m.get($i));let i=m.get(T0);if(!p&&i!==null){let u=i.split(";");if(u.length>1){let o=atob(u[1]),n=new URLSearchParams(o),a=n.get($i),d=n.get(xa);p=a,d&&(qt[p].authSettings.main.oidc.provider=d)}}(!p||!qt[p])&&(p=Object.keys(qt)[0]),Ge(mt.environmentSelector,Object.keys(qt)),mt.environmentSelector.value=p}function s(){mt.tbodyEnvironments.textContent="",Object.keys(qt).forEach(p=>{Ut(mt.tbodyEnvironments,p,p===re)})}}function sl(){if(re){let e=qt[re];mt.crudEnvironmentFields.idValue=re,mt.crudEnvironmentJson.idValue=re,wo.setValue(Tt(e),-1),mt.inputApiUri.value=e.api_uri,mt.inputSearchNamespaces.value=e.searchNamespaces??"",mt.selectDittoVersion.value=e.ditto_version?e.ditto_version:"3",mt.inputTabPolicies.checked=!e.disablePolicies,mt.inputTabConnections.checked=!e.disableConnections,mt.inputTabOperations.checked=!e.disableOperations}else mt.crudEnvironmentFields.idValue=null,mt.crudEnvironmentJson.idValue=null,wo.setValue(""),mt.inputApiUri.value=null,mt.inputSearchNamespaces.value=null,mt.selectDittoVersion.value=3,mt.inputTabPolicies.checked=!0,mt.inputTabConnections.checked=!0,mt.inputTabOperations.checked=!0}async function M0(){let e,t,s=new URLSearchParams(window.location.search).get(A0);if(s)try{let o=await fetch(s);if(!o.ok)throw new Error(`URL ${s} can not be loaded`);e=await o.json(),i(e)}catch(o){e=null,ae(o.message,"Error loading environments from URL")}let p=localStorage.getItem(Np);p&&(t=JSON.parse(p));let m;return e?t?m=u(e,t):m=e:t?m=t:m=Mp,Object.keys(m).forEach(o=>{m[o]=new al(m[o])}),m;function i(o){Object.keys(o).forEach(n=>{if(!o[n].hasOwnProperty("api_uri"))throw new SyntaxError("Environments json invalid")})}function u(o,n){let a={};return Object.keys(o).forEach(d=>{a[d]={...n[d],...o[d]}}),{...n,...a}}}function Pp(e){mt.inputApiUri.disabled=!e.detail.isEditing,mt.inputSearchNamespaces.disabled=!e.detail.isEditing,mt.selectDittoVersion.disabled=!e.detail.isEditing,mt.inputTabPolicies.disabled=!e.detail.isEditing,mt.inputTabConnections.disabled=!e.detail.isEditing,mt.inputTabOperations.disabled=!e.detail.isEditing,wo.setReadOnly(!e.detail.isEditing),wo.renderer.setShowGutter(e.detail.isEditing),e.detail.isEditing||sl()}function cl(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function I0(e){if(Array.isArray(e))return cl(e)}function O0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D0(e,t,r){return t=vn(t),j0(e,ml()?Reflect.construct(t,r||[],vn(e).constructor):t.apply(e,r))}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kp(e,t,r){if(ml())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var p=new(e.bind.apply(e,s));return r&&wn(p,r.prototype),p}function Wp(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Yp(s.key),s)}}function Xo(e,t,r){return t&&Wp(e.prototype,t),r&&Wp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P0(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Xp(e))||t){r&&(e=r);var s=0,p=function(){};return{s:p,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(o){throw o},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var o=r.next();return i=o.done,o},e:function(o){u=!0,m=o},f:function(){try{i||r.return==null||r.return()}finally{if(u)throw m}}}}function N0(e,t,r){return(t=Yp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vn(e)}function F0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wn(e,t)}function z0(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function ml(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ml=function(){return!!e})()}function B0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),r.push.apply(r,s)}return r}function H0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vp(Object(r),!0).forEach(function(s){N0(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function j0(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O0(e)}function wn(e,t){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wn(e,t)}function gl(e){return I0(e)||B0(e)||Xp(e)||U0()}function W0(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Yp(e){var t=W0(e,"string");return typeof t=="symbol"?t:t+""}function pr(e){"@babel/helpers - typeof";return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(e)}function Xp(e,t){if(e){if(typeof e=="string")return cl(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cl(e,t):void 0}}function pl(e){var t=typeof Map=="function"?new Map:void 0;return pl=function(r){if(r===null||!z0(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,s)}function s(){return Kp(r,arguments,vn(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),wn(s,r)},pl(e)}var V0=function(){function e(){Yo(this,e)}return Xo(e,[{key:"add",value:function(r,s,p){if(typeof arguments[0]!="string")for(var m in arguments[0])this.add(m,arguments[0][m],arguments[1]);else(Array.isArray(r)?r:[r]).forEach(function(i){this[i]=this[i]||[],s&&this[i][p?"unshift":"push"](s)},this)}},{key:"run",value:function(r,s){this[r]=this[r]||[],this[r].forEach(function(p){p.call(s&&s.context?s.context:s,s)})}}])}(),G0=function(){function e(t){Yo(this,e),this.jsep=t,this.registered={}}return Xo(e,[{key:"register",value:function(){for(var r=this,s=arguments.length,p=new Array(s),m=0;m<s;m++)p[m]=arguments[m];p.forEach(function(i){if(pr(i)!=="object"||!i.name||!i.init)throw new Error("Invalid JSEP plugin format");r.registered[i.name]||(i.init(r.jsep),r.registered[i.name]=i)})}}])}(),ur=function(){function e(t){Yo(this,e),this.expr=t,this.index=0}return Xo(e,[{key:"char",get:function(){return this.expr.charAt(this.index)}},{key:"code",get:function(){return this.expr.charCodeAt(this.index)}},{key:"throwError",value:function(r){var s=new Error(r+" at character "+this.index);throw s.index=this.index,s.description=r,s}},{key:"runHook",value:function(r,s){if(e.hooks[r]){var p={context:this,node:s};return e.hooks.run(r,p),p.node}return s}},{key:"searchHook",value:function(r){if(e.hooks[r]){var s={context:this};return e.hooks[r].find(function(p){return p.call(s.context,s),s.node}),s.node}}},{key:"gobbleSpaces",value:function(){for(var r=this.code;r===e.SPACE_CODE||r===e.TAB_CODE||r===e.LF_CODE||r===e.CR_CODE;)r=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}},{key:"parse",value:function(){this.runHook("before-all");var r=this.gobbleExpressions(),s=r.length===1?r[0]:{type:e.COMPOUND,body:r};return this.runHook("after-all",s)}},{key:"gobbleExpressions",value:function(r){for(var s=[],p,m;this.index<this.expr.length;)if(p=this.code,p===e.SEMCOL_CODE||p===e.COMMA_CODE)this.index++;else if(m=this.gobbleExpression())s.push(m);else if(this.index<this.expr.length){if(p===r)break;this.throwError('Unexpected "'+this.char+'"')}return s}},{key:"gobbleExpression",value:function(){var r=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",r)}},{key:"gobbleBinaryOp",value:function(){this.gobbleSpaces();for(var r=this.expr.substr(this.index,e.max_binop_len),s=r.length;s>0;){if(e.binary_ops.hasOwnProperty(r)&&(!e.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+r.length))))return this.index+=s,r;r=r.substr(0,--s)}return!1}},{key:"gobbleBinaryExpression",value:function(){var r,s,p,m,i,u,o,n,a;if(u=this.gobbleToken(),!u||(s=this.gobbleBinaryOp(),!s))return u;for(i={value:s,prec:e.binaryPrecedence(s),right_a:e.right_associative.has(s)},o=this.gobbleToken(),o||this.throwError("Expected expression after "+s),m=[u,i,o];s=this.gobbleBinaryOp();){if(p=e.binaryPrecedence(s),p===0){this.index-=s.length;break}i={value:s,prec:p,right_a:e.right_associative.has(s)},a=s;for(var d=function(c){return i.right_a&&c.right_a?p>c.prec:p<=c.prec};m.length>2&&d(m[m.length-2]);)o=m.pop(),s=m.pop().value,u=m.pop(),r={type:e.BINARY_EXP,operator:s,left:u,right:o},m.push(r);r=this.gobbleToken(),r||this.throwError("Expected expression after "+a),m.push(i,r)}for(n=m.length-1,r=m[n];n>1;)r={type:e.BINARY_EXP,operator:m[n-1].value,left:m[n-2],right:r},n-=2;return r}},{key:"gobbleToken",value:function(){var r,s,p,m;if(this.gobbleSpaces(),m=this.searchHook("gobble-token"),m)return this.runHook("after-token",m);if(r=this.code,e.isDecimalDigit(r)||r===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(r===e.SQUOTE_CODE||r===e.DQUOTE_CODE)m=this.gobbleStringLiteral();else if(r===e.OBRACK_CODE)m=this.gobbleArray();else{for(s=this.expr.substr(this.index,e.max_unop_len),p=s.length;p>0;){if(e.unary_ops.hasOwnProperty(s)&&(!e.isIdentifierStart(this.code)||this.index+s.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+s.length)))){this.index+=p;var i=this.gobbleToken();return i||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:e.UNARY_EXP,operator:s,argument:i,prefix:!0})}s=s.substr(0,--p)}e.isIdentifierStart(r)?(m=this.gobbleIdentifier(),e.literals.hasOwnProperty(m.name)?m={type:e.LITERAL,value:e.literals[m.name],raw:m.name}:m.name===e.this_str&&(m={type:e.THIS_EXP})):r===e.OPAREN_CODE&&(m=this.gobbleGroup())}return m?(m=this.gobbleTokenProperty(m),this.runHook("after-token",m)):this.runHook("after-token",!1)}},{key:"gobbleTokenProperty",value:function(r){this.gobbleSpaces();for(var s=this.code;s===e.PERIOD_CODE||s===e.OBRACK_CODE||s===e.OPAREN_CODE||s===e.QUMARK_CODE;){var p=void 0;if(s===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;p=!0,this.index+=2,this.gobbleSpaces(),s=this.code}this.index++,s===e.OBRACK_CODE?(r={type:e.MEMBER_EXP,computed:!0,object:r,property:this.gobbleExpression()},r.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),s=this.code,s!==e.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):s===e.OPAREN_CODE?r={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:r}:(s===e.PERIOD_CODE||p)&&(p&&this.index--,this.gobbleSpaces(),r={type:e.MEMBER_EXP,computed:!1,object:r,property:this.gobbleIdentifier()}),p&&(r.optional=!0),this.gobbleSpaces(),s=this.code}return r}},{key:"gobbleNumericLiteral",value:function(){for(var r="",s,p;e.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(r+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);if(s=this.char,s==="e"||s==="E"){for(r+=this.expr.charAt(this.index++),s=this.char,(s==="+"||s==="-")&&(r+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)r+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+r+this.char+")")}return p=this.code,e.isIdentifierStart(p)?this.throwError("Variable names cannot start with a number ("+r+this.char+")"):(p===e.PERIOD_CODE||r.length===1&&r.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:e.LITERAL,value:parseFloat(r),raw:r}}},{key:"gobbleStringLiteral",value:function(){for(var r="",s=this.index,p=this.expr.charAt(this.index++),m=!1;this.index<this.expr.length;){var i=this.expr.charAt(this.index++);if(i===p){m=!0;break}else if(i==="\\")switch(i=this.expr.charAt(this.index++),i){case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:r+=i}else r+=i}return m||this.throwError('Unclosed quote after "'+r+'"'),{type:e.LITERAL,value:r,raw:this.expr.substring(s,this.index)}}},{key:"gobbleIdentifier",value:function(){var r=this.code,s=this.index;for(e.isIdentifierStart(r)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(r=this.code,e.isIdentifierPart(r));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(s,this.index)}}},{key:"gobbleArguments",value:function(r){for(var s=[],p=!1,m=0;this.index<this.expr.length;){this.gobbleSpaces();var i=this.code;if(i===r){p=!0,this.index++,r===e.CPAREN_CODE&&m&&m>=s.length&&this.throwError("Unexpected token "+String.fromCharCode(r));break}else if(i===e.COMMA_CODE){if(this.index++,m++,m!==s.length){if(r===e.CPAREN_CODE)this.throwError("Unexpected token ,");else if(r===e.CBRACK_CODE)for(var u=s.length;u<m;u++)s.push(null)}}else if(s.length!==m&&m!==0)this.throwError("Expected comma");else{var o=this.gobbleExpression();(!o||o.type===e.COMPOUND)&&this.throwError("Expected comma"),s.push(o)}}return p||this.throwError("Expected "+String.fromCharCode(r)),s}},{key:"gobbleGroup",value:function(){this.index++;var r=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,r.length===1?r[0]:r.length?{type:e.SEQUENCE_EXP,expressions:r}:!1;this.throwError("Unclosed (")}},{key:"gobbleArray",value:function(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}}],[{key:"version",get:function(){return"1.3.9"}},{key:"toString",value:function(){return"JavaScript Expression Parser (JSEP) v"+e.version}},{key:"addUnaryOp",value:function(r){return e.max_unop_len=Math.max(r.length,e.max_unop_len),e.unary_ops[r]=1,e}},{key:"addBinaryOp",value:function(r,s,p){return e.max_binop_len=Math.max(r.length,e.max_binop_len),e.binary_ops[r]=s,p?e.right_associative.add(r):e.right_associative.delete(r),e}},{key:"addIdentifierChar",value:function(r){return e.additional_identifier_chars.add(r),e}},{key:"addLiteral",value:function(r,s){return e.literals[r]=s,e}},{key:"removeUnaryOp",value:function(r){return delete e.unary_ops[r],r.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}},{key:"removeAllUnaryOps",value:function(){return e.unary_ops={},e.max_unop_len=0,e}},{key:"removeIdentifierChar",value:function(r){return e.additional_identifier_chars.delete(r),e}},{key:"removeBinaryOp",value:function(r){return delete e.binary_ops[r],r.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(r),e}},{key:"removeAllBinaryOps",value:function(){return e.binary_ops={},e.max_binop_len=0,e}},{key:"removeLiteral",value:function(r){return delete e.literals[r],e}},{key:"removeAllLiterals",value:function(){return e.literals={},e}},{key:"parse",value:function(r){return new e(r).parse()}},{key:"getMaxKeyLen",value:function(r){return Math.max.apply(Math,[0].concat(gl(Object.keys(r).map(function(s){return s.length}))))}},{key:"isDecimalDigit",value:function(r){return r>=48&&r<=57}},{key:"binaryPrecedence",value:function(r){return e.binary_ops[r]||0}},{key:"isIdentifierStart",value:function(r){return r>=65&&r<=90||r>=97&&r<=122||r>=128&&!e.binary_ops[String.fromCharCode(r)]||e.additional_identifier_chars.has(String.fromCharCode(r))}},{key:"isIdentifierPart",value:function(r){return e.isIdentifierStart(r)||e.isDecimalDigit(r)}}])}(),K0=new V0;Object.assign(ur,{hooks:K0,plugins:new G0(ur),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});ur.max_unop_len=ur.getMaxKeyLen(ur.unary_ops);ur.max_binop_len=ur.getMaxKeyLen(ur.binary_ops);var Mi=function(t){return new ur(t).parse()},Y0=Object.getOwnPropertyNames(Xo(function e(){Yo(this,e)}));Object.getOwnPropertyNames(ur).filter(function(e){return!Y0.includes(e)&&Mi[e]===void 0}).forEach(function(e){Mi[e]=ur[e]});Mi.Jsep=ur;var X0="ConditionalExpression",J0={name:"ternary",init:function(t){t.hooks.add("after-expression",function(s){if(s.node&&this.code===t.QUMARK_CODE){this.index++;var p=s.node,m=this.gobbleExpression();if(m||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;var i=this.gobbleExpression();if(i||this.throwError("Expected expression"),s.node={type:X0,test:p,consequent:m,alternate:i},p.operator&&t.binary_ops[p.operator]<=.9){for(var u=p;u.right.operator&&t.binary_ops[u.right.operator]<=.9;)u=u.right;s.node.test=u.right,u.right=s.node,s.node=p}}else this.throwError("Expected :")}})}};Mi.plugins.register(J0);var Gp=47,q0=92,Q0={name:"regex",init:function(t){t.hooks.add("gobble-token",function(s){if(this.code===Gp){for(var p=++this.index,m=!1;this.index<this.expr.length;){if(this.code===Gp&&!m){for(var i=this.expr.slice(p,this.index),u="";++this.index<this.expr.length;){var o=this.code;if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57)u+=this.char;else break}var n=void 0;try{n=new RegExp(i,u)}catch(a){this.throwError(a.message)}return s.node={type:t.LITERAL,value:n,raw:this.expr.slice(p-1,this.index)},s.node=this.gobbleTokenProperty(s.node),s.node}this.code===t.OBRACK_CODE?m=!0:m&&this.code===t.CBRACK_CODE&&(m=!1),this.index+=this.code===q0?2:1}this.throwError("Unclosed Regex")}})}},dl=43,Z0=45,Ri={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|="]),updateOperators:[dl,Z0],assignmentPrecedence:.9,init:function(t){var r=[t.IDENTIFIER,t.MEMBER_EXP];Ri.assignmentOperators.forEach(function(p){return t.addBinaryOp(p,Ri.assignmentPrecedence,!0)}),t.hooks.add("gobble-token",function(m){var i=this,u=this.code;Ri.updateOperators.some(function(o){return o===u&&o===i.expr.charCodeAt(i.index+1)})&&(this.index+=2,m.node={type:"UpdateExpression",operator:u===dl?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!m.node.argument||!r.includes(m.node.argument.type))&&this.throwError("Unexpected ".concat(m.node.operator)))}),t.hooks.add("after-token",function(m){var i=this;if(m.node){var u=this.code;Ri.updateOperators.some(function(o){return o===u&&o===i.expr.charCodeAt(i.index+1)})&&(r.includes(m.node.type)||this.throwError("Unexpected ".concat(m.node.operator)),this.index+=2,m.node={type:"UpdateExpression",operator:u===dl?"++":"--",argument:m.node,prefix:!1})}}),t.hooks.add("after-expression",function(m){m.node&&s(m.node)});function s(p){Ri.assignmentOperators.has(p.operator)?(p.type="AssignmentExpression",s(p.left),s(p.right)):p.operator||Object.values(p).forEach(function(m){m&&pr(m)==="object"&&s(m)})}}};Mi.plugins.register(Q0,Ri);var Gt={evalAst:function(t,r){switch(t.type){case"BinaryExpression":case"LogicalExpression":return Gt.evalBinaryExpression(t,r);case"Compound":return Gt.evalCompound(t,r);case"ConditionalExpression":return Gt.evalConditionalExpression(t,r);case"Identifier":return Gt.evalIdentifier(t,r);case"Literal":return Gt.evalLiteral(t,r);case"MemberExpression":return Gt.evalMemberExpression(t,r);case"UnaryExpression":return Gt.evalUnaryExpression(t,r);case"ArrayExpression":return Gt.evalArrayExpression(t,r);case"CallExpression":return Gt.evalCallExpression(t,r);case"AssignmentExpression":return Gt.evalAssignmentExpression(t,r);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression:function(t,r){var s={"||":function(m,i){return m||i()},"&&":function(m,i){return m&&i()},"|":function(m,i){return m|i()},"^":function(m,i){return m^i()},"&":function(m,i){return m&i()},"==":function(m,i){return m==i()},"!=":function(m,i){return m!=i()},"===":function(m,i){return m===i()},"!==":function(m,i){return m!==i()},"<":function(m,i){return m<i()},">":function(m,i){return m>i()},"<=":function(m,i){return m<=i()},">=":function(m,i){return m>=i()},"<<":function(m,i){return m<<i()},">>":function(m,i){return m>>i()},">>>":function(m,i){return m>>>i()},"+":function(m,i){return m+i()},"-":function(m,i){return m-i()},"*":function(m,i){return m*i()},"/":function(m,i){return m/i()},"%":function(m,i){return m%i()}}[t.operator](Gt.evalAst(t.left,r),function(){return Gt.evalAst(t.right,r)});return s},evalCompound:function(t,r){for(var s,p=0;p<t.body.length;p++){t.body[p].type==="Identifier"&&["var","let","const"].includes(t.body[p].name)&&t.body[p+1]&&t.body[p+1].type==="AssignmentExpression"&&(p+=1);var m=t.body[p];s=Gt.evalAst(m,r)}return s},evalConditionalExpression:function(t,r){return Gt.evalAst(t.test,r)?Gt.evalAst(t.consequent,r):Gt.evalAst(t.alternate,r)},evalIdentifier:function(t,r){if(t.name in r)return r[t.name];throw ReferenceError("".concat(t.name," is not defined"))},evalLiteral:function(t){return t.value},evalMemberExpression:function(t,r){var s=t.computed?Gt.evalAst(t.property):t.property.name,p=Gt.evalAst(t.object,r),m=p[s];return typeof m=="function"?m.bind(p):m},evalUnaryExpression:function(t,r){var s={"-":function(m){return-Gt.evalAst(m,r)},"!":function(m){return!Gt.evalAst(m,r)},"~":function(m){return~Gt.evalAst(m,r)},"+":function(m){return+Gt.evalAst(m,r)}}[t.operator](t.argument);return s},evalArrayExpression:function(t,r){return t.elements.map(function(s){return Gt.evalAst(s,r)})},evalCallExpression:function(t,r){var s=t.arguments.map(function(m){return Gt.evalAst(m,r)}),p=Gt.evalAst(t.callee,r);return p.apply(void 0,gl(s))},evalAssignmentExpression:function(t,r){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");var s=t.left.name,p=Gt.evalAst(t.right,r);return r[s]=p,r[s]}},tw=function(){function e(t){Yo(this,e),this.code=t,this.ast=Mi(this.code)}return Xo(e,[{key:"runInNewContext",value:function(r){var s=H0({},r);return Gt.evalAst(this.ast,s)}}])}();function yo(e,t){return e=e.slice(),e.push(t),e}function ul(e,t){return t=t.slice(),t.unshift(e),t}var ew=function(e){function t(r){var s;return Yo(this,t),s=D0(this,t,['JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)']),s.avoidNew=!0,s.value=r,s.name="NewError",s}return F0(t,e),Xo(t)}(pl(Error));function Rt(e,t,r,s,p){if(!(this instanceof Rt))try{return new Rt(e,t,r,s,p)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof e=="string"&&(p=s,s=r,r=t,t=e,e=null);var m=e&&pr(e)==="object";if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=Object.hasOwn(e,"wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},this.eval=e.eval===void 0?"safe":e.eval,this.ignoreEvalErrors=typeof e.ignoreEvalErrors>"u"?!1:e.ignoreEvalErrors,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||s||null,this.otherTypeCallback=e.otherTypeCallback||p||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},e.autostart!==!1){var i={path:m?e.path:t};m?"json"in e&&(i.json=e.json):i.json=r;var u=this.evaluate(i);if(!u||pr(u)!=="object")throw new ew(u);return u}}Rt.prototype.evaluate=function(e,t,r,s){var p=this,m=this.parent,i=this.parentProperty,u=this.flatten,o=this.wrap;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=s||this.otherTypeCallback,t=t||this.json,e=e||this.path,e&&pr(e)==="object"&&!Array.isArray(e)){if(!e.path&&e.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var n=e;t=n.json,u=Object.hasOwn(e,"flatten")?e.flatten:u,this.currResultType=Object.hasOwn(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Object.hasOwn(e,"sandbox")?e.sandbox:this.currSandbox,o=Object.hasOwn(e,"wrap")?e.wrap:o,this.currEval=Object.hasOwn(e,"eval")?e.eval:this.currEval,r=Object.hasOwn(e,"callback")?e.callback:r,this.currOtherTypeCallback=Object.hasOwn(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,m=Object.hasOwn(e,"parent")?e.parent:m,i=Object.hasOwn(e,"parentProperty")?e.parentProperty:i,e=e.path}if(m=m||null,i=i||null,Array.isArray(e)&&(e=Rt.toPathString(e)),!(!e&&e!==""||!t)){var a=Rt.toPathArray(e);a[0]==="$"&&a.length>1&&a.shift(),this._hasParentSelector=null;var d=this._trace(a,t,["$"],m,i,r).filter(function(l){return l&&!l.isParentSelector});return d.length?!o&&d.length===1&&!d[0].hasArrExpr?this._getPreferredOutput(d[0]):d.reduce(function(l,c){var g=p._getPreferredOutput(c);return u&&Array.isArray(g)?l=l.concat(g):l.push(g),l},[]):o?[]:void 0}};Rt.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":{var r=Array.isArray(e.path)?e.path:Rt.toPathArray(e.path);return e.pointer=Rt.toPointer(r),e.path=typeof e.path=="string"?e.path:Rt.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return Rt.toPathString(e[t]);case"pointer":return Rt.toPointer(e.path);default:throw new TypeError("Unknown result type")}};Rt.prototype._handleCallback=function(e,t,r){if(t){var s=this._getPreferredOutput(e);e.path=typeof e.path=="string"?e.path:Rt.toPathString(e.path),t(s,r,e)}};Rt.prototype._trace=function(e,t,r,s,p,m,i,u){var o=this,n;if(!e.length)return n={path:r,value:t,parent:s,parentProperty:p,hasArrExpr:i},this._handleCallback(n,m,"value"),n;var a=e[0],d=e.slice(1),l=[];function c(b){Array.isArray(b)?b.forEach(function(_){l.push(_)}):l.push(b)}if((typeof a!="string"||u)&&t&&Object.hasOwn(t,a))c(this._trace(d,t[a],yo(r,a),t,a,m,i));else if(a==="*")this._walk(t,function(b){c(o._trace(d,t[b],yo(r,b),t,b,m,!0,!0))});else if(a==="..")c(this._trace(d,t,r,s,p,m,i)),this._walk(t,function(b){pr(t[b])==="object"&&c(o._trace(e.slice(),t[b],yo(r,b),t,b,m,!0))});else{if(a==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:d,isParentSelector:!0};if(a==="~")return n={path:yo(r,a),value:p,parent:s,parentProperty:null},this._handleCallback(n,m,"property"),n;if(a==="$")c(this._trace(d,t,r,null,null,m,i));else if(/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(a))c(this._slice(a,d,t,r,s,p,m));else if(a.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var g=a.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),h=/@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])?((?:[\0->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))(?!(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])\)\])['\]]/g.exec(g);h?this._walk(t,function(b){var _=[h[2]],E=h[1]?t[b][h[1]]:t[b],R=o._trace(_,E,r,s,p,m,!0);R.length>0&&c(o._trace(d,t[b],yo(r,b),t,b,m,!0))}):this._walk(t,function(b){o._eval(g,t[b],b,r,s,p)&&c(o._trace(d,t[b],yo(r,b),t,b,m,!0))})}else if(a[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");c(this._trace(ul(this._eval(a,t,r[r.length-1],r.slice(0,-1),s,p),d),t,r,s,p,m,i))}else if(a[0]==="@"){var v=!1,k=a.slice(1,-2);switch(k){case"scalar":(!t||!["object","function"].includes(pr(t)))&&(v=!0);break;case"boolean":case"string":case"undefined":case"function":pr(t)===k&&(v=!0);break;case"integer":Number.isFinite(t)&&!(t%1)&&(v=!0);break;case"number":Number.isFinite(t)&&(v=!0);break;case"nonFinite":typeof t=="number"&&!Number.isFinite(t)&&(v=!0);break;case"object":t&&pr(t)===k&&(v=!0);break;case"array":Array.isArray(t)&&(v=!0);break;case"other":v=this.currOtherTypeCallback(t,r,s,p);break;case"null":t===null&&(v=!0);break;default:throw new TypeError("Unknown value type "+k)}if(v)return n={path:r,value:t,parent:s,parentProperty:p},this._handleCallback(n,m,"value"),n}else if(a[0]==="`"&&t&&Object.hasOwn(t,a.slice(1))){var x=a.slice(1);c(this._trace(d,t[x],yo(r,x),t,x,m,i,!0))}else if(a.includes(",")){var A=a.split(","),S=P0(A),f;try{for(S.s();!(f=S.n()).done;){var L=f.value;c(this._trace(ul(L,d),t,r,s,p,m,!0))}}catch(b){S.e(b)}finally{S.f()}}else!u&&t&&Object.hasOwn(t,a)&&c(this._trace(d,t[a],yo(r,a),t,a,m,i,!0))}if(this._hasParentSelector)for(var $=0;$<l.length;$++){var C=l[$];if(C&&C.isParentSelector){var T=this._trace(C.expr,t,C.path,s,p,m,i);if(Array.isArray(T)){l[$]=T[0];for(var w=T.length,y=1;y<w;y++)$++,l.splice($,0,T[y])}else l[$]=T}}return l};Rt.prototype._walk=function(e,t){if(Array.isArray(e))for(var r=e.length,s=0;s<r;s++)t(s);else e&&pr(e)==="object"&&Object.keys(e).forEach(function(p){t(p)})};Rt.prototype._slice=function(e,t,r,s,p,m,i){if(Array.isArray(r)){var u=r.length,o=e.split(":"),n=o[2]&&Number.parseInt(o[2])||1,a=o[0]&&Number.parseInt(o[0])||0,d=o[1]&&Number.parseInt(o[1])||u;a=a<0?Math.max(0,a+u):Math.min(u,a),d=d<0?Math.max(0,d+u):Math.min(u,d);for(var l=[],c=a;c<d;c+=n){var g=this._trace(ul(c,t),r,s,p,m,i,!0);g.forEach(function(h){l.push(h)})}return l}};Rt.prototype._eval=function(e,t,r,s,p,m){var i=this;this.currSandbox._$_parentProperty=m,this.currSandbox._$_parent=p,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;var u=e.includes("@path");u&&(this.currSandbox._$_path=Rt.toPathString(s.concat([r])));var o=this.currEval+"Script:"+e;if(!Rt.cache[o]){var n=e.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");if(u&&(n=n.replace(/@path/g,"_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)Rt.cache[o]=new this.safeVm.Script(n);else if(this.currEval==="native")Rt.cache[o]=new this.vm.Script(n);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){var a=this.currEval;Rt.cache[o]=new a(n)}else if(typeof this.currEval=="function")Rt.cache[o]={runInNewContext:function(l){return i.currEval(n,l)}};else throw new TypeError('Unknown "eval" property "'.concat(this.currEval,'"'))}try{return Rt.cache[o].runInNewContext(this.currSandbox)}catch(d){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+d.message+": "+e)}};Rt.cache={};Rt.toPathString=function(e){for(var t=e,r=t.length,s="$",p=1;p<r;p++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[p])||(s+=/^[\*0-9]+$/.test(t[p])?"["+t[p]+"]":"['"+t[p]+"']");return s};Rt.toPointer=function(e){for(var t=e,r=t.length,s="",p=1;p<r;p++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[p])||(s+="/"+t[p].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return s};Rt.toPathArray=function(e){var t=Rt.cache;if(t[e])return t[e].concat();var r=[],s=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]](?!(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])\])/g,function(m,i){return"[#"+(r.push(i)-1)+"]"}).replace(/\[["']((?:[\0-&\(-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)["']\]/g,function(m,i){return"['"+i.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:[\0-Z\\-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(m,i){return";"+i.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),p=s.split(";").map(function(m){var i=m.match(/#([0-9]+)/);return!i||!i[1]?m:r[i[1]]});return t[e]=p,t[e].concat()};Rt.prototype.safeVm={Script:tw};var rw=function(t,r,s){for(var p=t.length,m=0;m<p;m++){var i=t[m];s(i)&&r.push(t.splice(m--,1)[0])}},ow=function(){function e(t){Yo(this,e),this.code=t}return Xo(e,[{key:"runInNewContext",value:function(r){var s=this.code,p=Object.keys(r),m=[];rw(p,m,function(a){return typeof r[a]=="function"});var i=p.map(function(a){return r[a]}),u=m.reduce(function(a,d){var l=r[d].toString();return/function/.test(l)||(l="function "+l),"var "+d+"="+l+";"+a},"");s=u+s,!/(["'])use strict\1/.test(s)&&!p.includes("arguments")&&(s="var arguments = undefined;"+s),s=s.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var o=s.lastIndexOf(";"),n=o>-1?s.slice(0,o+1)+" return "+s.slice(o+1):" return "+s;return Kp(Function,p.concat([n])).apply(void 0,gl(i))}}])}();Rt.prototype.vm={Script:ow};var Jp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<!-- Scrollable modal -->
<div id="fieldsModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Adjust fields for things table
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1 mt-1">
                    <div class="form-control-sm" style="flex-grow: 1;"></div>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUp">
                        <i class="bi bi-chevron-up"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDown">
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <table class="table table-striped table-hover table-sm has-validation">
                    <tbody id="fieldList"></tbody>
                </table>
                <h6>Field Details</h6>
                <div class="input-group input-group-sm mb-1 mt-1 has-validation">
                    <label class="input-group-text">Field Path</label>
                    <input type="text" class="form-control" id="fieldPath"></input>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldCreate" data-bs-toggle="tooltip"
                        title="Add a new field with the given path">
                        <i class="bi bi-plus-circle"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUpdate" data-bs-toggle="tooltip"
                        title="Save selected field details">
                        <i class="bi bi-save"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDelete" data-bs-toggle="tooltip"
                        title="Delete selected field">
                        <i class="bi bi-trash3"></i>
                    </button>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Field Label</label>
                    <input type="text" class="form-control form-control-sm" id="fieldLabel"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>`;var Qt=-1,Vt={fieldPath:null,fieldLabel:null,fieldList:null,fieldsModal:null};document.getElementById("fieldsHTML").innerHTML=Jp;function bl(){Q().fieldList||(Q().fieldList=[]);let e=Q().fieldList.filter(t=>t.active).map(t=>t.path);return"fields=thingId"+(e.length>0?","+e:"")}var hl=null;function qp(e){Vt.fieldPath.value=e,Vt.fieldLabel.value=null,hl||(hl=new Or(Vt.fieldsModal)),hl.show()}async function Qp(){Ye(aw),ht(Vt),Vt.fieldList.addEventListener("click",e=>{e.target&&e.target.tagName==="TD"&&nw(e.target.parentNode.rowIndex)}),Vt.fieldsModal.addEventListener("hide.bs.modal",async()=>{await ie(!1)}),document.getElementById("fieldUpdate").onclick=()=>{lt(Qt>=0,"No field selected");let e=Q().fieldList[Qt],s=Q().fieldList.filter((p,m)=>m!=Qt).map(p=>p.path).includes(e.path);lt(!Q().fieldList.filter((p,m)=>m!=Qt).map(p=>p.path).includes(Vt.fieldPath.value),"Changed field path already exists",Vt.fieldPath),e.path=Vt.fieldPath.value,e.label=Vt.fieldLabel.value,Jo()},document.getElementById("fieldCreate").onclick=()=>{lt(Vt.fieldPath.value,"Field path must not be empty",Vt.fieldPath),lt(!Q().fieldList.map(e=>e.path).includes(Vt.fieldPath.value),"Field path already exists",Vt.fieldPath),Q().fieldList.push({active:!0,path:Vt.fieldPath.value,label:Vt.fieldLabel.value?Vt.fieldLabel.value:Vt.fieldPath.value.split("/").slice(-1)[0]}),Jo()},document.getElementById("fieldDelete").onclick=()=>{lt(Qt>=0,"No field selected"),Q().fieldList.splice(Qt,1),Jo(),Qt=-1},document.getElementById("fieldUp").onclick=()=>{if(Qt<=0)return;let e=Q().fieldList[Qt];Q().fieldList.splice(Qt,1),Qt--,Q().fieldList.splice(Qt,0,e),Jo()},document.getElementById("fieldDown").onclick=()=>{if(Qt<0||Qt===Q().fieldList.length-1)return;let e=Q().fieldList[Qt];Q().fieldList.splice(Qt,1),Qt++,Q().fieldList.splice(Qt,0,e),Jo()}}function nw(e){if(Qt===e)Qt=-1,Vt.fieldPath.value=null,Vt.fieldLabel.value=null;else{Qt=e;let t=Q().fieldList[Qt];Vt.fieldPath.value=t.path,Vt.fieldLabel.value=t.label?t.label:null}}function aw(){Q().fieldList||(Q().fieldList=[]),Jo()}function Jo(){Vt.fieldList.textContent="",Qt=-1,Q().fieldList.forEach((e,t)=>{let r=Vt.fieldPath.value===e.path,s=Vt.fieldList.insertRow();Ai(s,String(t),e.active,!1,sw),s.insertCell(-1).textContent=e.path,s.insertCell(-1).textContent=e.label?e.label:null,r&&(Qt=t,s.classList.add("table-active"),Vt.fieldLabel.value=e.label)}),Qt<0&&(Vt.fieldPath.value=null,Vt.fieldLabel.value=null)}function sw(e){Q().fieldList[e.target.id].active=e.target.checked,Jo()}function Fr(e,t,r,s=null){let p=e,m=t,i=r,u=s,o=!1;return p.addEventListener("click",n),Ye(a),{set viewDirty(d){o=d}};function n(){Zp(p.dataset.auth==="devOps"),o&&(i.call(null,!1),o=!1)}function a(d){p.toggleAttribute("hidden",Q()[u]??!1),["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(d)||(m.classList.contains("show")?i.call(null,!0):o=!0)}}var tu=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div>
    <div>
        <div class="row resizable_pane" style="height: 40vh;">
            <div class="col-md-7 resizable_flex_column">
                <form class="input-group input-group-sm mb-1 mt-1" autocomplete="off">
                    <div class="btn-group dropend">
                        <button id="searchFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                            title="Toggle favorite for search filter">
                            <i id="favIcon" class="bi bi-star"></i>
                        </button>
                    </div>
                    <input autocomplete="false" name="hidden" type="text" style="display:none;">
                    <input type="search" class="form-control form-control-sm" id="searchFilterEdit" name="search"
                           spellcheck=false autocomplete="off" />
                    <span class="input-group-text" id="searchFilterCount" data-bs-toggle="tooltip"
                          title="Amount of things matching the filter">
                    </span>
                    <button type="button" id="searchThings" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip"
                        title="Search things by thingId or valid ditto search filter">
                        search
                    </button>
                    <button type="button" id="pinnedThings" class="btn btn-outline-secondary btn-sm me-3 button_round_right"
                        data-bs-toggle="tooltip" title="Pinned things: get the list of all individually pinned things">
                        pinned
                    </button>
                    <button type="button" id="tableSettings" class="btn btn-outline-secondary btn-sm button_round_both"
                        data-bs-toggle="modal" data-bs-target="#fieldsModal">
                        <span data-bs-toggle="tooltip" title="Adjust fields for things table">
                            <i class="bi bi-gear"></i>
                        </span>
                    </button>
                </form>
                <div class="table-wrap">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr id="thingsTableHead"></tr>
                        </thead>
                        <tbody id="thingsTableBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-5 resizable_flex_column" style="height: auto" id="details">
                <ul id="tabItemsThing" class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabThingDetails">Details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabModifyThing">Manage</a>
                        </li>
                    </ul>
                    <div id="tabContentThing" class="tab-content" style="flex-grow:1; overflow:hidden;">
                        <div class="tab-pane fade show active container no-margin" id="tabThingDetails">
                            <div class="table-wrap">
                                <table class="table table-striped table-hover table-sm">
                                    <tbody id="tbodyThingDetails"></tbody>
                                </table>
                            </div>
                    </div>
                    <div class="tab-pane fade container no-margin" id="tabModifyThing">
                        <crud-toolbar id="crudThings" label="Thing ID">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text" id="labelX">Definition</label>
                                <div class="btn-group dropend">
                                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                    data-bs-toggle="dropdown" disabled id="buttonThingDefinitions"></button>
                                    <ul id="ulThingDefinitions" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                                </div>
                                <input type="text" class="form-control" id="inputThingDefinition" disabled></input>
                            </div>
                            <div class="ace_container mb-1" style="flex-grow: 1;">
                                <div class="script_editor" id="thingJsonEditor"></div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#collapseAttributes">Attributes <span class="badge rounded-pill bg-info"
        id="badgeAttributeCount"></span></h5>
<hr />
<div class="collapse" id="collapseAttributes">
    <div class="row resizable_pane" style="height: 20vh;">
        <div class="col-md-7 resizable_flex_column" style="overflow-y:scroll;">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyAttributes"></tbody>
            </table>
        </div>
        <div class="col-md-5 resizable_flex_column" style="height: auto">
            <ul class="nav nav-tabs nav-fill" id="tabItemsAttribute">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudAttribute">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentAttribute">
                <div class="tab-pane container active no-margin" id="tabCrudAttribute">
                    <crud-toolbar id="crudAttribute" label="Attribute key">
                        <div class="ace_container mb-1" style="flex-grow: 1;">
                            <div class="script_editor" id="attributeEditor"></div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>
`;var St,eu=[],vl={collapseThings:null,tabThings:null};document.getElementById("thingsHTML").innerHTML=tu;function Ce(e){eu.push(e)}async function ru(){ht(vl),Fr(vl.tabThings,vl.collapseThings,dw)}function xr(e,t=null){console.assert(e&&e!=="","thingId expected"),xt("GET",`/things/${e}?fields=thingId%2CpolicyId%2Cdefinition%2Cattributes%2Cfeatures%2C_created%2C_modified%2C_revision%2C_metadata`).then(r=>{zr(r),t&&t()}).catch(()=>zr(null))}function zr(e){let t=e&&(!St||St.thingId!==e.thingId);St=e,eu.forEach(r=>r.call(null,St,t))}function dw(){ka()}var Ii,_a;async function ou(){Ce(uw),nu(pw),Ye(mw)}var iu=[];function Sa(e){iu.push(e)}function cw(e){iu.forEach(t=>t.call(null,e))}function pw(e,t){Ea(_a),e&&e.length>0&&(_a=xl(e,t),_a.onmessage=hw)}function uw(e,t){e?t&&(Ii&&Ii.close(),Ii=xl(e.thingId,"fields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata,_context/topic,_context/path,_context/value&extraFields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata"),Ii.onmessage=gw):Ea(Ii)}function Ea(e){e&&e.close()}function mw(e){["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(e)||(Ea(Ii),Ea(_a))}function gw(e){if(e.data&&e.data!==""){let t=JSON.parse(e.data);zr(t),cw(JSON.parse(e.data))}}function hw(e){e.data&&e.data!==""&&yl(JSON.parse(e.data))}var xo=class{static{this.lastSearch=""}},Ca,ue={searchFilterCount:null,thingsTableHead:null,thingsTableBody:null,searchFilterEdit:null,favIcon:null},au=[];function nu(e){au.push(e)}function Oi(e=null,t=null){au.forEach(r=>r.call(null,e,t))}async function su(){Ce(ww),Sa(yl),ht(ue),ue.thingsTableBody.addEventListener("click",bw)}function bw(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;t.id==="searchThingsMore"?(t.style.pointerEvents="none",e.stopImmediatePropagation(),lu(ue.searchFilterEdit.value,!0)):St&&St.thingId===t.id?(e.stopImmediatePropagation(),zr(null)):xr(t.id,null)}}function xn(e,t){xo.lastSearch=e,e===""||/^(eq\(|ne\(|gt\(|ge\(|lt\(|le\(|in\(|like\(|ilike\(|exists\(|and\(|or\(|not\().*/.test(e)?(lu(e),t()):kn([e]);let s=new URLSearchParams(window.location.search);s.get("filter")!==e&&(s.set("filter",e),window.history.replaceState(null,null,`${window.location.pathname}?${s}`))}function kl(){xo.lastSearch="pinned",ue.searchFilterEdit.value=null,ue.favIcon.classList.replace("bi-star-fill","bi-star"),kn(Q().pinnedThings)}function ka(){xo.lastSearch==="pinned"?kl():xn(xo.lastSearch,()=>null)}function kn(e){ue.searchFilterCount.textContent="",ue.thingsTableBody.textContent="";let t=bl();e.length>0?xt("GET",`/things?${t}&ids=${e}&option=sort(%2BthingId)`).then(r=>{du(r),ue.searchFilterCount.textContent="#: "+r.length,Oi(e,t)}).catch(r=>{Ta(),Oi()}):(Ta(),Oi())}function Ta(e=!1){Ca=null,ue.searchFilterCount.textContent="",ue.thingsTableHead.textContent="",ue.thingsTableBody.textContent="",e||zr(null)}function fw(e){ue.searchFilterCount.textContent="";let t=Q().searchNamespaces;xt("GET","/search/things/count"+(e&&e!==""?"?filter="+encodeURIComponent(e):"")+(t&&t!==""?"&namespaces="+t:""),null,null).then(r=>{ue.searchFilterCount.textContent="#: "+r}).catch(r=>{Oi()})}function lu(e,t=!1){document.body.style.cursor="progress";let r=Q().searchNamespaces,s=bl();xt("GET","/search/things?"+s+(e&&e!==""?"&filter="+encodeURIComponent(e):"")+(r&&r!==""?"&namespaces="+r:"")+"&option=sort(%2BthingId)"+(t?",cursor("+Ca+")":""),null,null).then(i=>{t?_l():(fw(e),Ta(!0)),du(i.items),p(i),t||Oi(i.items.map(u=>u.thingId),s)}).catch(i=>{Ta(),Oi()}).finally(()=>{document.body.style.cursor="default"});function p(i){i.cursor?(m(),Ca=i.cursor):Ca=null}function m(){let i=ue.thingsTableBody.insertRow().insertCell(-1);i.textContent="load more...",i.colSpan=ue.thingsTableBody.rows[0].childElementCount,i.style.textAlign="center",i.style.cursor="pointer",i.disabled=!0,i.style.color="#3a8c9a",i.parentNode.id="searchThingsMore"}}function _l(){let e=document.getElementById("searchThingsMore");e&&e.parentNode.removeChild(e)}function du(e){let t=Q().fieldList.filter(i=>i.active);s();let r=!1;e.forEach((i,u)=>{let o=ue.thingsTableBody.insertRow();p(o,i)}),r||zr(null);function s(){ue.thingsTableHead.textContent="",ya(ue.thingsTableHead,""),ya(ue.thingsTableHead,"Thing ID"),t.forEach(i=>{ya(ue.thingsTableHead,i.label?i.label:i.path)})}function p(i,u){i.id=u.thingId,St&&u.thingId===St.thingId&&(r=!0,i.classList.add("table-active")),Ai(i,u.thingId,Q().pinnedThings.includes(u.thingId),!1,vw),fo(i,m(u.thingId),u.thingId),t.forEach(o=>{let n=o.path.replace(/\//g,".");n.charAt(0)!=="."&&(n="$."+n);let a=Rt({json:u,path:n});fo(i,a.length!==0?a[0]:"").setAttribute("jsonPath",n)})}function m(i){let u=/([0-9a-f]{7})[0-9a-f]-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,o=i;return Q().shortenUUID&&(o=o.replace(u,"$1")),Q().defaultNamespace&&(o=o.replace(Q().defaultNamespace,"dn")),o}}async function vw(e){if(e.target.checked)Q().pinnedThings.push(this.id);else{let t=Q().pinnedThings.indexOf(this.id);t>-1&&Q().pinnedThings.splice(t,1)}await ie(!1,"pinnedThings")}function ww(e){e||Lp(ue.thingsTableBody,()=>!1)}function yl(e){let t=document.getElementById(e.thingId);console.assert(t!==null,"Unexpected thingId for table update. thingId was not loaded before"),Array.from(t.cells).forEach(r=>{let s=r.getAttribute("jsonPath");if(s){let p=Rt({json:e,path:s});p.length!==0&&(r.innerHTML=Jr(p[0]))}})}var yw=['eq(attributes/location,"kitchen")','ge(thingId,"myThing1")','gt(_created,"2020-08-05T12:17")',"exists(features/featureId)",'and(eq(attributes/location,"kitchen"),eq(attributes/color,"red"))','or(eq(attributes/location,"kitchen"),eq(attributes/location,"living-room"))','like(attributes/key1,"known-chars-at-start*")'],El=[],cu,Br="...",pu,me={favIcon:null,searchFilterEdit:null,searchThings:null,searchFavorite:null,tabThings:null,pinnedThings:null};async function mu(){Ye(xw),ht(me),me.pinnedThings.onclick=kl,pu=Ap("#searchFilterEdit",_w,"Search for Things..."),pu.input.addEventListener("selection",e=>{let t=e.detail.selection.value;kw(t.rql)}),me.searchThings.onclick=()=>{xn(me.searchFilterEdit.value,()=>uu(me.searchFilterEdit.value))},me.searchFavorite.onclick=async e=>{e.preventDefault(),await Ew(me.searchFilterEdit.value)&&(me.favIcon.classList.toggle("bi-star"),me.favIcon.classList.toggle("bi-star-fill"))},me.searchFilterEdit.onkeyup=e=>{(e.key==="Enter"||e.code===13)&&me.searchFilterEdit.value.indexOf(Br)<0?xn(me.searchFilterEdit.value,()=>uu(me.searchFilterEdit.value)):(clearTimeout(cu),cu=setTimeout(gu,1e3))},me.searchFilterEdit.onchange=()=>{_l()},me.searchFilterEdit.focus()}function xw(){Q().filterList||(Q().filterList=[]),Q().pinnedThings||(Q().pinnedThings=[])}function Sl(e){me.searchFilterEdit.value=e}function kw(e){Sl(e),gu(),$p(me.searchFilterEdit,Br)||xn(me.searchFilterEdit.value,()=>null)}async function _w(e){let t=new Date,r=new Date,s=new Date;return t.setDate(t.getDate()-1),r.setHours(r.getHours()-1),s.setMinutes(s.getMinutes()-1),[{label:"Created since 1m",rql:`gt(_created,"${s.toISOString()}")`,group:"Time"},{label:"Created since 1h",rql:`gt(_created,"${r.toISOString()}")`,group:"Time"},{label:"Created since 24h",rql:`gt(_created,"${t.toISOString()}")`,group:"Time"},{label:"Modified since 1m",rql:`gt(_modified,"${s.toISOString()}")`,group:"Time"},{label:"Modified since 1h",rql:`gt(_modified,"${r.toISOString()}")`,group:"Time"},{label:"Modified since 24h",rql:`gt(_modified,"${t.toISOString()}")`,group:"Time"},{label:`thingId = ${Br}`,rql:`eq(thingId,"${Br}")`,group:"ThingId"},{label:`thingId ~ ${Br}`,rql:`like(thingId,"${Br}*")`,group:"ThingId"},...(Q().filterList??[]).map(p=>({label:p,rql:p,group:"Favorite"})),...(Q().fieldList??[]).map(p=>({label:`${p.label} = ${Br}`,rql:`eq(${p.path},"${Br}")`,group:"Field"})),...(Q().fieldList??[]).map(p=>({label:`${p.label} ~ ${Br}`,rql:`like(${p.path},"*${Br}*")`,group:"Field"})),...El.map(p=>({label:p,rql:p,group:"Recent"})),...yw.map(p=>({label:p,rql:p,group:"Example"}))]}async function Ew(e){if(!e||e==="")return!1;let t=Q().filterList.indexOf(e);return t>=0?Q().filterList.splice(t,1):Q().filterList.push(e),await ie(!1,"filterList"),!0}function gu(){Q().filterList.indexOf(me.searchFilterEdit.value)>=0?me.favIcon.classList.replace("bi-star","bi-star-fill"):me.favIcon.classList.replace("bi-star-fill","bi-star")}function uu(e){El.includes(e)||El.unshift(e)}var hu=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="authorizationModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Authorize
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form class="modal-body">
                <div class="row">
                    <h5>Main authentication</h5>
                    <hr />
                    <div class="row" id="mainOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="main-oidc" name="main-auth-method" value="oidc">
                        <label for="main-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="oidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="oidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearer" name="oidcBearer" />
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="main-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="main-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="mainBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-userpass" name="main-auth-method" value="basic" />
                            <label for="main-userpass">Basic</label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="userName" class="input-group-text">Username</label>
                                <input type="text" class="form-control form-control-sm" id="userName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="password" class="input-group-text">Password</label>
                                <input type="password" class="form-control form-control-sm" id="password" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-bearer" name="main-auth-method" value="bearer">
                            <label for="main-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearer" class="input-group-text">Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearer" name="bearer" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainPreAuthenticatedSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-pre" name="main-auth-method" value="pre" />
                            <label for="main-pre">Pre authenticated<br />
                                <small>(via HTTP header 'x-ditto-pre-authenticated', must take the form
                                    <code>prefix:suffix</code>)</small>
                            </label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="dittoPreAuthenticatedUsername" class="input-group-text">prefix:suffix</label>
                                <input type="text" class="form-control form-control-sm" id="dittoPreAuthenticatedUsername" name="pre-authenticated-username"  />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <h5>DevOps authentication</h5>
                    <small>(for Connections and administrative tasks, optional)</small>
                    <hr />
                    <div class="row" id="devOpsOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="devops-oidc" name="devops-auth-method" value="oidc" />
                        <label for="devops-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="devOpsOidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="devOpsOidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearerDevOps" name="oidcBearerDevOps" />
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="devops-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="devops-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="devOpsBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-userpass" name="devops-auth-method" value="basic" />
                            <label for="devops-userpass">Basic<br /></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsUserName" class="input-group-text">DevOps Username</label>
                                <input type="text" class="form-control form-control-sm" id="devOpsUserName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsPassword" class="input-group-text">DevOps Password</label>
                                <input type="password" class="form-control form-control-sm" id="devOpsPassword" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="devOpsBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-bearer" name="devops-auth-method" value="bearer" />
                            <label for="devops-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearerDevOps" class="input-group-text">DevOps Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearerDevOps" name="devops-bearer" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="input-group input-group-sm" style="flex-direction: row-reverse;">
                    <button class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal"
                        id="authorizeSubmit">Authorize</button>
                </div>
            </form>
        </div>
    </div>
</div>
`;var yt={mainBearerSection:null,oidcBearer:null,bearer:null,mainBasicSection:null,userName:null,password:null,devOpsBearerSection:null,oidcBearerDevOps:null,bearerDevOps:null,devOpsBasicSection:null,devOpsUserName:null,devOpsPassword:null,mainPreAuthenticatedSection:null,dittoPreAuthenticatedUsername:null,mainOidcSection:null,oidcProvider:null,devOpsOidcSection:null,devOpsOidcProvider:null,collapseConnections:null};function Tw(e){Object.assign(this,e)}var Cl=!1;document.getElementById("authorizationHTML").innerHTML=hu;function Zp(e){Cl=e,Tl(Cl)}function fu(){return yt.userName.value+":"+yt.password.value}function vu(){return yt.bearer.value}function wu(){return yt.oidcBearer.value}function yu(){return yt.devOpsUserName.value+":"+yt.devOpsPassword.value}function xu(){return yt.bearerDevOps.value}function ku(){return yt.oidcBearerDevOps.value}function Up(e){e&&e.length>0&&(yt.userName.value=e.split(":")[0],yt.password.value=e.split(":")[1])}function Hp(e){e&&e.length>0&&(yt.devOpsUserName.value=e.split(":")[0],yt.devOpsPassword.value=e.split(":")[1])}function Aa(e){yt.oidcBearer.value=e}function _u(e){yt.oidcBearerDevOps.value=e}function Eu(){ht(yt),document.getElementById("authorize").onclick=()=>{let e=Q(),t=e.authSettings?.main?.method,r=e.authSettings?.devops?.method;t||(yt.dittoPreAuthenticatedUsername.value&&yt.dittoPreAuthenticatedUsername.value.length>0?t="pre":yt.bearer.value&&yt.bearer.value.length>0?t="bearer":yt.userName.value&&yt.userName.value.length>0&&(t="basic")),r||(yt.bearerDevOps.value&&yt.bearerDevOps.value.length>0?r="bearer":yt.devOpsUserName.value&&yt.devOpsUserName.value.length>0&&(r="basic")),Array.from(document.querySelectorAll('input[name="main-auth-method"]')).forEach(s=>{s.checked=Go[s.value]===t}),Array.from(document.querySelectorAll('input[name="devops-auth-method"]')).forEach(s=>{s.checked=Go[s.value]===r})},document.getElementById("authorizeSubmit").onclick=async e=>{e.preventDefault();let t=document.querySelector('input[name="main-auth-method"]:checked'),r=t?t.value:void 0,s=document.querySelector('input[name="devops-auth-method"]:checked'),p=s?s.value:void 0,m=Q();m.authSettings.main.method=Go[r],m.authSettings.devops.method=Go[p],m.authSettings.main.pre.dittoPreAuthenticatedUsername=yt.dittoPreAuthenticatedUsername.value,m.authSettings.main.oidc.defaultProvider=yt.oidcProvider.value,m.authSettings.devops.oidc.defaultProvider=yt.devOpsOidcProvider.value,await ie(!1)},document.getElementById("main-oidc-login").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.main.oidc.provider=yt.oidcProvider.value,Ko(),await La(!0)&&(t.authSettings.main.method="oidc",nl("You are already logged in")),await ie(!1)},document.getElementById("main-oidc-logout").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.main.oidc.provider=yt.oidcProvider.value,await bu(t.authSettings.main.oidc)},document.getElementById("devops-oidc-login").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.devops.oidc.provider=yt.devOpsOidcProvider.value,Ko(),await La(!1)&&(t.authSettings.devops.method="oidc",nl("You are already logged in")),await ie(!1)},document.getElementById("devops-oidc-logout").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.devops.oidc.provider=yt.devOpsOidcProvider.value,await bu(t.authSettings.devops.oidc)}}function Su(e){e===void 0&&(e=new URLSearchParams(window.location.search));let t=e.get("code")!==null,r=e.get("state")!==null;return t&&r}async function Cu(e){let t=Q(),r=e.get(xa)||t.authSettings?.main?.oidc.provider,s=t.authSettings.oidc.providers[r],p=s;if(p!=null){let m=new fa(p);try{let i=await m.signinCallback(window.location.href);if(i){let u=i.state;u.mainAuth&&(t.authSettings.main.method="oidc",Aa(i[s.extractBearerTokenFrom])),u.devopsAuth&&(t.authSettings.devops.method="oidc",_u(i[s.extractBearerTokenFrom])),window.history.replaceState(null,null,`${p.redirect_uri}?${atob(i.url_state)}`),await ie(!1)}}catch(i){console.error(`Could not login due to: ${i}`)}}}async function La(e){let t=Q(),r;e?r=t.authSettings?.main?.oidc:r=t.authSettings?.devops?.oidc;let s=t.authSettings?.main?.oidc.provider==t.authSettings?.devops?.oidc.provider,p=t.authSettings.oidc.providers[r.provider],m=p;if(m!=null){let i=new URLSearchParams(window.location.search),u=new fa(m);if(Su(i))return await Cu(i),!1;{let o=await u.getUser();if(o?.[p.extractBearerTokenFrom]!==void 0||o?.expired===!0)return s?(Aa(o[p.extractBearerTokenFrom]),_u(o[p.extractBearerTokenFrom])):Aa(o[p.extractBearerTokenFrom]),!0;i.set($i,fn()),i.set(xa,r.provider);try{await u.signinRedirect({state:new Tw({mainAuth:e||s,devopsAuth:!e||s}),url_state:btoa(i.toString())})}catch(n){return ae(n),!1}}}}async function bu(e){let r=Q().authSettings.oidc.providers[e.provider];if(r!=null){let s=new fa(r);try{let p=new URLSearchParams(window.location.search);p.set($i,fn());let m;r.post_logout_redirect_uri?m=r.post_logout_redirect_uri:m=`${r.redirect_uri}?${p.toString()}`,await s.signoutRedirect({post_logout_redirect_uri:m})}catch(p){ae(p)}finally{Aa(void 0),Ko()}}}function qr(e,t){!e&&t?t.style.display="none":e&&(t.style.display=null)}async function jp(e){let t=Q();if(yt.dittoPreAuthenticatedUsername.value=t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername?t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername:"",t.authSettings?.oidc?.providers){let i=Object.keys(t.authSettings.oidc.providers).map(u=>({key:u,text:t.authSettings.oidc.providers[u].displayName}));il(yt.oidcProvider,i),il(yt.devOpsOidcProvider,i),yt.oidcProvider.value=t.authSettings.main.oidc.provider,yt.devOpsOidcProvider.value=t.authSettings.devops.oidc.provider}qr(t.authSettings.main.oidc.enabled,yt.mainOidcSection),qr(t.authSettings.main.basic.enabled,yt.mainBasicSection),qr(t.authSettings.main.bearer.enabled,yt.mainBearerSection),qr(t.authSettings.main.pre.enabled,yt.mainPreAuthenticatedSection);let r=t.authSettings.main.oidc.enabled||t.authSettings.main.basic.enabled||t.authSettings.main.bearer.enabled||t.authSettings.main.pre.enabled;qr(r,yt.mainBasicSection.parentElement),qr(t.authSettings.devops.oidc.enabled,yt.devOpsOidcSection),qr(t.authSettings.devops.basic.enabled,yt.devOpsBasicSection),qr(t.authSettings.devops.bearer.enabled,yt.devOpsBearerSection);let s=t.authSettings.devops.oidc.enabled||t.authSettings.devops.basic.enabled||t.authSettings.devops.bearer.enabled;qr(s,yt.devOpsBasicSection.parentElement);let p=new URLSearchParams(window.location.search);e&&t.authSettings?.main?.method==="oidc"&&t.authSettings?.main?.oidc?.autoSso===!0?(await La(!0),Ko()):e&&t.authSettings?.devops?.method==="oidc"&&t.authSettings?.devops?.oidc?.autoSso===!0?(await La(!1),Ko()):Su(p)&&await Cu(p),Tl(Cl);let m=p.get("filter");m&&(xo.lastSearch=m,Sl(m))}var Aw={things:{listConnections:{path:"/api/2/solutions/{{solutionId}}/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/solutions/{{solutionId}}/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_3:{listConnections:{path:"/api/2/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_2:{listConnections:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval/singleton",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveAllConnectionIds"}},unwrapJsonPath:"?.?.connectionIds"},retrieveConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?.connection"},createConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:createConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:"?.?.connection"},modifyConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:modifyConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:null},deleteConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:deleteConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:null},retrieveStatus:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnectionStatus",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionLogs:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionMetrics:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},connectionCommand:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"{{command}}",connectionId:"{{connectionId}}"}},unwrapJsonPath:null}}},mr,De;function Tl(e){De=void 0;let t=Q();if(e){let r=t.authSettings?.devops?.method;if(r==="basic"){let s=yu();s?(mr="Authorization",De="Basic "+window.btoa(s)):(ae("DevOps Username/password missing"),document.getElementById("authorize").click())}else if(r==="bearer"){let s=xu();s?(mr="Authorization",De="Bearer "+s):(ae("DevOps Bearer token missing"),document.getElementById("authorize").click())}else if(r==="oidc"){let s=ku();s?(mr="Authorization",De="Bearer "+s):(ae("DevOps SSO (Bearer) token missing"),document.getElementById("authorize").click())}else mr="Authorization",De="Basic"}else{let r=t.authSettings?.main?.method;if(r==="basic"){let s=fu();s?(mr="Authorization",De="Basic "+window.btoa(s)):(ae("Username/password missing"),document.getElementById("authorize").click())}else if(r==="pre")t.authSettings.main.pre.dittoPreAuthenticatedUsername?(mr="x-ditto-pre-authenticated",De=t.authSettings.main.pre.dittoPreAuthenticatedUsername):(ae("Pre-Authenticated username missing"),document.getElementById("authorize").click());else if(r==="bearer"){let s=vu();s?(mr="Authorization",De="Bearer "+s):(ae("Bearer token missing"),document.getElementById("authorize").click())}else if(r==="oidc"){let s=wu();s?(mr="Authorization",De="Bearer "+s):(ae("SSO (Bearer) token missing"),document.getElementById("authorize").click())}else mr="Authorization",De="Basic"}}function Lw(e){return e.status===400&&e.error==="jwt:invalid"||e.status===401}function $a(e,t){e.status&&e.message?(ae(e.description+`
(${e.error})`,e.message,e.status),Lw(e)&&document.getElementById("authorize").click()):ae(JSON.stringify(e),"Error",t.status)}async function xt(e,t,r=null,s=null,p=!1,m=!1,i=!1){if(De){let u,o=e==="PATCH"?"application/merge-patch+json":"application/json";try{u=await fetch(Q().api_uri+(m?"":"/api/2")+t,{method:e,headers:{"Content-Type":o,[mr]:De,...s},...e!=="GET"&&e!=="DELETE"&&r!==void 0&&{body:JSON.stringify(r)}})}catch(n){throw ae(n),n}if(!u.ok){if(i)return p?u:u.json().then(n=>($a(n,u),n));throw u.json().then(n=>{$a(n,u)}).catch(n=>{ae("No error details from Ditto",u.statusText,u.status)}),new Error("An error occurred: "+u.status)}return u.status!==204?p?u:u.json():null}else throw new Error("Authentication missing")}function xl(e,t){if(De)return new Tu.EventSourcePolyfill(`${Q().api_uri}/api/2/things?ids=${e}${t?"&"+t:""}`,{headers:{[mr]:De}});throw new Error("Authentication missing")}async function Pe(e,t,r="",s=null,p=null){let m=Aw[Di()][e],i,u;if(m.body?u=JSON.stringify(m.body).replace("{{connectionId}}",r).replace('"{{connectionJson}}"',JSON.stringify(s)).replace("{{command}}",p):s?u=JSON.stringify(s):u=p,De)try{i=await fetch(Q().api_uri+m.path.replace("{{connectionId}}",r),{method:m.method,headers:{"Content-Type":e==="connectionCommand"?"text/plain":"application/json",[mr]:De},...u&&{body:u}})}catch(o){throw ae(o),o}else throw new Error("Authentication missing");if(!i.ok)throw i.json().then(o=>{$a(o,i)}).catch(o=>{ae("No error details from Ditto",i.statusText,i.status)}),new Error("An error occured: "+i.status);e!=="connectionCommand"&&i.status!==204?(document.body.style.cursor="progress",i.json().then(o=>{if(o&&o["?"]&&o["?"]["?"].status>=400){let n=o["?"]["?"].payload;$a(n,i)}else m.unwrapJsonPath&&m.unwrapJsonPath.split(".").forEach(function(n){n==="?"&&(n=Object.keys(o)[0]),o=o[n]}),t(o)}).catch(o=>{throw ae("Error calling connections API",o),o}).finally(()=>{document.body.style.cursor="default"})):t&&t()}function Di(){return Q().ditto_version===2?"ditto_2":"ditto_3"}var Au=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#connectionsEdit">
    Manage Connections
</h5>
<hr />
<div class="collapse show" id="connectionsEdit">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group input-group-sm mt-1 mb-1" role="group">
                <div style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonLoadConnections">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationConnections" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap mb-1">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Live Status</th>
                            <th>Recovery Status</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnections"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <h6>CRUD Connection</h6>
            <crud-toolbar label="Connection Id" id="crudConnection" style="flex-grow: 1;">
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Template</label>
                    <div class="btn-group dropend">
                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                        data-bs-toggle="dropdown" id="buttonConnectionTemplates" disabled></button>
                        <ul id="ulConnectionTemplates" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                    </div>
                    <input type="text" class="form-control form-control-sm" id="inputConnectionTemplate" disabled></input>
                </div>
                <div class="input-group has-validation">
                    <input class="form-control" id="editorValidationConnection" hidden="true"></input>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="row mb-1" style="flex-grow: 1;">
                    <div class="col-md-6 resizable_flex_column">
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionEditor"></div>
                        </div>        
                    </div>
                    <div class="col-md-6 resizable_flex_column">
                        <h6>Incoming JavaScript Mapping</h6>
                        <div class="ace_container mb-3" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionIncomingScript"></div>
                        </div>
                        <h6>Outgoing JavaScript Mapping</h6>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionOutgoingScript"></div>
                        </div>        
                    </div>
                </div>
            </crud-toolbar>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#tabConnectionHelper">
    Connection Status, Metrics and Logs
</h5>
<hr />
<div class="collapse show" id="tabConnectionHelper">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabConnectionMetrics">Metrics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabConnectionStatus">Status</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1; overflow: hidden">
                <div class="tab-pane container active no-margin" id="tabConnectionMetrics">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonResetConnectionMetrics" data-bs-toggle="tooltip"
                                title="Reset connection metrics for the selected connection">
                                <i class="bi bi-x-circle"></i>
                                Reset
                            </button>
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionMetrics" data-bs-toggle="tooltip"
                                title="Refresh connection metrics for the selected connection">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="table-wrap">
                            <table class="table table-striped table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th>Direction</th>
                                        <th>Type</th>
                                        <th>Level</th>
                                        <th>1m</th>
                                        <th>1h</th>
                                        <th>24h</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyConnectionMetrics"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane container fade no-margin" id="tabConnectionStatus">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionStatus" data-bs-toggle="tooltip"
                                title="Refresh connection status">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionStatusDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Logs <span class="badge rounded-pill bg-info" id="badgeConnectionLogsCount"></span></h6>
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonEnableConnectionLogs"
                    data-bs-toggle="tooltip" title="Click to enable connection logs for the selected connection">
                    <i class="bi bi-toggle-off"></i>
                    <span>Enable</span>
                </button>
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetConnectionLogs"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
                <div class="form-control-sm" style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_both" id="buttonRetrieveConnectionLogs"
                    data-bs-toggle="tooltip" title="Refresh connection logs for the selected connection">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <table-filter id="tableFilterConnectionLogs"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm" style="table-layout: fixed;">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>Level</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnectionLogs"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Log Detail</h6>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="connectionLogDetail"></div>
            </div>
        </div>
    </div>
</div>`;var Lu=[];document.getElementById("connectionsHTML").innerHTML=Au;function Ra(e){Lu.push(e)}function Rw(e,t){Lu.forEach(r=>r.call(null,e,t))}var Qr={tbodyConnections:null,buttonLoadConnections:null,tabConnections:null,collapseConnections:null,tableValidationConnections:null},ko;function $u(){ht(Qr),Fr(Qr.tabConnections,Qr.collapseConnections,Iw,"disableConnections"),dr(Qr.tbodyConnections,Qr.tableValidationConnections),Qr.buttonLoadConnections.onclick=Pi,Qr.tbodyConnections.addEventListener("click",Mw)}function qo(e,t=!1){ko=e?e.id:null,Rw(e,t)}function Pi(){Qr.tbodyConnections.textContent="";let e=!1;Pe("listConnections",t=>{t.forEach(r=>{let s=Di()==="ditto_2"?r:r.id,p=Qr.tbodyConnections.insertRow();p.id=s,Di()==="ditto_2"?Pe("retrieveConnection",m=>{p.insertCell(0).textContent=m.name},s):p.insertCell(0).textContent=r.name?r.name:s,Pe("retrieveStatus",m=>{p.insertCell(-1).textContent=m.liveStatus,p.insertCell(-1).textContent=m.recoveryStatus},s),s===ko&&(p.classList.add("table-active"),e=!0)}),e||(ko=null,qo(null))})}function Mw(e){e.target&&e.target.tagName==="TD"&&(ko===e.target.parentNode.id?(ko=null,qo(null)):(ko=e.target.parentNode.id,Pe("retrieveConnection",qo,ko)))}function Iw(e){e&&(ko=null,qo(null)),Pi()}var Ll={"AMQP 0.9.1":{name:"AMQP 0.9.1",connectionType:"amqp-091",connectionStatus:"closed",failoverEnabled:!0,uri:"amqp://user:password@localhost:5672/vhost",sources:[{addresses:["queueName"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"exchangeName/routingKey",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]},"AMQP 1.0":{name:"AMQP 1.0",connectionType:"amqp-10",connectionStatus:"closed",failoverEnabled:!0,uri:"amqps://user:password@hono.eclipseprojects.io:5671",sources:[{addresses:["telemetry/FOO"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"events/twin",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"]}]},"MQTT 3.1.1":{name:"MQTT 3.1.1",connectionType:"mqtt",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5":{name:"MQTT 5",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5 with JS mapping":{name:"MQTT 5 with JS mapping",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0,enforcement:{input:"{{ source:address }}",filters:["eclipse-ditto-sandbox/{{ thing:name }}/update"]},replyTarget:{enabled:!1},payloadMapping:["javascript"]}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0,payloadMapping:["javascript"]}],mappingDefinitions:{javascript:{mappingEngine:"JavaScript",options:{incomingScript:`/**
 * Maps the passed parameters to a Ditto Protocol message.
 * @param {Object.<string, string>} headers - The headers Object containing all received header values
 * @param {string} [textPayload] - The String to be mapped
 * @param {ArrayBuffer} [bytePayload] - The bytes to be mapped as ArrayBuffer
 * @param {string} [contentType] - The received Content-Type, e.g. "application/json"
 * @returns {(DittoProtocolMessage|Array<DittoProtocolMessage>)} dittoProtocolMessage(s) -
 *  The mapped Ditto Protocol message,
 *  an array of Ditto Protocol messages or
 *  <code>null</code> if the message could/should not be mapped
 */
function mapToDittoProtocolMsg(
  headers,
  textPayload,
  bytePayload,
  contentType
) {

  // ### Insert/adapt your mapping logic here.
  // Use helper function Ditto.buildDittoProtocolMsg to build Ditto protocol message
  // based on incoming payload.
  // See https://www.eclipse.dev/ditto/connectivity-mapping.html#helper-functions for details.

  // ### example code assuming the Ditto protocol content type for incoming messages.
  if (contentType === 'application/vnd.eclipse.ditto+json') {
    // Message is sent as Ditto protocol text payload and can be used directly
    return JSON.parse(textPayload);
  } else if (contentType === 'application/octet-stream') {
    // Message is sent as binary payload; assume Ditto protocol message (JSON).
    try {
      return JSON.parse(Ditto.arrayBufferToString(bytePayload));
    } catch (e) {
      // parsing failed (no JSON document); return null to drop the message
      return null;
    }
  }

  // no mapping logic matched; return null to drop the message
  return null;
}`,outgoingScript:`/**
 * Maps the passed parameters which originated from a Ditto Protocol message to an external message.
 * @param {string} namespace - The namespace of the entity in java package notation, e.g.: "org.eclipse.ditto". Or "_"
 * (underscore) for connection announcements.
 * @param {string} name - The name of the entity, e.g.: "device".
 * @param {string} group - The affected group/entity: "things"|"policies"|"connections".
 * @param {string} channel - The channel for the signal: "twin"|"live"|"none"
 * @param {string} criterion - The criterion to apply: "commands"|"events"|"search"|"messages"|"announcements"|"errors".
 * @param {string} action - The action to perform: "create"|"retrieve"|"modify"|"delete". Or the announcement name:
 * "opened"|"closed"|"subjectDeletion". Or the subject of the message.
 * @param {string} path - The path which is affected by the message (e.g.: "/attributes"), or the destination
 * of a message (e.g.: "inbox"|"outbox").
 * @param {Object.<string, string>} dittoHeaders - The headers Object containing all Ditto Protocol header values.
 * @param {*} [value] - The value to apply / which was applied (e.g. in a "modify" action).
 * @param {number} [status] - The status code that indicates the result of the command. When this field is set,
 * it indicates that the Ditto Protocol Message contains a response.
 * @param {Object} [extra] - The enriched extra fields when selected via "extraFields" option.
 * @returns {(ExternalMessage|Array<ExternalMessage>)} externalMessage - The mapped external message, an array of
 * external messages or <code>null</code> if the message could/should not be mapped.
 */
function mapFromDittoProtocolMsg(
  namespace,
  name,
  group,
  channel,
  criterion,
  action,
  path,
  dittoHeaders,
  value,
  status,
  extra
) {

  // ###
  // Insert your mapping logic here

  // ### example code using the Ditto protocol content type.
  let headers = dittoHeaders;
  let textPayload = JSON.stringify(Ditto.buildDittoProtocolMsg(namespace, name, group, channel, criterion, action,
                                                               path, dittoHeaders, value, status, extra));
  let bytePayload = null;
  let contentType = 'application/vnd.eclipse.ditto+json';

  return Ditto.buildExternalMsg(
      headers, // The external headers Object containing header values
      textPayload, // The external mapped String
      bytePayload, // The external mapped byte[]
      contentType // The returned Content-Type
  );
}`,loadBytebufferJS:"false",loadLongJS:"false"}}}},"HTTP 1.1":{name:"HTTP 1.1",connectionType:"http-push",connectionStatus:"closed",failoverEnabled:!0,uri:"https://webhook.site:443/<YOUR-WEBHOOK-ID>",specificConfig:{parallelism:"1"},sources:[],targets:[{address:"POST:/ditto-event/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],headerMapping:{"content-type":"{{ header:content-type }}","api-key":"this-is-a-secret-api-key-to-send-along"}}]},"Kafka 2.x":{name:"Kafka 2.x",connectionType:"kafka",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://user:password@localhost:9092",specificConfig:{bootstrapServers:"localhost:9092,other.host:9092",saslMechanism:"plain"},sources:[{addresses:["theTopic"],consumerCount:1,qos:1,authorizationContext:["ditto:inbound-auth-subject"],enforcement:{input:"{{ header:device_id }}",filters:["{{ entity:id }}"]},headerMapping:{},payloadMapping:["Ditto"],replyTarget:{enabled:!0,address:"theReplyTopic",headerMapping:{},expectedResponseTypes:["response","error","nack"]},acknowledgementRequests:{includes:[]},declaredAcks:[]}],targets:[{address:"topic/key",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]}};var Zt={buttonConnectionTemplates:null,ulConnectionTemplates:null,inputConnectionTemplate:null,crudConnection:null,editorValidationConnection:null},je,Qo,Zo,qe,Ia;function Mu(){Ra(Ma),ht(Zt),vo(Zt.ulConnectionTemplates,Object.keys(Ll)),je=Nt("connectionEditor","ace/mode/json",!0),Qo=Nt("connectionIncomingScript","ace/mode/javascript",!0),Zo=Nt("connectionOutgoingScript","ace/mode/javascript",!0),Zt.ulConnectionTemplates.addEventListener("click",Bw),Qo.on("blur",Ru(Qo,"incomingScript")),Zo.on("blur",Ru(Zo,"outgoingScript")),je.on("input",Dw),je.getSession().on("changeAnnotation",Pw),Zt.crudConnection.addEventListener("onEditToggle",Uw),Zt.crudConnection.addEventListener("onCreateClick",zw),Zt.crudConnection.addEventListener("onUpdateClick",Nw),Zt.crudConnection.addEventListener("onDeleteClick",Fw)}function Ru(e,t){return()=>{if(!Zt.crudConnection.isEditing||Ia)return;let s=JSON.parse(je.getValue());r(s),s.mappingDefinitions.javascript.options[t]=e.getValue(),je.setValue(Tt(s),-1)};function r(s){s.mappingDefinitions||(s.mappingDefinitions={javascript:{mappingEngine:"JavaScript",options:{incomingScript:"",outgoingScript:""}}})}}function Dw(){je.session.getUndoManager().isClean()||(Zt.inputConnectionTemplate.value=null,Zt.editorValidationConnection.classList.remove("is-invalid"))}function Pw(){Ia=je.getSession().getAnnotations().filter(e=>e.type==="error").length>0}function Nw(){lt(!Ia,"Errors in connection json",Zt.editorValidationConnection),qe=JSON.parse(je.getValue()),Pe("modifyConnection",()=>{Pi(),Zt.crudConnection.toggleEdit()},Zt.crudConnection.idValue,qe)}function Fw(){Ke(`Are you sure you want to delete connection<br>'${qe.name}'?`,"Delete",()=>{Pe("deleteConnection",()=>{qo(null),Pi()},Zt.crudConnection.idValue)})}function zw(){lt(je.getValue()!=="","Please enter a connection configuration (select a template as a basis)",Zt.editorValidationConnection),lt(!Ia,"Errors in connection json",Zt.editorValidationConnection);let e=JSON.parse(je.getValue());Di()==="ditto_2"?e.id=Math.random().toString(36).replace("0.",""):delete e.id,Pe("createConnection",t=>{qo(t,!0),Pi(),Zt.crudConnection.toggleEdit()},null,e)}function Bw(e){Zt.inputConnectionTemplate.value=e.target.textContent;let t=JSON.parse(JSON.stringify(Ll[Zt.inputConnectionTemplate.value]));Ma(t),Zt.editorValidationConnection.classList.remove("is-invalid"),je.session.getUndoManager().markClean()}function Ma(e){qe=e,Qo.setValue(""),Zo.setValue(""),qe?(Zt.crudConnection.idValue=qe.id?qe.id:null,je.setValue(Tt(qe),-1),qe.mappingDefinitions&&qe.mappingDefinitions.javascript&&(Qo.setValue(qe.mappingDefinitions.javascript.options.incomingScript,-1),Zo.setValue(qe.mappingDefinitions.javascript.options.outgoingScript,-1))):(Zt.crudConnection.idValue=null,je.setValue(""))}function Uw(e){let t=e.detail.isEditing;Zt.buttonConnectionTemplates.disabled=!t,je.setReadOnly(!t),je.renderer.setShowGutter(t),Qo.setReadOnly(!t),Qo.renderer.setShowGutter(t),Zo.setReadOnly(!t),Zo.renderer.setShowGutter(t),t||(Zt.crudConnection.idValue&&Zt.crudConnection.idValue!==""?Ma(qe):Ma(null))}var _n=(r=>(r[r.PROP_LIKE=0]="PROP_LIKE",r[r.PROP_EQ=1]="PROP_EQ",r))(_n||{}),Ne=class e{constructor(t,r,s="@",p){console.assert(!(s==="@"&&t!==0)),this.type=t,this.key=s,this.values=[r],this.keyDisplay=p}add(t){this.values=[...new Set([...t,...this.values])]}toJsonPath(){switch(this.type){case 1:return this.values.map(t=>`@.${this.key}=="${t}"`).join("||");case 0:return this.key==="@"?`/${this.values[0].toString().replace(/\//g,"\\/")}/.test(JSON.stringify(@))`:this.values.map(t=>`/${t.replace(/\//g,"\\/")}/.test(@.${this.key})`).join("||")}}static fromString(t){let r=/^([^:~]+)(:|~)?(.*)/gm.exec(t.replace(/\s/g,""));return r[2]===":"?new e(1,r[3],r[1]):r[2]==="~"?new e(0,r[3],r[1]):new e(0,r[1])}static fromJSON(t){return console.assert(t.values.length===1),new e(t.type,t.values[0],t.key,t.keyDisplay)}toString(){switch(this.type){case 1:return`${this.keyDisplay??this.key}:${this.values.toString().replace(/\\/g,"")}`;case 0:return this.key==="@"?this.values[0]:`${this.keyDisplay??this.key}~${this.values.toString().replace(/\\/g,"")}`}}},En=class{constructor(){this.terms=[];this.addPropEq=(t,r)=>(this.addOrUpdate(new Ne(1,r,t)),this);this.addPropLike=(t,r)=>(this.addOrUpdate(new Ne(0,r,t)),this);this.addFromString=t=>{let r=Ne.fromString(t);return this.addOrUpdate(r),this};this.addOrUpdate=t=>{let r=this.terms.find(s=>s.type===t.type&&s.key===t.key);return r?r.add(t.values):this.terms.push(t),this};this.getAllUIs=()=>this.terms.map(t=>this.createChipUIForTerm(t));this.deleteFilterCallback=t=>{let r=t.target.getAttribute("data-key"),s=_n[t.target.getAttribute("data-type")];this.terms=this.terms.filter(p=>p.key!==r||p.type!==s),this.onFilterChange&&this.onFilterChange.filterChanged()}}setAllLike(t){return this.addOrUpdate(new Ne(0,t)),this}clear(){this.terms=[]}createChipUIForTerm(t){let r=document.createElement("span");r.classList.add("badge","rounded-pill","bg-info","mb-1","me-1"),r.innerText=t.toString();let s=document.createElement("button");return s.type="button",s.classList.add("btn-close"),s.style.fontSize="0.75em",s.setAttribute("data-key",t.key),s.setAttribute("data-type",_n[t.type]),s.onclick=this.deleteFilterCallback,r.appendChild(s),r}createJsonPath(){let t=this.terms.map(r=>r.toJsonPath());return t.length>1?`$[?(${t.map(r=>`(${r})`).join("&&")})]`:t.length>0?`$[?(${t})]`:null}};var Bt={tbodyConnectionLogs:null,tbodyConnectionMetrics:null,buttonRetrieveConnectionStatus:null,buttonRetrieveConnectionLogs:null,buttonEnableConnectionLogs:null,buttonResetConnectionLogs:null,buttonRetrieveConnectionMetrics:null,buttonResetConnectionMetrics:null,tableValidationConnections:null,tableFilterConnectionLogs:null,badgeConnectionLogsCount:null},$l=[],Oa,Ni,Da,Qe;async function Ou(){Ra(Xw),ht(Bt),Ni=Nt("connectionLogDetail","ace/mode/json",!0),Ni.session.setUseWrapMode(!0),Da=Nt("connectionStatusDetail","ace/mode/json",!0),Bt.buttonRetrieveConnectionStatus.onclick=Iu,document.querySelector('a[data-bs-target="#tabConnectionStatus"]').onclick=Iu,Bt.buttonEnableConnectionLogs.onclick=Kw,Bt.buttonResetConnectionLogs.onclick=Gw,Bt.buttonRetrieveConnectionLogs.onclick=Pa,Bt.tbodyConnectionLogs.addEventListener("click",Ww),Bt.tableFilterConnectionLogs.addEventListener("filterChange",Jw),Bt.tableFilterConnectionLogs.filterOptions=qw(),Bt.buttonRetrieveConnectionMetrics.onclick=Rl,document.querySelector('a[data-bs-target="#tabConnectionMetrics"]').onclick=Rl,Bt.buttonResetConnectionMetrics.onclick=jw,Bt.tbodyConnectionMetrics.addEventListener("click",Vw)}function jw(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("connectionCommand",Rl,Qe,null,"connectivity.commands:resetConnectionMetrics")}function Ww(e){Ni.setValue(Tt(Oa[e.target.parentNode.rowIndex-1]),-1),Ni.session.getUndoManager().reset()}function Vw(e){}function Gw(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("connectionCommand",Pa,Qe,null,"connectivity.commands:resetConnectionLogs")}function Kw(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("connectionCommand",Pa,Qe,null,"connectivity.commands:enableConnectionLogs")}function Rl(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Bt.tbodyConnectionMetrics.textContent="",Pe("retrieveConnectionMetrics",e=>{e.connectionMetrics&&Object.keys(e.connectionMetrics).forEach(t=>{e.connectionMetrics[t]&&Object.keys(e.connectionMetrics[t]).forEach(r=>{let s=e.connectionMetrics[t][r];Ut(Bt.tbodyConnectionMetrics,t,!1,null,r,"success",s.success.PT1M,s.success.PT1H,s.success.PT24H);let m=Ut(Bt.tbodyConnectionMetrics,t,!1,null,r,"failure",s.failure.PT1M,s.failure.PT1H,s.failure.PT24H).lastElementChild;for(let i=0;i<3;i++)m.innerHTML!=="0"&&m.classList.add("text-danger"),m=m.previousElementSibling})})},Qe)}function Iu(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("retrieveStatus",e=>{Da.setValue(Tt(e),-1),Da.session.getUndoManager().reset()},Qe)}function Pa(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("retrieveConnectionLogs",e=>{$l=e.connectionLogs,Yw(e),Du()},Qe)}function Du(){Bt.tbodyConnectionLogs.textContent="",Ni.setValue(""),Oa=Bt.tableFilterConnectionLogs.filterItems($l),Oa.forEach(e=>{Ut(Bt.tbodyConnectionLogs,hn(e.timestamp,!0),!1,null,e.category,e.type,e.level)}),bn(Bt.badgeConnectionLogsCount,$l,Oa),Bt.tbodyConnectionLogs.scrollTop=Bt.tbodyConnectionLogs.scrollHeight-Bt.tbodyConnectionLogs.clientHeight}function Yw(e){e.enabledUntil?(Bt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-off","bi-toggle-on"),Bt.buttonEnableConnectionLogs.setAttribute("title",`Enabled until ${hn(e.enabledUntil)}`)):(Bt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-on","bi-toggle-off"),Bt.buttonEnableConnectionLogs.setAttribute("title","Click to enable connection logs for the selected connection"))}function Xw(e,t=!0){Qe=e?e.id:null,Da.setValue(""),Ni.setValue(""),Bt.tbodyConnectionMetrics.textContent="",Bt.tbodyConnectionLogs.textContent="",!t&&e&&e.id&&Pa()}function Jw(e){Du()}function qw(){let e=[];return["consumed","mapped","dropped","enforced","acknowledged","throttled","dispatched","filtered","published"].forEach(t=>e.push(new Ne(1,t,"type"))),["source","target","response"].forEach(t=>e.push(new Ne(1,t,"category"))),["success","failure"].forEach(t=>e.push(new Ne(1,t,"level"))),["thing"].forEach(t=>e.push(new Ne(1,t,"entityType"))),e}var Pu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#piggyBackCommands">
    Piggyback Commands
</h5>
<hr />
<div class="collapse show" id="piggyBackCommands">
    <div class="row-cols-md-auto" style="height: 80vh;">
        <div class="col-md-auto resizable_flex_column">
            <div class="row mb-1" style="flex-grow: 1;">
                <div class="col-md-6 resizable_flex_column">
                    <div class="col-md-auto resizable_flex_column">
                        <div class="row mb-1">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button id="showTemplates" class="btn btn-outline-primary btn-sm button_round_right"
                                        data-bs-toggle="modal" data-bs-target="#templatesModal">
                                        Insert Template
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button class="btn btn-outline-primary btn-sm button_round_right"
                                        style="float: right;" id="buttonSubmit">
                                        Submit
                                    </button>
                                    <button hidden class="btn btn-outline-secondary btn-sm button_round_right"
                                        style="float: right;" id="buttonCancel">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Service</label>
                            <select class="form-select-sm" id="serviceSelector"></select>
                            <button class="btn btn-outline-primary btn-sm button_round_right"
                                id="buttonLoadServiceInstances">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                            <div class="invalid-feedback"></div>
                        </div>

                        <div class="input-group input-group-sm mb-1" hidden id="instanceContainer">
                            <a class="input-group-text">Instance:</a>
                            <select class="form-select-sm" id="instanceSelector"></select>
                        </div>

                        <div class="input-group input-group-sm mb-1 has-validation" style="width: 20%;">
                            <label class="input-group-text">Timeout in sec</label>
                            <input type="text" class="form-control form-control-sm" id="timeout"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Actor path</label>
                            <input type="text" class="form-control form-control-sm" id="targetActorSelection"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="headerValidationElement">Header</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 0.2;">
                            <div class="script_editor" id="aceHeaders"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="commandValidationElement">Command</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="aceCommand"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 resizable_flex_column">
                    <div class="row mb-1">
                        <div class="col-md-auto resizable_flex_column">
                            <h6>Request status:</h6>
                        </div>
                        <div class="col-md-auto resizable_flex_column">
                            <div id="responseStatus">no request made</div>
                        </div>
                    </div>
                    <h6>Result</h6>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div class="script_editor" id="acePiggybackResponse"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
`;var Na={targetActorSelection:"/user/gateway/proxy",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"things.commands:retrieveThing",thingID:"com.acme:foobar1"}};var Nu={Overall:{"Modify SBR enabled":{service:"Overall",timeout:5,targetActorSelection:"/system/cluster/core/daemon/downingProvider",headers:{aggregate:!0,"ditto-sudo":!0},command:{type:"ditto.sbr:modify",enabled:!0}}},connectivity:{"sudo: retrieve connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connection.id}}"}},"sudo: retrieve all connection IDs":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveAllConnectionIds"}},"sudo: retrieve all connection IDs by tag":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionIdsByTag",tag:"{{tag}}"}},"sudo: retrieve connection tags":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionTags",connectionId:"{{connection.id}}"}},"sudo: retrieve connection metrics":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connection.id}}"}},"sudo: retrieve connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: enable connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:enableConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: close connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:closeConnection",connectionId:"{{connection.id}}"}},"sudo: open connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:openConnection",connectionId:"{{connection.id}}"}},"create connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"sudo: modify connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"connectivity: retrieve cleanup progress":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"connectivity: retrieve cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"connectivity: modify cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},gateway:{},policies:{"retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"sudo: modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: delete policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:deletePolicy",policyId:"{{policy.id}}"}},"unblock namespace":{service:"policies",timeout:5,targetActorSelection:"/user/blockedNamespacesUpdater/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"namespaces.commands:unblockNamespace",namespace:"{{namespace}}"}},"policies: retrieve cleanup progress":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"policies: retrieve cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"policies: modify cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},things:{"retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"sudo: retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"sudo: create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: delete thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:deleteThing",thingId:"{{thing.id}}"}},"thing: retrieve cleanup progress":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"thing: retrieve cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"thing: modify cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},search:{"retrieve sync progress":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"reset sync events":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:resetHealthEvents"}},"retrieve sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"modify sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!0,"idle-timeout":"5m",keep:{events:"2"},"max-backoff":"2m","max-restarts":180,"min-backoff":"1s","policy-ask-timeout":"10s","quiet-period":"8m",recovery:"5m",throttle:{period:"10s",throughput:100},"tolerance-window":"20m"}}},"force update thing in index":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/thingsUpdater",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0},command:{type:"thing-search.sudo.commands:sudoUpdateThing",thingId:"<THING-ID>",invalidateThing:!1,invalidatePolicy:!1,updateReason:"UNKNOWN"}},"force update for complete namespaces":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSyncProxy",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0,namespaces:["namespace1","namespace2"]},command:{type:"common.commands:shutdown"}}}};var Fu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="templatesModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Templates
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Service: </a>
                    <select class="form-select-sm" id="templateServiceSelector"></select>
                </div>

                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Template:</a>
                    <select class="form-select-sm" id="templateSelector"></select>
                </div>

                <pre class="ace_container" id="commandPreview"></pre>

                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" id="insertTemplate"
                        data-bs-toggle="tooltip" data-bs-dismiss="modal">Insert</button>
                </div>
            </div>
        </div>
    </div>
</div>`;var Xe={templateServiceSelector:null,templateSelector:null,commandPreview:null,insertTemplate:null,templatesModal:null},Ml="Overall",Il,Ol=new Map,Sn=new Map;document.getElementById("templatesHTML").innerHTML=Fu;async function zu(){ht(Xe),oy(),Xe.templateServiceSelector.onchange=Uu,Xe.templateSelector.onchange=Hu,Xe.insertTemplate.onclick=iy}function Bu(e){Xe.templateServiceSelector.value=e,Uu()}function Dl(e,t,r){return{targetActorSelection:e,headers:t,piggybackCommand:r}}function oy(){let e=[];for(let[t,r]of Object.entries(Nu).sort()){e.push(t),Sn.set(t,[]);for(let[s,p]of Object.entries(r))Sn.get(t).push(s),Ol.set(s,p),p.service!==Ml&&Sn.get(Ml).push(s)}Ge(Xe.templateServiceSelector,e),Ge(Xe.templateSelector,Sn.get(Ml))}function Uu(){if(Xe.templateServiceSelector.value!==Il){Il=Xe.templateServiceSelector.value;let e=Sn.get(Il);Ge(Xe.templateSelector,e),Hu()}}function Hu(){let e=Ol.get(Xe.templateSelector.value);if(e){let t=Dl(e.targetActorSelection,e.headers,e.command);Xe.commandPreview.textContent=Tt(t)}else Xe.commandPreview.textContent=""}async function iy(){let e=Ol.get(Xe.templateSelector.value);e&&Wu(e)}var Pl="Invalid json!",ny="Headers field is required!",ay="Command field is required!",Xu="Timeout field is required!",Ju="Actor path field is required!",qu="No services available!",zl="Loading...",sy="request in progress",Gu="error",Zr,Fa="Overall",Fi={},Er,Qu="All",ti,to,eo,ei,Nl=new Map,pt={showTemplates:null,serviceSelector:null,instanceContainer:null,instanceSelector:null,timeout:null,buttonLoadServiceInstances:null,targetActorSelection:null,buttonSubmit:null,buttonCancel:null,responseStatus:null,commandValidationElement:null,headerValidationElement:null,tabOperations:null,collapseOperations:null};document.getElementById("piggybackHTML").innerHTML=Pu;async function Zu(){ht(pt),pt.showTemplates.onclick=function(){let e=pt.serviceSelector.value;e===zl&&(e=Fa),Bu(e)},Fr(pt.tabOperations,pt.collapseOperations,Ku,"disableOperations"),ly(),pt.targetActorSelection.placeholder=Na.targetActorSelection,pt.buttonLoadServiceInstances.onclick=Ku,pt.buttonSubmit.onclick=dy,pt.serviceSelector.onchange=Bl,pt.instanceSelector.onchange=cy,pt.timeout.onchange=py,pt.targetActorSelection.onchange=uy}function Wu(e){Zr=e,pt.serviceSelector.value=Zr.service,ti=void 0,Bl(),pt.timeout.value=Zr.timeout,pt.targetActorSelection.value=Zr.targetActorSelection,to.setValue(Tt(Zr.headers),-1),eo.setValue(Tt(Zr.command),-1)}async function Ku(){Fi[Fa]=[],Ge(pt.serviceSelector,[zl]),await xt("GET","/devops/logging",null,null,!1,!0).then(t=>{let r=Object.entries(t).sort();r.length>0?r.forEach(s=>{let m=Object.values(s[1]).map(i=>i.instance).sort();m.unshift(Qu),Fi[s[0]]=m}):Fi=[]}).catch(t=>{Fi=[]}),e(Fi);function e(t){let r=Object.keys(t);Er?r.indexOf(Er)==-1&&(Er=void 0):Zr&&r.indexOf(Zr.service)!==-1?Er=Zr.service:r.length>0&&(Er=r[0]),Ge(pt.serviceSelector,r),pt.serviceSelector.value=Er,Bl()}}function Bl(){!pt.serviceSelector.value!==Er&&(_r(pt.serviceSelector.value!=="",qu,pt.serviceSelector),Er=pt.serviceSelector.value,Er&&Er!==Fa?(pt.instanceContainer.removeAttribute("hidden",""),e(Fi[Er])):pt.instanceContainer.setAttribute("hidden",""));function e(t){ti?t.indexOf(ti)==-1&&(ti=void 0):t.length>0&&(ti=t[0]),Ge(pt.instanceSelector,t),pt.instanceSelector.value=ti}}function ly(){to=Nt("aceHeaders","ace/mode/json"),to.setOption("wrap",!0),Nl.set(to.getSession(),pt.headerValidationElement),eo=Nt("aceCommand","ace/mode/json"),eo.setOption("wrap",!0),Nl.set(eo.getSession(),pt.commandValidationElement),ei=Nt("acePiggybackResponse","ace/mode/json"),ei.setReadOnly(!0),ei.setOption("wrap",!0),to.setOption("placeholder",Tt(Na.headers)),eo.setOption("placeholder",Tt(Na.command)),to.getSession().on("changeAnnotation",Yu),eo.getSession().on("changeAnnotation",Yu)}function Yu(e,t){_r(!Fl(t),Pl,Nl.get(t))}function Fl(e){return e.getAnnotations().filter(t=>t.type==="error").length>0}async function dy(){if(e()){pt.responseStatus.textContent=sy,ei.setValue("",-1);let p=t(pt.serviceSelector.value,pt.instanceSelector.value,pt.timeout.value),m=Dl(pt.targetActorSelection.value,JSON.parse(to.getValue()),JSON.parse(eo.getValue()));new Promise((u,o)=>{r(o);try{xt("POST",p,m,null,!0,!0).then(n=>u(n)).catch(n=>o(n))}catch(n){s(),ei.setValue(n.message,-1),pt.responseStatus.textContent=Gu}}).then(u=>{s(),u.json().then(o=>{ei.setValue(Tt(o),-1),pt.responseStatus.textContent=u.status})}).catch(u=>{s(),ei.setValue(u.message,-1),pt.responseStatus.textContent=Gu})}function e(){let p=_r(pt.timeout.value.trim()!=="",Xu,pt.timeout),m=_r(pt.serviceSelector.value!==""&&pt.serviceSelector.value!==zl,qu,pt.serviceSelector),i=_r(pt.targetActorSelection.value.trim()!=="",Ju,pt.targetActorSelection),u=_r(to.getValue().trim()!=="",ny,pt.headerValidationElement);u&&=_r(!Fl(to.getSession()),Pl,pt.headerValidationElement);let o=_r(eo.getValue().trim()!=="",ay,pt.commandValidationElement);return o&&=_r(!Fl(eo.getSession()),Pl,pt.commandValidationElement),p&&m&&i&&u&&o}function t(p,m,i){let u="";return p&&p!==Fa&&(u=`/${p}`,m&&m!=Qu&&(u+=`/${m}`)),`/devops/piggyback${u}?timeout=${i}`}function r(p){pt.buttonCancel.onclick=function(){p({message:"Cancelled"})},pt.buttonCancel.removeAttribute("hidden",""),pt.buttonSubmit.setAttribute("hidden","")}function s(){pt.buttonCancel.setAttribute("hidden",""),pt.buttonSubmit.removeAttribute("hidden",""),pt.buttonCancel.onclick=void 0}}function cy(){ti=pt.instanceSelector.value}function py(){_r(pt.timeout.value.trim()!=="",Xu,pt.timeout)}function uy(){_r(pt.targetActorSelection.value.trim()!=="",Ju,pt.targetActorSelection)}function _r(e,t,r){try{lt(e,t,r)}catch{return!1}return!0}var tm=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
-->

<h5 data-bs-toggle="collapse" data-bs-target="#servicesLogging">Ditto Services Logging</h5>
<hr />
<div class="collapse show" id="servicesLogging">
    <div class="input-group input-group-sm mt-1 mb-1" role="group">
        <div style="flex-grow: 1;"></div>
        <button class="btn btn-outline-primary btn-sm button_round_left" id="buttonLoadAllLogLevels">
            <i class="bi bi-arrow-clockwise"></i>
            Refresh
        </button>
    </div>
    <div class="row resizable_pane" style="height: 80vh">
        <div class="col-md-12 resizable_flex_column">
            <div id="divLoggers"></div>
            <template id="templateLogger">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
                      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
                <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
                    rel="stylesheet"
                    integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
                    crossorigin="anonymous" referrerpolicy="no-referrer" />
                <link href="./dist/main.css" rel="stylesheet" />

                <div class="input-group input-group-sm mb-1 has-validation">
                    <input class="form-control me-1" type="text" disabled id="inputLogger" spellcheck="false"></input>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="btnLevel" id="debug" autocomplete="off">
                        <label class="btn btn-sm btn-outline-secondary" for="debug">DEBUG</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="info" autocomplete="off">
                        <label class="btn btn-sm btn-outline-success" for="info">INFO</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="warn" autocomplete="off">
                        <label class="btn btn-sm btn-outline-warning" for="warn">WARN</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="error" autocomplete="off">
                        <label class="btn btn-sm btn-outline-danger" for="error">ERROR</label>
                    </div>
                    <div class="invalid-feedback"></div>
                </div>
            </template>
        </div>
    </div>
</div>
`;var Sr={buttonLoadAllLogLevels:null,divLoggers:null,templateLogger:null,tabOperations:null,collapseOperations:null};document.getElementById("servicesLoggingHTML").innerHTML=tm;async function rm(){ht(Sr),Fr(Sr.tabOperations,Sr.collapseOperations,Ul,"disableOperations"),Sr.buttonLoadAllLogLevels.onclick=Ul}function em(e,t){xt("PUT","/devops/logging/"+e,t,null,!1,!0).then(()=>{Ul()})}function Ul(){xt("GET","/devops/logging",null,null,!1,!0).then(e=>gy(e)).catch(e=>{Sr.divLoggers.textContent=""})}function gy(e){Sr.divLoggers.textContent="",Object.keys(e).sort().forEach((p,m)=>{t(p,m),Object.values(e[p])[0].loggerConfigs.forEach(i=>{r(p,i)}),s(p)});function t(p,m){let i=document.createElement("h6");i.innerText=p,m>0&&i.classList.add("mt-3"),Sr.divLoggers.append(i)}function r(p,m){let i=document.createElement("div");i.attachShadow({mode:"open"}),i.shadowRoot.append(Sr.templateLogger.content.cloneNode(!0)),i.shadowRoot.getElementById("inputLogger").value=m.logger,i.shadowRoot.getElementById(m.level).setAttribute("checked",""),Array.from(i.shadowRoot.querySelectorAll(".btn-check")).forEach(u=>{u.addEventListener("click",o=>em(p,{logger:m.logger,level:o.target.id}))}),Sr.divLoggers.append(i)}function s(p){let m=document.createElement("div");m.attachShadow({mode:"open"}),m.shadowRoot.append(Sr.templateLogger.content.cloneNode(!0));let i=m.shadowRoot.getElementById("inputLogger");i.disabled=!1,i.placeholder="Add new logger name and choose log level",i.addEventListener("change",u=>{u.target.classList.remove("is-invalid")}),Array.from(m.shadowRoot.querySelectorAll(".btn-check")).forEach(u=>{u.addEventListener("click",o=>{lt(i.value&&i.value.trim()!=="","Logger name must not be empty",i),em(p,{logger:i.value,level:o.target.id})})}),Sr.divLoggers.append(m)}}var om=`<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"
  integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="./dist/main.css" rel="stylesheet" />
<div class="resizable_flex_column px-1" id="divRoot">
  <div class="input-group input-group-sm mb-1 mt-1 has-validation">
    <label class="input-group-text" id="label">Default</label>
    <input type="text" class="form-control" spellcheck="false" disabled id="inputIdValue">
    <button class="btn btn-outline-primary btn-sm" id="buttonEdit" data-bs-toggle="tooltip" title="Edit">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonCreate" data-bs-toggle="tooltip" title="Create">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonUpdate" data-bs-toggle="tooltip" title="Update">
      Update
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonDelete" data-bs-toggle="tooltip" title="Delete">
      Delete
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonCancel" data-bs-toggle="tooltip" title="Cancel">
      Cancel
    </button>
    <button type="button" id="buttonFullscreen" hidden class="btn btn-outline-secondary btn-sm button_round_both ms-1" title="Toggle fullscreen">
        <i class="bi bi-arrows-fullscreen"></i>
    </button>
    <div class="invalid-feedback"></div>
  </div>
  <slot></slot>
</div>`;var fy="editBackground",za="editForground",Hl="editForgroundBig",vy="bi-arrows-fullscreen",wy="bi-fullscreen-exit",Ba="fullscreen";var jl=class extends HTMLElement{constructor(){super();this.isEditing=!1;this.isEditDisabled=!1;this.isCreateDisabled=!1;this.isDeleteDisabled=!1;this.dom={label:null,inputIdValue:null,buttonEdit:null,buttonCreate:null,buttonUpdate:null,buttonDelete:null,buttonCancel:null,buttonFullscreen:null,divRoot:null};this.attachShadow({mode:"open"})}get idValue(){return this.dom.inputIdValue.value}set idValue(r){let s=this.shadowRoot.getElementById("inputIdValue");s.value=r,s.classList.remove("is-invalid");let p=this.shadowRoot.getElementById("buttonEdit");r&&r!==""?p.innerText="Edit":p.innerText="Create";let m=this.shadowRoot.getElementById("buttonDelete");!this.isEditing&&!this.isDeleteDisabled&&r&&r!==""?m.removeAttribute("hidden"):m.setAttribute("hidden","")}get editDisabled(){return this.isEditDisabled}set createDisabled(r){this.isCreateDisabled=r,this.lazyInit(this.dom.buttonCreate),this.setButtonState(this.dom.buttonCreate,r)}set deleteDisabled(r){this.isDeleteDisabled=r,this.lazyInit(this.dom.buttonDelete),this.setButtonState(this.dom.buttonDelete,r)}set editDisabled(r){this.isEditDisabled=r,this.isEditing||(this.lazyInit(this.dom.buttonEdit),this.setButtonState(this.dom.buttonEdit,r))}lazyInit(r){r||ht(this.dom,this.shadowRoot)}setButtonState(r,s){s?r.setAttribute("hidden",""):r.removeAttribute("hidden")}get validationElement(){return this.dom.inputIdValue}connectedCallback(){this.shadowRoot.innerHTML=om,setTimeout(()=>{ht(this.dom,this.shadowRoot),this.dom.buttonEdit.onclick=()=>this.toggleEdit(!1),this.dom.buttonCancel.onclick=()=>this.toggleEdit(!0),this.dom.label.innerText=this.getAttribute("label")||"Label",this.dom.buttonCreate.onclick=this.eventDispatcher("onCreateClick"),this.dom.buttonUpdate.onclick=this.eventDispatcher("onUpdateClick"),this.dom.buttonDelete.onclick=this.eventDispatcher("onDeleteClick"),this.dom.buttonFullscreen.onclick=()=>this.toggleFullscreen(),this.dom.inputIdValue.addEventListener("change",r=>{r.target.classList.remove("is-invalid"),this.dispatchEvent(new CustomEvent("onIdValueChange",{composed:!0}))})})}eventDispatcher(r){return()=>{this.dispatchEvent(new CustomEvent(r,{composed:!0}))}}toggleEdit(r){this.isEditing=!this.isEditing,document.getElementById("modalCrudEdit").classList.toggle(fy),document.body.classList.toggle("modal-open"),document.body.style.overflow=this.isEditing&&this.hasAttribute(Ba)?"hidden":"",this.dom.divRoot.classList.toggle(this.hasAttribute(Ba)?Hl:za),this.setButtonState(this.dom.buttonEdit,this.isEditing||this.isEditDisabled),this.setButtonState(this.dom.buttonFullscreen,!this.isEditing),this.dom.buttonCancel.toggleAttribute("hidden"),this.isEditing?this.dom.inputIdValue.value?this.dom.buttonUpdate.toggleAttribute("hidden"):this.isCreateDisabled||this.dom.buttonCreate.toggleAttribute("hidden"):(this.dom.buttonCreate.setAttribute("hidden",""),this.dom.buttonUpdate.setAttribute("hidden","")),(this.isEditing||!this.dom.inputIdValue.value)&&this.dom.buttonDelete.setAttribute("hidden","");let s=this.isEditing&&(!this.dom.inputIdValue.value||this.hasAttribute("allowIdChange"));this.dom.inputIdValue.disabled=!s,this.dispatchEvent(new CustomEvent("onEditToggle",{composed:!0,detail:{isEditing:this.isEditing,isCancel:r}}))}toggleFullscreen(){this.toggleAttribute(Ba),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(vy),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(wy),document.body.style.overflow=this.isEditing&&this.hasAttribute(Ba)?"hidden":"",this.dom.divRoot.classList.contains(za)?this.dom.divRoot.classList.replace(za,Hl):this.dom.divRoot.classList.replace(Hl,za)}};customElements.define("crud-toolbar",jl);function Ua(){let e=[];return{addChangeListener:t,notifyAll:r};function t(s){e.push(s)}function r(s){e.forEach(p=>p.call(null,s))}}var im=`<div>
    <h5>Policies</h5>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <h6>Load a policy</h6>
            <form class="input-group input-group-sm mb-1 mt-1 has-validation" role="group" autocomplete="off">
                <label class="input-group-text">Policy Id</label>
                <input autocomplete="false" name="hidden" type="text" style="display:none;">
                <input type="search" class="form-control form-control-sm" id="inputPolicyId"></input>
                <button id="buttonLoadPolicy" class="btn btn-outline-primary btn-sm"
                    title="Load policy with the given ID">
                    Load
                </button>
                <div class="invalid-feedback"></div>
            </form>
            <h6>Recent policies</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyRecentPolicies"></tbody>
                </table>
            </div>
            <h6>Who am I</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyWhoami"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8">
            <div class="resizable_flex_column">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabPolicyEntries">Entries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyImports">Imports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyJson">JSON</a>
                    </li>
                </ul>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container active no-margin" id="tabPolicyEntries">
                        <h5>Policy Entries</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationEntries" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyEntries"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Entry" id="crudEntry">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Importable</label>
                                        <select class="form-select form-select-sm" id="selectImportable" disabled>
                                            <option selected value="implicit">implicit</option>
                                            <option value="explicit">explicit</option>
                                            <option value="never">never</option>
                                        </select>
                                    </div>    
                                </crud-toolbar>
                            </div>
                        </div>                
                        <h6>Subjects</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationSubjects" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicySubjects"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Subject" id="crudSubject" style="flex-grow: 1;">
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="subjectEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                            <!-- <div class="row flex_column_part">
                            </div> -->
                        </div>
                        <h6>Resources</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationResources" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyResources"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Resource" id="crudResource" style="flex-grow: 1;">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Template</label>
                                        <select class="form-select form-select-sm" id="selectResourceTemplates" disabled></select>
                                    </div>
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="resourceEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container no-margin" id="tabPolicyImports">
                        <h5>Policy Imports</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 75vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyImports"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Imported Policy Id" id="crudImport" style="flex-grow: 1;">
                                    <div class="table-wrap">
                                        <table class="table table-striped table-hover table-sm">
                                            <tbody id="tbodyPolicyImportEntries"></tbody>
                                        </table>
                                    </div>
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden; height: 80vh;">
                    <div class="tab-pane container no-margin" id="tabPolicyJson">
                        <crud-toolbar label="PolicyId" id="crudPolicyJson">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text">Template</label>
                                <select class="form-select form-select-sm" id="selectPolicyJSONTemplate" disabled></select>
                            </div>    
                            <div class="ace_container" style="flex-grow: 1;">
                                <div>
                                    <div class="script_editor" id="policyEditor"></div>
                                </div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;var ri=Ua(),$t,nm,Te={inputPolicyId:null,tbodyRecentPolicies:null,tbodyWhoami:null,buttonLoadPolicy:null,collapsePolicies:null,tabPolicies:null};document.getElementById("policyHTML").innerHTML=im;function am(){Ye(Sy),ht(Te),nm=Fr(Te.tabPolicies,Te.collapsePolicies,_y,"disablePolicies"),Te.tbodyRecentPolicies.addEventListener("click",Cy),Te.buttonLoadPolicy.onclick=e=>{e.preventDefault(),lt(Te.inputPolicyId.value,"Please enter a policyId",Te.inputPolicyId),zi(Te.inputPolicyId.value)},Te.tbodyWhoami.onclick=e=>{},Ce(xy)}function xy(e){Te.inputPolicyId.value=e&&e.policyId,nm.viewDirty=!0}function ky(){Te.tbodyWhoami.textContent="",xt("GET","/whoami").then(e=>{e.subjects.forEach(t=>{Ut(Te.tbodyWhoami,t,!1,t,t===e.defaultSubject?"default":"")})}).catch(e=>{})}function zi(e){xt("GET","/policies/"+e).then(t=>_o(t)).catch(()=>_o(null))}async function _o(e){$t=e,$t?await Ey($t.policyId):Te.inputPolicyId.value=null,ri.notifyAll($t)}async function _y(e){ky(),e&&await _o(null),Te.inputPolicyId.value&&zi(Te.inputPolicyId.value)}async function Ey(e){let t=Q().recentPolicyIds.indexOf(e);t>=0&&Q().recentPolicyIds.splice(t,1),Q().recentPolicyIds.unshift(e),Q().recentPolicyIds.length>=10&&Q().recentPolicyIds.pop(),await ie(!1,"recentPolicyIds")}function Sy(e){Q().recentPolicyIds=Q().recentPolicyIds||[],Te.tbodyRecentPolicies.textContent="",Q().recentPolicyIds.forEach(t=>{Ut(Te.tbodyRecentPolicies,t,$t&&$t.policyId===t,t)})}function Cy(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;$t&&$t.policyId===t.id?_o(null):(Te.inputPolicyId.value=t.id,zi(t.id))}}function Ae(e,t){return()=>{t in[0,1]&&e.toggleEdit(!1),zi($t.policyId)}}var Tn=Ua(),Kt,Ht={tbodyPolicyEntries:null,tableValidationEntries:null,selectImportable:null,crudEntry:null};function sm(){ht(Ht),ri.addChangeListener(My),dr(Ht.tbodyPolicyEntries,Ht.tableValidationEntries),Ht.crudEntry.editDisabled=!0,Ht.crudEntry.addEventListener("onCreateClick",Ly),Ht.crudEntry.addEventListener("onDeleteClick",Ry),Ht.crudEntry.addEventListener("onUpdateClick",$y),Ht.crudEntry.addEventListener("onEditToggle",Ty),Ht.tbodyPolicyEntries.onclick=Ay}function Ty(e){Ht.selectImportable.disabled=!e.detail.isEditing,e.detail.isCancel&&lm(Kt)}function Ay(e){Kt===e.target.textContent?Kt=null:Kt=e.target.textContent,Ha(Kt)}function Ly(){lt(Ht.crudEntry.idValue,"Please enter a label for the entry",Ht.crudEntry.validationElement),lt(!Object.keys($t.entries).includes(Ht.crudEntry.idValue),`Entry with label ${Ht.crudEntry.idValue} already exists`,Ht.crudEntry.validationElement),Kt=Ht.crudEntry.idValue,Wl(Ht.crudEntry.idValue,{subjects:{},resources:{},importable:Ht.selectImportable.value},Ae(Ht.crudEntry,0))}function $y(){$t.entries[Kt].importable=Ht.selectImportable.value,Wl(Kt,$t.entries[Kt],Ae(Ht.crudEntry,1))}function Ry(){ro(),Ke(`Are you sure you want to delete policy entry<br>'${Ht.crudEntry.idValue}'?`,"Delete",()=>{Wl(Kt,null,Ae(Ht.crudEntry,2))})}function Wl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${e}`,t).then(r)}function My(e){if(Ht.tbodyPolicyEntries.textContent="",Ht.crudEntry.idValue=null,Ht.crudEntry.editDisabled=e===null,e){let t=!1;Object.keys(e.entries).forEach(r=>{Ut(Ht.tbodyPolicyEntries,r,r===Kt),r===Kt&&(Ha(r),t=!0)}),t||(Kt=null,Ha(null))}else Ha(null)}function Ha(e){lm(e),Tn.notifyAll(Kt)}function lm(e){Ht.crudEntry.idValue=e,Ht.selectImportable.value=e&&$t.entries[e].importable}function ro(){lt(Kt,"Please select an entry",Ht.tableValidationEntries)}var gr,ge={tbodyPolicyImports:null,tbodyPolicyImportEntries:null,crudImport:null};function dm(){ht(ge),ri.addChangeListener(zy),ge.tbodyPolicyImports.onclick=Oy,ge.crudImport.editDisabled=!0,ge.crudImport.addEventListener("onCreateClick",Dy),ge.crudImport.addEventListener("onUpdateClick",Py),ge.crudImport.addEventListener("onDeleteClick",Ny),ge.crudImport.addEventListener("onEditToggle",Fy),ge.crudImport.addEventListener("onIdValueChange",Iy)}async function Iy(){await Ui(ge.crudImport.idValue),pm(!1)}function Oy(e){let t=e.target;gr===t.parentElement.id?gr=null:gr=t.parentElement.id,Ui(gr)}function Gl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/imports/${e}`,t).then(r)}function Dy(){gr=ge.crudImport.idValue,Gl(gr,cm(),Ae(ge.crudImport,0))}function Py(){Gl(gr,cm(),Ae(ge.crudImport,1))}function Ny(){Ke(`Are you sure you want to delete policy import<br>'${ge.crudImport.idValue}'?`,"Delete",()=>{Gl(gr,null,Ae(ge.crudImport,2))})}function cm(){let e={},t=document.querySelectorAll('#tbodyPolicyImportEntries input:checked[data-importable="explicit"]');return t.length>0&&(e.entries=Array.from(t).map(r=>r.id)),e}function Fy(e){pm(!e.detail.isEditing),e.detail.isCancel&&Ui(gr)}function pm(e){document.querySelectorAll('#tbodyPolicyImportEntries input[data-importable="explicit"]').forEach(t=>t.disabled=e)}async function zy(e){if(ge.tbodyPolicyImports.textContent="",ge.crudImport.idValue=null,ge.crudImport.editDisabled=e===null,e){let r=!1;for(let s of Object.keys(e.imports)){let p=Ut(ge.tbodyPolicyImports,s,s===gr);ol(p,"bi-arrow-up-right-square",t(s),"Open policy"),s===gr&&(await Ui(s),r=!0)}r||(gr=null,await Ui(null))}else await Ui(null);function t(r){return s=>{xt("GET","/policies/"+r).then(async p=>{await _o(p)})}}}async function Ui(e){if(ge.crudImport.idValue=e,ge.tbodyPolicyImportEntries.textContent="",e){let r=await xt("GET","/policies/"+e);Object.keys(r.entries).forEach(s=>{let p=ge.tbodyPolicyImportEntries.insertRow(),m=Ai(p,s,t(s,r),!0);m.dataset.importable=r.entries[s].importable,fo(p,s,JSON.stringify(r.entries[s],null,4)),fo(p,r.entries[s].importable)})}function t(r,s){let p=$t.imports[e],m=p&&p.entries&&p.entries.includes(r),i=s.entries[r].importable==="implicit";return m||i}}var Kl={"Standard Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]},"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]}}}}},"Imports Importing Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}}}},imports:{"ditto:imported-policy":{entries:["EXPLICIT"]},"ditto:another-imported-policy":{}}},"Imports Exporting Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"},IMPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"implicit"},EXPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"explicit"},NEVER:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"}}}};var ve={crudPolicyJson:null,selectPolicyJSONTemplate:null},oo;function um(){ht(ve),ri.addChangeListener(mm),oo=Nt("policyEditor","ace/mode/json",!0),ve.crudPolicyJson.addEventListener("onCreateClick",Wy),ve.crudPolicyJson.addEventListener("onDeleteClick",Gy),ve.crudPolicyJson.addEventListener("onUpdateClick",Vy),ve.crudPolicyJson.addEventListener("onEditToggle",jy),Ge(ve.selectPolicyJSONTemplate,["Select an example",...Object.keys(Kl)]),ve.selectPolicyJSONTemplate.addEventListener("change",Hy),document.querySelector('a[data-bs-target="#tabPolicyJson"]').addEventListener("shown.bs.tab",e=>{oo.renderer.updateFull()})}function Hy(e){oo.setValue(JSON.stringify(Kl[e.target.value],null,2),-1)}function jy(e){oo.setReadOnly(!e.detail.isEditing),oo.renderer.setShowGutter(e.detail.isEditing),ve.selectPolicyJSONTemplate.disabled=!e.detail.isEditing,ve.selectPolicyJSONTemplate.selectedIndex=0,e.detail.isCancel&&mm($t)}function Wy(){lt(ve.crudPolicyJson.idValue,"PolicyId must not be empty",ve.crudPolicyJson.validationElement),Yl(ve.crudPolicyJson.idValue,JSON.parse(oo.getValue()),()=>{ve.crudPolicyJson.toggleEdit(!1),zi(ve.crudPolicyJson.idValue)})}function Vy(){Yl(ve.crudPolicyJson.idValue,JSON.parse(oo.getValue()),Ae(ve.crudPolicyJson,1))}async function Gy(){Ke(`Are you sure you want to delete policy<br>'${ve.crudPolicyJson.idValue}'?`,"Delete",()=>{Yl(ve.crudPolicyJson.idValue,null,()=>{e(ve.crudPolicyJson.idValue),_o(null)})});async function e(t){let r=Q().recentPolicyIds.indexOf(t);r>=0&&Q().recentPolicyIds.splice(r,1),await ie(!1,"recentPolicyIds")}}function Yl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${e}`,t).then(r)}function mm(e){ve.crudPolicyJson.idValue=e&&e.policyId,e?oo.setValue(JSON.stringify(e,null,2),-1):oo.setValue("")}var Xl={resources:{"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]},"policy:/":{grant:["READ","WRITE"],revoke:[]}}};var Ie,zt={tbodyPolicyResources:null,selectResourceTemplates:null,tableValidationResources:null,crudResource:null},Ze;function gm(){ht(zt),Tn.addChangeListener(ex),dr(zt.tbodyPolicyResources,zt.tableValidationResources),Ze=Nt("resourceEditor","ace/mode/json",!0),zt.tbodyPolicyResources.onclick=Jy,zt.crudResource.editDisabled=!0,zt.crudResource.addEventListener("onCreateClick",qy),zt.crudResource.addEventListener("onUpdateClick",Qy),zt.crudResource.addEventListener("onDeleteClick",Zy),zt.crudResource.addEventListener("onEditToggle",tx),Ge(zt.selectResourceTemplates,["Select a resource template",...Object.keys(Xl.resources)]),zt.selectResourceTemplates.addEventListener("change",Xy)}function Xy(e){zt.crudResource.idValue=e.target.value,Ze.setValue(JSON.stringify(Xl.resources[e.target.value],null,2),-1)}function Jy(e){Ie===e.target.parentNode.id?(Ie=null,zt.crudResource.idValue=null,Ze.setValue("")):(Ie=e.target.parentNode.id,zt.crudResource.idValue=Ie,Ze.setValue(JSON.stringify($t.entries[Kt].resources[Ie],null,2),-1)),zt.crudResource.idValue=Ie}function qy(){ro(),lt(zt.crudResource.idValue,"Please enter a resource",zt.crudResource.validationElement),lt(!Object.keys($t.entries[Kt].resources).includes(zt.crudResource.idValue),"Resource already exists",zt.crudResource.validationElement),Ie=zt.crudResource.idValue,Jl(zt.crudResource.idValue,Ze.getValue()!==""?JSON.parse(Ze.getValue()):{grant:["READ","WRITE"],revoke:[]},Ae(zt.crudResource,0))}function Qy(){ro(),lt(Ie,"Please select a resource",zt.tableValidationResources),Jl(Ie,JSON.parse(Ze.getValue()),Ae(zt.crudResource,1))}function Zy(){ro(),lt(Ie,"Please select a resource",zt.tableValidationResources),Jl(Ie,null,Ae(zt.crudResource,2))}function Jl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${Kt}/resources/${e}`,t).then(r)}function tx(e){zt.selectResourceTemplates.disabled=!e.detail.isEditing,zt.selectResourceTemplates.selectedIndex=0,Ze.setReadOnly(!e.detail.isEditing),Ze.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(zt.crudResource.idValue=Ie,$t&&Kt&&Ie?Ze.setValue(JSON.stringify($t.entries[Kt].resources[Ie],null,2),-1):Ze.setValue(""))}function ex(e){Ie=null,zt.tbodyPolicyResources.textContent="",zt.crudResource.idValue=null,Ze.setValue(""),zt.crudResource.editDisabled=e===null,$t&&e&&Object.keys($t.entries[e].resources).forEach(t=>{Ut(zt.tbodyPolicyResources,t,t===Ie,null,JSON.stringify($t.entries[e].resources[t])),t===Ie&&(zt.crudResource.idValue=t,Ze.setValue(JSON.stringify($t.entries[e].resources[t],null,2),-1))})}var Fe,Yt={tbodyPolicySubjects:null,tableValidationSubjects:null,crudSubject:null},hr;function hm(){ht(Yt),Tn.addChangeListener(lx),dr(Yt.tbodyPolicySubjects,Yt.tableValidationSubjects),hr=Nt("subjectEditor","ace/mode/json",!0),Yt.tbodyPolicySubjects.onclick=ox,Yt.crudSubject.editDisabled=!0,Yt.crudSubject.addEventListener("onCreateClick",ix),Yt.crudSubject.addEventListener("onUpdateClick",nx),Yt.crudSubject.addEventListener("onDeleteClick",ax),Yt.crudSubject.addEventListener("onEditToggle",sx)}function ox(e){let t=e.target;Fe===t.parentElement.id?(Fe=null,hr.setValue("")):(Fe=t.parentElement.id,hr.setValue(JSON.stringify($t.entries[Kt].subjects[Fe],null,2),-1)),Yt.crudSubject.idValue=Fe}function ix(){ro(),lt(Yt.crudSubject.idValue,"Please enter a subject or select one above",Yt.crudSubject.validationElement),lt(!Object.keys($t.entries[Kt].subjects).includes(Yt.crudSubject.idValue),"Subject already exists",Yt.crudSubject.validationElement),Fe=Yt.crudSubject.idValue,ql(Yt.crudSubject.idValue,hr.getValue()!==""?JSON.parse(hr.getValue()):{type:"generated"},Ae(Yt.crudSubject,0))}function ql(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${Kt}/subjects/${e}`,t).then(r)}function nx(){ro(),lt(Fe,"Please select a subject",Yt.tableValidationSubjects),ql(Fe,JSON.parse(hr.getValue()),Ae(Yt.crudSubject,1))}function ax(){ro(),lt(Fe,"Please select a subject",Yt.tableValidationSubjects),ql(Fe,null,Ae(Yt.crudSubject,2))}function sx(e){hr.setReadOnly(!e.detail.isEditing),hr.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(Yt.crudSubject.idValue=Fe,$t&&Kt&&Fe?hr.setValue(JSON.stringify($t.entries[Kt].subjects[Fe],null,2),-1):hr.setValue(""))}function lx(e){Fe=null,Yt.tbodyPolicySubjects.textContent="",Yt.crudSubject.idValue=null,Yt.crudSubject.editDisabled=e===null,hr.setValue(""),$t&&e&&Object.keys($t.entries[e].subjects).forEach(t=>{Ut(Yt.tbodyPolicySubjects,t,t===Fe,null,JSON.stringify($t.entries[e].subjects[t])),t===Fe&&(Yt.crudSubject.idValue=t,hr.setValue(JSON.stringify($t.entries[e].subjects[t],null,2),-1))})}var Wt={tbodyAttributes:null,crudAttribute:null,badgeAttributeCount:null},bm,io;function fm(){Ce(gx),ht(Wt),Wt.tbodyAttributes.onclick=mx,Wt.crudAttribute.addEventListener("onCreateClick",cx),Wt.crudAttribute.addEventListener("onUpdateClick",px),Wt.crudAttribute.addEventListener("onDeleteClick",ux),Wt.crudAttribute.addEventListener("onEditToggle",bx),io=Nt("attributeEditor","ace/mode/json",!0),document.querySelector('a[data-bs-target="#tabCrudAttribute"]').addEventListener("shown.bs.tab",e=>{io.renderer.updateFull()})}function cx(){lt(Wt.crudAttribute.idValue,"Attribute path must not be empty",Wt.crudAttribute.validationElement),lt(!St.attributes||!Object.keys(St.attributes).includes(Wt.crudAttribute.idValue),`Attribute path ${Wt.crudAttribute.idValue} already exists in Thing`,Wt.crudAttribute.validationElement),Ql("PUT",!0)}function px(){Ql("PUT")}function ux(){Ke(`Are you sure you want to delete attribute<br>'${Wt.crudAttribute.idValue}'?`,"Delete",()=>{Ql("DELETE")})}function mx(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode.children[0].innerText;Wt.crudAttribute.idValue===t?An(null):An(St,t)}}function Ql(e,t=!1){let r=JSON.parse(io.getValue());xt(e,`/things/${St.thingId}/attributes/${Wt.crudAttribute.idValue}`,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?bm:"*"}).then(()=>{e==="PUT"&&Wt.crudAttribute.toggleEdit(),xr(St.thingId)})}function An(e,t=null){Wt.crudAttribute.isEditing||(e?(Wt.crudAttribute.idValue=t,e.attributes&&io.setValue(Tt(e.attributes[t]),-1)):(Wt.crudAttribute.idValue=null,io.setValue("")))}function gx(e){Wt.crudAttribute.editDisabled=e===null,Wt.tbodyAttributes.textContent="";let t=0,r=!1;e&&e.attributes&&Object.keys(St.attributes).forEach(s=>{s===Wt.crudAttribute.idValue&&(An(St,s),r=!0),Ut(Wt.tbodyAttributes,s,s===Wt.crudAttribute.idValue,null,hx(St.attributes[s])),t++}),Wt.badgeAttributeCount.innerText=t>0?t:"",r||An(null)}function hx(e){return typeof e=="object"?JSON.stringify(e):e.toString()}function bx(e){let t=e.detail.isEditing;t&&Wt.crudAttribute.idValue&&Wt.crudAttribute.idValue!==""?xt("GET",`/things/${St.thingId}/attributes/${Wt.crudAttribute.idValue}`,null,null,!0).then(s=>(bm=s.headers.get("ETag").replace("W/",""),s.json())).then(s=>{r(),io.setValue(Tt(s),-1)}):(r(),An(St,Wt.crudAttribute.idValue),St.attributes&&io.setValue(Tt(St.attributes[Wt.crudAttribute.idValue]),-1));function r(){io.setReadOnly(!t),io.renderer.setShowGutter(t)}}var vm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonMessageSend" disabled>
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayload"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponse"></div>
            </div>
        </div>

    </div>
</div>`;var wm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseFeatures">
    Features <span class="badge rounded-pill bg-info" id="badgeFeatureCount"></span></h5>
<hr />
<div class="collapse show" id="collapseFeatures">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationFeature" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyFeatures"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill" id="tabItemsFeatures">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudFeature">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentFeatures">
                <div class="tab-pane container active no-margin" id="tabCrudFeature">
                    <crud-toolbar id="crudFeature" label="Feature ID">
                        <div class="input-group input-group-sm mb-1">
                            <label class="input-group-text">Definition</label>
                            <input type="text" class="form-control" id="inputFeatureDefinition" disabled></input>
                        </div>
                        <div class="input-group input-group-sm mb-1" style="flex-grow: 1; display: flex;">
                            <label class="input-group-text">Properties<br>and<br>Desired<br>Properties</label>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featurePropertiesEditor"></div>
                            </div>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featureDesiredPropertiesEditor"></div>
                            </div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>`;var ym=[];document.getElementById("featuresHTML").innerHTML=wm;function ja(e){ym.push(e)}function yx(){ym.forEach(e=>e.call(null,At.crudFeature.idValue))}var br,no,xm,At={crudFeature:null,inputFeatureDefinition:null,badgeFeatureCount:null,tbodyFeatures:null,tableValidationFeature:null};function km(){Ce(Cx),ht(At),dr(At.tbodyFeatures,At.tableValidationFeature),At.tbodyFeatures.onclick=Sx,At.crudFeature.editDisabled=!0,At.crudFeature.addEventListener("onCreateClick",Ex),At.crudFeature.addEventListener("onUpdateClick",xx),At.crudFeature.addEventListener("onDeleteClick",kx),At.crudFeature.addEventListener("onEditToggle",Tx),br=Nt("featurePropertiesEditor","ace/mode/json",!0),no=Nt("featureDesiredPropertiesEditor","ace/mode/json",!0),br.on("dblclick",_x),document.querySelector('a[data-bs-target="#tabCrudFeature"]').addEventListener("shown.bs.tab",e=>{br.renderer.updateFull(),no.renderer.updateFull()})}function xx(){td("PUT")}function kx(){Ke(`Are you sure you want to delete feature<br>'${At.crudFeature.idValue}'?`,"Delete",()=>{td("DELETE")})}function _x(e){e.domEvent.shiftKey&&setTimeout(()=>{let t=br.getSelectedText();if(t){let r="$.."+t.replace(/['"]+/g,"").trim(),s=Rt({json:JSON.parse(br.getValue()),path:r,resultType:"pointer"});qp("features/"+At.crudFeature.idValue+"/properties"+s)}},10)}function Ex(){lt(At.crudFeature.idValue,"Feature ID must not be empty",At.crudFeature.validationElement),lt(!St.features||!Object.keys(St.features).includes(At.crudFeature.idValue),`Feature ID ${At.crudFeature.idValue} already exists in Thing`,At.crudFeature.validationElement),td("PUT",!0)}function Sx(e){e.target&&e.target.nodeName==="TD"&&(At.crudFeature.idValue===e.target.textContent?Hi(null):Hi(St,e.target.textContent))}function td(e,t=!1){lt(St,"No Thing selected"),lt(At.crudFeature.idValue,"No Feature selected");let r={},s=br.getValue(),p=no.getValue();At.inputFeatureDefinition.value&&(r.definition=At.inputFeatureDefinition.value.split(",")),s&&(r.properties=JSON.parse(s)),p&&(r.desiredProperties=JSON.parse(p)),xt(e,"/things/"+St.thingId+"/features/"+At.crudFeature.idValue,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?xm:"*"}).then(()=>{e==="PUT"&&At.crudFeature.toggleEdit(),xr(St.thingId)}).catch()}function Zl(e){e?(At.inputFeatureDefinition.value=e.definition?e.definition:null,e.properties?br.setValue(Tt(e.properties),-1):br.setValue(""),e.desiredProperties?no.setValue(Tt(e.desiredProperties),-1):no.setValue("")):(At.inputFeatureDefinition.value=null,br.setValue(""),no.setValue("")),br.session.getUndoManager().reset(),no.session.getUndoManager().reset()}function Hi(e,t=null){At.crudFeature.isEditing||(e&&e.features&&t?(At.crudFeature.idValue=t,Zl(e.features[t])):(At.crudFeature.idValue=null,Zl(null)),yx())}function Cx(e){At.crudFeature.editDisabled=e===null,At.tbodyFeatures.textContent="";let t=0,r=!1;if(e&&e.features)for(let s of Object.keys(e.features))s===At.crudFeature.idValue&&(Hi(e,s),r=!0),Ut(At.tbodyFeatures,s,s===At.crudFeature.idValue),t++;At.badgeFeatureCount.textContent=t>0?t:"",r||Hi(e,null)}function Tx(e){let t=e.detail.isEditing;t&&At.crudFeature.idValue&&At.crudFeature.idValue!==""?xt("GET",`/things/${St.thingId}/features/${At.crudFeature.idValue}`,null,null,!0).then(p=>(xm=p.headers.get("ETag").replace("W/",""),p.json())).then(p=>{r(),Zl(p)}):(r(),s(),At.crudFeature.validationElement.classList.remove("is-invalid"));function r(){At.inputFeatureDefinition.disabled=!t,br.setReadOnly(!t),br.renderer.setShowGutter(t),no.setReadOnly(!t),no.renderer.setShowGutter(t)}function s(){At.crudFeature.idValue?Hi(St,At.crudFeature.idValue):Hi(null)}}var Tr,_t={inputMessageSubject:null,inputMessageTimeout:null,inputMessageTemplate:null,buttonMessageSend:null,buttonMessageFavorite:null,ulMessageTemplates:null,favIconMessage:null,tableValidationFeature:null},Cr,Ln;async function Em(){Ye(Lx),ja($x),Li(document.getElementById("tabItemsFeatures"),document.getElementById("tabContentFeatures"),"Send Message",vm),ht(_t),Cr=Nt("acePayload","ace/mode/json"),Ln=Nt("aceResponse","ace/mode/json",!0),_t.buttonMessageSend.onclick=()=>{lt(Tr,"Please select a Feature",_t.tableValidationFeature),lt(_t.inputMessageSubject.value,"Please give a Subject",_t.inputMessageSubject),lt(_t.inputMessageTimeout.value,"Please give a timeout",_t.inputMessageTimeout),_t.buttonMessageSend.classList.add("busy"),_t.buttonMessageSend.disabled=!0,Ax()},_t.buttonMessageFavorite.onclick=async()=>{let e=_t.inputMessageTemplate.value,t=Tr,r=Cr.getValue();lt(t,"Please select a Feature",_t.tableValidationFeature),lt(e,"Please give a name for the template",_t.inputMessageTemplate),Q().messageTemplates[t]=Q().messageTemplates[t]||{},Object.keys(Q().messageTemplates[t]).includes(e)&&_t.favIconMessage.classList.contains("bi-star-fill")?(_t.favIconMessage.classList.replace("bi-star-fill","bi-star"),delete Q().messageTemplates[t][e]):(_t.favIconMessage.classList.replace("bi-star","bi-star-fill"),Q().messageTemplates[t][e]={subject:_t.inputMessageSubject.value,timeout:_t.inputMessageTimeout.value,...r&&{payload:JSON.parse(r)}},Cr.session.getUndoManager().markClean()),await ie(!1,"messageTemplates")},_t.ulMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){_t.favIconMessage.classList.replace("bi-star","bi-star-fill");let t=Q().messageTemplates[Tr][e.target.textContent];_t.inputMessageTemplate.value=e.target.textContent,_t.inputMessageSubject.value=t.subject,_t.inputMessageTimeout.value=t.timeout,Cr.setValue(Tt(t.payload),-1),Cr.session.getUndoManager().markClean()}}),[_t.inputMessageTemplate,_t.inputMessageSubject,_t.inputMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{_t.favIconMessage.classList.replace("bi-star-fill","bi-star")})}),Cr.on("input",()=>{Cr.session.getUndoManager().isClean()||_t.favIconMessage.classList.replace("bi-star-fill","bi-star")})}function Ax(){let e;Cr&&Cr.getValue().length>0?e=JSON.parse(Cr.getValue()):e=null,Ln.setValue(""),xt("POST","/things/"+St.thingId+"/features/"+Tr+"/inbox/messages/"+_t.inputMessageSubject.value+"?timeout="+_t.inputMessageTimeout.value,e,null,!1,!1,!0).then(t=>{_t.buttonMessageSend.classList.remove("busy"),_t.buttonMessageSend.disabled=!1,_t.inputMessageTimeout.value>0&&Ln.setValue(Tt(t),-1)}).catch(t=>{_t.buttonMessageSend.classList.remove("busy"),_t.buttonMessageSend.disabled=!1,Ln.setValue(`Error: ${t}`)})}function Lx(e){Q().messageTemplates=Q().messageTemplates||{},e||Sm(),e==="messageTemplates"&&Cm()}function Sm(){_t.favIconMessage.classList.replace("bi-star-fill","bi-star"),_t.inputMessageTemplate.value=null,_t.inputMessageSubject.value=null,_t.inputMessageTimeout.value="10",Cr.setValue(""),Ln.setValue(""),_t.ulMessageTemplates.textContent="",_t.buttonMessageSend.disabled=!Tr||Tr===""}function Cm(){_t.ulMessageTemplates.textContent="",Vo(_t.ulMessageTemplates,"Saved message templates",!0),Tr&&Q().messageTemplates[Tr]&&vo(_t.ulMessageTemplates,Object.keys(Q().messageTemplates[Tr]))}function $x(e){e!==Tr&&(Tr=e,Sm(),Cm())}var Tm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseMessages">
    Incoming Thing Updates <span class="badge rounded-pill bg-info" id="badgeMessageIncomingCount"></span></h5>
<hr />
<div class="collapse" id="collapseMessages">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-7 resizable_flex_column">
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetMessagesIncoming"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
            </div>
            <table-filter id="tableFilterMessagesIncoming"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Revision</th>
                            <th>Action</th>
                            <th>Path</th>
                            <th>Field(s)</th>
                            <th>Modified</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyMessagesIncoming"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-5 resizable_flex_column">
            <h6>Thing Update Detail</h6>
            <div class="input-group input-group-sm mb-1 mt-1">
                <label class="input-group-text" for="selectThingUpdateMessageContent">Show</label>
                <select class="form-select form-select-sm" id="selectThingUpdateMessageContent">
                    <option value="ONLY_CONTEXT" selected>Only context</option>
                    <option value="ONLY_CONTEXT_WITH_METADATA">Only context with metadata</option>
                    <option value="FULL_THING">Only full Thing JSON</option>
                    <option value="FULL_THING_WITH_CONTEXT">Full Thing JSON with context and metadata</option>
                </select>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="messageIncomingDetail"></div>
            </div>
        </div>
    </div>
</div>`;var ze={badgeMessageIncomingCount:null,buttonResetMessagesIncoming:null,selectThingUpdateMessageContent:null,tbodyMessagesIncoming:null,tableFilterMessagesIncoming:null},$n=[],Ar=[],ji,Eo,Am,Lm="ONLY_CONTEXT";document.getElementById("messagesIncomingHTML").innerHTML=Tm;function $m(){Sa(Dx),Ce(Px),ht(ze),Eo=Nt("messageIncomingDetail","ace/mode/json",!0),ze.buttonResetMessagesIncoming.onclick=Mm,ze.selectThingUpdateMessageContent.onchange=Ox,ze.tbodyMessagesIncoming.addEventListener("click",Ix),ze.tableFilterMessagesIncoming.addEventListener("filterChange",Nx),ze.tableFilterMessagesIncoming.filterOptions=Om()}function Ix(e){ji=e.target.parentNode.rowIndex-1,Rm(),Eo.session.getUndoManager().reset()}function Rm(){switch(Lm){case"FULL_THING_WITH_CONTEXT":{Eo.setValue(Tt(Ar[ji]),-1);break}case"FULL_THING":{let t=Object.entries(Ar[ji]).filter(([s,p])=>!s.startsWith("_")),r=Object.fromEntries(t);Eo.setValue(Tt(r),-1);break}case"ONLY_CONTEXT_WITH_METADATA":{let t=Object.entries(Ar[ji]).filter(([s,p])=>s.startsWith("_")),r=Object.fromEntries(t);Eo.setValue(Tt(r),-1);break}case"ONLY_CONTEXT":{let t=Object.entries(Ar[ji]).filter(([s,p])=>s.startsWith("_")).filter(([s,p])=>s!=="_metadata"),r=Object.fromEntries(t);Eo.setValue(Tt(r),-1);break}default:Eo.setValue(Tt(Ar[ji]),-1)}}function Mm(){$n=[],Ar=[],ze.badgeMessageIncomingCount.textContent="",ze.tbodyMessagesIncoming.textContent="",Eo.setValue("")}function Ox(){Lm=ze.selectThingUpdateMessageContent.value,Rm()}function Dx(e){$n.push(e);let t=ze.tableFilterMessagesIncoming.filterItems([e]);t.length>0&&(Ar.push(t[0]),Im(t[0])),bn(ze.badgeMessageIncomingCount,$n,Ar)}function Im(e){let t=e._context.topic.substring(e._context.topic.lastIndexOf("/")+1);Ut(ze.tbodyMessagesIncoming,e._revision,!1,null,t,e._context.path,r(t).join(`
`),hn(e._modified,!0));function r(s){return s==="deleted"?[]:e._context?.value?[...e._context.value.features?Object.keys(e._context.value.features):[],...e._context.value.attributes?Object.keys(e._context.value.attributes):[]]:[...e.features?Object.keys(e.features):[],...e.attributes?Object.keys(e.attributes):[]]}}function Px(e){(!e||e.thingId!==Am)&&(Am=e?e.thingId:null,Mm(),ze.tableFilterMessagesIncoming.filterOptions=Om(e))}function Om(e){let t=[];return["created","modified","merged","deleted"].forEach(r=>t.push(new Ne(0,`/${r}`,"_context.topic","Action"))),e&&["features","attributes"].forEach(r=>{e[r]&&Object.keys(e[r]).forEach(s=>{t.push(new Ne(0,`/${r}/${s}`,"_context.path","Path"))})}),t}function Nx(e){ze.tbodyMessagesIncoming.textContent="",Ar=ze.tableFilterMessagesIncoming.filterItems($n),Ar.forEach(t=>Im(t)),bn(ze.badgeMessageIncomingCount,$n,Ar)}var Dm=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputThingMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputThingMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonThingMessageSend">
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonThingMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconThingMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulThingMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputThingMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayloadThingMessage"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponseThingMessage"></div>
            </div>
        </div>

    </div>
</div>`;var Ct={inputThingMessageSubject:null,inputThingMessageTimeout:null,inputThingMessageTemplate:null,buttonThingMessageSend:null,buttonThingMessageFavorite:null,ulThingMessageTemplates:null,favIconThingMessage:null},Lr,Rn;async function Pm(){Ye(Ux),Ce(jx),Li(document.getElementById("tabItemsThing"),document.getElementById("tabContentThing"),"Send Message",Dm),ht(Ct),Lr=Nt("acePayloadThingMessage","ace/mode/json"),Rn=Nt("aceResponseThingMessage","ace/mode/json",!0),Ct.buttonThingMessageSend.onclick=()=>{lt(Ct.inputThingMessageSubject.value,"Please give a Subject",Ct.inputThingMessageSubject),lt(Ct.inputThingMessageTimeout.value,"Please give a timeout",Ct.inputThingMessageTimeout),Ct.buttonThingMessageSend.classList.add("busy"),Ct.buttonThingMessageSend.disabled=!0,Bx()},Ct.buttonThingMessageFavorite.onclick=async()=>{let e=Ct.inputThingMessageTemplate.value,t=Lr.getValue();lt(e,"Please give a name for the template",Ct.inputThingMessageTemplate),Q().messageTemplates["/"]=Q().messageTemplates["/"]||{},Object.keys(Q().messageTemplates["/"]).includes(e)&&Ct.favIconThingMessage.classList.contains("bi-star-fill")?(Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),delete Q().messageTemplates["/"][e]):(Ct.favIconThingMessage.classList.replace("bi-star","bi-star-fill"),Q().messageTemplates["/"][e]={subject:Ct.inputThingMessageSubject.value,timeout:Ct.inputThingMessageTimeout.value,...t&&{payload:JSON.parse(t)}},Lr.session.getUndoManager().markClean()),await ie(!1,"messageTemplates")},Ct.ulThingMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){Ct.favIconThingMessage.classList.replace("bi-star","bi-star-fill");let t=Q().messageTemplates["/"][e.target.textContent];Ct.inputThingMessageTemplate.value=e.target.textContent,Ct.inputThingMessageSubject.value=t.subject,Ct.inputThingMessageTimeout.value=t.timeout,Lr.setValue(Tt(t.payload),-1),Lr.session.getUndoManager().markClean()}}),[Ct.inputThingMessageTemplate,Ct.inputThingMessageSubject,Ct.inputThingMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}),Lr.on("input",()=>{Lr.session.getUndoManager().isClean()||Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}function Bx(){let e;Lr&&Lr.getValue().length>0?e=JSON.parse(Lr.getValue()):e=null,Rn.setValue(""),xt("POST","/things/"+St.thingId+"/inbox/messages/"+Ct.inputThingMessageSubject.value+"?timeout="+Ct.inputThingMessageTimeout.value,e,null,!1,!1,!0).then(t=>{Ct.buttonThingMessageSend.classList.remove("busy"),Ct.buttonThingMessageSend.disabled=!1,Ct.inputThingMessageTimeout.value>0&&Rn.setValue(Tt(t),-1)}).catch(t=>{Ct.buttonThingMessageSend.classList.remove("busy"),Ct.buttonThingMessageSend.disabled=!1,Rn.setValue(`Error: ${t}`)})}function Ux(e){Q().messageTemplates=Q().messageTemplates||{},e||Nm(),Hx()}function Nm(){Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),Ct.inputThingMessageTemplate.value=null,Ct.inputThingMessageSubject.value=null,Ct.inputThingMessageTimeout.value="10",Lr.setValue(""),Rn.setValue(""),Ct.ulThingMessageTemplates.textContent="",Ct.buttonThingMessageSend.disabled=St===null}function Hx(){Ct.ulThingMessageTemplates.textContent="",Vo(Ct.ulThingMessageTemplates,"Saved message templates",!0),Q().messageTemplates["/"]&&vo(Ct.ulThingMessageTemplates,Object.keys(Q().messageTemplates["/"]))}function jx(e,t){(!e||t)&&Nm()}var ed={"(empty thing)":{},"WoT ThingModel 'floor-lamp' 1.0.0":{definition:"https://eclipse-ditto.github.io/ditto-examples/wot/models/floor-lamp-1.0.0.tm.jsonld"},"com.acme:coffeebrewer:0.1.0":{definition:"com.acme:coffeebrewer:0.1.0",attributes:{manufacturer:"ACME demo corp.",location:"Berlin, main floor",serialno:"42",model:"Speaking coffee machine"},features:{"coffee-brewer":{definition:["com.acme:coffeebrewer:0.1.0"],properties:{"brewed-coffees":0}},"water-tank":{properties:{configuration:{smartMode:!0,brewingTemp:87,tempToHold:44,timeoutSeconds:6e3},status:{waterAmount:731,temperature:44}}}}}};var tr,Fm,Ot={tbodyThingDetails:null,crudThings:null,buttonThingDefinitions:null,inputThingDefinition:null,ulThingDefinitions:null};async function zm(){Ce(Jx),ht(Ot),tr=Nt("thingJsonEditor","ace/mode/json",!0),vo(Ot.ulThingDefinitions,Object.keys(ed)),Ot.ulThingDefinitions.addEventListener("click",Xx),Ot.crudThings.addEventListener("onCreateClick",Yx),Ot.crudThings.addEventListener("onUpdateClick",Kx),Ot.crudThings.addEventListener("onDeleteClick",Gx),Ot.crudThings.addEventListener("onEditToggle",qx),document.querySelector('a[data-bs-target="#tabModifyThing"]').addEventListener("shown.bs.tab",e=>{tr.renderer.updateFull()})}function Gx(){Ke(`Are you sure you want to delete thing<br>'${Ot.crudThings.idValue}'?`,"Delete",()=>{xt("DELETE",`/things/${Ot.crudThings.idValue}`,null,{"if-match":"*"}).then(()=>{ka()})})}function Kx(){xt("PATCH",`/things/${Ot.crudThings.idValue}`,JSON.parse(tr.getValue()),{"if-match":Fm||"*","if-equal":"skip-minimizing-merge"}).then(()=>{Ot.crudThings.toggleEdit(),xr(Ot.crudThings.idValue,null)})}async function Yx(){let e=tr.getValue();Ot.crudThings.idValue!==void 0&&Ot.crudThings.idValue!==""?xt("PUT","/things/"+Ot.crudThings.idValue,e===""?{}:JSON.parse(e),{"if-none-match":"*"}).then(t=>{Ot.crudThings.toggleEdit(),xr(t.thingId,()=>{kn([t.thingId])})}):xt("POST","/things",e===""?{}:JSON.parse(e)).then(t=>{Ot.crudThings.toggleEdit(),xr(t.thingId,()=>{kn([t.thingId])})})}function Xx(e){zr(null),Ot.inputThingDefinition.value=e.target.textContent,tr.setValue(Tt(ed[e.target.textContent]),-1)}function Jx(e){if(Ot.crudThings.isEditing)return;t(),r();function t(){Ot.tbodyThingDetails.textContent="",e&&(Ut(Ot.tbodyThingDetails,"thingId",!1,e.thingId,e.thingId),Ut(Ot.tbodyThingDetails,"policyId",!1,e.policyId,e.policyId),Ut(Ot.tbodyThingDetails,"definition",!1,e.definition??" ",e.definition??""),Ut(Ot.tbodyThingDetails,"revision",!1,e._revision,e._revision),Ut(Ot.tbodyThingDetails,"created",!1,e._created,e._created),Ut(Ot.tbodyThingDetails,"modified",!1,e._modified,e._modified))}function r(){if(e){Ot.crudThings.idValue=e.thingId,Ot.inputThingDefinition.value=e.definition??"";let s=JSON.parse(JSON.stringify(e));delete s._revision,delete s._created,delete s._modified,delete s._context,tr.setValue(Tt(s),-1),tr.session.getUndoManager().reset()}else Ot.crudThings.idValue=null,Ot.inputThingDefinition.value=null,tr.setValue(""),tr.session.getUndoManager().reset()}}function qx(e){let t=e.detail.isEditing;t&&St?xt("GET",`/things/${St.thingId}`,null,null,!0).then(m=>(Fm=m.headers.get("ETag").replace("W/",""),m.json())).then(m=>{r(),s(m)}):(r(),p());function r(){Ot.buttonThingDefinitions.disabled=!t,Ot.inputThingDefinition.disabled=!t,tr.setReadOnly(!t),tr.renderer.setShowGutter(t)}function s(m){Ot.inputThingDefinition.value=m.definition??"",tr.setValue(Tt(m),-1)}function p(){Ot.crudThings.idValue&&Ot.crudThings.idValue!==""?xr(Ot.crudThings.idValue,null):(Ot.inputThingDefinition.value=null,tr.setValue(""))}}var Bm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="ace_container" style="flex-grow: 1;">
            <div class="script_editor" id="aceDescription"></div>
        </div>
    </div>
</div>`;function rd(e,t){let r,s,p=!1,m=t,i;return{ready:async()=>{let d=Li(document.getElementById(e.itemsId),document.getElementById(e.contentId),"WoT TD",Bm,"Generated WoT Thing Description. This requires a valid reference to a WoT Thing Model in the "+(t?"Feature":"Thing")+" definition. The Ditto environment must have WoT support enabled.");r=document.querySelector(`a[data-bs-target="#${d}"]`),r.onclick=n;let l=Math.random().toString(36).replace("0.","");document.getElementById("aceDescription").id=l,s=Nt(l,"ace/mode/json",!0)},onReferenceChanged:d=>{m&&(i=d),r&&r.classList.contains("active")?a():p=!0}};function n(){p&&(a(),p=!1)}function a(){let d=m?"/features/"+i:"";s.setValue(""),St&&(!m||i)&&xt("GET","/things/"+St.thingId+d,null,{accept:"application/td+json"}).then(l=>{s.setValue(Tt(l),-1)}).catch()}}var Um=`<!--
  ~ Copyright (c) 2024 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<form class="input-group input-group-sm has-validation mb-1" autocomplete="off">
  <label class="input-group-text" hidden>Filter</label>
  <div class="btn-group dropend">
      <button type="button" class="btn btn-outline-secondary btn-sm dropdown-toggle"
          data-bs-toggle="dropdown" aria-expanded="false"></button>
      <ul id="ulFilterOptions" class="dropdown-menu">
          <input type="text" name="dropdown" class="form-control form-control-sm" placeholder="Filter entries..." spellcheck="false" autocomplete="off">
      </ul>                                    
  </div>
  <input autocomplete="false" name="hidden" type="text" style="display:none;">
  <input type="search" name="main" class="form-control form-control-sm me-1"
    placeholder="Add basic filter..." autocomplete="off" spellcheck="false"></input>
  <div class="form-check form-switch">
    <input class="form-check-input mt-2" type="checkbox" role="switch"
        data-bs-toggle="tooltip" title="Toggle advanced search">
  </div>
  <div class="invalid-feedback"></div>
</form>
<div data-bs-theme="dark">
</div>

`;var od=class extends HTMLElement{constructor(){super();this.basicFilters=new En;this.mode=0;this.basicFilters.onFilterChange=this}connectedCallback(){this.innerHTML=Um,this.mainInput=this.querySelector('input[name="main"]'),this.mainInput.addEventListener("keyup",this.mainInputChangedCallback(this)),this.mainInput.addEventListener("search",this.mainInputChangedCallback(this)),this.dropDownInput=this.querySelector('input[name="dropdown"]'),this.dropDownInput.addEventListener("keyup",this.filterDropdown(this)),this.dropDownInput.addEventListener("search",this.filterDropdown(this)),this.querySelector("button").addEventListener("click",this.onDropDownToggle(this)),this.querySelector("ul").addEventListener("click",this.filterSelectedCallback(this)),this.querySelector('input[role="switch"').addEventListener("click",this.toggleModeCallback(this))}set filterOptions(r){let s=this.querySelector("ul"),p=s.firstElementChild;s.replaceChildren(p),r.forEach(m=>{Vo(s,m.toString(),!1,JSON.stringify(m))})}get filter(){return this.validatedFilter}filterItems(r){let s=r;if(this.validatedFilter)try{s=Rt({path:this.validatedFilter,json:r})}catch(p){console.log(p.message)}return s}fillUIChips(){let r=this.querySelector('[data-bs-theme="dark"]');r.textContent="",this.basicFilters.getAllUIs().forEach(s=>r.appendChild(s))}toggleModeCallback(r){return s=>{switch(r.mode){case 0:r.mainInput.value=r.filter,r.mainInput.placeholder="Enter JSONPath to filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!0,r.mode=1;break;case 1:r.mainInput.value="",r.mainInput.placeholder="Add basic filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!1,r.mode=0,this.basicFilters.clear(),this.filterChanged()}}}filterSelectedCallback(r){return s=>{let p=s.target;if(p&&p.classList.contains("dropdown-item")){let m=Ne.fromJSON(JSON.parse(p.dataset.value));r.mode===0?r.basicFilters.addOrUpdate(m):r.mainInput.value=new En().addOrUpdate(m).createJsonPath()}r.filterChanged()}}mainInputChangedCallback(r){return s=>{if(s.type==="search"||s.key==="Enter"||s.code==="Enter")switch(r.mode){case 0:r.basicFilters.addFromString(r.mainInput.value),r.filterChanged(),r.mainInput.value="";break;case 1:try{let p=Rt({path:r.mainInput.value,json:[{_context:{topic:"test",path:"test"}}]});r.filterChanged()}catch(p){lt(!1,p.message,r.mainInput)}}}}filterDropdown(r){return s=>{r.querySelectorAll(".dropdown-menu li").forEach(p=>{let m=s.target.value.toLowerCase();p.hidden=p.textContent.toLowerCase().indexOf(m)<0})}}filterChanged(){switch(this.mode){case 0:this.validatedFilter=this.basicFilters.createJsonPath(),this.fillUIChips();break;case 1:this.validatedFilter=this.mainInput.value}this.dispatchEvent(new CustomEvent("filterChange",{composed:!0,detail:{filter:this.validatedFilter}}))}onDropDownToggle(r){return()=>{r.dropDownInput.value="",r.dropDownInput.dispatchEvent(new Event("keyup")),r.dropDownInput.focus()}}};customElements.define("table-filter",od);var id=!1,nd;document.addEventListener("DOMContentLoaded",async function(){Tp(),await ru(),await su(),await zm(),await Pm(),await ou(),$m(),fm(),await Qp(),await mu(),km(),await Em(),am(),um(),dm(),sm(),hm(),gm(),$u(),Mu(),await Ou(),await rm(),Eu(),await Bp(),await Zu(),await zu();let e=rd({itemsId:"tabItemsThing",contentId:"tabContentThing"},!1);Ce(e.onReferenceChanged),await e.ready();let t=rd({itemsId:"tabItemsFeatures",contentId:"tabContentFeatures"},!0);ja(t.onReferenceChanged),await t.ready(),new Ir(document.querySelector(".dropdown-toggle"),{popperConfig:{strategy:"fixed"}}),nd=document.getElementById("mainNavbar"),nd.querySelectorAll(".nav-link").forEach(m=>{m.addEventListener("click",i=>{nd.querySelectorAll(".nav-link,.active").forEach(u=>u.classList.remove("active")),i.currentTarget.classList.add("active")})}),document.querySelectorAll(".table").forEach(m=>{m.addEventListener("click",i=>{let u=i.target;u&&u.tagName==="TD"&&(Array.from(u.parentNode.parentNode.children).forEach(o=>{o!==u.parentNode&&o.classList.remove("table-active")}),u.parentElement.classList.toggle("table-active"))})});let r=new ResizeObserver(()=>{id=!0});document.querySelectorAll(".resizable_pane").forEach(m=>{r.observe(m),m.addEventListener("mouseup",()=>{id&&(window.dispatchEvent(new Event("resize")),id=!1)})});let{get:s,set:p}=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");document.querySelectorAll("input").forEach(m=>{m.addEventListener("change",i=>{i.target.classList.remove("is-invalid")}),Object.defineProperty(m,"value",{get(){return s.call(this)},set(i){return m.classList.remove("is-invalid"),p.call(this,i)}})})});})();
/*! Bundled license information:

event-source-polyfill/src/eventsource.js:
  (** @license
   * eventsource.js
   * Available under MIT License (MIT)
   * https://github.com/Yaffle/EventSource/
   *)

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
