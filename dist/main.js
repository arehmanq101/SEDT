(()=>{var Hm=Object.create;var Xa=Object.defineProperty;var jm=Object.getOwnPropertyDescriptor;var Wm=Object.getOwnPropertyNames;var Vm=Object.getPrototypeOf,Gm=Object.prototype.hasOwnProperty;var Mn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Km=(e,t)=>{for(var r in t)Xa(e,r,{get:t[r],enumerable:!0})},Ym=(e,t,r,d)=>{if(t&&typeof t=="object"||typeof t=="function")for(let p of Wm(t))!Gm.call(e,p)&&p!==r&&Xa(e,p,{get:()=>t[p],enumerable:!(d=jm(t,p))||d.enumerable});return e};var In=(e,t,r)=>(r=e!=null?Hm(Vm(e)):{},Ym(t||!e||!e.__esModule?Xa(r,"default",{value:e,enumerable:!0}):r,e));var Jc=Mn((Ps,la)=>{(function(e){"use strict";var t=e.setTimeout,r=e.clearTimeout,d=e.XMLHttpRequest,p=e.XDomainRequest,g=e.ActiveXObject,n=e.EventSource,u=e.document,o=e.Promise,i=e.fetch,a=e.Response,l=e.TextDecoder,s=e.TextEncoder,c=e.AbortController;if(typeof window<"u"&&typeof u<"u"&&!("readyState"in u)&&u.body==null&&(u.readyState="loading",window.addEventListener("load",function(U){u.readyState="complete"},!1)),d==null&&g!=null&&(d=function(){return new g("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(U){function X(){}return X.prototype=U,new X}),Date.now||(Date.now=function(){return new Date().getTime()}),c==null){var m=i;i=function(U,X){var at=X.signal;return m(U,{headers:X.headers,credentials:X.credentials,cache:X.cache}).then(function(tt){var ct=tt.body.getReader();return at._reader=ct,at._aborted&&at._reader.cancel(),{status:tt.status,statusText:tt.statusText,headers:tt.headers,body:{getReader:function(){return ct}}}})},c=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function h(){this.bitsNeeded=0,this.codePoint=0}h.prototype.decode=function(U){function X(bt,H,G){if(G===1)return bt>=128>>H&&bt<<H<=2047;if(G===2)return bt>=2048>>H&&bt<<H<=55295||bt>=57344>>H&&bt<<H<=65535;if(G===3)return bt>=65536>>H&&bt<<H<=1114111;throw new Error}function at(bt,H){if(bt===6*1)return H>>6>15?3:H>31?2:1;if(bt===6*2)return H>15?3:2;if(bt===6*3)return 3;throw new Error}for(var tt=65533,ct="",K=this.bitsNeeded,V=this.codePoint,st=0;st<U.length;st+=1){var it=U[st];K!==0&&(it<128||it>191||!X(V<<6|it&63,K-6,at(K,V)))&&(K=0,V=tt,ct+=String.fromCharCode(V)),K===0?(it>=0&&it<=127?(K=0,V=it):it>=192&&it<=223?(K=6*1,V=it&31):it>=224&&it<=239?(K=6*2,V=it&15):it>=240&&it<=247?(K=6*3,V=it&7):(K=0,V=tt),K!==0&&!X(V,K,at(K,V))&&(K=0,V=tt)):(K-=6,V=V<<6|it&63),K===0&&(V<=65535?ct+=String.fromCharCode(V):(ct+=String.fromCharCode(55296+(V-65535-1>>10)),ct+=String.fromCharCode(56320+(V-65535-1&1023))))}return this.bitsNeeded=K,this.codePoint=V,ct};var v=function(){try{return new l().decode(new s().encode("test"),{stream:!0})==="test"}catch(U){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+U)}return!1};(l==null||s==null||!v())&&(l=h);var k=function(){};function x(U){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=k,this.onload=k,this.onerror=k,this.onreadystatechange=k,this._contentType="",this._xhr=U,this._sendTimeout=0,this._abort=k}x.prototype.open=function(U,X){this._abort(!0);var at=this,tt=this._xhr,ct=1,K=0;this._abort=function(G){at._sendTimeout!==0&&(r(at._sendTimeout),at._sendTimeout=0),(ct===1||ct===2||ct===3)&&(ct=4,tt.onload=k,tt.onerror=k,tt.onabort=k,tt.onprogress=k,tt.onreadystatechange=k,tt.abort(),K!==0&&(r(K),K=0),G||(at.readyState=4,at.onabort(null),at.onreadystatechange())),ct=0};var V=function(){if(ct===1){var G=0,rt="",ft=void 0;if("contentType"in tt)G=200,rt="OK",ft=tt.contentType;else try{G=tt.status,rt=tt.statusText,ft=tt.getResponseHeader("Content-Type")}catch{G=0,rt="",ft=void 0}G!==0&&(ct=2,at.readyState=2,at.status=G,at.statusText=rt,at._contentType=ft,at.onreadystatechange())}},st=function(){if(V(),ct===2||ct===3){ct=3;var G="";try{G=tt.responseText}catch{}at.readyState=3,at.responseText=G,at.onprogress()}},it=function(G,rt){if((rt==null||rt.preventDefault==null)&&(rt={preventDefault:k}),st(),ct===1||ct===2||ct===3){if(ct=4,K!==0&&(r(K),K=0),at.readyState=4,G==="load")at.onload(rt);else if(G==="error")at.onerror(rt);else if(G==="abort")at.onabort(rt);else throw new TypeError;at.onreadystatechange()}},bt=function(G){tt!=null&&(tt.readyState===4?(!("onload"in tt)||!("onerror"in tt)||!("onabort"in tt))&&it(tt.responseText===""?"error":"load",G):tt.readyState===3?"onprogress"in tt||st():tt.readyState===2&&V())},H=function(){K=t(function(){H()},500),tt.readyState===3&&st()};"onload"in tt&&(tt.onload=function(G){it("load",G)}),"onerror"in tt&&(tt.onerror=function(G){it("error",G)}),"onabort"in tt&&(tt.onabort=function(G){it("abort",G)}),"onprogress"in tt&&(tt.onprogress=st),"onreadystatechange"in tt&&(tt.onreadystatechange=function(G){bt(G)}),("contentType"in tt||!("ontimeout"in d.prototype))&&(X+=(X.indexOf("?")===-1?"?":"&")+"padding=true"),tt.open(U,X,!0),"readyState"in tt&&(K=t(function(){H()},0))},x.prototype.abort=function(){this._abort(!1)},x.prototype.getResponseHeader=function(U){return this._contentType},x.prototype.setRequestHeader=function(U,X){var at=this._xhr;"setRequestHeader"in at&&at.setRequestHeader(U,X)},x.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},x.prototype.send=function(){if((!("ontimeout"in d.prototype)||!("sendAsBinary"in d.prototype)&&!("mozAnon"in d.prototype))&&u!=null&&u.readyState!=null&&u.readyState!=="complete"){var U=this;U._sendTimeout=t(function(){U._sendTimeout=0,U.send()},4);return}var X=this._xhr;"withCredentials"in X&&(X.withCredentials=this.withCredentials);try{X.send(void 0)}catch(at){throw at}};function A(U){return U.replace(/[A-Z]/g,function(X){return String.fromCharCode(X.charCodeAt(0)+32)})}function S(U){for(var X=Object.create(null),at=U.split(`\r
`),tt=0;tt<at.length;tt+=1){var ct=at[tt],K=ct.split(": "),V=K.shift(),st=K.join(": ");X[A(V)]=st}this._map=X}S.prototype.get=function(U){return this._map[A(U)]},d!=null&&d.HEADERS_RECEIVED==null&&(d.HEADERS_RECEIVED=2);function f(){}f.prototype.open=function(U,X,at,tt,ct,K,V){U.open("GET",ct);var st=0;U.onprogress=function(){var bt=U.responseText,H=bt.slice(st);st+=H.length,at(H)},U.onerror=function(bt){bt.preventDefault(),tt(new Error("NetworkError"))},U.onload=function(){tt(null)},U.onabort=function(){tt(null)},U.onreadystatechange=function(){if(U.readyState===d.HEADERS_RECEIVED){var bt=U.status,H=U.statusText,G=U.getResponseHeader("Content-Type"),rt=U.getAllResponseHeaders();X(bt,H,G,new S(rt))}},U.withCredentials=K;for(var it in V)Object.prototype.hasOwnProperty.call(V,it)&&U.setRequestHeader(it,V[it]);return U.send(),U};function L(U){this._headers=U}L.prototype.get=function(U){return this._headers.get(U)};function $(){}$.prototype.open=function(U,X,at,tt,ct,K,V){var st=null,it=new c,bt=it.signal,H=new l;return i(ct,{headers:V,credentials:K?"include":"same-origin",signal:bt,cache:"no-store"}).then(function(G){return st=G.body.getReader(),X(G.status,G.statusText,G.headers.get("Content-Type"),new L(G.headers)),new o(function(rt,ft){var kt=function(){st.read().then(function(Mt){if(Mt.done)rt(void 0);else{var It=H.decode(Mt.value,{stream:!0});at(It),kt()}}).catch(function(Mt){ft(Mt)})};kt()})}).catch(function(G){if(G.name!=="AbortError")return G}).then(function(G){tt(G)}),{abort:function(){st?.cancel(),it.abort()}}};function C(){this._listeners=Object.create(null)}function T(U){t(function(){throw U},0)}C.prototype.dispatchEvent=function(U){U.target=this;var X=this._listeners[U.type];if(X!=null)for(var at=X.length,tt=0;tt<at;tt+=1){var ct=X[tt];try{typeof ct.handleEvent=="function"?ct.handleEvent(U):ct.call(this,U)}catch(K){T(K)}}},C.prototype.addEventListener=function(U,X){U=String(U);var at=this._listeners,tt=at[U];tt==null&&(tt=[],at[U]=tt);for(var ct=!1,K=0;K<tt.length;K+=1)tt[K]===X&&(ct=!0);ct||tt.push(X)},C.prototype.removeEventListener=function(U,X){U=String(U);var at=this._listeners,tt=at[U];if(tt!=null){for(var ct=[],K=0;K<tt.length;K+=1)tt[K]!==X&&ct.push(tt[K]);ct.length===0?delete at[U]:at[U]=ct}};function w(U){this.type=U,this.target=void 0}function y(U,X){w.call(this,U),this.data=X.data,this.lastEventId=X.lastEventId}y.prototype=Object.create(w.prototype);function b(U,X){w.call(this,U),this.status=X.status,this.statusText=X.statusText,this.headers=X.headers}b.prototype=Object.create(w.prototype);function E(U,X){w.call(this,U),this.error=X.error}E.prototype=Object.create(w.prototype);var _=-1,R=0,M=1,I=2,P=-1,O=0,N=1,D=2,F=3,z=/^text\/event\-stream(;.*)?$/i,W=1e3,j=18e6,Z=function(U,X){var at=U==null?X:parseInt(U,10);return at!==at&&(at=X),Y(at)},Y=function(U){return Math.min(Math.max(U,W),j)},q=function(U,X,at){try{typeof X=="function"&&X.call(U,at)}catch(tt){T(tt)}};function nt(U,X){C.call(this),X=X||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,_t(this,U,X)}function ot(){return d!=null&&"withCredentials"in d.prototype||p==null?new d:new p}var wt=i!=null&&a!=null&&"body"in a.prototype;function _t(U,X,at){X=String(X);var tt=!!at.withCredentials,ct=at.lastEventIdQueryParameterName||"lastEventId",K=Y(1e3),V=Z(at.heartbeatTimeout,45e3),st="",it=K,bt=!1,H=0,G=at.headers||{},rt=at.Transport,ft=wt&&rt==null?void 0:new x(rt!=null?new rt:ot()),kt=rt!=null&&typeof rt!="string"?new rt:ft==null?new $:new f,Mt=void 0,It=0,Pt=_,Dt="",Lt="",Xt="",rr="",he=O,Ui=0,or=0,Le=function(be,se,te,$e){if(Pt===R)if(be===200&&te!=null&&z.test(te)){Pt=M,bt=Date.now(),it=K,U.readyState=M;var we=new b("open",{status:be,statusText:se,headers:$e});U.dispatchEvent(we),q(U,U.onopen,we)}else{var le="";be!==200?(se&&(se=se.replace(/\s+/g," ")),le="EventSource's response has a status "+be+" "+se+" that is not 200. Aborting the connection."):le="EventSource's response has a Content-Type specifying an unsupported type: "+(te==null?"-":te.replace(/\s+/g," "))+". Aborting the connection.",Hi();var we=new b("error",{status:be,statusText:se,headers:$e});U.dispatchEvent(we),q(U,U.onerror,we),console.error(le)}},_o=function(be){if(Pt===M){for(var se=-1,te=0;te<be.length;te+=1){var $e=be.charCodeAt(te);($e===10||$e===13)&&(se=te)}var we=(se!==-1?rr:"")+be.slice(0,se+1);rr=(se===-1?rr:"")+be.slice(se+1),be!==""&&(bt=Date.now(),H+=be.length);for(var le=0;le<we.length;le+=1){var $e=we.charCodeAt(le);if(he===P&&$e===10)he=O;else if(he===P&&(he=O),$e===13||$e===10){if(he!==O){he===N&&(or=le+1);var br=we.slice(Ui,or-1),fr=we.slice(or+(or<le&&we.charCodeAt(or)===32?1:0),le);br==="data"?(Dt+=`
`,Dt+=fr):br==="id"?Lt=fr:br==="event"?Xt=fr:br==="retry"?(K=Z(fr,K),it=K):br==="heartbeatTimeout"&&(V=Z(fr,V),It!==0&&(r(It),It=t(function(){So()},V)))}if(he===O){if(Dt!==""){st=Lt,Xt===""&&(Xt="message");var no=new y(Xt,{data:Dt.slice(1),lastEventId:Lt});if(U.dispatchEvent(no),Xt==="open"?q(U,U.onopen,no):Xt==="message"?q(U,U.onmessage,no):Xt==="error"&&q(U,U.onerror,no),Pt===I)return}Dt="",Xt=""}he=$e===13?P:O}else he===O&&(Ui=le,he=N),he===N?$e===58&&(or=le+1,he=D):he===D&&(he=F)}}},ti=function(be){if(Pt===M||Pt===R){Pt=_,It!==0&&(r(It),It=0),It=t(function(){So()},it),it=Y(Math.min(K*16,it*2)),U.readyState=R;var se=new E("error",{error:be});U.dispatchEvent(se),q(U,U.onerror,se),be!=null&&console.error(be)}},Hi=function(){Pt=I,Mt!=null&&(Mt.abort(),Mt=void 0),It!==0&&(r(It),It=0),U.readyState=I},So=function(){if(It=0,Pt!==_){if(!bt&&Mt!=null)ti(new Error("No activity within "+V+" milliseconds. "+(Pt===R?"No response received.":H+" chars received.")+" Reconnecting.")),Mt!=null&&(Mt.abort(),Mt=void 0);else{var be=Math.max((bt||Date.now())+V-Date.now(),1);bt=!1,It=t(function(){So()},be)}return}bt=!1,H=0,It=t(function(){So()},V),Pt=R,Dt="",Xt="",Lt=st,rr="",Ui=0,or=0,he=O;var se=X;if(X.slice(0,5)!=="data:"&&X.slice(0,5)!=="blob:"&&st!==""){var te=X.indexOf("?");se=te===-1?X:X.slice(0,te+1)+X.slice(te+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(fr,no){return no===ct?"":fr}),se+=(X.indexOf("?")===-1?"?":"&")+ct+"="+encodeURIComponent(st)}var $e=U.withCredentials,we={};we.Accept="text/event-stream";var le=U.headers;if(le!=null)for(var br in le)Object.prototype.hasOwnProperty.call(le,br)&&(we[br]=le[br]);try{Mt=kt.open(ft,Le,_o,ti,se,$e,we)}catch(fr){throw Hi(),fr}};U.url=X,U.readyState=R,U.withCredentials=tt,U.headers=G,U._close=Hi,So()}nt.prototype=Object.create(C.prototype),nt.prototype.CONNECTING=R,nt.prototype.OPEN=M,nt.prototype.CLOSED=I,nt.prototype.close=function(){this._close()},nt.CONNECTING=R,nt.OPEN=M,nt.CLOSED=I,nt.prototype.withCredentials=void 0;var vt=n;d!=null&&(n==null||!("withCredentials"in n.prototype))&&(vt=nt),function(U){if(typeof la=="object"&&typeof la.exports=="object"){var X=U(Ps);X!==void 0&&(la.exports=X)}else typeof define=="function"&&define.amd?define(["exports"],U):U(e)}(function(U){U.EventSourcePolyfill=nt,U.NativeEventSource=n,U.EventSource=vt})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Ps:globalThis)});var hp=Mn((Ks,Ys)=>{var Gs,ma;Gs=Ks,ma=function(){"use strict";function e(_,R){var M=Object.keys(_);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(_);R&&(I=I.filter(function(P){return Object.getOwnPropertyDescriptor(_,P).enumerable})),M.push.apply(M,I)}return M}function t(_){for(var R=1;R<arguments.length;R++){var M=arguments[R]!=null?arguments[R]:{};R%2?e(Object(M),!0).forEach(function(I){d(_,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(M)):e(Object(M)).forEach(function(I){Object.defineProperty(_,I,Object.getOwnPropertyDescriptor(M,I))})}return _}function r(_){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},r(_)}function d(_,R,M){return R in _?Object.defineProperty(_,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):_[R]=M,_}function p(_){return function(R){if(Array.isArray(R))return n(R)}(_)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(_)||g(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(_,R){if(_){if(typeof _=="string")return n(_,R);var M=Object.prototype.toString.call(_).slice(8,-1);return M==="Object"&&_.constructor&&(M=_.constructor.name),M==="Map"||M==="Set"?Array.from(_):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?n(_,R):void 0}}function n(_,R){(R==null||R>_.length)&&(R=_.length);for(var M=0,I=new Array(R);M<R;M++)I[M]=_[M];return I}var u=function(_){return typeof _=="string"?document.querySelector(_):_()},o=function(_,R){var M=typeof _=="string"?document.createElement(_):_;for(var I in R){var P=R[I];if(I==="inside")P.append(M);else if(I==="dest")u(P[0]).insertAdjacentElement(P[1],M);else if(I==="around"){var O=P;O.parentNode.insertBefore(M,O),M.append(O),O.getAttribute("autofocus")!=null&&O.focus()}else I in M?M[I]=P:M.setAttribute(I,P)}return M},i=function(_,R){return _=String(_).toLowerCase(),R?_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):_},a=function(_,R){return o("mark",t({innerHTML:_},typeof R=="string"&&{class:R})).outerHTML},l=function(_,R){R.input.dispatchEvent(new CustomEvent(_,{bubbles:!0,detail:R.feedback,cancelable:!0}))},s=function(_,R,M){var I=M||{},P=I.mode,O=I.diacritics,N=I.highlight,D=i(R,O);if(R=String(R),_=i(_,O),P==="loose"){var F=(_=_.replace(/ /g,"")).length,z=0,W=Array.from(R).map(function(Z,Y){return z<F&&D[Y]===_[z]&&(Z=N?a(Z,N):Z,z++),Z}).join("");if(z===F)return W}else{var j=D.indexOf(_);if(~j)return _=R.substring(j,j+_.length),j=N?R.replace(_,a(_,N)):R}},c=function(_,R){return new Promise(function(M,I){var P;return(P=_.data).cache&&P.store?M():new Promise(function(O,N){return typeof P.src=="function"?P.src(R).then(O,N):O(P.src)}).then(function(O){try{return _.feedback=P.store=O,l("response",_),M()}catch(N){return I(N)}},I)})},m=function(_,R){var M=R.data,I=R.searchEngine,P=[];M.store.forEach(function(N,D){var F=function(j){var Z=j?N[j]:N,Y=typeof I=="function"?I(_,Z):s(_,Z,{mode:I,diacritics:R.diacritics,highlight:R.resultItem.highlight});if(Y){var q={match:Y,value:N};j&&(q.key=j),P.push(q)}};if(M.keys){var z,W=function(j,Z){var Y=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(!Y){if(Array.isArray(j)||(Y=g(j))||Z&&j&&typeof j.length=="number"){Y&&(j=Y);var q=0,nt=function(){};return{s:nt,n:function(){return q>=j.length?{done:!0}:{done:!1,value:j[q++]}},e:function(vt){throw vt},f:nt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ot,wt=!0,_t=!1;return{s:function(){Y=Y.call(j)},n:function(){var vt=Y.next();return wt=vt.done,vt},e:function(vt){_t=!0,ot=vt},f:function(){try{wt||Y.return==null||Y.return()}finally{if(_t)throw ot}}}}(M.keys);try{for(W.s();!(z=W.n()).done;)F(z.value)}catch(j){W.e(j)}finally{W.f()}}else F()}),M.filter&&(P=M.filter(P));var O=P.slice(0,R.resultsList.maxResults);R.feedback={query:_,matches:P,results:O},l("results",R)},h="aria-expanded",v="aria-activedescendant",k="aria-selected",x=function(_,R){_.feedback.selection=t({index:R},_.feedback.results[R])},A=function(_){_.isOpen||((_.wrapper||_.input).setAttribute(h,!0),_.list.removeAttribute("hidden"),_.isOpen=!0,l("open",_))},S=function(_){_.isOpen&&((_.wrapper||_.input).setAttribute(h,!1),_.input.setAttribute(v,""),_.list.setAttribute("hidden",""),_.isOpen=!1,l("close",_))},f=function(_,R){var M=R.resultItem,I=R.list.getElementsByTagName(M.tag),P=!!M.selected&&M.selected.split(" ");if(R.isOpen&&I.length){var O,N,D=R.cursor;_>=I.length&&(_=0),_<0&&(_=I.length-1),R.cursor=_,D>-1&&(I[D].removeAttribute(k),P&&(N=I[D].classList).remove.apply(N,p(P))),I[_].setAttribute(k,!0),P&&(O=I[_].classList).add.apply(O,p(P)),R.input.setAttribute(v,I[R.cursor].id),R.list.scrollTop=I[_].offsetTop-R.list.clientHeight+I[_].clientHeight+5,R.feedback.cursor=R.cursor,x(R,_),l("navigate",R)}},L=function(_){f(_.cursor+1,_)},$=function(_){f(_.cursor-1,_)},C=function(_,R,M){(M=M>=0?M:_.cursor)<0||(_.feedback.event=R,x(_,M),l("selection",_),S(_))};function T(_,R){var M=this;return new Promise(function(I,P){var O,N;return O=R||((N=_.input)instanceof HTMLInputElement||N instanceof HTMLTextAreaElement?N.value:N.innerHTML),function(F,z,W){return z?z(F):F.length>=W}(O=_.query?_.query(O):O,_.trigger,_.threshold)?c(_,O).then(function(F){try{return _.feedback instanceof Error?I():(m(O,_),_.resultsList&&function(z){var W=z.resultsList,j=z.list,Z=z.resultItem,Y=z.feedback,q=Y.matches,nt=Y.results;if(z.cursor=-1,j.innerHTML="",q.length||W.noResults){var ot=new DocumentFragment;nt.forEach(function(wt,_t){var vt=o(Z.tag,t({id:"".concat(Z.id,"_").concat(_t),role:"option",innerHTML:wt.match,inside:ot},Z.class&&{class:Z.class}));Z.element&&Z.element(vt,wt)}),j.append(ot),W.element&&W.element(j,Y),A(z)}else S(z)}(_),D.call(M))}catch(z){return P(z)}},P):(S(_),D.call(M));function D(){return I()}})}var w=function(_,R){for(var M in _)for(var I in _[M])R(M,I)},y=function(_){var R,M,I,P=_.events,O=(R=function(){return T(_)},M=_.debounce,function(){clearTimeout(I),I=setTimeout(function(){return R()},M)}),N=_.events=t({input:t({},P&&P.input)},_.resultsList&&{list:P?t({},P.list):{}}),D={input:{input:function(){O()},keydown:function(F){(function(z,W){switch(z.keyCode){case 40:case 38:z.preventDefault(),z.keyCode===40?L(W):$(W);break;case 13:W.submit||z.preventDefault(),W.cursor>=0&&C(W,z);break;case 9:W.resultsList.tabSelect&&W.cursor>=0&&C(W,z);break;case 27:W.input.value="",S(W)}})(F,_)},blur:function(){S(_)}},list:{mousedown:function(F){F.preventDefault()},click:function(F){(function(z,W){var j=W.resultItem.tag.toUpperCase(),Z=Array.from(W.list.querySelectorAll(j)),Y=z.target.closest(j);Y&&Y.nodeName===j&&C(W,z,Z.indexOf(Y))})(F,_)}}};w(D,function(F,z){(_.resultsList||z==="input")&&(N[F][z]||(N[F][z]=D[F][z]))}),w(N,function(F,z){_[F].addEventListener(z,N[F][z])})};function b(_){var R=this;return new Promise(function(M,I){var P,O,N;if(P=_.placeHolder,N={role:"combobox","aria-owns":(O=_.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},o(_.input,t(t({"aria-controls":O.id,"aria-autocomplete":"both"},P&&{placeholder:P}),!_.wrapper&&t({},N))),_.wrapper&&(_.wrapper=o("div",t({around:_.input,class:_.name+"_wrapper"},N))),O&&(_.list=o(O.tag,t({dest:[O.destination,O.position],id:O.id,role:"listbox",hidden:"hidden"},O.class&&{class:O.class}))),y(_),_.data.cache)return c(_).then(function(F){try{return D.call(R)}catch(z){return I(z)}},I);function D(){return l("init",_),M()}return D.call(R)})}function E(_){var R=_.prototype;R.init=function(){b(this)},R.start=function(M){T(this,M)},R.unInit=function(){if(this.wrapper){var M=this.wrapper.parentNode;M.insertBefore(this.input,this.wrapper),M.removeChild(this.wrapper)}var I;w((I=this).events,function(P,O){I[P].removeEventListener(O,I.events[P][O])})},R.open=function(){A(this)},R.close=function(){S(this)},R.goTo=function(M){f(M,this)},R.next=function(){L(this)},R.previous=function(){$(this)},R.select=function(M){C(this,null,M)},R.search=function(M,I,P){return s(M,I,P)}}return function _(R){this.options=R,this.id=_.instances=(_.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(M){var I=M.name,P=M.options,O=M.resultsList,N=M.resultItem;for(var D in P)if(r(P[D])==="object")for(var F in M[D]||(M[D]={}),P[D])M[D][F]=P[D][F];else M[D]=P[D];M.selector=M.selector||"#"+I,O.destination=O.destination||M.selector,O.id=O.id||I+"_list_"+M.id,N.id=N.id||I+"_result",M.input=u(M.selector)}(this),E.call(this,_),b(this)}},typeof Ks=="object"&&typeof Ys<"u"?Ys.exports=ma():typeof define=="function"&&define.amd?define(ma):(Gs=typeof globalThis<"u"?globalThis:Gs||self).autoComplete=ma()});var fp=Mn((bp,ga)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var r=function(o,i,a){if(typeof o!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(a=i),r.modules[o]||(r.payloads[o]=a,r.modules[o]=null)};r.modules={},r.payloads={};var d=function(o,i,a){if(typeof i=="string"){var l=n(o,i);if(l!=null)return a&&a(),l}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var s=[],c=0,m=i.length;c<m;++c){var h=n(o,i[c]);if(h==null&&p.original)return;s.push(h)}return a&&a.apply(null,s)||!0}},p=function(o,i){var a=d("",o,i);return a==null&&p.original?p.original.apply(this,arguments):a},g=function(o,i){if(i.indexOf("!")!==-1){var a=i.split("!");return g(o,a[0])+"!"+g(o,a[1])}if(i.charAt(0)=="."){var l=o.split("/").slice(0,-1).join("/");for(i=l+"/"+i;i.indexOf(".")!==-1&&s!=i;){var s=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},n=function(o,i){i=g(o,i);var a=r.modules[i];if(!a){if(a=r.payloads[i],typeof a=="function"){var l={},s={id:i,uri:"",exports:l,packaged:!0},c=function(h,v){return d(i,h,v)},m=a(c,l,s);l=m||s.exports,r.modules[i]=l,delete r.payloads[i]}a=r.modules[i]=l||a}return a};function u(o){var i=t;o&&(t[o]||(t[o]={}),i=t[o]),(!i.define||!i.define.packaged)&&(r.original=i.define,i.define=r,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(p.original=i.require,i.require=p,i.require.packaged=!0)}u(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,r){function d(p,g,n){Object.defineProperty(p,g,{value:n,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||d(String.prototype,"startsWith",function(p,g){return g=g||0,this.lastIndexOf(p,g)===g}),String.prototype.endsWith||d(String.prototype,"endsWith",function(p,g){var n=this;(g===void 0||g>n.length)&&(g=n.length),g-=p.length;var u=n.indexOf(p,g);return u!==-1&&u===g}),String.prototype.repeat||d(String.prototype,"repeat",function(p){for(var g="",n=this;p>0;)p&1&&(g+=n),(p>>=1)&&(n+=n);return g}),String.prototype.includes||d(String.prototype,"includes",function(p,g){return this.indexOf(p,g)!=-1}),Object.assign||(Object.assign=function(p){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(p),n=1;n<arguments.length;n++){var u=arguments[n];u!=null&&Object.keys(u).forEach(function(o){g[o]=u[o]})}return g}),Object.values||(Object.values=function(p){return Object.keys(p).map(function(g){return p[g]})}),Array.prototype.find||d(Array.prototype,"find",function(p){for(var g=this.length,n=arguments[1],u=0;u<g;u++){var o=this[u];if(p.call(n,o,u,this))return o}}),Array.prototype.findIndex||d(Array.prototype,"findIndex",function(p){for(var g=this.length,n=arguments[1],u=0;u<g;u++){var o=this[u];if(p.call(n,o,u,this))return u}}),Array.prototype.includes||d(Array.prototype,"includes",function(p,g){return this.indexOf(p,g)!=-1}),Array.prototype.fill||d(Array.prototype,"fill",function(p){for(var g=this,n=g.length>>>0,u=arguments[1],o=u>>0,i=o<0?Math.max(n+o,0):Math.min(o,n),a=arguments[2],l=a===void 0?n:a>>0,s=l<0?Math.max(n+l,0):Math.min(l,n);i<s;)g[i]=p,i++;return g}),Array.of||d(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,r){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,r){t.deepCopy=function d(p){if(typeof p!="object"||!p)return p;var g;if(Array.isArray(p)){g=[];for(var n=0;n<p.length;n++)g[n]=d(p[n]);return g}if(Object.prototype.toString.call(p)!=="[object Object]")return p;g={};for(var n in p)g[n]=d(p[n]);return g}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";t.last=function(g){return g[g.length-1]},t.stringReverse=function(g){return g.split("").reverse().join("")},t.stringRepeat=function(g,n){for(var u="";n>0;)n&1&&(u+=g),(n>>=1)&&(g+=g);return u};var d=/^\s\s*/,p=/\s\s*$/;t.stringTrimLeft=function(g){return g.replace(d,"")},t.stringTrimRight=function(g){return g.replace(p,"")},t.copyObject=function(g){var n={};for(var u in g)n[u]=g[u];return n},t.copyArray=function(g){for(var n=[],u=0,o=g.length;u<o;u++)g[u]&&typeof g[u]=="object"?n[u]=this.copyObject(g[u]):n[u]=g[u];return n},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(g){for(var n={},u=0;u<g.length;u++)n[g[u]]=1;return n},t.createMap=function(g){var n=Object.create(null);for(var u in g)n[u]=g[u];return n},t.arrayRemove=function(g,n){for(var u=0;u<=g.length;u++)n===g[u]&&g.splice(u,1)},t.escapeRegExp=function(g){return g.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(g){return(""+g).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(g,n){var u=[];return g.replace(n,function(o){u.push({offset:arguments[arguments.length-2],length:o.length})}),u},t.deferredCall=function(g){var n=null,u=function(){n=null,g()},o=function(i){return o.cancel(),n=setTimeout(u,i||0),o};return o.schedule=o,o.call=function(){return this.cancel(),g(),o},o.cancel=function(){return clearTimeout(n),n=null,o},o.isPending=function(){return n},o},t.delayedCall=function(g,n){var u=null,o=function(){u=null,g()},i=function(a){u==null&&(u=setTimeout(o,a||n))};return i.delay=function(a){u&&clearTimeout(u),u=setTimeout(o,a||n)},i.schedule=i,i.call=function(){this.cancel(),g()},i.cancel=function(){u&&clearTimeout(u),u=null},i.isPending=function(){return u},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(g,n,u){return u&&g.codePointAt(n)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,r){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var d=typeof navigator=="object"?navigator:{},p=(/mac|win|linux/i.exec(d.platform)||["other"])[0].toLowerCase(),g=d.userAgent||"",n=d.appName||"";t.isWin=p=="win",t.isMac=p=="mac",t.isLinux=p=="linux",t.isIE=n=="Microsoft Internet Explorer"||n.indexOf("MSAppHost")>=0?parseFloat((g.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((g.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=g.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(g.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(g.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(g.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(g.split(" Edge/")[1])||void 0,t.isAIR=g.indexOf("AdobeAIR")>=0,t.isAndroid=g.indexOf("Android")>=0,t.isChromeOS=g.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(g)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("./useragent"),p="http://www.w3.org/1999/xhtml";t.buildDom=function a(l,s,c){if(typeof l=="string"&&l){var m=document.createTextNode(l);return s&&s.appendChild(m),m}if(!Array.isArray(l))return l&&l.appendChild&&s&&s.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var h=[],v=0;v<l.length;v++){var k=a(l[v],s,c);k&&h.push(k)}return h}var x=document.createElement(l[0]),A=l[1],S=1;A&&typeof A=="object"&&!Array.isArray(A)&&(S=2);for(var v=S;v<l.length;v++)a(l[v],x,c);return S==2&&Object.keys(A).forEach(function(f){var L=A[f];f==="class"?x.className=Array.isArray(L)?L.join(" "):L:typeof L=="function"||f=="value"||f[0]=="$"?x[f]=L:f==="ref"?c&&(c[L]=x):f==="style"?typeof L=="string"&&(x.style.cssText=L):L!=null&&x.setAttribute(f,L)}),s&&s.appendChild(x),x},t.getDocumentHead=function(a){return a||(a=document),a.head||a.getElementsByTagName("head")[0]||a.documentElement},t.createElement=function(a,l){return document.createElementNS?document.createElementNS(l||p,a):document.createElement(a)},t.removeChildren=function(a){a.innerHTML=""},t.createTextNode=function(a,l){var s=l?l.ownerDocument:document;return s.createTextNode(a)},t.createFragment=function(a){var l=a?a.ownerDocument:document;return l.createDocumentFragment()},t.hasCssClass=function(a,l){var s=(a.className+"").split(/\s+/g);return s.indexOf(l)!==-1},t.addCssClass=function(a,l){t.hasCssClass(a,l)||(a.className+=" "+l)},t.removeCssClass=function(a,l){for(var s=a.className.split(/\s+/g);;){var c=s.indexOf(l);if(c==-1)break;s.splice(c,1)}a.className=s.join(" ")},t.toggleCssClass=function(a,l){for(var s=a.className.split(/\s+/g),c=!0;;){var m=s.indexOf(l);if(m==-1)break;c=!1,s.splice(m,1)}return c&&s.push(l),a.className=s.join(" "),c},t.setCssClass=function(a,l,s){s?t.addCssClass(a,l):t.removeCssClass(a,l)},t.hasCssString=function(a,l){var s=0,c;if(l=l||document,c=l.querySelectorAll("style")){for(;s<c.length;)if(c[s++].id===a)return!0}},t.removeElementById=function(a,l){l=l||document,l.getElementById(a)&&l.getElementById(a).remove()};var g,n=[];t.useStrictCSP=function(a){g=a,a==!1?u():n||(n=[])};function u(){var a=n;n=null,a&&a.forEach(function(l){o(l[0],l[1])})}function o(a,l,s){if(!(typeof document>"u")){if(n){if(s)u();else if(s===!1)return n.push([a,l])}if(!g){var c=s;!s||!s.getRootNode?c=document:(c=s.getRootNode(),(!c||c==s)&&(c=document));var m=c.ownerDocument||c;if(l&&t.hasCssString(l,c))return null;l&&(a+=`
/*# sourceURL=ace/css/`+l+" */");var h=t.createElement("style");h.appendChild(m.createTextNode(a)),l&&(h.id=l),c==m&&(c=t.getDocumentHead(m)),c.insertBefore(h,c.firstChild)}}}if(t.importCssString=o,t.importCssStylsheet=function(a,l){t.buildDom(["link",{rel:"stylesheet",href:a}],t.getDocumentHead(l))},t.scrollbarWidth=function(a){var l=t.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var s=t.createElement("ace_outer"),c=s.style;c.position="absolute",c.left="-10000px",c.overflow="hidden",c.width="200px",c.minWidth="0px",c.height="150px",c.display="block",s.appendChild(l);var m=a&&a.documentElement||document&&document.documentElement;if(!m)return 0;m.appendChild(s);var h=l.offsetWidth;c.overflow="scroll";var v=l.offsetWidth;return h===v&&(v=s.clientWidth),m.removeChild(s),h-v},t.computedStyle=function(a,l){return window.getComputedStyle(a,"")||{}},t.setStyle=function(a,l,s){a[l]!==s&&(a[l]=s)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=d.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,d.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!d.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(a,l,s){a.style.transform="translate("+Math.round(l)+"px, "+Math.round(s)+"px)"}:t.translate=function(a,l,s){a.style.top=Math.round(s)+"px",a.style.left=Math.round(l)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("./dom");t.get=function(p,g){var n=new XMLHttpRequest;n.open("GET",p,!0),n.onreadystatechange=function(){n.readyState===4&&g(n.responseText)},n.send(null)},t.loadScript=function(p,g){var n=d.getDocumentHead(),u=document.createElement("script");u.src=p,n.appendChild(u),u.onload=u.onreadystatechange=function(o,i){(i||!u.readyState||u.readyState=="loaded"||u.readyState=="complete")&&(u=u.onload=u.onreadystatechange=null,i||g())}},t.qualifyURL=function(p){var g=document.createElement("a");return g.href=p,g.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,r){"use strict";t.inherits=function(d,p){d.super_=p,d.prototype=Object.create(p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(d,p){for(var g in p)d[g]=p[g];return d},t.implement=function(d,p){t.mixin(d,p)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,r){"use strict";var d={},p=function(){this.propagationStopped=!0},g=function(){this.defaultPrevented=!0};d._emit=d._dispatchEvent=function(n,u){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[n]||[],i=this._defaultHandlers[n];if(!(!o.length&&!i)){(typeof u!="object"||!u)&&(u={}),u.type||(u.type=n),u.stopPropagation||(u.stopPropagation=p),u.preventDefault||(u.preventDefault=g),o=o.slice();for(var a=0;a<o.length&&(o[a](u,this),!u.propagationStopped);a++);if(i&&!u.defaultPrevented)return i(u,this)}},d._signal=function(n,u){var o=(this._eventRegistry||{})[n];if(o){o=o.slice();for(var i=0;i<o.length;i++)o[i](u,this)}},d.once=function(n,u){var o=this;if(this.on(n,function i(){o.off(n,i),u.apply(null,arguments)}),!u)return new Promise(function(i){u=i})},d.setDefaultHandler=function(n,u){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[n]){var i=o[n],a=o._disabled_[n];a||(o._disabled_[n]=a=[]),a.push(i);var l=a.indexOf(u);l!=-1&&a.splice(l,1)}o[n]=u},d.removeDefaultHandler=function(n,u){var o=this._defaultHandlers;if(o){var i=o._disabled_[n];if(o[n]==u)i&&this.setDefaultHandler(n,i.pop());else if(i){var a=i.indexOf(u);a!=-1&&i.splice(a,1)}}},d.on=d.addEventListener=function(n,u,o){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[n];return i||(i=this._eventRegistry[n]=[]),i.indexOf(u)==-1&&i[o?"unshift":"push"](u),u},d.off=d.removeListener=d.removeEventListener=function(n,u){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[n];if(o){var i=o.indexOf(u);i!==-1&&o.splice(i,1)}},d.removeAllListeners=function(n){n||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[n]=void 0),this._defaultHandlers&&(this._defaultHandlers[n]=void 0)},t.EventEmitter=d});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,r){t.reportError=function(p,g){var n=new Error(p);n.data=g,typeof console=="object"&&console.error&&console.error(n),setTimeout(function(){throw n})}});ace.define("ace/lib/default_english_messages",["require","exports","module"],function(e,t,r){var d={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages"};t.defaultEnglishMessages=d});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(e,t,r){"no use strict";var d=e("./oop"),p=e("./event_emitter").EventEmitter,g=e("./report_error").reportError,n=e("./default_english_messages").defaultEnglishMessages,u={setOptions:function(s){Object.keys(s).forEach(function(c){this.setOption(c,s[c])},this)},getOptions:function(s){var c={};if(s)Array.isArray(s)||(c=s,s=Object.keys(c));else{var m=this.$options;s=Object.keys(m).filter(function(h){return!m[h].hidden})}return s.forEach(function(h){c[h]=this.getOption(h)},this),c},setOption:function(s,c){if(this["$"+s]!==c){var m=this.$options[s];if(!m)return o('misspelled option "'+s+'"');if(m.forwardTo)return this[m.forwardTo]&&this[m.forwardTo].setOption(s,c);m.handlesSet||(this["$"+s]=c),m&&m.set&&m.set.call(this,c)}},getOption:function(s){var c=this.$options[s];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(s):c&&c.get?c.get.call(this):this["$"+s]:o('misspelled option "'+s+'"')}};function o(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,a,l=function(){function s(){this.$defaultOptions={},i=n,a="dollarSigns"}return s.prototype.defineOptions=function(c,m,h){return c.$options||(this.$defaultOptions[m]=c.$options={}),Object.keys(h).forEach(function(v){var k=h[v];typeof k=="string"&&(k={forwardTo:k}),k.name||(k.name=v),c.$options[k.name]=k,"initialValue"in k&&(c["$"+k.name]=k.initialValue)}),d.implement(c,u),this},s.prototype.resetOptions=function(c){Object.keys(c.$options).forEach(function(m){var h=c.$options[m];"value"in h&&c.setOption(m,h.value)})},s.prototype.setDefaultValue=function(c,m,h){if(!c){for(c in this.$defaultOptions)if(this.$defaultOptions[c][m])break;if(!this.$defaultOptions[c][m])return!1}var v=this.$defaultOptions[c]||(this.$defaultOptions[c]={});v[m]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,m,h):v[m].value=h)},s.prototype.setDefaultValues=function(c,m){Object.keys(m).forEach(function(h){this.setDefaultValue(c,h,m[h])},this)},s.prototype.setMessages=function(c,m){i=c,m&&m.placeholders&&(a=m.placeholders)},s.prototype.nls=function(c,m,h){i[c]||(o("No message found for the key '"+c+"' in the provided messages, trying to find a translation for the default string '"+m+"'."),i[m]||o("No message found for the default string '"+m+"' in the provided messages. Falling back to the default English message."));var v=i[c]||i[m]||m;return h&&(a==="dollarSigns"&&(v=v.replace(/\$(\$|[\d]+)/g,function(k,x){return x=="$"?"$":h[x]})),a==="curlyBrackets"&&(v=v.replace(/\{([^\}]+)\}/g,function(k,x){return h[x]}))),v},s}();l.prototype.warn=o,l.prototype.reportError=g,d.implement(l.prototype,p),t.AppConfig=l});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,r){r.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,r){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var d=e("../lib/dom");d.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,r){"no use strict";var d=e("./lib/lang"),p=e("./lib/net"),g=e("./lib/dom"),n=e("./lib/app_config").AppConfig;r.exports=t=new n;var u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(l){if(!u.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return u[l]},t.set=function(l,s){if(u.hasOwnProperty(l))u[l]=s;else if(this.setDefaultValue("",l,s)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&g.useStrictCSP(s)},t.all=function(){return d.copyObject(u)},t.$modes={},t.moduleUrl=function(l,s){if(u.$moduleUrls[l])return u.$moduleUrls[l];var c=l.split("/");s=s||c[c.length-2]||"";var m=s=="snippets"?"/":"-",h=c[c.length-1];if(s=="worker"&&m=="-"){var v=new RegExp("^"+s+"[\\-_]|[\\-_]"+s+"$","g");h=h.replace(v,"")}(!h||h==s)&&c.length>1&&(h=c[c.length-2]);var k=u[s+"Path"];return k==null?k=u.basePath:m=="/"&&(s=m=""),k&&k.slice(-1)!="/"&&(k+="/"),k+s+m+h+this.get("suffix")},t.setModuleUrl=function(l,s){return u.$moduleUrls[l]=s};var o=function(l,s){if(l==="ace/theme/textmate"||l==="./theme/textmate")return s(null,e("./theme/textmate"));if(i)return i(l,s);console.error("loader is not configured")},i;t.setLoader=function(l){i=l},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(l,s){var c;if(Array.isArray(l))var m=l[0],h=l[1];else if(typeof l=="string")var h=l;var v=function(k){if(k&&!t.$loading[h])return s&&s(k);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(s),!(t.$loading[h].length>1)){var x=function(){o(h,function(A,S){S&&(t.$loaded[h]=S),t._emit("load.module",{name:h,module:S});var f=t.$loading[h];t.$loading[h]=null,f.forEach(function(L){L&&L(S)})})};if(!t.get("packaged"))return x();p.loadScript(t.moduleUrl(h,m),x),a()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(k){k.default?v(k.default):v(k)});else{try{c=this.$require(h)}catch{}v(c||t.$loaded[h])}},t.$require=function(l){if(typeof r.require=="function"){var s="require";return r[s](l)}},t.setModuleLoader=function(l,s){t.dynamicModules[l]=s};var a=function(){!u.basePath&&!u.workerPath&&!u.modePath&&!u.themePath&&!Object.keys(u.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),a=function(){})};t.version="1.35.4"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var d=e("./config");d.setLoader(function(u,o){e([u],function(i){o(null,i)})});var p=function(){return this||typeof window<"u"&&window}();r.exports=function(u){d.init=g,d.$require=e,u.require=e,typeof define=="function"&&(u.define=define)},g(!0);function g(u){if(!(!p||!p.document)){d.set("packaged",u||e.packaged||r.packaged||p.define&&define.packaged);var o={},i="",a=document.currentScript||document._currentScript,l=a&&a.ownerDocument||document;a&&a.src&&(i=a.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var s=l.getElementsByTagName("script"),c=0;c<s.length;c++){var m=s[c],h=m.src||m.getAttribute("src");if(h){for(var v=m.attributes,k=0,x=v.length;k<x;k++){var A=v[k];A.name.indexOf("data-ace-")===0&&(o[n(A.name.replace(/^data-ace-/,""))]=A.value)}var S=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(i=S[1])}}i&&(o.base=o.base||i,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var f in o)typeof o[f]<"u"&&d.set(f,o[f])}}function n(u){return u.replace(/-(.)/g,function(o,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,r){"use strict";var d=function(){function p(g,n,u,o){this.start={row:g,column:n},this.end={row:u,column:o}}return p.prototype.isEqual=function(g){return this.start.row===g.start.row&&this.end.row===g.end.row&&this.start.column===g.start.column&&this.end.column===g.end.column},p.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},p.prototype.contains=function(g,n){return this.compare(g,n)==0},p.prototype.compareRange=function(g){var n,u=g.end,o=g.start;return n=this.compare(u.row,u.column),n==1?(n=this.compare(o.row,o.column),n==1?2:n==0?1:0):n==-1?-2:(n=this.compare(o.row,o.column),n==-1?-1:n==1?42:0)},p.prototype.comparePoint=function(g){return this.compare(g.row,g.column)},p.prototype.containsRange=function(g){return this.comparePoint(g.start)==0&&this.comparePoint(g.end)==0},p.prototype.intersects=function(g){var n=this.compareRange(g);return n==-1||n==0||n==1},p.prototype.isEnd=function(g,n){return this.end.row==g&&this.end.column==n},p.prototype.isStart=function(g,n){return this.start.row==g&&this.start.column==n},p.prototype.setStart=function(g,n){typeof g=="object"?(this.start.column=g.column,this.start.row=g.row):(this.start.row=g,this.start.column=n)},p.prototype.setEnd=function(g,n){typeof g=="object"?(this.end.column=g.column,this.end.row=g.row):(this.end.row=g,this.end.column=n)},p.prototype.inside=function(g,n){return this.compare(g,n)==0?!(this.isEnd(g,n)||this.isStart(g,n)):!1},p.prototype.insideStart=function(g,n){return this.compare(g,n)==0?!this.isEnd(g,n):!1},p.prototype.insideEnd=function(g,n){return this.compare(g,n)==0?!this.isStart(g,n):!1},p.prototype.compare=function(g,n){return!this.isMultiLine()&&g===this.start.row?n<this.start.column?-1:n>this.end.column?1:0:g<this.start.row?-1:g>this.end.row?1:this.start.row===g?n>=this.start.column?0:-1:this.end.row===g?n<=this.end.column?0:1:0},p.prototype.compareStart=function(g,n){return this.start.row==g&&this.start.column==n?-1:this.compare(g,n)},p.prototype.compareEnd=function(g,n){return this.end.row==g&&this.end.column==n?1:this.compare(g,n)},p.prototype.compareInside=function(g,n){return this.end.row==g&&this.end.column==n?1:this.start.row==g&&this.start.column==n?-1:this.compare(g,n)},p.prototype.clipRows=function(g,n){if(this.end.row>n)var u={row:n+1,column:0};else if(this.end.row<g)var u={row:g,column:0};if(this.start.row>n)var o={row:n+1,column:0};else if(this.start.row<g)var o={row:g,column:0};return p.fromPoints(o||this.start,u||this.end)},p.prototype.extend=function(g,n){var u=this.compare(g,n);if(u==0)return this;if(u==-1)var o={row:g,column:n};else var i={row:g,column:n};return p.fromPoints(o||this.start,i||this.end)},p.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},p.prototype.isMultiLine=function(){return this.start.row!==this.end.row},p.prototype.clone=function(){return p.fromPoints(this.start,this.end)},p.prototype.collapseRows=function(){return this.end.column==0?new p(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new p(this.start.row,0,this.end.row,0)},p.prototype.toScreenRange=function(g){var n=g.documentToScreenPosition(this.start),u=g.documentToScreenPosition(this.end);return new p(n.row,n.column,u.row,u.column)},p.prototype.moveBy=function(g,n){this.start.row+=g,this.start.column+=n,this.end.row+=g,this.end.column+=n},p}();d.fromPoints=function(p,g){return new d(p.row,p.column,g.row,g.column)},d.comparePoints=function(p,g){return p.row-g.row||p.column-g.column},t.Range=d});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,r){"use strict";for(var d=e("./oop"),p={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},g={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},n=0;n<10;n++)g["Digit"+n]=48+n,g["Numpad"+n]=96+n,p.PRINTABLE_KEYS[48+n]=""+n,p.FUNCTION_KEYS[96+n]="Numpad"+n;for(var n=65;n<91;n++){var u=String.fromCharCode(n+32);g["Key"+u.toUpperCase()]=n,p.PRINTABLE_KEYS[n]=u}for(var n=1;n<13;n++)g["F"+n]=111+n,p.FUNCTION_KEYS[111+n]="F"+n;var o={Shift:16,Control:17,Alt:18,Meta:224};for(var i in o)g[i]=g[i+"Left"]=g[i+"Right"]=o[i];t.$codeToKeyCode=g,p.PRINTABLE_KEYS[173]="-";for(var a in p.FUNCTION_KEYS){var l=p.FUNCTION_KEYS[a].toLowerCase();p[l]=parseInt(a,10)}for(var a in p.PRINTABLE_KEYS){var l=p.PRINTABLE_KEYS[a].toLowerCase();p[l]=parseInt(a,10)}d.mixin(p,p.MODIFIER_KEYS),d.mixin(p,p.PRINTABLE_KEYS),d.mixin(p,p.FUNCTION_KEYS),p.enter=p.return,p.escape=p.esc,p.del=p.delete,function(){for(var s=["cmd","ctrl","alt","shift"],c=Math.pow(2,s.length);c--;)p.KEY_MODS[c]=s.filter(function(m){return c&p.KEY_MODS[m]}).join("-")+"-"}(),p.KEY_MODS[0]="",p.KEY_MODS[-1]="input-",d.mixin(t,p),t.default=t,t.keyCodeToString=function(s){var c=p[s];return typeof c!="string"&&(c=String.fromCharCode(s)),c.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("./keys"),p=e("./useragent"),g=null,n=0,u;function o(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return u={passive:!1},!0}})}catch{}}function i(){return u==null&&o(),u}function a(k,x,A){this.elem=k,this.type=x,this.callback=A}a.prototype.destroy=function(){s(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=t.addListener=function(k,x,A,S){k.addEventListener(x,A,i()),S&&S.$toDestroy.push(new a(k,x,A))},s=t.removeListener=function(k,x,A){k.removeEventListener(x,A,i())};t.stopEvent=function(k){return t.stopPropagation(k),t.preventDefault(k),!1},t.stopPropagation=function(k){k.stopPropagation&&k.stopPropagation()},t.preventDefault=function(k){k.preventDefault&&k.preventDefault()},t.getButton=function(k){return k.type=="dblclick"?0:k.type=="contextmenu"||p.isMac&&k.ctrlKey&&!k.altKey&&!k.shiftKey?2:k.button},t.capture=function(k,x,A){var S=k&&k.ownerDocument||document;function f(L){x&&x(L),A&&A(L),s(S,"mousemove",x),s(S,"mouseup",f),s(S,"dragstart",f)}return l(S,"mousemove",x),l(S,"mouseup",f),l(S,"dragstart",f),f},t.addMouseWheelListener=function(k,x,A){l(k,"wheel",function(S){var f=.15,L=S.deltaX||0,$=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=L*f,S.wheelY=$*f;break;case S.DOM_DELTA_LINE:var C=15;S.wheelX=L*C,S.wheelY=$*C;break;case S.DOM_DELTA_PAGE:var T=150;S.wheelX=L*T,S.wheelY=$*T;break}x(S)},A)},t.addMultiMouseDownListener=function(k,x,A,S,f){var L=0,$,C,T,w={2:"dblclick",3:"tripleclick",4:"quadclick"};function y(b){if(t.getButton(b)!==0?L=0:b.detail>1?(L++,L>4&&(L=1)):L=1,p.isIE){var E=Math.abs(b.clientX-$)>5||Math.abs(b.clientY-C)>5;(!T||E)&&(L=1),T&&clearTimeout(T),T=setTimeout(function(){T=null},x[L-1]||600),L==1&&($=b.clientX,C=b.clientY)}if(b._clicks=L,A[S]("mousedown",b),L>4)L=0;else if(L>1)return A[S](w[L],b)}Array.isArray(k)||(k=[k]),k.forEach(function(b){l(b,"mousedown",y,f)})};function c(k){return 0|(k.ctrlKey?1:0)|(k.altKey?2:0)|(k.shiftKey?4:0)|(k.metaKey?8:0)}t.getModifierString=function(k){return d.KEY_MODS[c(k)]};function m(k,x,A){var S=c(x);if(!A&&x.code&&(A=d.$codeToKeyCode[x.code]||A),!p.isMac&&g){if(x.getModifierState&&(x.getModifierState("OS")||x.getModifierState("Win"))&&(S|=8),g.altGr)if((3&S)!=3)g.altGr=0;else return;if(A===18||A===17){var f=x.location;if(A===17&&f===1)g[A]==1&&(n=x.timeStamp);else if(A===18&&S===3&&f===2){var L=x.timeStamp-n;L<50&&(g.altGr=!0)}}}if(A in d.MODIFIER_KEYS&&(A=-1),!(!S&&A===13&&x.location===3&&(k(x,S,-A),x.defaultPrevented))){if(p.isChromeOS&&S&8){if(k(x,S,A),x.defaultPrevented)return;S&=-9}return!S&&!(A in d.FUNCTION_KEYS)&&!(A in d.PRINTABLE_KEYS)?!1:k(x,S,A)}}t.addCommandKeyListener=function(k,x,A){var S=null;l(k,"keydown",function(f){g[f.keyCode]=(g[f.keyCode]||0)+1;var L=m(x,f,f.keyCode);return S=f.defaultPrevented,L},A),l(k,"keypress",function(f){S&&(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey)&&(t.stopEvent(f),S=null)},A),l(k,"keyup",function(f){g[f.keyCode]=null},A),g||(h(),l(window,"focus",h))};function h(){g=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!p.isOldIE){var v=1;t.nextTick=function(k,x){x=x||window;var A="zero-timeout-message-"+v++,S=function(f){f.data==A&&(t.stopPropagation(f),s(x,"message",S),k())};l(x,"message",S),x.postMessage(A,"*")}}t.$idleBlocked=!1,t.onIdle=function(k,x){return setTimeout(function A(){t.$idleBlocked?setTimeout(A,100):k()},x)},t.$idleBlockId=null,t.blockIdle=function(k){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},k||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(k){setTimeout(k,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,r){"use strict";var d;r.exports={lineMode:!1,pasteCancelled:function(){return d&&d>Date.now()-50?!0:d=!1},cancel:function(){d=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var d=e("../lib/event"),p=e("../config").nls,g=e("../lib/useragent"),n=e("../lib/dom"),u=e("../lib/lang"),o=e("../clipboard"),i=g.isChrome<18,a=g.isIE,l=g.isChrome>63,s=400,c=e("../lib/keys"),m=c.KEY_MODS,h=g.isIOS,v=h?/\s/:/\n/,k=g.isMobile,x;x=function(A,S){var f=n.createElement("textarea");f.className="ace_text-input",f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck","false"),f.style.opacity="0",A.insertBefore(f,A.firstChild);var L=!1,$=!1,C=!1,T=!1,w="";k||(f.style.fontSize="1px");var y=!1,b=!1,E="",_=0,R=0,M=0,I=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,O=0;try{var N=document.activeElement===f}catch{}this.setNumberOfExtraLines=function(H){if(I=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,H<0){O=0;return}O=H},this.setAriaOptions=function(H){if(H.activeDescendant?(f.setAttribute("aria-haspopup","true"),f.setAttribute("aria-autocomplete",H.inline?"both":"list"),f.setAttribute("aria-activedescendant",H.activeDescendant)):(f.setAttribute("aria-haspopup","false"),f.setAttribute("aria-autocomplete","both"),f.removeAttribute("aria-activedescendant")),H.role&&f.setAttribute("role",H.role),H.setLabel){f.setAttribute("aria-roledescription",p("text-input.aria-roledescription","editor"));var G="";if(S.$textInputAriaLabel&&(G+="".concat(S.$textInputAriaLabel,", ")),S.session){var rt=S.session.selection.cursor.row;G+=p("text-input.aria-label","Cursor at row $0",[rt+1])}f.setAttribute("aria-label",G)}},this.setAriaOptions({role:"textbox"}),d.addListener(f,"blur",function(H){b||(S.onBlur(H),N=!1)},S),d.addListener(f,"focus",function(H){if(!b){if(N=!0,g.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(H),g.isEdge?setTimeout(F):F()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),w||l||this.$focusScroll=="browser")return f.focus({preventScroll:!0});var H=f.style.top;f.style.position="fixed",f.style.top="0px";try{var G=f.getBoundingClientRect().top!=0}catch{return}var rt=[];if(G)for(var ft=f.parentElement;ft&&ft.nodeType==1;)rt.push(ft),ft.setAttribute("ace_nocontext","true"),!ft.parentElement&&ft.getRootNode?ft=ft.getRootNode().host:ft=ft.parentElement;f.focus({preventScroll:!0}),G&&rt.forEach(function(kt){kt.removeAttribute("ace_nocontext")}),setTimeout(function(){f.style.position="",f.style.top=="0px"&&(f.style.top=H)},0)},this.blur=function(){f.blur()},this.isFocused=function(){return N},S.on("beforeEndOperation",function(){var H=S.curOp,G=H&&H.command&&H.command.name;if(G!="insertstring"){var rt=G&&(H.docChanged||H.selectionChanged);C&&rt&&(E=f.value="",at()),F()}});var D=function(H,G){for(var rt=G,ft=1;ft<=H-I&&ft<2*O+1;ft++)rt+=S.session.getLine(H-ft).length+1;return rt},F=h?function(H){if(!(!N||L&&!H||T)){H||(H="");var G=`
 ab`+H+`cde fg
`;G!=f.value&&(f.value=E=G);var rt=4,ft=4+(H.length||(S.selection.isEmpty()?0:1));(_!=rt||R!=ft)&&f.setSelectionRange(rt,ft),_=rt,R=ft}}:function(){if(!(C||T)&&!(!N&&!Z)){C=!0;var H=0,G=0,rt="";if(S.session){var ft=S.selection,kt=ft.getRange(),Mt=ft.cursor.row;Mt===P+1?(I=P+1,P=I+2*O):Mt===I-1?(P=I-1,I=P-2*O):(Mt<I-1||Mt>P+1)&&(I=Mt>O?Mt-O:0,P=Mt>O?Mt+O:2*O);for(var It=[],Pt=I;Pt<=P;Pt++)It.push(S.session.getLine(Pt));if(rt=It.join(`
`),H=D(kt.start.row,kt.start.column),G=D(kt.end.row,kt.end.column),kt.start.row<I){var Dt=S.session.getLine(I-1);H=kt.start.row<I-1?0:H,G+=Dt.length+1,rt=Dt+`
`+rt}else if(kt.end.row>P){var Lt=S.session.getLine(P+1);G=kt.end.row>P+1?Lt.length:kt.end.column,G+=rt.length+1,rt=rt+`
`+Lt}else k&&Mt>0&&(rt=`
`+rt,G+=1,H+=1);rt.length>s&&(H<s&&G<s?rt=rt.slice(0,s):(rt=`
`,H==G?H=G=0:(H=0,G=1)));var Xt=rt+`

`;Xt!=E&&(f.value=E=Xt,_=R=Xt.length)}if(Z&&(_=f.selectionStart,R=f.selectionEnd),R!=G||_!=H||f.selectionEnd!=R)try{f.setSelectionRange(H,G),_=H,R=G}catch{}C=!1}};this.resetSelection=F,N&&S.onFocus();var z=function(H){return H.selectionStart===0&&H.selectionEnd>=E.length&&H.value===E&&E&&H.selectionEnd!==R},W=function(H){C||(L?L=!1:z(f)?(S.selectAll(),F()):k&&f.selectionStart!=_&&F())},j=null;this.setInputHandler=function(H){j=H},this.getInputHandler=function(){return j};var Z=!1,Y=function(H,G){if(Z&&(Z=!1),$)return F(),H&&S.onPaste(H),$=!1,"";for(var rt=f.selectionStart,ft=f.selectionEnd,kt=_,Mt=E.length-R,It=H,Pt=H.length-rt,Dt=H.length-ft,Lt=0;kt>0&&E[Lt]==H[Lt];)Lt++,kt--;for(It=It.slice(Lt),Lt=1;Mt>0&&E.length-Lt>_-1&&E[E.length-Lt]==H[H.length-Lt];)Lt++,Mt--;Pt-=Lt-1,Dt-=Lt-1;var Xt=It.length-Lt+1;if(Xt<0&&(kt=-Xt,Xt=0),It=It.slice(0,Xt),!G&&!It&&!Pt&&!kt&&!Mt&&!Dt)return"";T=!0;var rr=!1;return g.isAndroid&&It==". "&&(It="  ",rr=!0),It&&!kt&&!Mt&&!Pt&&!Dt||y?S.onTextInput(It):S.onTextInput(It,{extendLeft:kt,extendRight:Mt,restoreStart:Pt,restoreEnd:Dt}),T=!1,E=H,_=rt,R=ft,M=Dt,rr?`
`:It},q=function(H){if(C)return X();if(H&&H.inputType){if(H.inputType=="historyUndo")return S.execCommand("undo");if(H.inputType=="historyRedo")return S.execCommand("redo")}var G=f.value,rt=Y(G,!0);(G.length>s+100||v.test(rt)||k&&_<1&&_==R)&&F()},nt=function(H,G,rt){var ft=H.clipboardData||window.clipboardData;if(!(!ft||i)){var kt=a||rt?"Text":"text/plain";try{return G?ft.setData(kt,G)!==!1:ft.getData(kt)}catch(Mt){if(!rt)return nt(Mt,G,!0)}}},ot=function(H,G){var rt=S.getCopyText();if(!rt)return d.preventDefault(H);nt(H,rt)?(h&&(F(rt),L=rt,setTimeout(function(){L=!1},10)),G?S.onCut():S.onCopy(),d.preventDefault(H)):(L=!0,f.value=rt,f.select(),setTimeout(function(){L=!1,F(),G?S.onCut():S.onCopy()}))},wt=function(H){ot(H,!0)},_t=function(H){ot(H,!1)},vt=function(H){var G=nt(H);o.pasteCancelled()||(typeof G=="string"?(G&&S.onPaste(G,H),g.isIE&&setTimeout(F),d.preventDefault(H)):(f.value="",$=!0))};d.addCommandKeyListener(f,function(H,G,rt){if(!C)return S.onCommandKey(H,G,rt)},S),d.addListener(f,"select",W,S),d.addListener(f,"input",q,S),d.addListener(f,"cut",wt,S),d.addListener(f,"copy",_t,S),d.addListener(f,"paste",vt,S),(!("oncut"in f)||!("oncopy"in f)||!("onpaste"in f))&&d.addListener(A,"keydown",function(H){if(!(g.isMac&&!H.metaKey||!H.ctrlKey))switch(H.keyCode){case 67:_t(H);break;case 86:vt(H);break;case 88:wt(H);break}},S);var U=function(H){if(!(C||!S.onCompositionStart||S.$readOnly)&&(C={},!y)){H.data&&(C.useTextareaForIME=!1),setTimeout(X,0),S._signal("compositionStart"),S.on("mousedown",tt);var G=S.getSelectionRange();G.end.row=G.start.row,G.end.column=G.start.column,C.markerRange=G,C.selectionStart=_,S.onCompositionStart(C),C.useTextareaForIME?(E=f.value="",_=0,R=0):(f.msGetInputContext&&(C.context=f.msGetInputContext()),f.getInputContext&&(C.context=f.getInputContext()))}},X=function(){if(!(!C||!S.onCompositionUpdate||S.$readOnly)){if(y)return tt();if(C.useTextareaForIME)S.onCompositionUpdate(f.value);else{var H=f.value;Y(H),C.markerRange&&(C.context&&(C.markerRange.start.column=C.selectionStart=C.context.compositionStartOffset),C.markerRange.end.column=C.markerRange.start.column+R-C.selectionStart+M)}}},at=function(H){!S.onCompositionEnd||S.$readOnly||(C=!1,S.onCompositionEnd(),S.off("mousedown",tt),H&&q())};function tt(){b=!0,f.blur(),f.focus(),b=!1}var ct=u.delayedCall(X,50).schedule.bind(null,null);function K(H){H.keyCode==27&&f.value.length<f.selectionStart&&(C||(E=f.value),_=R=-1,F()),ct()}d.addListener(f,"compositionstart",U,S),d.addListener(f,"compositionupdate",X,S),d.addListener(f,"keyup",K,S),d.addListener(f,"keydown",ct,S),d.addListener(f,"compositionend",at,S),this.getElement=function(){return f},this.setCommandMode=function(H){y=H,f.readOnly=!1},this.setReadOnly=function(H){y||(f.readOnly=H)},this.setCopyWithEmptySelection=function(H){},this.onContextMenu=function(H){Z=!0,F(),S._emit("nativecontextmenu",{target:S,domEvent:H}),this.moveToMouse(H,!0)},this.moveToMouse=function(H,G){w||(w=f.style.cssText),f.style.cssText=(G?"z-index:100000;":"")+(g.isIE?"opacity:0.1;":"")+"text-indent: -"+(_+R)*S.renderer.characterWidth*.5+"px;";var rt=S.container.getBoundingClientRect(),ft=n.computedStyle(S.container),kt=rt.top+(parseInt(ft.borderTopWidth)||0),Mt=rt.left+(parseInt(rt.borderLeftWidth)||0),It=rt.bottom-kt-f.clientHeight-2,Pt=function(Dt){n.translate(f,Dt.clientX-Mt-2,Math.min(Dt.clientY-kt-2,It))};Pt(H),H.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(V),g.isWin&&d.capture(S.container,Pt,st))},this.onContextMenuClose=st;var V;function st(){clearTimeout(V),V=setTimeout(function(){w&&(f.style.cssText=w,w=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var it=function(H){S.textInput.onContextMenu(H),st()};d.addListener(f,"mouseup",it,S),d.addListener(f,"mousedown",function(H){H.preventDefault(),st()},S),d.addListener(S.renderer.scroller,"contextmenu",it,S),d.addListener(f,"contextmenu",it,S),h&&bt(A,S,f);function bt(H,G,rt){var ft=null,kt=!1;rt.addEventListener("keydown",function(It){ft&&clearTimeout(ft),kt=!0},!0),rt.addEventListener("keyup",function(It){ft=setTimeout(function(){kt=!1},100)},!0);var Mt=function(It){if(document.activeElement===rt&&!(kt||C||G.$mouseHandler.isMousePressed)&&!L){var Pt=rt.selectionStart,Dt=rt.selectionEnd,Lt=null,Xt=0;if(Pt==0?Lt=c.up:Pt==1?Lt=c.home:Dt>R&&E[Dt]==`
`?Lt=c.end:Pt<_&&E[Pt-1]==" "?(Lt=c.left,Xt=m.option):Pt<_||Pt==_&&R!=_&&Pt==Dt?Lt=c.left:Dt>R&&E.slice(0,Dt).split(`
`).length>2?Lt=c.down:Dt>R&&E[Dt-1]==" "?(Lt=c.right,Xt=m.option):(Dt>R||Dt==R&&R!=_&&Pt==Dt)&&(Lt=c.right),Pt!==Dt&&(Xt|=m.shift),Lt){var rr=G.onCommandKey({},Xt,Lt);if(!rr&&G.commands){Lt=c.keyCodeToString(Lt);var he=G.commands.findKeyCommand(Xt,Lt);he&&G.execCommand(he)}_=Pt,R=Dt,F("")}}};document.addEventListener("selectionchange",Mt),G.on("destroy",function(){document.removeEventListener("selectionchange",Mt)})}this.destroy=function(){f.parentElement&&f.parentElement.removeChild(f)}},t.TextInput=x,t.$setUserAgentForTests=function(A,S){k=A,h=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("../lib/useragent"),p=0,g=550,n=function(){function i(a){a.$clickSelection=null;var l=a.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(a)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(a)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(a)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(a)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a));var s=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];s.forEach(function(c){a[c]=this[c]},this),a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange"),a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}return i.prototype.onMouseDown=function(a){var l=a.inSelection(),s=a.getDocumentPosition();this.mousedownEvent=a;var c=this.editor,m=a.getButton();if(m!==0){var h=c.getSelectionRange(),v=h.isEmpty();(v||m==1)&&c.selection.moveToPosition(s),m==2&&(c.textInput.onContextMenu(a.domEvent),d.isMozilla||a.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!c.isFocused()&&(c.focus(),this.$focusTimeout&&!this.$clickSelection&&!c.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(a);return}return this.captureMouse(a),this.startSelect(s,a.domEvent._clicks>1),a.preventDefault()},i.prototype.startSelect=function(a,l){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var s=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?s.selection.selectToPosition(a):l||s.selection.moveToPosition(a),l||this.select(),s.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var a,l=this.editor,s=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var c=this.$clickSelection.comparePoint(s);if(c==-1)a=this.$clickSelection.end;else if(c==1)a=this.$clickSelection.start;else{var m=o(this.$clickSelection,s);s=m.cursor,a=m.anchor}l.selection.setSelectionAnchor(a.row,a.column)}l.selection.selectToPosition(s),l.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(a){var l,s=this.editor,c=s.renderer.screenToTextCoordinates(this.x,this.y),m=s.selection[a](c.row,c.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(m.start),v=this.$clickSelection.comparePoint(m.end);if(h==-1&&v<=0)l=this.$clickSelection.end,(m.end.row!=c.row||m.end.column!=c.column)&&(c=m.start);else if(v==1&&h>=0)l=this.$clickSelection.start,(m.start.row!=c.row||m.start.column!=c.column)&&(c=m.end);else if(h==-1&&v==1)c=m.end,l=m.start;else{var k=o(this.$clickSelection,c);c=k.cursor,l=k.anchor}s.selection.setSelectionAnchor(l.row,l.column)}s.selection.selectToPosition(c),s.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var a=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(a>p||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(a){var l=a.getDocumentPosition(),s=this.editor,c=s.session,m=c.getBracketRange(l);m?(m.isEmpty()&&(m.start.column--,m.end.column++),this.setState("select")):(m=s.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=m,this.select()},i.prototype.onTripleClick=function(a){var l=a.getDocumentPosition(),s=this.editor;this.setState("selectByLines");var c=s.getSelectionRange();c.isMultiLine()&&c.contains(l.row,l.column)?(this.$clickSelection=s.selection.getLineRange(c.start.row),this.$clickSelection.end=s.selection.getLineRange(c.end.row).end):this.$clickSelection=s.selection.getLineRange(l.row),this.select()},i.prototype.onQuadClick=function(a){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var s=this.$lastScroll,c=a.domEvent.timeStamp,m=c-s.t,h=m?a.wheelX/m:s.vx,v=m?a.wheelY/m:s.vy;m<g&&(h=(h+s.vx)/2,v=(v+s.vy)/2);var k=Math.abs(h/v),x=!1;if(k>=1&&l.renderer.isScrollableBy(a.wheelX*a.speed,0)&&(x=!0),k<=1&&l.renderer.isScrollableBy(0,a.wheelY*a.speed)&&(x=!0),x)s.allowed=c;else if(c-s.allowed<g){var A=Math.abs(h)<=1.5*Math.abs(s.vx)&&Math.abs(v)<=1.5*Math.abs(s.vy);A?(x=!0,s.allowed=c):s.allowed=0}if(s.t=c,s.vx=h,s.vy=v,x)return l.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()}},i}();n.prototype.selectEnd=n.prototype.selectByLinesEnd,n.prototype.selectAllEnd=n.prototype.selectByLinesEnd,n.prototype.selectByWordsEnd=n.prototype.selectByLinesEnd,t.DefaultHandlers=n;function u(i,a,l,s){return Math.sqrt(Math.pow(l-i,2)+Math.pow(s-a,2))}function o(i,a){if(i.start.row==i.end.row)var l=2*a.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var l=a.column-4;else var l=2*a.row-i.start.row-i.end.row;return l<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,r){t.preventParentScroll=function(p){p.stopPropagation();var g=p.currentTarget,n=g.scrollHeight>g.clientHeight;n||p.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var m=function(h,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,x){k.__proto__=x}||function(k,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(k[A]=x[A])},m(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(h,v);function k(){this.constructor=h}h.prototype=v===null?Object.create(v):(k.prototype=v.prototype,new k)}}(),p=this&&this.__values||function(m){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&m[h],k=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&k>=m.length&&(m=void 0),{value:m&&m[k++],done:!m}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("./lib/dom"),n=e("./lib/event"),u=e("./range").Range,o=e("./lib/scroll").preventParentScroll,i="ace_tooltip",a=function(){function m(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return m.prototype.$init=function(){return this.$element=g.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},m.prototype.getElement=function(){return this.$element||this.$init()},m.prototype.setText=function(h){this.getElement().textContent=h},m.prototype.setHtml=function(h){this.getElement().innerHTML=h},m.prototype.setPosition=function(h,v){this.getElement().style.left=h+"px",this.getElement().style.top=v+"px"},m.prototype.setClassName=function(h){g.addCssClass(this.getElement(),h)},m.prototype.setTheme=function(h){this.$element.className=i+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},m.prototype.show=function(h,v,k){h!=null&&this.setText(h),v!=null&&k!=null&&this.setPosition(v,k),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},m.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},m.prototype.getHeight=function(){return this.getElement().offsetHeight},m.prototype.getWidth=function(){return this.getElement().offsetWidth},m.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},m}(),l=function(){function m(){this.popups=[]}return m.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},m.prototype.removePopup=function(h){var v=this.popups.indexOf(h);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},m.prototype.updatePopups=function(){var h,v,k,x;this.popups.sort(function(y,b){return b.priority-y.priority});var A=[];try{for(var S=p(this.popups),f=S.next();!f.done;f=S.next()){var L=f.value,$=!0;try{for(var C=(k=void 0,p(A)),T=C.next();!T.done;T=C.next()){var w=T.value;if(this.doPopupsOverlap(w,L)){$=!1;break}}}catch(y){k={error:y}}finally{try{T&&!T.done&&(x=C.return)&&x.call(C)}finally{if(k)throw k.error}}$?A.push(L):L.hide()}}catch(y){h={error:y}}finally{try{f&&!f.done&&(v=S.return)&&v.call(S)}finally{if(h)throw h.error}}},m.prototype.doPopupsOverlap=function(h,v){var k=h.getElement().getBoundingClientRect(),x=v.getElement().getBoundingClientRect();return k.left<x.right&&k.right>x.left&&k.top<x.bottom&&k.bottom>x.top},m}(),s=new l;t.popupManager=s,t.Tooltip=a;var c=function(m){d(h,m);function h(v){v===void 0&&(v=document.body);var k=m.call(this,v)||this;k.timeout=void 0,k.lastT=0,k.idleTime=350,k.lastEvent=void 0,k.onMouseOut=k.onMouseOut.bind(k),k.onMouseMove=k.onMouseMove.bind(k),k.waitForHover=k.waitForHover.bind(k),k.hide=k.hide.bind(k);var x=k.getElement();return x.style.whiteSpace="pre-wrap",x.style.pointerEvents="auto",x.addEventListener("mouseout",k.onMouseOut),x.tabIndex=-1,x.addEventListener("blur",function(){x.contains(document.activeElement)||this.hide()}.bind(k)),x.addEventListener("wheel",o),k}return h.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(v,k){this.lastEvent=v,this.lastT=Date.now();var x=k.$mouseHandler.isMousePressed;if(this.isOpen){var A=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(A.row,A.column)||x||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||x||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(v){var k=v.editor,x=v.getDocumentPosition(),A=k.session.getLine(x.row);if(x.column==A.length){var S=k.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),f=k.session.documentToScreenPosition(x.row,x.column);if(f.column!=S.column||f.row!=S.row)return!0}return!1},h.prototype.setDataProvider=function(v){this.$gatherData=v},h.prototype.showForRange=function(v,k,x,A){var S=10;if(!(A&&A!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var f=v.renderer;this.isOpen||(s.addPopup(this),this.$registerCloseEvents(),this.setTheme(f.theme)),this.isOpen=!0,this.addMarker(k,v.session),this.range=u.fromPoints(k.start,k.end);var L=f.textToScreenCoordinates(k.start.row,k.start.column),$=f.scroller.getBoundingClientRect();L.pageX<$.left&&(L.pageX=$.left);var C=this.getElement();C.innerHTML="",C.appendChild(x),C.style.maxHeight="",C.style.display="block";var T=C.clientHeight,w=C.clientWidth,y=window.innerHeight-L.pageY-f.lineHeight,b=!0;L.pageY-T<0&&L.pageY<y&&(b=!1),C.style.maxHeight=(b?L.pageY:y)-S+"px",C.style.top=b?"":L.pageY+f.lineHeight+"px",C.style.bottom=b?window.innerHeight-L.pageY+"px":"",C.style.left=Math.min(L.pageX,window.innerWidth-w-S)+"px"}},h.prototype.addMarker=function(v,k){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=k,this.marker=k&&k.addMarker(v,"ace_highlight-marker","text")},h.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,s.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},h}(a);t.HoverTooltip=c});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var s=function(c,m){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},s(c,m)};return function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");s(c,m);function h(){this.constructor=c}c.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),p=this&&this.__values||function(s){var c=typeof Symbol=="function"&&Symbol.iterator,m=c&&s[c],h=0;if(m)return m.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&h>=s.length&&(s=void 0),{value:s&&s[h++],done:!s}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("../lib/dom"),n=e("../lib/event"),u=e("../tooltip").Tooltip,o=e("../config").nls,i=e("../lib/lang");function a(s){var c=s.editor,m=c.renderer.$gutterLayer,h=new l(c);s.editor.setDefaultHandler("guttermousedown",function(f){if(!(!c.isFocused()||f.getButton()!=0)){var L=m.getRegion(f);if(L!="foldWidgets"){var $=f.getDocumentPosition().row,C=c.session.selection;if(f.getShiftKey())C.selectTo($,0);else{if(f.domEvent.detail==2)return c.selectAll(),f.preventDefault();s.$clickSelection=c.selection.getLineRange($)}return s.setState("selectByLines"),s.captureMouse(f),f.preventDefault()}}});var v,k;function x(){var f=k.getDocumentPosition().row,L=c.session.getLength();if(f==L){var $=c.renderer.pixelToScreenCoordinates(0,k.y).row,C=k.$pos;if($>c.session.documentToScreenRow(C.row,C.column))return A()}if(h.showTooltip(f),!!h.isOpen)if(c.on("mousewheel",A),s.$tooltipFollowsMouse)S(k);else{var T=k.getGutterRow(),w=m.$lines.get(T);if(w){var y=w.element.querySelector(".ace_gutter_annotation"),b=y.getBoundingClientRect(),E=h.getElement().style;E.left=b.right+"px",E.top=b.bottom+"px"}else S(k)}}function A(){v&&(v=clearTimeout(v)),h.isOpen&&(h.hideTooltip(),c.off("mousewheel",A))}function S(f){h.setPosition(f.x,f.y)}s.editor.setDefaultHandler("guttermousemove",function(f){var L=f.domEvent.target||f.domEvent.srcElement;if(g.hasCssClass(L,"ace_fold-widget"))return A();h.isOpen&&s.$tooltipFollowsMouse&&S(f),k=f,!v&&(v=setTimeout(function(){v=null,k&&!s.isMousePressed?x():A()},50))}),n.addListener(c.renderer.$gutter,"mouseout",function(f){k=null,!(!h.isOpen||v)&&(v=setTimeout(function(){v=null,A()},50))},c),c.on("changeSession",A),c.on("input",A)}t.GutterHandler=a;var l=function(s){d(c,s);function c(m){var h=s.call(this,m.container)||this;return h.editor=m,h}return c.prototype.setPosition=function(m,h){var v=window.innerWidth||document.documentElement.clientWidth,k=window.innerHeight||document.documentElement.clientHeight,x=this.getWidth(),A=this.getHeight();m+=15,h+=15,m+x>v&&(m-=m+x-v),h+A>k&&(h-=20+A),u.prototype.setPosition.call(this,m,h)},Object.defineProperty(c,"annotationLabels",{get:function(){return{error:{singular:o("gutter-tooltip.aria-label.error.singular","error"),plural:o("gutter-tooltip.aria-label.error.plural","errors")},warning:{singular:o("gutter-tooltip.aria-label.warning.singular","warning"),plural:o("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:o("gutter-tooltip.aria-label.info.singular","information message"),plural:o("gutter-tooltip.aria-label.info.plural","information messages")}}},enumerable:!1,configurable:!0}),c.prototype.showTooltip=function(m){var h,v=this.editor.renderer.$gutterLayer,k=v.$annotations[m],x;k?x={displayText:Array.from(k.displayText),type:Array.from(k.type)}:x={displayText:[],type:[]};var A=v.session.getFoldLine(m);if(A&&v.$showFoldedAnnotations){for(var S={error:[],warning:[],info:[]},f,L=m+1;L<=A.end.row;L++)if(v.$annotations[L])for(var $=0;$<v.$annotations[L].text.length;$++){var C=v.$annotations[L].type[$];if(S[C].push(v.$annotations[L].text[$]),C==="error"){f="error_fold";continue}if(C==="warning"){f="warning_fold";continue}}if(f==="error_fold"||f==="warning_fold"){var T="".concat(c.annotationsToSummaryString(S)," in folded code.");x.displayText.push(T),x.type.push(f)}}if(x.displayText.length===0)return this.hide();for(var w={error:[],warning:[],info:[]},y=v.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",L=0;L<x.displayText.length;L++){var b=g.createElement("span"),E=g.createElement("span");(h=E.classList).add.apply(h,["ace_".concat(x.type[L]),y]),E.setAttribute("aria-label","".concat(c.annotationLabels[x.type[L].replace("_fold","")].singular)),E.setAttribute("role","img"),E.appendChild(g.createTextNode(" ")),b.appendChild(E),b.appendChild(g.createTextNode(x.displayText[L])),b.appendChild(g.createElement("br")),w[x.type[L].replace("_fold","")].push(b)}var _=this.getElement();g.removeChildren(_),w.error.forEach(function(R){return _.appendChild(R)}),w.warning.forEach(function(R){return _.appendChild(R)}),w.info.forEach(function(R){return _.appendChild(R)}),_.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},c.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},c.annotationsToSummaryString=function(m){var h,v,k=[],x=["error","warning","info"];try{for(var A=p(x),S=A.next();!S.done;S=A.next()){var f=S.value;if(m[f].length){var L=m[f].length===1?c.annotationLabels[f].singular:c.annotationLabels[f].plural;k.push("".concat(m[f].length," ").concat(L))}}}catch($){h={error:$}}finally{try{S&&!S.done&&(v=A.return)&&v.call(A)}finally{if(h)throw h.error}}return k.join(", ")},c}(u);t.GutterTooltip=l});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("../lib/event"),p=e("../lib/useragent"),g=function(){function n(u,o){this.speed,this.wheelX,this.wheelY,this.domEvent=u,this.editor=o,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return n.prototype.stopPropagation=function(){d.stopPropagation(this.domEvent),this.propagationStopped=!0},n.prototype.preventDefault=function(){d.preventDefault(this.domEvent),this.defaultPrevented=!0},n.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},n.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},n.prototype.getGutterRow=function(){var u=this.getDocumentPosition().row,o=this.editor.session.documentToScreenRow(u,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return o-i},n.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,o=u.getSelectionRange();if(o.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=o.contains(i.row,i.column)}return this.$inSelection},n.prototype.getButton=function(){return d.getButton(this.domEvent)},n.prototype.getShiftKey=function(){return this.domEvent.shiftKey},n.prototype.getAccelKey=function(){return p.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},n}();t.MouseEvent=g});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("../lib/dom"),p=e("../lib/event"),g=e("../lib/useragent"),n=200,u=200,o=5;function i(l){var s=l.editor,c=d.createElement("div");c.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",c.textContent="\xA0";var m=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];m.forEach(function(D){l[D]=this[D]},this),s.on("mousedown",this.onMouseDown.bind(l));var h=s.container,v,k,x,A,S,f,L=0,$,C,T,w,y;this.onDragStart=function(D){if(this.cancelDrag||!h.draggable){var F=this;return setTimeout(function(){F.startSelect(),F.captureMouse(D)},0),D.preventDefault()}S=s.getSelectionRange();var z=D.dataTransfer;z.effectAllowed=s.getReadOnly()?"copy":"copyMove",s.container.appendChild(c),z.setDragImage&&z.setDragImage(c,0,0),setTimeout(function(){s.container.removeChild(c)}),z.clearData(),z.setData("Text",s.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(D){if(h.draggable=!1,C=!1,this.setState(null),!s.getReadOnly()){var F=D.dataTransfer.dropEffect;!$&&F=="move"&&s.session.remove(s.getSelectionRange()),s.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(D){if(!(s.getReadOnly()||!O(D.dataTransfer)))return k=D.clientX,x=D.clientY,v||R(),L++,D.dataTransfer.dropEffect=$=N(D),p.preventDefault(D)},this.onDragOver=function(D){if(!(s.getReadOnly()||!O(D.dataTransfer)))return k=D.clientX,x=D.clientY,v||(R(),L++),I!==null&&(I=null),D.dataTransfer.dropEffect=$=N(D),p.preventDefault(D)},this.onDragLeave=function(D){if(L--,L<=0&&v)return M(),$=null,p.preventDefault(D)},this.onDrop=function(D){if(f){var F=D.dataTransfer;if(C)switch($){case"move":S.contains(f.row,f.column)?S={start:f,end:f}:S=s.moveText(S,f);break;case"copy":S=s.moveText(S,f,!0);break}else{var z=F.getData("Text");S={start:f,end:s.session.insert(f,z)},s.focus(),$=null}return M(),p.preventDefault(D)}},p.addListener(h,"dragstart",this.onDragStart.bind(l),s),p.addListener(h,"dragend",this.onDragEnd.bind(l),s),p.addListener(h,"dragenter",this.onDragEnter.bind(l),s),p.addListener(h,"dragover",this.onDragOver.bind(l),s),p.addListener(h,"dragleave",this.onDragLeave.bind(l),s),p.addListener(h,"drop",this.onDrop.bind(l),s);function b(D,F){var z=Date.now(),W=!F||D.row!=F.row,j=!F||D.column!=F.column;if(!w||W||j)s.moveCursorToPosition(D),w=z,y={x:k,y:x};else{var Z=a(y.x,y.y,k,x);Z>o?w=null:z-w>=u&&(s.renderer.scrollCursorIntoView(),w=null)}}function E(D,F){var z=Date.now(),W=s.renderer.layerConfig.lineHeight,j=s.renderer.layerConfig.characterWidth,Z=s.renderer.scroller.getBoundingClientRect(),Y={x:{left:k-Z.left,right:Z.right-k},y:{top:x-Z.top,bottom:Z.bottom-x}},q=Math.min(Y.x.left,Y.x.right),nt=Math.min(Y.y.top,Y.y.bottom),ot={row:D.row,column:D.column};q/j<=2&&(ot.column+=Y.x.left<Y.x.right?-3:2),nt/W<=1&&(ot.row+=Y.y.top<Y.y.bottom?-1:1);var wt=D.row!=ot.row,_t=D.column!=ot.column,vt=!F||D.row!=F.row;wt||_t&&!vt?T?z-T>=n&&s.renderer.scrollCursorIntoView(ot):T=z:T=null}function _(){var D=f;f=s.renderer.screenToTextCoordinates(k,x),b(f,D),E(f,D)}function R(){S=s.selection.toOrientedRange(),v=s.session.addMarker(S,"ace_selection",s.getSelectionStyle()),s.clearSelection(),s.isFocused()&&s.renderer.$cursorLayer.setBlinking(!1),clearInterval(A),_(),A=setInterval(_,20),L=0,p.addListener(document,"mousemove",P)}function M(){clearInterval(A),s.session.removeMarker(v),v=null,s.selection.fromOrientedRange(S),s.isFocused()&&!C&&s.$resetCursorStyle(),S=null,f=null,L=0,T=null,w=null,p.removeListener(document,"mousemove",P)}var I=null;function P(){I==null&&(I=setTimeout(function(){I!=null&&v&&M()},20))}function O(D){var F=D.types;return!F||Array.prototype.some.call(F,function(z){return z=="text/plain"||z=="Text"})}function N(D){var F=["copy","copymove","all","uninitialized"],z=["move","copymove","linkmove","all","uninitialized"],W=g.isMac?D.altKey:D.ctrlKey,j="uninitialized";try{j=D.dataTransfer.effectAllowed.toLowerCase()}catch{}var Z="none";return W&&F.indexOf(j)>=0?Z="copy":z.indexOf(j)>=0?Z="move":F.indexOf(j)>=0&&(Z="copy"),Z}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,s=l.container;s.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var c=g.isWin?"default":"move";l.renderer.setCursorStyle(c),this.setState("dragReady")},this.onMouseDrag=function(l){var s=this.editor.container;if(g.isIE&&this.state=="dragReady"){var c=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&s.dragDrop()}if(this.state==="dragWait"){var c=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(s.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var s=this.editor,c=l.inSelection(),m=l.getButton(),h=l.domEvent.detail||1;if(h===1&&m===0&&c){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),s.getDragDelay()){if(g.isWebKit){this.cancelDrag=!0;var k=s.container;k.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(i.prototype);function a(l,s,c,m){return Math.sqrt(Math.pow(c-l,2)+Math.pow(m-s,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,r){"use strict";var d=e("./mouse_event").MouseEvent,p=e("../lib/event"),g=e("../lib/dom");t.addTouchListeners=function(n,u){var o="scroll",i,a,l,s,c,m,h=0,v,k=0,x=0,A=0,S,f;function L(){var b=window.navigator&&window.navigator.clipboard,E=!1,_=function(){var I=u.getCopyText(),P=u.session.getUndoManager().hasUndo();f.replaceChild(g.buildDom(E?["span",!I&&R("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],I&&R("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],I&&R("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],b&&R("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],P&&R("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],R("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],R("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),f.firstChild)},R=function(I){return u.commands.canExecute(I,u)},M=function(I){var P=I.target.getAttribute("action");if(P=="more"||!E)return E=!E,_();P=="paste"?b.readText().then(function(O){u.execCommand(P,O)}):P&&((P=="cut"||P=="copy")&&(b?b.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(P)),f.firstChild.style.display="none",E=!1,P!="openCommandPalette"&&u.focus()};f=g.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(I){o="menu",I.stopPropagation(),I.preventDefault(),u.textInput.focus()},ontouchend:function(I){I.stopPropagation(),I.preventDefault(),M(I)},onclick:M},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function $(){if(!u.getOption("enableMobileMenu")){f&&C();return}f||L();var b=u.selection.cursor,E=u.renderer.textToScreenCoordinates(b.row,b.column),_=u.renderer.textToScreenCoordinates(0,0).pageX,R=u.renderer.scrollLeft,M=u.container.getBoundingClientRect();f.style.top=E.pageY-M.top-3+"px",E.pageX-M.left<M.width-70?(f.style.left="",f.style.right="10px"):(f.style.right="",f.style.left=_+R-M.left+"px"),f.style.display="",f.firstChild.style.display="none",u.on("input",C)}function C(b){f&&(f.style.display="none"),u.off("input",C)}function T(){c=null,clearTimeout(c);var b=u.selection.getRange(),E=b.contains(v.row,v.column);(b.isEmpty()||!E)&&(u.selection.moveToPosition(v),u.selection.selectWord()),o="wait",$()}function w(){c=null,clearTimeout(c),u.selection.moveToPosition(v);var b=k>=2?u.selection.getLineRange(v.row):u.session.getBracketRange(v);b&&!b.isEmpty()?u.selection.setRange(b):u.selection.selectWord(),o="wait"}p.addListener(n,"contextmenu",function(b){if(S){var E=u.textInput.getElement();E.focus()}},u),p.addListener(n,"touchstart",function(b){var E=b.touches;if(c||E.length>1){clearTimeout(c),c=null,l=-1,o="zoom";return}S=u.$mouseHandler.isMousePressed=!0;var _=u.renderer.layerConfig.lineHeight,R=u.renderer.layerConfig.lineHeight,M=b.timeStamp;s=M;var I=E[0],P=I.clientX,O=I.clientY;Math.abs(i-P)+Math.abs(a-O)>_&&(l=-1),i=b.clientX=P,a=b.clientY=O,x=A=0;var N=new d(b,u);if(v=N.getDocumentPosition(),M-l<500&&E.length==1&&!h)k++,b.preventDefault(),b.button=0,w();else{k=0;var D=u.selection.cursor,F=u.selection.isEmpty()?D:u.selection.anchor,z=u.renderer.$cursorLayer.getPixelPosition(D,!0),W=u.renderer.$cursorLayer.getPixelPosition(F,!0),j=u.renderer.scroller.getBoundingClientRect(),Z=u.renderer.layerConfig.offset,Y=u.renderer.scrollLeft,q=function(wt,_t){return wt=wt/R,_t=_t/_-.75,wt*wt+_t*_t};if(b.clientX<j.left){o="zoom";return}var nt=q(b.clientX-j.left-z.left+Y,b.clientY-j.top-z.top+Z),ot=q(b.clientX-j.left-W.left+Y,b.clientY-j.top-W.top+Z);nt<3.5&&ot<3.5&&(o=nt>ot?"cursor":"anchor"),ot<3.5?o="anchor":nt<3.5?o="cursor":o="scroll",c=setTimeout(T,450)}l=M},u),p.addListener(n,"touchend",function(b){S=u.$mouseHandler.isMousePressed=!1,m&&clearInterval(m),o=="zoom"?(o="",h=0):c?(u.selection.moveToPosition(v),h=0,$()):o=="scroll"?(y(),C()):$(),clearTimeout(c),c=null},u),p.addListener(n,"touchmove",function(b){c&&(clearTimeout(c),c=null);var E=b.touches;if(!(E.length>1||o=="zoom")){var _=E[0],R=i-_.clientX,M=a-_.clientY;if(o=="wait")if(R*R+M*M>4)o="cursor";else return b.preventDefault();i=_.clientX,a=_.clientY,b.clientX=_.clientX,b.clientY=_.clientY;var I=b.timeStamp,P=I-s;if(s=I,o=="scroll"){var O=new d(b,u);O.speed=1,O.wheelX=R,O.wheelY=M,10*Math.abs(R)<Math.abs(M)&&(R=0),10*Math.abs(M)<Math.abs(R)&&(M=0),P!=0&&(x=R/P,A=M/P),u._emit("mousewheel",O),O.propagationStopped||(x=A=0)}else{var N=new d(b,u),D=N.getDocumentPosition();o=="cursor"?u.selection.moveCursorToPosition(D):o=="anchor"&&u.selection.setSelectionAnchor(D.row,D.column),u.renderer.scrollCursorIntoView(D),b.preventDefault()}}},u);function y(){h+=60,m=setInterval(function(){h--<=0&&(clearInterval(m),m=null),Math.abs(x)<.01&&(x=0),Math.abs(A)<.01&&(A=0),h<20&&(x=.9*x),h<20&&(A=.9*A);var b=u.session.getScrollTop();u.renderer.scrollBy(10*x,10*A),b==u.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,r){"use strict";var d=e("../lib/event"),p=e("../lib/useragent"),g=e("./default_handlers").DefaultHandlers,n=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,o=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,a=e("../config"),l=function(){function s(c){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var m=this;this.editor=c,new g(this),new n(this),new o(this);var h=function(x){var A=!document.hasFocus||!document.hasFocus()||!c.isFocused()&&document.activeElement==(c.textInput&&c.textInput.getElement());A&&window.focus(),c.focus(),setTimeout(function(){c.isFocused()||c.focus()})},v=c.renderer.getMouseEventTarget();d.addListener(v,"click",this.onMouseEvent.bind(this,"click"),c),d.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),c),d.addMultiMouseDownListener([v,c.renderer.scrollBarV&&c.renderer.scrollBarV.inner,c.renderer.scrollBarH&&c.renderer.scrollBarH.inner,c.textInput&&c.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",c),d.addMouseWheelListener(c.container,this.onMouseWheel.bind(this,"mousewheel"),c),i(c.container,c);var k=c.renderer.$gutter;d.addListener(k,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),c),d.addListener(k,"click",this.onMouseEvent.bind(this,"gutterclick"),c),d.addListener(k,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),c),d.addListener(k,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),c),d.addListener(v,"mousedown",h,c),d.addListener(k,"mousedown",h,c),p.isIE&&c.renderer.scrollBarV&&(d.addListener(c.renderer.scrollBarV.element,"mousedown",h,c),d.addListener(c.renderer.scrollBarH.element,"mousedown",h,c)),c.on("mousemove",function(x){if(!(m.state||m.$dragDelay||!m.$dragEnabled)){var A=c.renderer.screenToTextCoordinates(x.x,x.y),S=c.session.selection.getRange(),f=c.renderer;!S.isEmpty()&&S.insideStart(A.row,A.column)?f.setCursorStyle("default"):f.setCursorStyle("")}},c)}return s.prototype.onMouseEvent=function(c,m){this.editor.session&&this.editor._emit(c,new u(m,this.editor))},s.prototype.onMouseMove=function(c,m){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(c,new u(m,this.editor))},s.prototype.onMouseWheel=function(c,m){var h=new u(m,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=m.wheelX,h.wheelY=m.wheelY,this.editor._emit(c,h)},s.prototype.setState=function(c){this.state=c},s.prototype.captureMouse=function(c,m){this.x=c.x,this.y=c.y,this.isMousePressed=!0;var h=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var k=this,x=function($){if($){if(p.isWebKit&&!$.which&&k.releaseMouse)return k.releaseMouse();k.x=$.clientX,k.y=$.clientY,m&&m($),k.mouseEvent=new u($,k.editor),k.$mouseMoved=!0}},A=function($){h.off("beforeEndOperation",f),clearInterval(L),h.session&&S(),k[k.state+"End"]&&k[k.state+"End"]($),k.state="",k.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),k.$onCaptureMouseMove=k.releaseMouse=null,$&&k.onMouseEvent("mouseup",$),h.endOperation()},S=function(){k[k.state]&&k[k.state](),k.$mouseMoved=!1};if(p.isOldIE&&c.domEvent.type=="dblclick")return setTimeout(function(){A(c)});var f=function($){k.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(k[k.state+"End"]&&k[k.state+"End"](),k.state="",k.releaseMouse())};h.on("beforeEndOperation",f),h.startOperation({command:{name:"mouse"}}),k.$onCaptureMouseMove=x,k.releaseMouse=d.capture(this.editor.container,x,A);var L=setInterval(S,20)},s.prototype.cancelContextMenu=function(){var c=function(m){m&&m.domEvent&&m.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",c),m&&m.domEvent&&d.stopEvent(m.domEvent))}.bind(this);setTimeout(c,10),this.editor.on("nativecontextmenu",c)},s.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},s}();l.prototype.releaseMouse=null,a.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:p.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../lib/dom"),p=function(){function g(n){n.on("click",function(u){var o=u.getDocumentPosition(),i=n.session,a=i.getFoldAt(o.row,o.column,1);a&&(u.getAccelKey()?i.removeFold(a):i.expandFold(a),u.stop());var l=u.domEvent&&u.domEvent.target;l&&d.hasCssClass(l,"ace_inline_button")&&d.hasCssClass(l,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),n.renderer.scrollCursorIntoView())}),n.on("gutterclick",function(u){var o=n.renderer.$gutterLayer.getRegion(u);if(o=="foldWidgets"){var i=u.getDocumentPosition().row,a=n.session;a.foldWidgets&&a.foldWidgets[i]&&n.session.onFoldWidgetClick(i,u),n.isFocused()||n.focus(),u.stop()}}),n.on("gutterdblclick",function(u){var o=n.renderer.$gutterLayer.getRegion(u);if(o=="foldWidgets"){var i=u.getDocumentPosition().row,a=n.session,l=a.getParentFoldRangeData(i,!0),s=l.range||l.firstRange;if(s){i=s.start.row;var c=a.getFoldAt(i,a.getLine(i).length,1);c?a.removeFold(c):(a.addFold("...",s),n.renderer.scrollCursorIntoView({row:s.start.row,column:0}))}u.stop()}})}return g}();t.FoldHandler=p});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,r){"use strict";var d=e("../lib/keys"),p=e("../lib/event"),g=function(){function n(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)}return n.prototype.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},n.prototype.setKeyboardHandler=function(u){var o=this.$handlers;if(o[o.length-1]!=u){for(;o[o.length-1]&&o[o.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(o[o.length-1]);this.addKeyboardHandler(u,1)}},n.prototype.addKeyboardHandler=function(u,o){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var i=this.$handlers.indexOf(u);i!=-1&&this.$handlers.splice(i,1),o==null?this.$handlers.push(u):this.$handlers.splice(o,0,u),i==-1&&u.attach&&u.attach(this.$editor)}},n.prototype.removeKeyboardHandler=function(u){var o=this.$handlers.indexOf(u);return o==-1?!1:(this.$handlers.splice(o,1),u.detach&&u.detach(this.$editor),!0)},n.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},n.prototype.getStatusText=function(){var u=this.$data,o=u.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(o,u)||""}).filter(Boolean).join(" ")},n.prototype.$callKeyboardHandlers=function(u,o,i,a){for(var l,s=!1,c=this.$editor.commands,m=this.$handlers.length;m--&&(l=this.$handlers[m].handleKeyboard(this.$data,u,o,i,a),!(!(!l||!l.command)&&(l.command=="null"?s=!0:s=c.exec(l.command,this.$editor,l.args,a),s&&a&&u!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&p.stopEvent(a),s))););return!s&&u==-1&&(l={command:"insertstring"},s=c.exec("insertstring",this.$editor,o)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),s},n.prototype.onCommandKey=function(u,o,i){var a=d.keyCodeToString(i);return this.$callKeyboardHandlers(o,a,i,u)},n.prototype.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)},n}();t.KeyBinding=g});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,r){"use strict";var d=["\u0621","\u0641"],p=["\u063A","\u064A"],g=0,n=0,u=!1,o=!1,i=!1,a=!1,l=!1,s=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,v=1,k=0,x=1,A=2,S=3,f=4,L=5,$=6,C=7,T=8,w=9,y=10,b=11,E=12,_=13,R=14,M=15,I=16,P=17,O=18,N=[O,O,O,O,O,O,O,O,O,$,L,$,T,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,L,L,L,$,T,f,f,b,b,b,f,f,f,f,f,y,w,y,w,w,A,A,A,A,A,A,A,A,A,A,w,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,O,O,O,O,O,O,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,w,f,b,b,b,b,f,f,f,f,k,f,f,O,f,f,b,b,A,A,f,k,f,f,f,A,k,f,f,f,f,f],D=[T,T,T,T,T,T,T,T,T,T,T,O,O,O,k,x,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,T,L,_,R,M,I,P,w,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,w,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,T];function F(Y,q,nt,ot){var wt=g?m:c,_t=null,vt=null,U=null,X=0,at=null,tt=null,ct=-1,K=null,V=null,st=[];if(!ot)for(K=0,ot=[];K<nt;K++)ot[K]=j(Y[K]);for(n=g,u=!1,o=!1,i=!1,a=!1,V=0;V<nt;V++){if(_t=X,st[V]=vt=W(Y,ot,st,V),X=wt[_t][vt],at=X&240,X&=15,q[V]=U=wt[X][5],at>0)if(at==16){for(K=ct;K<V;K++)q[K]=1;ct=-1}else ct=-1;if(tt=wt[X][6],tt)ct==-1&&(ct=V);else if(ct>-1){for(K=ct;K<V;K++)q[K]=U;ct=-1}ot[V]==L&&(q[V]=0),n|=U}if(a){for(K=0;K<nt;K++)if(ot[K]==$){q[K]=g;for(var it=K-1;it>=0&&ot[it]==T;it--)q[it]=g}}}function z(Y,q,nt){if(!(n<Y)){if(Y==1&&g==v&&!i){nt.reverse();return}for(var ot=nt.length,wt=0,_t,vt,U,X;wt<ot;){if(q[wt]>=Y){for(_t=wt+1;_t<ot&&q[_t]>=Y;)_t++;for(vt=wt,U=_t-1;vt<U;vt++,U--)X=nt[vt],nt[vt]=nt[U],nt[U]=X;wt=_t}wt++}}}function W(Y,q,nt,ot){var wt=q[ot],_t,vt,U,X;switch(wt){case k:case x:u=!1;case f:case S:return wt;case A:return u?S:A;case C:return u=!0,o=!0,x;case T:return f;case w:return ot<1||ot+1>=q.length||(_t=nt[ot-1])!=A&&_t!=S||(vt=q[ot+1])!=A&&vt!=S?f:(u&&(vt=S),vt==_t?vt:f);case y:return _t=ot>0?nt[ot-1]:L,_t==A&&ot+1<q.length&&q[ot+1]==A?A:f;case b:if(ot>0&&nt[ot-1]==A)return A;if(u)return f;for(X=ot+1,U=q.length;X<U&&q[X]==b;)X++;return X<U&&q[X]==A?A:f;case E:for(U=q.length,X=ot+1;X<U&&q[X]==E;)X++;if(X<U){var at=Y[ot],tt=at>=1425&&at<=2303||at==64286;if(_t=q[X],tt&&(_t==x||_t==C))return x}return ot<1||(_t=q[ot-1])==L?f:nt[ot-1];case L:return u=!1,i=!0,g;case $:return a=!0,f;case _:case R:case I:case P:case M:u=!1;case O:return f}}function j(Y){var q=Y.charCodeAt(0),nt=q>>8;return nt==0?q>191?k:N[q]:nt==5?/[\u0591-\u05f4]/.test(Y)?x:k:nt==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(Y)?E:/[\u0660-\u0669\u066b-\u066c]/.test(Y)?S:q==1642?b:/[\u06f0-\u06f9]/.test(Y)?A:C:nt==32&&q<=8287?D[q&255]:nt==254&&q>=65136?C:f}function Z(Y){return Y>="\u064B"&&Y<="\u0655"}t.L=k,t.R=x,t.EN=A,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(Y,q,nt){if(Y.length<2)return{};var ot=Y.split(""),wt=new Array(ot.length),_t=new Array(ot.length),vt=[];g=nt?v:h,F(ot,vt,ot.length,q);for(var U=0;U<wt.length;wt[U]=U,U++);z(2,vt,wt),z(1,vt,wt);for(var U=0;U<wt.length-1;U++)q[U]===S?vt[U]=t.AN:vt[U]===x&&(q[U]>C&&q[U]<_||q[U]===f||q[U]===O)?vt[U]=t.ON_R:U>0&&ot[U-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(ot[U])&&(vt[U-1]=vt[U]=t.R_H,U++);ot[ot.length-1]===t.DOT&&(vt[ot.length-1]=t.B),ot[0]==="\u202B"&&(vt[0]=t.RLE);for(var U=0;U<wt.length;U++)_t[U]=vt[wt[U]];return{logicalFromVisual:wt,bidiLevels:_t}},t.hasBidiCharacters=function(Y,q){for(var nt=!1,ot=0;ot<Y.length;ot++)q[ot]=j(Y.charAt(ot)),!nt&&(q[ot]==x||q[ot]==C||q[ot]==S)&&(nt=!0);return nt},t.getVisualFromLogicalIdx=function(Y,q){for(var nt=0;nt<q.logicalFromVisual.length;nt++)if(q.logicalFromVisual[nt]==Y)return nt;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,r){"use strict";var d=e("./lib/bidiutil"),p=e("./lib/lang"),g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,n=function(){function u(o){this.session=o,this.bidiMap={},this.currentRow=null,this.bidiUtil=d,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=g.test(o.getValue())}return u.prototype.isBidiRow=function(o,i,a){return this.seenBidi?(o!==this.currentRow&&(this.currentRow=o,this.updateRowLine(i,a),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},u.prototype.onChange=function(o){this.seenBidi?this.currentRow=null:o.action=="insert"&&g.test(o.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},u.prototype.getDocumentRow=function(){var o=0,i=this.session.$screenRowCache;if(i.length){var a=this.session.$getRowCacheIndex(i,this.currentRow);a>=0&&(o=this.session.$docRowCache[a])}return o},u.prototype.getSplitIndex=function(){var o=0,i=this.session.$screenRowCache;if(i.length)for(var a,l=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-o>0&&(a=this.session.$getRowCacheIndex(i,this.currentRow-o-1),a===l);)l=a,o++;else o=this.currentRow;return o},u.prototype.updateRowLine=function(o,i){o===void 0&&(o=this.getDocumentRow());var a=o===this.session.getLength()-1,l=a?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(o),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var s=this.session.$wrapData[o];s&&(i===void 0&&(i=this.getSplitIndex()),i>0&&s.length?(this.wrapIndent=s.indent,this.wrapOffset=this.wrapIndent*this.charWidths[d.L],this.line=i<s.length?this.line.substring(s[i-1],s[i]):this.line.substring(s[s.length-1])):this.line=this.line.substring(0,s[i]),i==s.length&&(this.line+=this.showInvisibles?l:d.DOT))}else this.line+=this.showInvisibles?l:d.DOT;var c=this.session,m=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,k){return v==="	"||c.isFullWidth(v.charCodeAt(0))?(h=v==="	"?c.getScreenTabSize(k+m):2,m+=h-1,p.stringRepeat(d.DOT,h)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==d.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},u.prototype.updateBidiMap=function(){var o=[];d.hasBidiCharacters(this.line,o)||this.isRtlDir?this.bidiMap=d.doBidiReorder(this.line,o,this.isRtlDir):this.bidiMap={}},u.prototype.markAsDirty=function(){this.currentRow=null},u.prototype.updateCharacterWidths=function(o){if(this.characterWidth!==o.$characterSize.width){this.fontMetrics=o;var i=this.characterWidth=o.$characterSize.width,a=o.$measureCharWidth("\u05D4");this.charWidths[d.L]=this.charWidths[d.EN]=this.charWidths[d.ON_R]=i,this.charWidths[d.R]=this.charWidths[d.AN]=a,this.charWidths[d.R_H]=a*.45,this.charWidths[d.B]=this.charWidths[d.RLE]=0,this.currentRow=null}},u.prototype.setShowInvisibles=function(o){this.showInvisibles=o,this.currentRow=null},u.prototype.setEolChar=function(o){this.EOL=o},u.prototype.setContentWidth=function(o){this.contentWidth=o},u.prototype.isRtlLine=function(o){return this.$isRtl?!0:o!=null?this.session.getLine(o).charAt(0)==this.RLE:this.isRtlDir},u.prototype.setRtlDirection=function(o,i){for(var a=o.getCursorPosition(),l=o.selection.getSelectionAnchor().row;l<=a.row;l++)!i&&o.session.getLine(l).charAt(0)===o.session.$bidiHandler.RLE?o.session.doc.removeInLine(l,0,1):i&&o.session.getLine(l).charAt(0)!==o.session.$bidiHandler.RLE&&o.session.doc.insert({column:0,row:l},o.session.$bidiHandler.RLE)},u.prototype.getPosLeft=function(o){o-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,a=o>i?this.session.getOverwrite()?o:o-1:i,l=d.getVisualFromLogicalIdx(a,this.bidiMap),s=this.bidiMap.bidiLevels,c=0;!this.session.getOverwrite()&&o<=i&&s[l]%2!==0&&l++;for(var m=0;m<l;m++)c+=this.charWidths[s[m]];return!this.session.getOverwrite()&&o>i&&s[l]%2===0&&(c+=this.charWidths[s[l]]),this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(c+=this.rtlLineOffset),c},u.prototype.getSelections=function(o,i){var a=this.bidiMap,l=a.bidiLevels,s,c=[],m=0,h=Math.min(o,i)-this.wrapIndent,v=Math.max(o,i)-this.wrapIndent,k=!1,x=!1,A=0;this.wrapIndent&&(m+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,f=0;f<l.length;f++)S=a.logicalFromVisual[f],s=l[f],k=S>=h&&S<v,k&&!x?A=m:!k&&x&&c.push({left:A,width:m-A}),m+=this.charWidths[s],x=k;if(k&&f===l.length&&c.push({left:A,width:m-A}),this.isRtlDir)for(var L=0;L<c.length;L++)c[L].left+=this.rtlLineOffset;return c},u.prototype.offsetToCol=function(a){this.isRtlDir&&(a-=this.rtlLineOffset);var i=0,a=Math.max(a,0),l=0,s=0,c=this.bidiMap.bidiLevels,m=this.charWidths[c[s]];for(this.wrapIndent&&(a-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);a>l+m/2;){if(l+=m,s===c.length-1){m=0;break}m=this.charWidths[c[++s]]}return s>0&&c[s-1]%2!==0&&c[s]%2===0?(a<l&&s--,i=this.bidiMap.logicalFromVisual[s]):s>0&&c[s-1]%2===0&&c[s]%2!==0?i=1+(a>l?this.bidiMap.logicalFromVisual[s]:this.bidiMap.logicalFromVisual[s-1]):this.isRtlDir&&s===c.length-1&&m===0&&c[s-1]%2===0||!this.isRtlDir&&s===0&&c[s]%2!==0?i=1+this.bidiMap.logicalFromVisual[s]:(s>0&&c[s-1]%2!==0&&m!==0&&s--,i=this.bidiMap.logicalFromVisual[s]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},u}();t.BidiHandler=n});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,r){"use strict";var d=e("./lib/oop"),p=e("./lib/lang"),g=e("./lib/event_emitter").EventEmitter,n=e("./range").Range,u=function(){function o(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var a=this;this.cursor.on("change",function(l){a.$cursorChanged=!0,a.$silent||a._emit("changeCursor"),!a.$isEmpty&&!a.$silent&&a._emit("changeSelection"),!a.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(a.$desiredColumn=null)}),this.anchor.on("change",function(){a.$anchorChanged=!0,!a.$isEmpty&&!a.$silent&&a._emit("changeSelection")})}return o.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},o.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},o.prototype.getCursor=function(){return this.lead.getPosition()},o.prototype.setAnchor=function(i,a){this.$isEmpty=!1,this.anchor.setPosition(i,a)},o.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},o.prototype.getSelectionLead=function(){return this.lead.getPosition()},o.prototype.isBackwards=function(){var i=this.anchor,a=this.lead;return i.row>a.row||i.row==a.row&&i.column>a.column},o.prototype.getRange=function(){var i=this.anchor,a=this.lead;return this.$isEmpty?n.fromPoints(a,a):this.isBackwards()?n.fromPoints(a,i):n.fromPoints(i,a)},o.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},o.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},o.prototype.setRange=function(i,a){var l=a?i.end:i.start,s=a?i.start:i.end;this.$setSelection(l.row,l.column,s.row,s.column)},o.prototype.$setSelection=function(i,a,l,s){if(!this.$silent){var c=this.$isEmpty,m=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,a),this.cursor.setPosition(l,s),this.$isEmpty=!n.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||c!=this.$isEmpty||m)&&this._emit("changeSelection")}},o.prototype.$moveSelection=function(i){var a=this.lead;this.$isEmpty&&this.setSelectionAnchor(a.row,a.column),i.call(this)},o.prototype.selectTo=function(i,a){this.$moveSelection(function(){this.moveCursorTo(i,a)})},o.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},o.prototype.moveTo=function(i,a){this.clearSelection(),this.moveCursorTo(i,a)},o.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},o.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},o.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},o.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},o.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},o.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},o.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},o.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},o.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},o.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},o.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},o.prototype.getWordRange=function(i,a){if(typeof a>"u"){var l=i||this.lead;i=l.row,a=l.column}return this.session.getWordRange(i,a)},o.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},o.prototype.selectAWord=function(){var i=this.getCursor(),a=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(a)},o.prototype.getLineRange=function(i,a){var l=typeof i=="number"?i:this.lead.row,s,c=this.session.getFoldLine(l);return c?(l=c.start.row,s=c.end.row):s=l,a===!0?new n(l,0,s,this.session.getLine(s).length):new n(l,0,s+1,0)},o.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},o.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},o.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},o.prototype.wouldMoveIntoSoftTab=function(i,a,l){var s=i.column,c=i.column+a;return l<0&&(s=i.column-a,c=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(s,c).split(" ").length-1==a},o.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),a;if(a=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(a.start.row,a.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},o.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),a;if(a=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(a.end.row,a.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},o.prototype.moveCursorLineStart=function(){var i=this.lead.row,a=this.lead.column,l=this.session.documentToScreenRow(i,a),s=this.session.screenToDocumentPosition(l,0),c=this.session.getDisplayLine(i,null,s.row,s.column),m=c.match(/^\s*/);m[0].length!=a&&!this.session.$useEmacsStyleLineStart&&(s.column+=m[0].length),this.moveCursorToPosition(s)},o.prototype.moveCursorLineEnd=function(){var i=this.lead,a=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==a.column){var l=this.session.getLine(a.row);if(a.column==l.length){var s=l.search(/\s+$/);s>0&&(a.column=s)}}this.moveCursorTo(a.row,a.column)},o.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,a=this.doc.getLine(i).length;this.moveCursorTo(i,a)},o.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},o.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,a=this.lead.column,l=this.doc.getLine(i),s=l.substring(a);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var c=this.session.getFoldAt(i,a,1);if(c){this.moveCursorTo(c.end.row,c.end.column);return}if(this.session.nonTokenRe.exec(s)&&(a+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,s=l.substring(a)),a>=l.length){this.moveCursorTo(i,l.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(s)&&(a+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,a)},o.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,a=this.lead.column,l;if(l=this.session.getFoldAt(i,a,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var s=this.session.getFoldStringAt(i,a,-1);s==null&&(s=this.doc.getLine(i).substring(0,a));var c=p.stringReverse(s);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(c)&&(a-=this.session.nonTokenRe.lastIndex,c=c.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),a<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(c)&&(a-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,a)},o.prototype.$shortWordEndIndex=function(i){var a=0,l,s=/\s/,c=this.session.tokenRe;if(c.lastIndex=0,this.session.tokenRe.exec(i))a=this.session.tokenRe.lastIndex;else{for(;(l=i[a])&&s.test(l);)a++;if(a<1){for(c.lastIndex=0;(l=i[a])&&!c.test(l);)if(c.lastIndex=0,a++,s.test(l))if(a>2){a--;break}else{for(;(l=i[a])&&s.test(l);)a++;if(a>2)break}}}return c.lastIndex=0,a},o.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,a=this.lead.column,l=this.doc.getLine(i),s=l.substring(a),c=this.session.getFoldAt(i,a,1);if(c)return this.moveCursorTo(c.end.row,c.end.column);if(a==l.length){var m=this.doc.getLength();do i++,s=this.doc.getLine(i);while(i<m&&/^\s*$/.test(s));/^\s+/.test(s)||(s=""),a=0}var h=this.$shortWordEndIndex(s);this.moveCursorTo(i,a+h)},o.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,a=this.lead.column,l;if(l=this.session.getFoldAt(i,a,-1))return this.moveCursorTo(l.start.row,l.start.column);var s=this.session.getLine(i).substring(0,a);if(a===0){do i--,s=this.doc.getLine(i);while(i>0&&/^\s*$/.test(s));a=s.length,/\s+$/.test(s)||(s="")}var c=p.stringReverse(s),m=this.$shortWordEndIndex(c);return this.moveCursorTo(i,a-m)},o.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},o.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},o.prototype.moveCursorBy=function(i,a){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),s;if(a===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(s=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(s/this.session.$bidiHandler.charWidths[0])):s=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var c=this.session.lineWidgets[this.lead.row];i<0?i-=c.rowsAbove||0:i>0&&(i+=c.rowCount-(c.rowsAbove||0))}var m=this.session.screenToDocumentPosition(l.row+i,l.column,s);i!==0&&a===0&&m.row===this.lead.row&&(m.column,this.lead.column),this.moveCursorTo(m.row,m.column+a,a===0)},o.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},o.prototype.moveCursorTo=function(i,a,l){var s=this.session.getFoldAt(i,a,1);s&&(i=s.start.row,a=s.start.column),this.$keepDesiredColumnOnChange=!0;var c=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(c.charAt(a))&&c.charAt(a-1)&&(this.lead.row==i&&this.lead.column==a+1?a=a-1:a=a+1),this.lead.setPosition(i,a),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},o.prototype.moveCursorToScreen=function(i,a,l){var s=this.session.screenToDocumentPosition(i,a);this.moveCursorTo(s.row,s.column,l)},o.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},o.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},o.prototype.toOrientedRange=function(i){var a=this.getRange();return i?(i.start.column=a.start.column,i.start.row=a.start.row,i.end.column=a.end.column,i.end.row=a.end.row):i=a,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},o.prototype.getRangeOfMovements=function(i){var a=this.getCursor();try{i(this);var l=this.getCursor();return n.fromPoints(a,l)}catch{return n.fromPoints(a,a)}finally{this.moveCursorToPosition(a)}},o.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(a){var l=a.clone();return l.isBackwards=a.cursor==a.start,l});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},o.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var a=i.length;a--;){var l=n.fromPoints(i[a].start,i[a].end);i[a].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},o.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var a=this.ranges.length;a--;)if(!this.ranges[a].isEqual(i[a]))return!1;return!0},o}();u.prototype.setSelectionAnchor=u.prototype.setAnchor,u.prototype.getSelectionAnchor=u.prototype.getAnchor,u.prototype.setSelectionRange=u.prototype.setRange,d.implement(u.prototype,g),t.Selection=u});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,r){"use strict";var d=e("./lib/report_error").reportError,p=2e3,g=function(){function n(u){this.splitRegex,this.states=u,this.regExps={},this.matchMappings={};for(var o in this.states){for(var i=this.states[o],a=[],l=0,s=this.matchMappings[o]={defaultToken:"text"},c="g",m=[],h=0;h<i.length;h++){var v=i[h];if(v.defaultToken&&(s.defaultToken=v.defaultToken),v.caseInsensitive&&c.indexOf("i")===-1&&(c+="i"),v.unicode&&c.indexOf("u")===-1&&(c+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var k=v.regex,x=new RegExp("(?:("+k+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||x==1?v.token=v.token[0]:x-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:x-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(x>1?v.onMatch=this.$applyToken:v.onMatch=v.token),x>1&&(/\\\d/.test(v.regex)?k=v.regex.replace(/\\([0-9]+)/g,function(A,S){return"\\"+(parseInt(S,10)+l+1)}):(x=1,k=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&m.push(v)),s[l]=h,l+=x,a.push(k),v.onMatch||(v.onMatch=null)}}a.length||(s[0]=0,a.push("$")),m.forEach(function(A){A.splitRegex=this.createSplitterRegexp(A.regex,c)},this),this.regExps[o]=new RegExp("("+a.join(")|(")+")|($)",c)}}return n.prototype.$setMaxTokenCount=function(u){p=u|0},n.prototype.$applyToken=function(u){var o=this.splitRegex.exec(u).slice(1),i=this.token.apply(this,o);if(typeof i=="string")return[{type:i,value:u}];for(var a=[],l=0,s=i.length;l<s;l++)o[l]&&(a[a.length]={type:i[l],value:o[l]});return a},n.prototype.$arrayTokens=function(u){if(!u)return[];var o=this.splitRegex.exec(u);if(!o)return"text";for(var i=[],a=this.tokenArray,l=0,s=a.length;l<s;l++)o[l+1]&&(i[i.length]={type:a[l],value:o[l+1]});return i},n.prototype.removeCapturingGroups=function(u){var o=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,a){return a?"(?:":i});return o},n.prototype.createSplitterRegexp=function(u,o){if(u.indexOf("(?=")!=-1){var i=0,a=!1,l={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(s,c,m,h,v,k){return a?a=v!="]":v?a=!0:h?(i==l.stack&&(l.end=k+1,l.stack=-1),i--):m&&(i++,m.length!=1&&(l.stack=i,l.start=k)),s}),l.end!=null&&/^\)*$/.test(u.substr(l.end))&&(u=u.substring(0,l.start)+u.substr(l.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(o||"").replace("g",""))},n.prototype.getLineTokens=function(u,o){if(o&&typeof o!="string"){var i=o.slice(0);o=i[0],o==="#tmp"&&(i.shift(),o=i.shift())}else var i=[];var a=o||"start",l=this.states[a];l||(a="start",l=this.states[a]);var s=this.matchMappings[a],c=this.regExps[a];c.lastIndex=0;for(var m,h=[],v=0,k=0,x={type:null,value:""};m=c.exec(u);){var A=s.defaultToken,S=null,f=m[0],L=c.lastIndex;if(L-f.length>v){var $=u.substring(v,L-f.length);x.type==A?x.value+=$:(x.type&&h.push(x),x={type:A,value:$})}for(var C=0;C<m.length-2;C++)if(m[C+1]!==void 0){S=l[s[C]],S.onMatch?A=S.onMatch(f,a,i,u):A=S.token,S.next&&(typeof S.next=="string"?a=S.next:a=S.next(a,i),l=this.states[a],l||(this.reportError("state doesn't exist",a),a="start",l=this.states[a]),s=this.matchMappings[a],v=L,c=this.regExps[a],c.lastIndex=L),S.consumeLineEnd&&(v=L);break}if(f){if(typeof A=="string")(!S||S.merge!==!1)&&x.type===A?x.value+=f:(x.type&&h.push(x),x={type:A,value:f});else if(A){x.type&&h.push(x),x={type:null,value:""};for(var C=0;C<A.length;C++)h.push(A[C])}}if(v==u.length)break;if(v=L,k++>p){for(k>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:o,line:u});v<u.length;)x.type&&h.push(x),x={value:u.substring(v,v+=500),type:"overflow"};a="start",i=[];break}}return x.type&&h.push(x),i.length>1&&i[0]!==a&&i.unshift("#tmp",a),{tokens:h,state:i.length?i:a}},n}();g.prototype.reportError=d,t.Tokenizer=g});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";var d=e("../lib/deep_copy").deepCopy,p;p=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(u,o){if(!o){for(var i in u)this.$rules[i]=u[i];return}for(var i in u){for(var a=u[i],l=0;l<a.length;l++){var s=a[l];(s.next||s.onMatch)&&(typeof s.next=="string"&&s.next.indexOf(o)!==0&&(s.next=o+s.next),s.nextState&&s.nextState.indexOf(o)!==0&&(s.nextState=o+s.nextState))}this.$rules[o+i]=a}},this.getRules=function(){return this.$rules},this.embedRules=function(u,o,i,a,l){var s=typeof u=="function"?new u().getRules():u;if(a)for(var c=0;c<a.length;c++)a[c]=o+a[c];else{a=[];for(var m in s)a.push(o+m)}if(this.addRules(s,o),i)for(var h=Array.prototype[l?"push":"unshift"],c=0;c<a.length;c++)h.apply(this.$rules[a[c]],d(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(o)},this.getEmbeds=function(){return this.$embeds};var g=function(u,o){return(u!="start"||o.length)&&o.unshift(this.nextState,u),this.nextState},n=function(u,o){return o.shift(),o.shift()||"start"};this.normalizeRules=function(){var u=0,o=this.$rules;function i(a){var l=o[a];l.processed=!0;for(var s=0;s<l.length;s++){var c=l[s],m=null;Array.isArray(c)&&(m=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var h=c.next||c.push;if(h&&Array.isArray(h)){var v=c.stateName;v||(v=c.token,typeof v!="string"&&(v=v[0]||""),o[v]&&(v+=u++)),o[v]=h,c.next=v,i(v)}else h=="pop"&&(c.next=n);if(c.push&&(c.nextState=c.next||c.push,c.next=g,delete c.push),c.rules)for(var k in c.rules)o[k]?o[k].push&&o[k].push.apply(o[k],c.rules[k]):o[k]=c.rules[k];var x=typeof c=="string"?c:c.include;if(x&&(x==="$self"&&(x="start"),Array.isArray(x)?m=x.map(function(S){return o[S]}):m=o[x]),m){var A=[s,1].concat(m);c.noEscape&&(A=A.filter(function(S){return!S.next})),l.splice.apply(l,A),s--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}Object.keys(o).forEach(i,this)},this.createKeywordMapper=function(u,o,i,a){var l=Object.create(null);return this.$keywordList=[],Object.keys(u).forEach(function(s){for(var c=u[s],m=c.split(a||"|"),h=m.length;h--;){var v=m[h];this.$keywordList.push(v),i&&(v=v.toLowerCase()),l[v]=s}},this),u=null,i?function(s){return l[s.toLowerCase()]||o}:function(s){return l[s]||o}},this.getKeywords=function(){return this.$keywords}}.call(p.prototype),t.TextHighlightRules=p});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,r){"use strict";var d;d=function(){this.$behaviours={}},function(){this.add=function(p,g,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[p]:this.$behaviours[p]={}}this.$behaviours[p][g]=n},this.addBehaviours=function(p){for(var g in p)for(var n in p[g])this.add(g,n,p[g][n])},this.remove=function(p){this.$behaviours&&this.$behaviours[p]&&delete this.$behaviours[p]},this.inherit=function(p,g){if(typeof p=="function")var n=new p().getBehaviours(g);else var n=p.getBehaviours(g);this.addBehaviours(n)},this.getBehaviours=function(p){if(p){for(var g={},n=0;n<p.length;n++)this.$behaviours[p[n]]&&(g[p[n]]=this.$behaviours[p[n]]);return g}else return this.$behaviours}}.call(d.prototype),t.Behaviour=d});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("./range").Range,p=function(){function g(n,u,o){this.$session=n,this.$row=u,this.$rowTokens=n.getTokens(u);var i=n.getTokenAt(u,o);this.$tokenIndex=i?i.index:-1}return g.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},g.prototype.stepForward=function(){this.$tokenIndex+=1;for(var n;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,n||(n=this.$session.getLength()),this.$row>=n)return this.$row=n-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},g.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},g.prototype.getCurrentTokenRow=function(){return this.$row},g.prototype.getCurrentTokenColumn=function(){var n=this.$rowTokens,u=this.$tokenIndex,o=n[u].start;if(o!==void 0)return o;for(o=0;u>0;)u-=1,o+=n[u].value.length;return o},g.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},g.prototype.getCurrentTokenRange=function(){var n=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new d(this.$row,u,this.$row,u+n.value.length)},g}();t.TokenIterator=p});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,r){"use strict";var d=e("../../lib/oop"),p=e("../behaviour").Behaviour,g=e("../../token_iterator").TokenIterator,n=e("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],o=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,a={},l={'"':'"',"'":"'"},s=function(h){var v=-1;if(h.multiSelect&&(v=h.selection.index,a.rangeCount!=h.multiSelect.rangeCount&&(a={rangeCount:h.multiSelect.rangeCount})),a[v])return i=a[v];i=a[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},c=function(h,v,k,x){var A=h.end.row-h.start.row;return{text:k+v+x,selection:[0,h.start.column+1,A,h.end.column+(A?0:1)]}},m;m=function(h){h=h||{},this.add("braces","insertion",function(v,k,x,A,S){var f=x.getCursorPosition(),L=A.doc.getLine(f.row);if(S=="{"){s(x);var $=x.getSelectionRange(),C=A.doc.getTextRange($),T=A.getTokenAt(f.row,f.column);if(C!==""&&C!=="{"&&x.getWrapBehavioursEnabled())return c($,C,"{","}");if(T&&/(?:string)\.quasi|\.xml/.test(T.type)){var w=[/tag\-(?:open|name)/,/attribute\-name/];return w.some(function(I){return I.test(T.type)})||/(string)\.quasi/.test(T.type)&&T.value[f.column-T.start-1]!=="$"?void 0:(m.recordAutoInsert(x,A,"}"),{text:"{}",selection:[1,1]})}else if(m.isSaneInsertion(x,A))return/[\]\}\)]/.test(L[f.column])||x.inMultiSelectMode||h.braces?(m.recordAutoInsert(x,A,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(x,A,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){s(x);var y=L.substring(f.column,f.column+1);if(y=="}"){var b=A.$findOpeningBracket("}",{column:f.column+1,row:f.row});if(b!==null&&m.isAutoInsertedClosing(f,L,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){s(x);var E="";m.isMaybeInsertedClosing(f,L)&&(E=n.stringRepeat("}",i.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var y=L.substring(f.column,f.column+1);if(y==="}"){var _=A.findMatchingBracket({row:f.row,column:f.column+1},"}");if(!_)return null;var R=this.$getIndent(A.getLine(_.row))}else if(E)var R=this.$getIndent(L);else{m.clearMaybeInsertedClosing();return}var M=R+A.getTabString();return{text:`
`+M+`
`+R+E,selection:[1,M.length,1,M.length]}}else m.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="{"){s(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.end.column,S.end.column+1);if($=="}")return S.end.column++,S;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,k,x,A,S){if(S=="("){s(x);var f=x.getSelectionRange(),L=A.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"(",")");if(m.isSaneInsertion(x,A))return m.recordAutoInsert(x,A,")"),{text:"()",selection:[1,1]}}else if(S==")"){s(x);var $=x.getCursorPosition(),C=A.doc.getLine($.row),T=C.substring($.column,$.column+1);if(T==")"){var w=A.$findOpeningBracket(")",{column:$.column+1,row:$.row});if(w!==null&&m.isAutoInsertedClosing($,C,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="("){s(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($==")")return S.end.column++,S}}),this.add("brackets","insertion",function(v,k,x,A,S){if(S=="["){s(x);var f=x.getSelectionRange(),L=A.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"[","]");if(m.isSaneInsertion(x,A))return m.recordAutoInsert(x,A,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){s(x);var $=x.getCursorPosition(),C=A.doc.getLine($.row),T=C.substring($.column,$.column+1);if(T=="]"){var w=A.$findOpeningBracket("]",{column:$.column+1,row:$.row});if(w!==null&&m.isAutoInsertedClosing($,C,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="["){s(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(v,k,x,A,S){var f=A.$mode.$quotes||l;if(S.length==1&&f[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;s(x);var L=S,$=x.getSelectionRange(),C=A.doc.getTextRange($);if(C!==""&&(C.length!=1||!f[C])&&x.getWrapBehavioursEnabled())return c($,C,L,L);if(!C){var T=x.getCursorPosition(),w=A.doc.getLine(T.row),y=w.substring(T.column-1,T.column),b=w.substring(T.column,T.column+1),E=A.getTokenAt(T.row,T.column),_=A.getTokenAt(T.row,T.column+1);if(y=="\\"&&E&&/escape/.test(E.type))return null;var R=E&&/string|escape/.test(E.type),M=!_||/string|escape/.test(_.type),I;if(b==L)I=R!==M,I&&/string\.end/.test(_.type)&&(I=!1);else{if(R&&!M||R&&M)return null;var P=A.$mode.tokenRe;P.lastIndex=0;var O=P.test(y);P.lastIndex=0;var N=P.test(b),D=A.$mode.$pairQuotesAfter,F=D&&D[L]&&D[L].test(y);if(!F&&O||N||b&&!/[\s;,.})\]\\]/.test(b))return null;var z=w[T.column-2];if(y==L&&(z==L||P.test(z)))return null;I=!0}return{text:I?L+L:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,k,x,A,S){var f=A.$mode.$quotes||l,L=A.doc.getTextRange(S);if(!S.isMultiLine()&&f.hasOwnProperty(L)){s(x);var $=A.doc.getLine(S.start.row),C=$.substring(S.start.column+1,S.start.column+2);if(C==L)return S.end.column++,S}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,k,x,A,S){if(v==="doc-start"&&(S===`
`||S===`\r
`)&&x.selection.isEmpty()){var f=x.getCursorPosition();if(f.column===0)return;for(var L=A.doc.getLine(f.row),$=A.doc.getLine(f.row+1),C=A.getTokens(f.row),T=0,w=0;w<C.length;w++){T+=C[w].value.length;var y=C[w];if(T>=f.column){if(T===f.column){if(!/\.doc/.test(y.type))return;if(/\*\//.test(y.value)){var b=C[w+1];if(!b||!/\.doc/.test(b.type))return}}var E=f.column-(T-y.value.length),_=y.value.indexOf("*/"),R=y.value.indexOf("/**",_>-1?_+2:0);if(R!==-1&&E>R&&E<R+3||_!==-1&&R!==-1&&E>=_&&E<=R||!/\.doc/.test(y.type))return;break}}var M=this.$getIndent(L);if(/\s*\*/.test($))return/^\s*\*/.test(L)?{text:S+M+"* ",selection:[1,2+M.length,1,2+M.length]}:{text:S+M+" * ",selection:[1,3+M.length,1,3+M.length]};if(/\/\*\*/.test(L.substring(0,f.column)))return{text:S+M+" * "+S+" "+M+"*/",selection:[1,4+M.length,1,4+M.length]}}})},m.isSaneInsertion=function(h,v){var k=h.getCursorPosition(),x=new g(v,k.row,k.column);if(!this.$matchTokenType(x.getCurrentToken()||"text",u)){if(/[)}\]]/.test(h.session.getLine(k.row)[k.column]))return!0;var A=new g(v,k.row,k.column+1);if(!this.$matchTokenType(A.getCurrentToken()||"text",u))return!1}return x.stepForward(),x.getCurrentTokenRow()!==k.row||this.$matchTokenType(x.getCurrentToken()||"text",o)},m.$matchTokenType=function(h,v){return v.indexOf(h.type||h)>-1},m.recordAutoInsert=function(h,v,k){var x=h.getCursorPosition(),A=v.doc.getLine(x.row);this.isAutoInsertedClosing(x,A,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=x.row,i.autoInsertedLineEnd=k+A.substr(x.column),i.autoInsertedBrackets++},m.recordMaybeInsert=function(h,v,k){var x=h.getCursorPosition(),A=v.doc.getLine(x.row);this.isMaybeInsertedClosing(x,A)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=x.row,i.maybeInsertedLineStart=A.substr(0,x.column)+k,i.maybeInsertedLineEnd=A.substr(x.column),i.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(h,v,k){return i.autoInsertedBrackets>0&&h.row===i.autoInsertedRow&&k===i.autoInsertedLineEnd[0]&&v.substr(h.column)===i.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(h,v){return i.maybeInsertedBrackets>0&&h.row===i.maybeInsertedRow&&v.substr(h.column)===i.maybeInsertedLineEnd&&v.substr(0,h.column)==i.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},d.inherits(m,p),t.CstyleBehaviour=m});ace.define("ace/unicode",["require","exports","module"],function(e,t,r){"use strict";for(var d=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],p=0,g=[],n=0;n<d.length;n+=2)g.push(p+=d[n]),d[n+1]&&g.push(45,p+=d[n+1]);t.wordChars=String.fromCharCode.apply(null,g)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var d=e("../config"),p=e("../tokenizer").Tokenizer,g=e("./text_highlight_rules").TextHighlightRules,n=e("./behaviour/cstyle").CstyleBehaviour,u=e("../unicode"),o=e("../lib/lang"),i=e("../token_iterator").TokenIterator,a=e("../range").Range,l;l=function(){this.HighlightRules=g},function(){this.$defaultBehaviour=new n,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new p(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(s,c,m,h){var v=c.doc,k=!0,x=!0,A=1/0,S=c.getTabSize(),f=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var C=this.lineCommentStart.map(o.escapeRegExp).join("|"),L=this.lineCommentStart[0];else var C=o.escapeRegExp(this.lineCommentStart),L=this.lineCommentStart;C=new RegExp("^(\\s*)(?:"+C+") ?"),f=c.getUseSoftTabs();var y=function(N,D){var F=N.match(C);if(F){var z=F[1].length,W=F[0].length;!_(N,z,W)&&F[0][W-1]==" "&&W--,v.removeInLine(D,z,W)}},E=L+" ",w=function(N,D){(!k||/\S/.test(N))&&(_(N,A,A)?v.insertInLine({row:D,column:A},E):v.insertInLine({row:D,column:A},L))},b=function(N,D){return C.test(N)},_=function(N,D,F){for(var z=0;D--&&N.charAt(D)==" ";)z++;if(z%S!=0)return!1;for(var z=0;N.charAt(F++)==" ";)z++;return S>2?z%S!=S-1:z%S==0}}else{if(!this.blockComment)return!1;var L=this.blockComment.start,$=this.blockComment.end,C=new RegExp("^(\\s*)(?:"+o.escapeRegExp(L)+")"),T=new RegExp("(?:"+o.escapeRegExp($)+")\\s*$"),w=function(I,P){b(I,P)||(!k||/\S/.test(I))&&(v.insertInLine({row:P,column:I.length},$),v.insertInLine({row:P,column:A},L))},y=function(I,P){var O;(O=I.match(T))&&v.removeInLine(P,I.length-O[0].length,I.length),(O=I.match(C))&&v.removeInLine(P,O[1].length,O[0].length)},b=function(I,P){if(C.test(I))return!0;for(var O=c.getTokens(P),N=0;N<O.length;N++)if(O[N].type==="comment")return!0}}function R(I){for(var P=m;P<=h;P++)I(v.getLine(P),P)}var M=1/0;R(function(I,P){var O=I.search(/\S/);O!==-1?(O<A&&(A=O),x&&!b(I,P)&&(x=!1)):M>I.length&&(M=I.length)}),A==1/0&&(A=M,k=!1,x=!1),f&&A%S!=0&&(A=Math.floor(A/S)*S),R(x?y:w)},this.toggleBlockComment=function(s,c,m,h){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var k=new i(c,h.row,h.column),x=k.getCurrentToken(),A=c.selection,S=c.selection.toOrientedRange(),f,L;if(x&&/comment/.test(x.type)){for(var $,C;x&&/comment/.test(x.type);){var T=x.value.indexOf(v.start);if(T!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+T;$=new a(w,y,w,y+v.start.length);break}x=k.stepBackward()}for(var k=new i(c,h.row,h.column),x=k.getCurrentToken();x&&/comment/.test(x.type);){var T=x.value.indexOf(v.end);if(T!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+T;C=new a(w,y,w,y+v.end.length);break}x=k.stepForward()}C&&c.remove(C),$&&(c.remove($),f=$.start.row,L=-v.start.length)}else L=v.start.length,f=m.start.row,c.insert(m.end,v.end),c.insert(m.start,v.start);S.start.row==f&&(S.start.column+=L),S.end.row==f&&(S.end.column+=L),c.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(s,c,m){return this.$getIndent(c)},this.checkOutdent=function(s,c,m){return!1},this.autoOutdent=function(s,c,m){},this.$getIndent=function(s){return s.match(/^\s*/)[0]},this.createWorker=function(s){return null},this.createModeDelegates=function(s){this.$embeds=[],this.$modes={};for(var c in s)if(s[c]){var m=s[c],h=m.prototype.$id,v=d.$modes[h];v||(d.$modes[h]=v=new m),d.$modes[c]||(d.$modes[c]=v),this.$embeds.push(c),this.$modes[c]=v}for(var k=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],x=function(S){(function(f){var L=k[S],$=f[L];f[k[S]]=function(){return this.$delegator(L,arguments,$)}})(A)},A=this,c=0;c<k.length;c++)x(c)},this.$delegator=function(s,c,m){var h=c[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var v=h[2][h[2].length-1],k=this.$modes[v];if(k)return k[s].apply(k,[h[1]].concat([].slice.call(c,1)))}h=h[0]||"start"}for(var x=0;x<this.$embeds.length;x++)if(this.$modes[this.$embeds[x]]){var A=h.split(this.$embeds[x]);if(!A[0]&&A[1]){c[0]=A[1];var k=this.$modes[this.$embeds[x]];return k[s].apply(k,c)}}var S=m.apply(this,c);return m?S:void 0},this.transformAction=function(s,c,m,h,v){if(this.$behaviour){var k=this.$behaviour.getBehaviours();for(var x in k)if(k[x][c]){var A=k[x][c].apply(this,arguments);if(A)return A}}},this.getKeywords=function(s){if(!this.completionKeywords){var c=this.$tokenizer.rules,m=[];for(var h in c)for(var v=c[h],k=0,x=v.length;k<x;k++)if(typeof v[k].token=="string")/keyword|support|storage/.test(v[k].token)&&m.push(v[k].regex);else if(typeof v[k].token=="object"){for(var A=0,S=v[k].token.length;A<S;A++)if(/keyword|support|storage/.test(v[k].token[A])){var h=v[k].regex.match(/\(.+?\)/g)[A];m.push(h.substr(1,h.length-2))}}this.completionKeywords=m}return s?m.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(s,c,m,h){var v=this.$keywordList||this.$createKeywordList();return v.map(function(k){return{name:k,value:k,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),t.Mode=l});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,r){"use strict";function d(n,u){throw console.log("Invalid Delta:",n),"Invalid Delta: "+u}function p(n,u){return u.row>=0&&u.row<n.length&&u.column>=0&&u.column<=n[u.row].length}function g(n,u){u.action!="insert"&&u.action!="remove"&&d(u,"delta.action must be 'insert' or 'remove'"),u.lines instanceof Array||d(u,"delta.lines must be an Array"),(!u.start||!u.end)&&d(u,"delta.start/end must be an present");var o=u.start;p(n,u.start)||d(u,"delta.start must be contained in document");var i=u.end;u.action=="remove"&&!p(n,i)&&d(u,"delta.end must contained in document for 'remove' actions");var a=i.row-o.row,l=i.column-(a==0?o.column:0);(a!=u.lines.length-1||u.lines[a].length!=l)&&d(u,"delta.range must match delta lines")}t.applyDelta=function(n,u,o){var i=u.start.row,a=u.start.column,l=n[i]||"";switch(u.action){case"insert":var s=u.lines;if(s.length===1)n[i]=l.substring(0,a)+u.lines[0]+l.substring(a);else{var c=[i,1].concat(u.lines);n.splice.apply(n,c),n[i]=l.substring(0,a)+n[i],n[i+u.lines.length-1]+=l.substring(a)}break;case"remove":var m=u.end.column,h=u.end.row;i===h?n[i]=l.substring(0,a)+l.substring(m):n.splice(i,h-i+1,l.substring(0,a)+n[h].substring(m));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,g=function(){function o(i,a,l){this.$onChange=this.onChange.bind(this),this.attach(i),typeof a!="number"?this.setPosition(a.row,a.column):this.setPosition(a,l)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var a=u(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(a.row,a.column,!0)}},o.prototype.setPosition=function(i,a,l){var s;if(l?s={row:i,column:a}:s=this.$clipPositionToDocument(i,a),!(this.row==s.row&&this.column==s.column)){var c={row:this.row,column:this.column};this.row=s.row,this.column=s.column,this._signal("change",{old:c,value:s})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(i,a){var l={};return i>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):i<0?(l.row=0,l.column=0):(l.row=i,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,a))),a<0&&(l.column=0),l},o}();g.prototype.$insertRight=!1,d.implement(g.prototype,p);function n(o,i,a){var l=a?o.column<=i.column:o.column<i.column;return o.row<i.row||o.row==i.row&&l}function u(o,i,a){var l=o.action=="insert",s=(l?1:-1)*(o.end.row-o.start.row),c=(l?1:-1)*(o.end.column-o.start.column),m=o.start,h=l?m:o.end;return n(i,m,a)?{row:i.row,column:i.column}:n(h,i,!a)?{row:i.row+s,column:i.column+(i.row==h.row?c:0)}:{row:m.row,column:m.column}}t.Anchor=g});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,r){"use strict";var d=e("./lib/oop"),p=e("./apply_delta").applyDelta,g=e("./lib/event_emitter").EventEmitter,n=e("./range").Range,u=e("./anchor").Anchor,o=function(){function i(a){this.$lines=[""],a.length===0?this.$lines=[""]:Array.isArray(a)?this.insertMergedLines({row:0,column:0},a):this.insert({row:0,column:0},a)}return i.prototype.setValue=function(a){var l=this.getLength()-1;this.remove(new n(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},a||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(a,l){return new u(this,a,l)},i.prototype.$detectNewLine=function(a){var l=a.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(a){this.$newLineMode!==a&&(this.$newLineMode=a,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(a){return a==`\r
`||a=="\r"||a==`
`},i.prototype.getLine=function(a){return this.$lines[a]||""},i.prototype.getLines=function(a,l){return this.$lines.slice(a,l+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(a){return this.getLinesForRange(a).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(a){var l;if(a.start.row===a.end.row)l=[this.getLine(a.start.row).substring(a.start.column,a.end.column)];else{l=this.getLines(a.start.row,a.end.row),l[0]=(l[0]||"").substring(a.start.column);var s=l.length-1;a.end.row-a.start.row==s&&(l[s]=l[s].substring(0,a.end.column))}return l},i.prototype.insertLines=function(a,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(a,l)},i.prototype.removeLines=function(a,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(a,l)},i.prototype.insertNewLine=function(a){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(a,["",""])},i.prototype.insert=function(a,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(a,this.$split(l))},i.prototype.insertInLine=function(a,l){var s=this.clippedPos(a.row,a.column),c=this.pos(a.row,a.column+l.length);return this.applyDelta({start:s,end:c,action:"insert",lines:[l]},!0),this.clonePos(c)},i.prototype.clippedPos=function(a,l){var s=this.getLength();a===void 0?a=s:a<0?a=0:a>=s&&(a=s-1,l=void 0);var c=this.getLine(a);return l==null&&(l=c.length),l=Math.min(Math.max(l,0),c.length),{row:a,column:l}},i.prototype.clonePos=function(a){return{row:a.row,column:a.column}},i.prototype.pos=function(a,l){return{row:a,column:l}},i.prototype.$clipPosition=function(a){var l=this.getLength();return a.row>=l?(a.row=Math.max(0,l-1),a.column=this.getLine(l-1).length):(a.row=Math.max(0,a.row),a.column=Math.min(Math.max(a.column,0),this.getLine(a.row).length)),a},i.prototype.insertFullLines=function(a,l){a=Math.min(Math.max(a,0),this.getLength());var s=0;a<this.getLength()?(l=l.concat([""]),s=0):(l=[""].concat(l),a--,s=this.$lines[a].length),this.insertMergedLines({row:a,column:s},l)},i.prototype.insertMergedLines=function(a,l){var s=this.clippedPos(a.row,a.column),c={row:s.row+l.length-1,column:(l.length==1?s.column:0)+l[l.length-1].length};return this.applyDelta({start:s,end:c,action:"insert",lines:l}),this.clonePos(c)},i.prototype.remove=function(a){var l=this.clippedPos(a.start.row,a.start.column),s=this.clippedPos(a.end.row,a.end.column);return this.applyDelta({start:l,end:s,action:"remove",lines:this.getLinesForRange({start:l,end:s})}),this.clonePos(l)},i.prototype.removeInLine=function(a,l,s){var c=this.clippedPos(a,l),m=this.clippedPos(a,s);return this.applyDelta({start:c,end:m,action:"remove",lines:this.getLinesForRange({start:c,end:m})},!0),this.clonePos(c)},i.prototype.removeFullLines=function(a,l){a=Math.min(Math.max(0,a),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var s=l==this.getLength()-1&&a>0,c=l<this.getLength()-1,m=s?a-1:a,h=s?this.getLine(m).length:0,v=c?l+1:l,k=c?0:this.getLine(v).length,x=new n(m,h,v,k),A=this.$lines.slice(a,l+1);return this.applyDelta({start:x.start,end:x.end,action:"remove",lines:this.getLinesForRange(x)}),A},i.prototype.removeNewLine=function(a){a<this.getLength()-1&&a>=0&&this.applyDelta({start:this.pos(a,this.getLine(a).length),end:this.pos(a+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(a,l){if(a instanceof n||(a=n.fromPoints(a.start,a.end)),l.length===0&&a.isEmpty())return a.start;if(l==this.getTextRange(a))return a.end;this.remove(a);var s;return l?s=this.insert(a.start,l):s=a.start,s},i.prototype.applyDeltas=function(a){for(var l=0;l<a.length;l++)this.applyDelta(a[l])},i.prototype.revertDeltas=function(a){for(var l=a.length-1;l>=0;l--)this.revertDelta(a[l])},i.prototype.applyDelta=function(a,l){var s=a.action=="insert";(s?a.lines.length<=1&&!a.lines[0]:!n.comparePoints(a.start,a.end))||(s&&a.lines.length>2e4?this.$splitAndapplyLargeDelta(a,2e4):(p(this.$lines,a,l),this._signal("change",a)))},i.prototype.$safeApplyDelta=function(a){var l=this.$lines.length;(a.action=="remove"&&a.start.row<l&&a.end.row<l||a.action=="insert"&&a.start.row<=l)&&this.applyDelta(a)},i.prototype.$splitAndapplyLargeDelta=function(a,l){for(var s=a.lines,c=s.length-l+1,m=a.start.row,h=a.start.column,v=0,k=0;v<c;v=k){k+=l-1;var x=s.slice(v,k);x.push(""),this.applyDelta({start:this.pos(m+v,h),end:this.pos(m+k,h=0),action:a.action,lines:x},!0)}a.lines=s.slice(v),a.start.row=m+v,a.start.column=h,this.applyDelta(a,!0)},i.prototype.revertDelta=function(a){this.$safeApplyDelta({start:this.clonePos(a.start),end:this.clonePos(a.end),action:a.action=="insert"?"remove":"insert",lines:a.lines.slice()})},i.prototype.indexToPosition=function(a,l){for(var s=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,m=l||0,h=s.length;m<h;m++)if(a-=s[m].length+c,a<0)return{row:m,column:a+s[m].length+c};return{row:h-1,column:a+s[h-1].length+c}},i.prototype.positionToIndex=function(a,l){for(var s=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,m=0,h=Math.min(a.row,s.length),v=l||0;v<h;++v)m+=s[v].length+c;return m+a.column},i.prototype.$split=function(a){return a.split(/\r\n|\r|\n/)},i}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",d.implement(o.prototype,g),t.Document=o});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,g=function(){function n(u,o){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var i=this;this.$worker=function(){if(i.running){for(var a=new Date,l=i.currentLine,s=-1,c=i.doc,m=l;i.lines[l];)l++;var h=c.getLength(),v=0;for(i.running=!1;l<h;){i.$tokenizeRow(l),s=l;do l++;while(i.lines[l]);if(v++,v%5===0&&new Date-a>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=l,s==-1&&(s=l),m<=s&&i.fireUpdateEvent(m,s)}}}return n.prototype.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},n.prototype.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},n.prototype.fireUpdateEvent=function(u,o){var i={first:u,last:o};this._signal("update",{data:i})},n.prototype.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},n.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},n.prototype.$updateOnChange=function(u){var o=u.start.row,i=u.end.row-o;if(i===0)this.lines[o]=null;else if(u.action=="remove")this.lines.splice(o,i+1,null),this.states.splice(o,i+1,null);else{var a=Array(i+1);a.unshift(o,1),this.lines.splice.apply(this.lines,a),this.states.splice.apply(this.states,a)}this.currentLine=Math.min(o,this.currentLine,this.doc.getLength()),this.stop()},n.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},n.prototype.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},n.prototype.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},n.prototype.$tokenizeRow=function(u){var o=this.doc.getLine(u),i=this.states[u-1],a=this.tokenizer.getLineTokens(o,i,u);return this.states[u]+""!=a.state+""?(this.states[u]=a.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=a.tokens},n.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},n}();d.implement(g.prototype,p),t.BackgroundTokenizer=g});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,r){"use strict";var d=e("./lib/lang"),p=e("./range").Range,g=function(){function n(u,o,i){i===void 0&&(i="text"),this.setRegexp(u),this.clazz=o,this.type=i}return n.prototype.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},n.prototype.update=function(u,o,i,a){if(this.regExp)for(var l=a.firstRow,s=a.lastRow,c={},m=l;m<=s;m++){var h=this.cache[m];h==null&&(h=d.getMatchOffsets(i.getLine(m),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(A){return new p(m,A.offset,m,A.offset+A.length)}),this.cache[m]=h.length?h:"");for(var v=h.length;v--;){var k=h[v].toScreenRange(i),x=k.toString();c[x]||(c[x]=!0,o.drawSingleLineMarker(u,k,this.clazz,a))}}},n}();g.prototype.MAX_RANGES=500,t.SearchHighlight=g});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=function(){function f(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return f.prototype.addSession=function(L){this.$session=L},f.prototype.add=function(L,$,C){if(!this.$fromUndo&&L!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),$===!1||!this.lastDeltas){this.lastDeltas=[];var T=this.$undoStack.length;T>this.$undoDepth-1&&this.$undoStack.splice(0,T-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),L.id=this.$rev=++this.$maxRev}(L.action=="remove"||L.action=="insert")&&(this.$lastDelta=L),this.lastDeltas.push(L)}},f.prototype.addSelection=function(L,$){this.selections.push({value:L,rev:$||this.$rev})},f.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},f.prototype.markIgnored=function(L,$){$==null&&($=this.$rev+1);for(var C=this.$undoStack,T=C.length;T--;){var w=C[T][0];if(w.id<=L)break;w.id<$&&(w.ignore=!0)}this.lastDeltas=null},f.prototype.getSelection=function(L,$){for(var C=this.selections,T=C.length;T--;){var w=C[T];if(w.rev<L)return $&&(w=C[T+1]),w}},f.prototype.getRevision=function(){return this.$rev},f.prototype.getDeltas=function(L,$){$==null&&($=this.$rev+1);for(var C=this.$undoStack,T=null,w=0,y=C.length;y--;){var b=C[y][0];if(b.id<$&&!T&&(T=y+1),b.id<=L){w=y+1;break}}return C.slice(w,T)},f.prototype.getChangedRanges=function(L,$){$==null&&($=this.$rev+1)},f.prototype.getChangedLines=function(L,$){$==null&&($=this.$rev+1)},f.prototype.undo=function(L,$){this.lastDeltas=null;var C=this.$undoStack;if(p(C,C.length)){L||(L=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var T=C.pop(),w=null;return T&&(w=L.undoChanges(T,$),this.$redoStack.push(T),this.$syncRev()),this.$fromUndo=!1,w}},f.prototype.redo=function(L,$){if(this.lastDeltas=null,L||(L=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var C=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,C),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(y){y[0].id=++this.$maxRev},this)}var T=this.$redoStack.pop(),w=null;return T&&(w=L.redoChanges(T,$),this.$undoStack.push(T),this.$syncRev()),this.$fromUndo=!1,w},f.prototype.$syncRev=function(){var L=this.$undoStack,$=L[L.length-1],C=$&&$[0].id||0;this.$redoStackBaseRev=C,this.$rev=C},f.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},f.prototype.canUndo=function(){return this.$undoStack.length>0},f.prototype.canRedo=function(){return this.$redoStack.length>0},f.prototype.bookmark=function(L){L==null&&(L=this.$rev),this.mark=L},f.prototype.isAtBookmark=function(){return this.$rev===this.mark},f.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},f.prototype.fromJSON=function(L){this.reset(),this.$undoStack=L.$undoStack,this.$redoStack=L.$redoStack},f.prototype.$prettyPrint=function(L){return L?l(L):l(this.$undoStack)+`
---
`+l(this.$redoStack)},f}();d.prototype.hasUndo=d.prototype.canUndo,d.prototype.hasRedo=d.prototype.canRedo,d.prototype.isClean=d.prototype.isAtBookmark,d.prototype.markClean=d.prototype.bookmark;function p(f,L){for(var $=L;$--;){var C=f[$];if(C&&!C[0].ignore){for(;$<L-1;){var T=m(f[$],f[$+1]);f[$]=T[0],f[$+1]=T[1],$++}return!0}}}var g=e("./range").Range,n=g.comparePoints,u=g.comparePoints;function o(f){var L=f.action=="insert",$=f.start,C=f.end,T=(C.row-$.row)*(L?1:-1),w=(C.column-$.column)*(L?1:-1);L&&(C=$);for(var y in this.marks){var b=this.marks[y],E=u(b,$);if(!(E<0)){if(E===0&&L)if(b.bias==1)E=1;else{b.bias==-1;continue}var _=L?E:u(b,C);if(_>0){b.row+=T,b.column+=b.row==C.row?w:0;continue}!L&&_<=0&&(b.row=$.row,b.column=$.column,_===0&&(b.bias=1))}}}function i(f){return{row:f.row,column:f.column}}function a(f){return{start:i(f.start),end:i(f.end),action:f.action,lines:f.lines.slice()}}function l(f){if(f=f||this,Array.isArray(f))return f.map(l).join(`
`);var L="";return f.action?(L=f.action=="insert"?"+":"-",L+="["+f.lines+"]"):f.value&&(Array.isArray(f.value)?L=f.value.map(s).join(`
`):L=s(f.value)),f.start&&(L+=s(f)),(f.id||f.rev)&&(L+="	("+(f.id||f.rev)+")"),L}function s(f){return f.start.row+":"+f.start.column+"=>"+f.end.row+":"+f.end.column}function c(f,L){var $=f.action=="insert",C=L.action=="insert";if($&&C)if(n(L.start,f.end)>=0)v(L,f,-1);else if(n(L.start,f.start)<=0)v(f,L,1);else return null;else if($&&!C)if(n(L.start,f.end)>=0)v(L,f,-1);else if(n(L.end,f.start)<=0)v(f,L,-1);else return null;else if(!$&&C)if(n(L.start,f.start)>=0)v(L,f,1);else if(n(L.start,f.start)<=0)v(f,L,1);else return null;else if(!$&&!C)if(n(L.start,f.start)>=0)v(L,f,1);else if(n(L.end,f.start)<=0)v(f,L,-1);else return null;return[L,f]}function m(f,L){for(var $=f.length;$--;)for(var C=0;C<L.length;C++)if(!c(f[$],L[C])){for(;$<f.length;){for(;C--;)c(L[C],f[$]);C=L.length,$++}return[f,L]}return f.selectionBefore=L.selectionBefore=f.selectionAfter=L.selectionAfter=null,[L,f]}function h(f,L){var $=f.action=="insert",C=L.action=="insert";if($&&C)n(f.start,L.start)<0?v(L,f,1):v(f,L,1);else if($&&!C)n(f.start,L.end)>=0?v(f,L,-1):(n(f.start,L.start)<=0||v(f,g.fromPoints(L.start,f.start),-1),v(L,f,1));else if(!$&&C)n(L.start,f.end)>=0?v(L,f,-1):(n(L.start,f.start)<=0||v(L,g.fromPoints(f.start,L.start),-1),v(f,L,1));else if(!$&&!C)if(n(L.start,f.end)>=0)v(L,f,-1);else if(n(L.end,f.start)<=0)v(f,L,-1);else{var T,w;return n(f.start,L.start)<0&&(T=f,f=x(f,L.start)),n(f.end,L.end)>0&&(w=x(f,L.end)),k(L.end,f.start,f.end,-1),w&&!T&&(f.lines=w.lines,f.start=w.start,f.end=w.end,w=f),[L,T,w].filter(Boolean)}return[L,f]}function v(f,L,$){k(f.start,L.start,L.end,$),k(f.end,L.start,L.end,$)}function k(f,L,$,C){f.row==(C==1?L:$).row&&(f.column+=C*($.column-L.column)),f.row+=C*($.row-L.row)}function x(f,L){var $=f.lines,C=f.end;f.end=i(L);var T=f.end.row-f.start.row,w=$.splice(T,$.length),y=T?L.column:L.column-f.start.column;$.push(w[0].substring(0,y)),w[0]=w[0].substr(y);var b={start:i(L),end:C,lines:w,action:f.action};return b}function A(f,L){L=a(L);for(var $=f.length;$--;){for(var C=f[$],T=0;T<C.length;T++){var w=C[T],y=h(w,L);L=y[0],y.length!=2&&(y[2]?(C.splice(T+1,1,y[1],y[2]),T++):y[1]||(C.splice(T,1),T--))}C.length||f.splice($,1)}return f}function S(f,L){for(var $=0;$<L.length;$++)for(var C=L[$],T=0;T<C.length;T++)A(f,C[T])}t.UndoManager=d});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("../range").Range,p=function(){function g(n,u){this.foldData=n,Array.isArray(u)?this.folds=u:u=this.folds=[u];var o=u[u.length-1];this.range=new d(u[0].start.row,u[0].start.column,o.end.row,o.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return g.prototype.shiftRow=function(n){this.start.row+=n,this.end.row+=n,this.folds.forEach(function(u){u.start.row+=n,u.end.row+=n})},g.prototype.addFold=function(n){if(n.sameRow){if(n.start.row<this.startRow||n.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(n),this.folds.sort(function(u,o){return-u.range.compareEnd(o.start.row,o.start.column)}),this.range.compareEnd(n.start.row,n.start.column)>0?(this.end.row=n.end.row,this.end.column=n.end.column):this.range.compareStart(n.end.row,n.end.column)<0&&(this.start.row=n.start.row,this.start.column=n.start.column)}else if(n.start.row==this.end.row)this.folds.push(n),this.end.row=n.end.row,this.end.column=n.end.column;else if(n.end.row==this.start.row)this.folds.unshift(n),this.start.row=n.start.row,this.start.column=n.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");n.foldLine=this},g.prototype.containsRow=function(n){return n>=this.start.row&&n<=this.end.row},g.prototype.walk=function(n,u,o){var i=0,a=this.folds,l,s,c,m=!0;u==null&&(u=this.end.row,o=this.end.column);for(var h=0;h<a.length;h++){if(l=a[h],s=l.range.compareStart(u,o),s==-1){n(null,u,o,i,m);return}if(c=n(null,l.start.row,l.start.column,i,m),c=!c&&n(l.placeholder,l.start.row,l.start.column,i),c||s===0)return;m=!l.sameRow,i=l.end.column}n(null,u,o,i,m)},g.prototype.getNextFoldTo=function(n,u){for(var o,i,a=0;a<this.folds.length;a++){if(o=this.folds[a],i=o.range.compareEnd(n,u),i==-1)return{fold:o,kind:"after"};if(i===0)return{fold:o,kind:"inside"}}return null},g.prototype.addRemoveChars=function(n,u,o){var i=this.getNextFoldTo(n,u),a,l;if(i){if(a=i.fold,i.kind=="inside"&&a.start.column!=u&&a.start.row!=n)window.console&&window.console.log(n,u,a);else if(a.start.row==n){l=this.folds;var s=l.indexOf(a);for(s===0&&(this.start.column+=o),s;s<l.length;s++){if(a=l[s],a.start.column+=o,!a.sameRow)return;a.end.column+=o}this.end.column+=o}}},g.prototype.split=function(n,u){var o=this.getNextFoldTo(n,u);if(!o||o.kind=="inside")return null;var i=o.fold,a=this.folds,l=this.foldData,s=a.indexOf(i),c=a[s-1];this.end.row=c.end.row,this.end.column=c.end.column,a=a.splice(s,a.length-s);var m=new g(l,a);return l.splice(l.indexOf(this)+1,0,m),m},g.prototype.merge=function(n){for(var u=n.folds,o=0;o<u.length;o++)this.addFold(u[o]);var i=this.foldData;i.splice(i.indexOf(n),1)},g.prototype.toString=function(){var n=[this.range.toString()+": ["];return this.folds.forEach(function(u){n.push("  "+u.toString())}),n.push("]"),n.join(`
`)},g.prototype.idxToPosition=function(n){for(var u=0,o=0;o<this.folds.length;o++){var i=this.folds[o];if(n-=i.start.column-u,n<0)return{row:i.start.row,column:i.start.column+n};if(n-=i.placeholder.length,n<0)return i.start;u=i.end.column}return{row:this.end.row,column:this.end.column+n}},g}();t.FoldLine=p});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("./range").Range,p=d.comparePoints,g=function(){function n(){this.ranges=[],this.$bias=1}return n.prototype.pointIndex=function(u,o,i){for(var a=this.ranges,l=i||0;l<a.length;l++){var s=a[l],c=p(u,s.end);if(!(c>0)){var m=p(u,s.start);return c===0?o&&m!==0?-l-2:l:m>0||m===0&&!o?l:-l-1}}return-l-1},n.prototype.add=function(u){var o=!u.isEmpty(),i=this.pointIndex(u.start,o);i<0&&(i=-i-1);var a=this.pointIndex(u.end,o,i);return a<0?a=-a-1:a++,this.ranges.splice(i,a-i,u)},n.prototype.addList=function(u){for(var o=[],i=u.length;i--;)o.push.apply(o,this.add(u[i]));return o},n.prototype.substractPoint=function(u){var o=this.pointIndex(u);if(o>=0)return this.ranges.splice(o,1)},n.prototype.merge=function(){var u=[],o=this.ranges;o=o.sort(function(c,m){return p(c.start,m.start)});for(var i=o[0],a,l=1;l<o.length;l++){a=i,i=o[l];var s=p(a.end,i.start);s<0||s==0&&!a.isEmpty()&&!i.isEmpty()||(p(a.end,i.end)<0&&(a.end.row=i.end.row,a.end.column=i.end.column),o.splice(l,1),u.push(i),i=a,l--)}return this.ranges=o,u},n.prototype.contains=function(u,o){return this.pointIndex({row:u,column:o})>=0},n.prototype.containsPoint=function(u){return this.pointIndex(u)>=0},n.prototype.rangeAtPoint=function(u){var o=this.pointIndex(u);if(o>=0)return this.ranges[o]},n.prototype.clipRows=function(u,o){var i=this.ranges;if(i[0].start.row>o||i[i.length-1].start.row<u)return[];var a=this.pointIndex({row:u,column:0});a<0&&(a=-a-1);var l=this.pointIndex({row:o,column:0},a);l<0&&(l=-l-1);for(var s=[],c=a;c<l;c++)s.push(i[c]);return s},n.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},n.prototype.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},n.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},n.prototype.$onChange=function(u){for(var o=u.start,i=u.end,a=o.row,l=i.row,s=this.ranges,c=0,m=s.length;c<m;c++){var h=s[c];if(h.end.row>=a)break}if(u.action=="insert")for(var v=l-a,k=-o.column+i.column;c<m;c++){var h=s[c];if(h.start.row>a)break;if(h.start.row==a&&h.start.column>=o.column&&(h.start.column==o.column&&this.$bias<=0||(h.start.column+=k,h.start.row+=v)),h.end.row==a&&h.end.column>=o.column){if(h.end.column==o.column&&this.$bias<0)continue;h.end.column==o.column&&k>0&&c<m-1&&h.end.column>h.start.column&&h.end.column==s[c+1].start.column&&(h.end.column-=k),h.end.column+=k,h.end.row+=v}}else for(var v=a-l,k=o.column-i.column;c<m;c++){var h=s[c];if(h.start.row>l)break;h.end.row<l&&(a<h.end.row||a==h.end.row&&o.column<h.end.column)?(h.end.row=a,h.end.column=o.column):h.end.row==l?h.end.column<=i.column?(v||h.end.column>o.column)&&(h.end.column=o.column,h.end.row=o.row):(h.end.column+=k,h.end.row+=v):h.end.row>l&&(h.end.row+=v),h.start.row<l&&(a<h.start.row||a==h.start.row&&o.column<h.start.column)?(h.start.row=a,h.start.column=o.column):h.start.row==l?h.start.column<=i.column?(v||h.start.column>o.column)&&(h.start.column=o.column,h.start.row=o.row):(h.start.column+=k,h.start.row+=v):h.start.row>l&&(h.start.row+=v)}if(v!=0&&c<m)for(;c<m;c++){var h=s[c];h.start.row+=v,h.end.row+=v}},n}();g.prototype.comparePoints=p,t.RangeList=g});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function c(){this.constructor=l}l.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),p=e("../range_list").RangeList,g=function(a){d(l,a);function l(s,c){var m=a.call(this)||this;return m.foldLine=null,m.placeholder=c,m.range=s,m.start=s.start,m.end=s.end,m.sameRow=s.start.row==s.end.row,m.subFolds=m.ranges=[],m}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(s){this.foldLine=s,this.subFolds.forEach(function(c){c.setFoldLine(s)})},l.prototype.clone=function(){var s=this.range.clone(),c=new l(s,this.placeholder);return this.subFolds.forEach(function(m){c.subFolds.push(m.clone())}),c.collapseChildren=this.collapseChildren,c},l.prototype.addSubFold=function(s){if(!this.range.isEqual(s)){u(s,this.start);for(var k=s.start.row,x=s.start.column,c=0,m=-1;c<this.subFolds.length&&(m=this.subFolds[c].range.compare(k,x),m==1);c++);var h=this.subFolds[c],v=0;if(m==0){if(h.range.containsRange(s))return h.addSubFold(s);v=1}for(var k=s.range.end.row,x=s.range.end.column,A=c,m=-1;A<this.subFolds.length&&(m=this.subFolds[A].range.compare(k,x),m==1);A++);m==0&&A++;for(var S=this.subFolds.splice(c,A-c,s),f=m==0?S.length-1:S.length,L=v;L<f;L++)s.addSubFold(S[L]);return s.setFoldLine(this.foldLine),s}},l.prototype.restoreRange=function(s){return i(s,this.start)},l}(p);function n(a,l){a.row-=l.row,a.row==0&&(a.column-=l.column)}function u(a,l){n(a.start,l),n(a.end,l)}function o(a,l){a.row==0&&(a.column+=l.column),a.row+=l.row}function i(a,l){o(a.start,l),o(a.end,l)}t.Fold=g});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,r){"use strict";var d=e("../range").Range,p=e("./fold_line").FoldLine,g=e("./fold").Fold,n=e("../token_iterator").TokenIterator,u=e("../mouse/mouse_event").MouseEvent;function o(){this.getFoldAt=function(i,a,l){var s=this.getFoldLine(i);if(!s)return null;for(var c=s.folds,m=0;m<c.length;m++){var h=c[m].range;if(h.contains(i,a)){if(l==1&&h.isEnd(i,a)&&!h.isEmpty())continue;if(l==-1&&h.isStart(i,a)&&!h.isEmpty())continue;return c[m]}}},this.getFoldsInRange=function(i){var a=i.start,l=i.end,s=this.$foldData,c=[];a.column+=1,l.column-=1;for(var m=0;m<s.length;m++){var h=s[m].range.compareRange(i);if(h!=2){if(h==-2)break;for(var v=s[m].folds,k=0;k<v.length;k++){var x=v[k];if(h=x.range.compareRange(i),h==-2)break;if(h==2)continue;if(h==42)break;c.push(x)}}}return a.column-=1,l.column+=1,c},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var a=[];i.forEach(function(l){a=a.concat(this.getFoldsInRange(l))},this)}else var a=this.getFoldsInRange(i);return a},this.getAllFolds=function(){for(var i=[],a=this.$foldData,l=0;l<a.length;l++)for(var s=0;s<a[l].folds.length;s++)i.push(a[l].folds[s]);return i},this.getFoldStringAt=function(i,a,l,s){if(s=s||this.getFoldLine(i),!s)return null;for(var c={end:{column:0}},m,h,v=0;v<s.folds.length;v++){h=s.folds[v];var k=h.range.compareEnd(i,a);if(k==-1){m=this.getLine(h.start.row).substring(c.end.column,h.start.column);break}else if(k===0)return null;c=h}return m||(m=this.getLine(h.start.row).substring(c.end.column)),l==-1?m.substring(0,a-c.end.column):l==1?m.substring(a-c.end.column):m},this.getFoldLine=function(i,a){var l=this.$foldData,s=0;for(a&&(s=l.indexOf(a)),s==-1&&(s=0),s;s<l.length;s++){var c=l[s];if(c.start.row<=i&&c.end.row>=i)return c;if(c.end.row>i)return null}return null},this.getNextFoldLine=function(i,a){var l=this.$foldData,s=0;for(a&&(s=l.indexOf(a)),s==-1&&(s=0),s;s<l.length;s++){var c=l[s];if(c.end.row>=i)return c}return null},this.getFoldedRowCount=function(i,a){for(var l=this.$foldData,s=a-i+1,c=0;c<l.length;c++){var m=l[c],h=m.end.row,v=m.start.row;if(h>=a){v<a&&(v>=i?s-=a-v:s=0);break}else h>=i&&(v>=i?s-=h-v:s-=h-i+1)}return s},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(a,l){return a.start.row-l.start.row}),i},this.addFold=function(i,a){var l=this.$foldData,s=!1,c;i instanceof g?c=i:(c=new g(a,i),c.collapseChildren=a.collapseChildren),this.$clipRangeToDocument(c.range);var m=c.start.row,h=c.start.column,v=c.end.row,k=c.end.column,x=this.getFoldAt(m,h,1),A=this.getFoldAt(v,k,-1);if(x&&A==x)return x.addSubFold(c);x&&!x.range.isStart(m,h)&&this.removeFold(x),A&&!A.range.isEnd(v,k)&&this.removeFold(A);var S=this.getFoldsInRange(c.range);S.length>0&&(this.removeFolds(S),c.collapseChildren||S.forEach(function(C){c.addSubFold(C)}));for(var f=0;f<l.length;f++){var L=l[f];if(v==L.start.row){L.addFold(c),s=!0;break}else if(m==L.end.row){if(L.addFold(c),s=!0,!c.sameRow){var $=l[f+1];if($&&$.start.row==v){L.merge($);break}}break}else if(v<=L.start.row)break}return s||(L=this.$addFoldLine(new p(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData(L.start.row,L.start.row):this.$updateRowLengthCache(L.start.row,L.start.row),this.$modified=!0,this._signal("changeFold",{data:c,action:"add"}),c},this.addFolds=function(i){i.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(i){var a=i.foldLine,l=a.start.row,s=a.end.row,c=this.$foldData,m=a.folds;if(m.length==1)c.splice(c.indexOf(a),1);else if(a.range.isEnd(i.end.row,i.end.column))m.pop(),a.end.row=m[m.length-1].end.row,a.end.column=m[m.length-1].end.column;else if(a.range.isStart(i.start.row,i.start.column))m.shift(),a.start.row=m[0].start.row,a.start.column=m[0].start.column;else if(i.sameRow)m.splice(m.indexOf(i),1);else{var h=a.split(i.start.row,i.start.column);m=h.folds,m.shift(),h.start.row=m[0].start.row,h.start.column=m[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,s):this.$updateRowLengthCache(l,s)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var a=[],l=0;l<i.length;l++)a.push(i[l]);a.forEach(function(s){this.removeFold(s)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(a){i.restoreRange(a),this.addFold(a)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(i,a){var l,s;if(i==null)l=new d(0,0,this.getLength(),0),a==null&&(a=!0);else if(typeof i=="number")l=new d(i,0,i,this.getLine(i).length);else if("row"in i)l=d.fromPoints(i,i);else{if(Array.isArray(i))return s=[],i.forEach(function(m){s=s.concat(this.unfold(m))},this),s;l=i}s=this.getFoldsInRangeList(l);for(var c=s;s.length==1&&d.comparePoints(s[0].start,l.start)<0&&d.comparePoints(s[0].end,l.end)>0;)this.expandFolds(s),s=this.getFoldsInRangeList(l);if(a!=!1?this.removeFolds(s):this.expandFolds(s),c.length)return c},this.isRowFolded=function(i,a){return!!this.getFoldLine(i,a)},this.getRowFoldEnd=function(i,a){var l=this.getFoldLine(i,a);return l?l.end.row:i},this.getRowFoldStart=function(i,a){var l=this.getFoldLine(i,a);return l?l.start.row:i},this.getFoldDisplayLine=function(i,a,l,s,c){s==null&&(s=i.start.row),c==null&&(c=0),a==null&&(a=i.end.row),l==null&&(l=this.getLine(a).length);var m=this.doc,h="";return i.walk(function(v,k,x,A){if(!(k<s)){if(k==s){if(x<c)return;A=Math.max(c,A)}v!=null?h+=v:h+=m.getLine(k).substring(A,x)}},a,l),h},this.getDisplayLine=function(i,a,l,s){var c=this.getFoldLine(i);if(c)return this.getFoldDisplayLine(c,i,a,l,s);var m;return m=this.doc.getLine(i),m.substring(s||0,a||m.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(a){var l=a.folds.map(function(s){return s.clone()});return new p(i,l)}),i},this.toggleFold=function(i){var a=this.selection,l=a.getRange(),s,c;if(l.isEmpty()){var m=l.start;if(s=this.getFoldAt(m.row,m.column),s){this.expandFold(s);return}else(c=this.findMatchingBracket(m))?l.comparePoint(c)==1?l.end=c:(l.start=c,l.start.column++,l.end.column--):(c=this.findMatchingBracket({row:m.row,column:m.column+1}))?(l.comparePoint(c)==1?l.end=c:l.start=c,l.start.column++):l=this.getCommentFoldRange(m.row,m.column)||l}else{var h=this.getFoldsInRange(l);if(i&&h.length){this.expandFolds(h);return}else h.length==1&&(s=h[0])}if(s||(s=this.getFoldAt(l.start.row,l.start.column)),s&&s.range.toString()==l.toString()){this.expandFold(s);return}var v="...";if(!l.isMultiLine()){if(v=this.getTextRange(l),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,l)},this.getCommentFoldRange=function(i,a,l){var s=new n(this,i,a),c=s.getCurrentToken(),m=c&&c.type;if(c&&/^comment|string/.test(m)){m=m.match(/comment|string/)[0],m=="comment"&&(m+="|doc-start|\\.doc");var h=new RegExp(m),v=new d;if(l!=1){do c=s.stepBackward();while(c&&h.test(c.type));c=s.stepForward()}v.start.row=s.getCurrentTokenRow(),v.start.column=s.getCurrentTokenColumn()+c.value.length,s=new n(this,i,a);var k=this.getState(s.$row);if(l!=-1){var x=-1;do if(c=s.stepForward(),x==-1){var A=this.getState(s.$row);k.toString()!==A.toString()&&(x=s.$row)}else if(s.$row>x)break;while(c&&h.test(c.type));c=s.stepBackward()}else c=s.getCurrentToken();return v.end.row=s.getCurrentTokenRow(),v.end.column=s.getCurrentTokenColumn(),v}},this.foldAll=function(i,a,l,s){l==null&&(l=1e5);var c=this.foldWidgets;if(c){a=a||this.getLength(),i=i||0;for(var m=i;m<a;m++)if(c[m]==null&&(c[m]=this.getFoldWidget(m)),c[m]=="start"&&!(s&&!s(m))){var h=this.getFoldWidgetRange(m);h&&h.isMultiLine()&&h.end.row<=a&&h.start.row>=i&&(m=h.end.row,h.collapseChildren=l,this.addFold("...",h))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(a){for(var l=i.getTokens(a),s=0;s<l.length;s++){var c=l[s];if(!(c.type=="text"&&/^\s+$/.test(c.value)))return!!/comment/.test(c.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var a=this.$foldMode;this.$setFolding(null),this.$setFolding(a)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,a){var l=this.foldWidgets;if(!l||a&&l[i])return{};for(var s=i-1,c;s>=0;){var m=l[s];if(m==null&&(m=l[s]=this.getFoldWidget(s)),m=="start"){var h=this.getFoldWidgetRange(s);if(c||(c=h),h&&h.end.row>=i)break}s--}return{range:s!==-1&&h,firstRange:c}},this.onFoldWidgetClick=function(i,a){a instanceof u&&(a=a.domEvent);var l={children:a.shiftKey,all:a.ctrlKey||a.metaKey,siblings:a.altKey},s=this.$toggleFoldWidget(i,l);if(!s){var c=a.target||a.srcElement;c&&/ace_fold-widget/.test(c.className)&&(c.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,a){if(this.getFoldWidget){var l=this.getFoldWidget(i),s=this.getLine(i),c=l==="end"?-1:1,m=this.getFoldAt(i,c===-1?0:s.length,c);if(m)return a.children||a.all?this.removeFold(m):this.expandFold(m),m;var h=this.getFoldWidgetRange(i,!0);if(h&&!h.isMultiLine()&&(m=this.getFoldAt(h.start.row,h.start.column,1),m&&h.isEqual(m.range)))return this.removeFold(m),m;if(a.siblings){var v=this.getParentFoldRangeData(i);if(v.range)var k=v.range.start.row+1,x=v.range.end.row;this.foldAll(k,x,a.all?1e4:0)}else a.children?(x=h?h.end.row:this.getLength(),this.foldAll(i+1,x,a.all?1e4:0)):h&&(a.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(i){var a=this.selection.getCursor().row;a=this.getRowFoldStart(a);var l=this.$toggleFoldWidget(a,{});if(!l){var s=this.getParentFoldRangeData(a,!0);if(l=s.range||s.firstRange,l){a=l.start.row;var c=this.getFoldAt(a,this.getLine(a).length,1);c?this.removeFold(c):this.addFold("...",l)}}},this.updateFoldWidgets=function(i){var a=i.start.row,l=i.end.row-a;if(l===0)this.foldWidgets[a]=null;else if(i.action=="remove")this.foldWidgets.splice(a,l+1,null);else{var s=Array(l+1);s.unshift(a,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}},this.tokenizerUpdateFoldWidgets=function(i){var a=i.data;a.first!=a.last&&this.foldWidgets.length>a.first&&this.foldWidgets.splice(a.first,this.foldWidgets.length)}}t.Folding=o});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var d=e("../token_iterator").TokenIterator,p=e("../range").Range;function g(){this.findMatchingBracket=function(n,u){if(n.column==0)return null;var o=u||this.getLine(n.row).charAt(n.column-1);if(o=="")return null;var i=o.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],n):this.$findOpeningBracket(i[2],n):null},this.getBracketRange=function(n){var u=this.getLine(n.row),o=!0,i,a=u.charAt(n.column-1),l=a&&a.match(/([\(\[\{])|([\)\]\}])/);if(l||(a=u.charAt(n.column),n={row:n.row,column:n.column+1},l=a&&a.match(/([\(\[\{])|([\)\]\}])/),o=!1),!l)return null;if(l[1]){var s=this.$findClosingBracket(l[1],n);if(!s)return null;i=p.fromPoints(n,s),o||(i.end.column++,i.start.column--),i.cursor=i.end}else{var s=this.$findOpeningBracket(l[2],n);if(!s)return null;i=p.fromPoints(s,n),o||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(n,u){var o=this.getLine(n.row),i=/([\(\[\{])|([\)\]\}])/,a=!u&&o.charAt(n.column-1),l=a&&a.match(i);if(l||(a=(u===void 0||u)&&o.charAt(n.column),n={row:n.row,column:n.column+1},l=a&&a.match(i)),!l)return null;var s=new p(n.row,n.column-1,n.row,n.column),c=l[1]?this.$findClosingBracket(l[1],n):this.$findOpeningBracket(l[2],n);if(!c)return[s];var m=new p(c.row,c.column,c.row,c.column+1);return[s,m]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(n,u,o){var i=this.$brackets[n],a=1,l=new d(this,u.row,u.column),s=l.getCurrentToken();if(s||(s=l.stepForward()),!!s){o||(o=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var c=u.column-l.getCurrentTokenColumn()-2,m=s.value;;){for(;c>=0;){var h=m.charAt(c);if(h==i){if(a-=1,a==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else h==n&&(a+=1);c-=1}do s=l.stepBackward();while(s&&!o.test(s.type));if(s==null)break;m=s.value,c=m.length-1}return null}},this.$findClosingBracket=function(n,u,o){var i=this.$brackets[n],a=1,l=new d(this,u.row,u.column),s=l.getCurrentToken();if(s||(s=l.stepForward()),!!s){o||(o=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var c=u.column-l.getCurrentTokenColumn();;){for(var m=s.value,h=m.length;c<h;){var v=m.charAt(c);if(v==i){if(a-=1,a==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else v==n&&(a+=1);c+=1}do s=l.stepForward();while(s&&!o.test(s.type));if(s==null)break;c=0}return null}},this.getMatchingTags=function(n){var u=new d(this,n.row,n.column),o=this.$findTagName(u);if(o){var i=u.stepBackward();return i.value==="<"?this.$findClosingTag(u,o):this.$findOpeningTag(u,o)}},this.$findTagName=function(n){var u=n.getCurrentToken(),o=!1,i=!1;if(u&&u.type.indexOf("tag-name")===-1)do i?u=n.stepBackward():u=n.stepForward(),u&&(u.value==="/>"?i=!0:u.type.indexOf("tag-name")!==-1&&(o=!0));while(u&&!o);return u},this.$findClosingTag=function(n,u){var o,i=u.value,a=u.value,l=0,s=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1);u=n.stepForward();var c=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+u.value.length),m=!1;do{if(o=u,o.type.indexOf("tag-close")!==-1&&!m){var h=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1);m=!0}if(u=n.stepForward(),u){if(u.value===">"&&!m){var h=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1);m=!0}if(u.type.indexOf("tag-name")!==-1){if(i=u.value,a===i){if(o.value==="<")l++;else if(o.value==="</"&&(l--,l<0)){n.stepBackward();var v=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+2);u=n.stepForward();var k=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=n.stepForward()),u&&u.value===">")var x=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1);else return}}}else if(a===i&&u.value==="/>"&&(l--,l<0))var v=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+2),k=v,x=k,h=new p(c.end.row,c.end.column,c.end.row,c.end.column+1)}}while(u&&l>=0);if(s&&h&&v&&x&&c&&k)return{openTag:new p(s.start.row,s.start.column,h.end.row,h.end.column),closeTag:new p(v.start.row,v.start.column,x.end.row,x.end.column),openTagName:c,closeTagName:k}},this.$findOpeningTag=function(n,u){var o=n.getCurrentToken(),i=u.value,a=0,l=n.getCurrentTokenRow(),s=n.getCurrentTokenColumn(),c=s+2,m=new p(l,s,l,c);n.stepForward();var h=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=n.stepForward()),!(!u||u.value!==">")){var v=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1);n.stepBackward(),n.stepBackward();do if(u=o,l=n.getCurrentTokenRow(),s=n.getCurrentTokenColumn(),c=s+u.value.length,o=n.stepBackward(),u){if(u.type.indexOf("tag-name")!==-1){if(i===u.value)if(o.value==="<"){if(a++,a>0){var k=new p(l,s,l,c),x=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1);do u=n.stepForward();while(u&&u.value!==">");var A=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn(),n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1)}}else o.value==="</"&&a--}else if(u.value==="/>"){for(var S=0,f=o;f;){if(f.type.indexOf("tag-name")!==-1&&f.value===i){a--;break}else if(f.value==="<")break;f=n.stepBackward(),S++}for(var L=0;L<S;L++)n.stepForward()}}while(o&&a<=0);if(x&&A&&m&&v&&k&&h)return{openTag:new p(x.start.row,x.start.column,A.end.row,A.end.column),closeTag:new p(m.start.row,m.start.column,v.end.row,v.end.column),openTagName:k,closeTagName:h}}}}t.BracketMatch=g});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,r){"use strict";var d=e("./lib/oop"),p=e("./lib/lang"),g=e("./bidihandler").BidiHandler,n=e("./config"),u=e("./lib/event_emitter").EventEmitter,o=e("./selection").Selection,i=e("./mode/text").Mode,a=e("./range").Range,l=e("./document").Document,s=e("./background_tokenizer").BackgroundTokenizer,c=e("./search_highlight").SearchHighlight,m=e("./undomanager").UndoManager,h=function(){function T(w,y){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++T.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new s(new i().getTokenizer(),this);var b=this;this.bgTokenizer.on("update",function(E){b._signal("tokenizerUpdate",E)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof w!="object"||!w.getLine)&&(w=new l(w)),this.setDocument(w),this.selection=new o(this),this.$bidiHandler=new g(this),n.resetOptions(this),this.setMode(y),n._signal("session",this),this.destroyed=!1}return T.prototype.setDocument=function(w){this.doc&&this.doc.off("change",this.$onChange),this.doc=w,w.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},T.prototype.getDocument=function(){return this.doc},T.prototype.$resetRowCache=function(w){if(!w){this.$docRowCache=[],this.$screenRowCache=[];return}var y=this.$docRowCache.length,b=this.$getRowCacheIndex(this.$docRowCache,w)+1;y>b&&(this.$docRowCache.splice(b,y),this.$screenRowCache.splice(b,y))},T.prototype.$getRowCacheIndex=function(w,y){for(var b=0,E=w.length-1;b<=E;){var _=b+E>>1,R=w[_];if(y>R)b=_+1;else if(y<R)E=_-1;else return _}return b-1},T.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},T.prototype.onChangeFold=function(w){var y=w.data;this.$resetRowCache(y.start.row)},T.prototype.onChange=function(w){this.$modified=!0,this.$bidiHandler.onChange(w),this.$resetRowCache(w.start.row);var y=this.$updateInternalDataOnChange(w);!this.$fromUndo&&this.$undoManager&&(y&&y.length&&(this.$undoManager.add({action:"removeFolds",folds:y},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(w,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(w),this._signal("change",w)},T.prototype.setValue=function(w){this.doc.setValue(w),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},T.fromJSON=function(w){typeof w=="string"&&(w=JSON.parse(w));var y=new m;y.$undoStack=w.history.undo,y.$redoStack=w.history.redo,y.mark=w.history.mark,y.$rev=w.history.rev;var b=new T(w.value);return w.folds.forEach(function(E){b.addFold("...",a.fromPoints(E.start,E.end))}),b.setAnnotations(w.annotations),b.setBreakpoints(w.breakpoints),b.setMode(w.mode),b.setScrollLeft(w.scrollLeft),b.setScrollTop(w.scrollTop),b.setUndoManager(y),b.selection.fromJSON(w.selection),b},T.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(w){return w.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},T.prototype.toString=function(){return this.doc.getValue()},T.prototype.getSelection=function(){return this.selection},T.prototype.getState=function(w){return this.bgTokenizer.getState(w)},T.prototype.getTokens=function(w){return this.bgTokenizer.getTokens(w)},T.prototype.getTokenAt=function(w,y){var b=this.bgTokenizer.getTokens(w),E,_=0;if(y==null){var R=b.length-1;_=this.getLine(w).length}else for(var R=0;R<b.length&&(_+=b[R].value.length,!(_>=y));R++);return E=b[R],E?(E.index=R,E.start=_-E.value.length,E):null},T.prototype.setUndoManager=function(w){if(this.$undoManager=w,this.$informUndoManager&&this.$informUndoManager.cancel(),w){var y=this;w.addSession(this),this.$syncInformUndoManager=function(){y.$informUndoManager.cancel(),y.mergeUndoDeltas=!1},this.$informUndoManager=p.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},T.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},T.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},T.prototype.getTabString=function(){return this.getUseSoftTabs()?p.stringRepeat(" ",this.getTabSize()):"	"},T.prototype.setUseSoftTabs=function(w){this.setOption("useSoftTabs",w)},T.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},T.prototype.setTabSize=function(w){this.setOption("tabSize",w)},T.prototype.getTabSize=function(){return this.$tabSize},T.prototype.isTabStop=function(w){return this.$useSoftTabs&&w.column%this.$tabSize===0},T.prototype.setNavigateWithinSoftTabs=function(w){this.setOption("navigateWithinSoftTabs",w)},T.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},T.prototype.setOverwrite=function(w){this.setOption("overwrite",w)},T.prototype.getOverwrite=function(){return this.$overwrite},T.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},T.prototype.addGutterDecoration=function(w,y){this.$decorations[w]||(this.$decorations[w]=""),this.$decorations[w]+=" "+y,this._signal("changeBreakpoint",{})},T.prototype.removeGutterDecoration=function(w,y){this.$decorations[w]=(this.$decorations[w]||"").replace(" "+y,""),this._signal("changeBreakpoint",{})},T.prototype.getBreakpoints=function(){return this.$breakpoints},T.prototype.setBreakpoints=function(w){this.$breakpoints=[];for(var y=0;y<w.length;y++)this.$breakpoints[w[y]]="ace_breakpoint";this._signal("changeBreakpoint",{})},T.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},T.prototype.setBreakpoint=function(w,y){y===void 0&&(y="ace_breakpoint"),y?this.$breakpoints[w]=y:delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},T.prototype.clearBreakpoint=function(w){delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},T.prototype.addMarker=function(w,y,b,E){var _=this.$markerId++,R={range:w,type:b||"line",renderer:typeof b=="function"?b:null,clazz:y,inFront:!!E,id:_};return E?(this.$frontMarkers[_]=R,this._signal("changeFrontMarker")):(this.$backMarkers[_]=R,this._signal("changeBackMarker")),_},T.prototype.addDynamicMarker=function(w,y){if(w.update){var b=this.$markerId++;return w.id=b,w.inFront=!!y,y?(this.$frontMarkers[b]=w,this._signal("changeFrontMarker")):(this.$backMarkers[b]=w,this._signal("changeBackMarker")),w}},T.prototype.removeMarker=function(w){var y=this.$frontMarkers[w]||this.$backMarkers[w];if(y){var b=y.inFront?this.$frontMarkers:this.$backMarkers;delete b[w],this._signal(y.inFront?"changeFrontMarker":"changeBackMarker")}},T.prototype.getMarkers=function(w){return w?this.$frontMarkers:this.$backMarkers},T.prototype.highlight=function(w){if(!this.$searchHighlight){var y=new c(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(y)}this.$searchHighlight.setRegexp(w)},T.prototype.highlightLines=function(w,y,b,E){typeof y!="number"&&(b=y,y=w),b||(b="ace_step");var _=new a(w,0,y,1/0);return _.id=this.addMarker(_,b,"fullLine",E),_},T.prototype.setAnnotations=function(w){this.$annotations=w,this._signal("changeAnnotation",{})},T.prototype.getAnnotations=function(){return this.$annotations||[]},T.prototype.clearAnnotations=function(){this.setAnnotations([])},T.prototype.$detectNewLine=function(w){var y=w.match(/^.*?(\r?\n)/m);y?this.$autoNewLine=y[1]:this.$autoNewLine=`
`},T.prototype.getWordRange=function(w,y){var b=this.getLine(w),E=!1;if(y>0&&(E=!!b.charAt(y-1).match(this.tokenRe)),E||(E=!!b.charAt(y).match(this.tokenRe)),E)var _=this.tokenRe;else if(/^\s+$/.test(b.slice(y-1,y+1)))var _=/\s/;else var _=this.nonTokenRe;var R=y;if(R>0){do R--;while(R>=0&&b.charAt(R).match(_));R++}for(var M=y;M<b.length&&b.charAt(M).match(_);)M++;return new a(w,R,w,M)},T.prototype.getAWordRange=function(w,y){for(var b=this.getWordRange(w,y),E=this.getLine(b.end.row);E.charAt(b.end.column).match(/[ \t]/);)b.end.column+=1;return b},T.prototype.setNewLineMode=function(w){this.doc.setNewLineMode(w)},T.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},T.prototype.setUseWorker=function(w){this.setOption("useWorker",w)},T.prototype.getUseWorker=function(){return this.$useWorker},T.prototype.onReloadTokenizer=function(w){var y=w.data;this.bgTokenizer.start(y.first),this._signal("tokenizerUpdate",w)},T.prototype.setMode=function(w,y){if(w&&typeof w=="object"){if(w.getTokenizer)return this.$onChangeMode(w);var b=w,E=b.path}else E=w||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[E]&&!b){this.$onChangeMode(this.$modes[E]),y&&y();return}this.$modeId=E,n.loadModule(["mode",E],function(_){if(this.$modeId!==E)return y&&y();this.$modes[E]&&!b?this.$onChangeMode(this.$modes[E]):_&&_.Mode&&(_=new _.Mode(b),b||(this.$modes[E]=_,_.$id=E),this.$onChangeMode(_)),y&&y()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},T.prototype.$onChangeMode=function(w,y){if(y||(this.$modeId=w.$id),this.$mode!==w){var b=this.$mode;this.$mode=w,this.$stopWorker(),this.$useWorker&&this.$startWorker();var E=w.getTokenizer();if(E.on!==void 0){var _=this.onReloadTokenizer.bind(this);E.on("update",_)}this.bgTokenizer.setTokenizer(E),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=w.tokenRe,this.nonTokenRe=w.nonTokenRe,y||(w.attachToSession&&w.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(w.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:b,mode:w}))}},T.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},T.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(w){n.warn("Could not load worker",w),this.$worker=null}},T.prototype.getMode=function(){return this.$mode},T.prototype.setScrollTop=function(w){this.$scrollTop===w||isNaN(w)||(this.$scrollTop=w,this._signal("changeScrollTop",w))},T.prototype.getScrollTop=function(){return this.$scrollTop},T.prototype.setScrollLeft=function(w){this.$scrollLeft===w||isNaN(w)||(this.$scrollLeft=w,this._signal("changeScrollLeft",w))},T.prototype.getScrollLeft=function(){return this.$scrollLeft},T.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},T.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var w=0;return this.lineWidgets.forEach(function(y){y&&y.screenWidth>w&&(w=y.screenWidth)}),this.lineWidgetWidth=w},T.prototype.$computeWidth=function(w){if(this.$modified||w){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var y=this.doc.getAllLines(),b=this.$rowLengthCache,E=0,_=0,R=this.$foldData[_],M=R?R.start.row:1/0,I=y.length,P=0;P<I;P++){if(P>M){if(P=R.end.row+1,P>=I)break;R=this.$foldData[_++],M=R?R.start.row:1/0}b[P]==null&&(b[P]=this.$getStringScreenWidth(y[P])[0]),b[P]>E&&(E=b[P])}this.screenWidth=E}},T.prototype.getLine=function(w){return this.doc.getLine(w)},T.prototype.getLines=function(w,y){return this.doc.getLines(w,y)},T.prototype.getLength=function(){return this.doc.getLength()},T.prototype.getTextRange=function(w){return this.doc.getTextRange(w||this.selection.getRange())},T.prototype.insert=function(w,y){return this.doc.insert(w,y)},T.prototype.remove=function(w){return this.doc.remove(w)},T.prototype.removeFullLines=function(w,y){return this.doc.removeFullLines(w,y)},T.prototype.undoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=w.length-1;b!=-1;b--){var E=w[b];E.action=="insert"||E.action=="remove"?this.doc.revertDelta(E):E.folds&&this.addFolds(E.folds)}!y&&this.$undoSelect&&(w.selectionBefore?this.selection.fromJSON(w.selectionBefore):this.selection.setRange(this.$getUndoSelection(w,!0))),this.$fromUndo=!1}},T.prototype.redoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=0;b<w.length;b++){var E=w[b];(E.action=="insert"||E.action=="remove")&&this.doc.$safeApplyDelta(E)}!y&&this.$undoSelect&&(w.selectionAfter?this.selection.fromJSON(w.selectionAfter):this.selection.setRange(this.$getUndoSelection(w,!1))),this.$fromUndo=!1}},T.prototype.setUndoSelect=function(w){this.$undoSelect=w},T.prototype.$getUndoSelection=function(w,y){function b(I){return y?I.action!=="insert":I.action==="insert"}for(var E,_,R=0;R<w.length;R++){var M=w[R];if(M.start){if(!E){b(M)?E=a.fromPoints(M.start,M.end):E=a.fromPoints(M.start,M.start);continue}b(M)?(_=M.start,E.compare(_.row,_.column)==-1&&E.setStart(_),_=M.end,E.compare(_.row,_.column)==1&&E.setEnd(_)):(_=M.start,E.compare(_.row,_.column)==-1&&(E=a.fromPoints(M.start,M.start)))}}return E},T.prototype.replace=function(w,y){return this.doc.replace(w,y)},T.prototype.moveText=function(w,y,b){var E=this.getTextRange(w),_=this.getFoldsInRange(w),R=a.fromPoints(y,y);if(!b){this.remove(w);var M=w.start.row-w.end.row,I=M?-w.end.column:w.start.column-w.end.column;I&&(R.start.row==w.end.row&&R.start.column>w.end.column&&(R.start.column+=I),R.end.row==w.end.row&&R.end.column>w.end.column&&(R.end.column+=I)),M&&R.start.row>=w.end.row&&(R.start.row+=M,R.end.row+=M)}if(R.end=this.insert(R.start,E),_.length){var P=w.start,O=R.start,M=O.row-P.row,I=O.column-P.column;this.addFolds(_.map(function(F){return F=F.clone(),F.start.row==P.row&&(F.start.column+=I),F.end.row==P.row&&(F.end.column+=I),F.start.row+=M,F.end.row+=M,F}))}return R},T.prototype.indentRows=function(w,y,b){b=b.replace(/\t/g,this.getTabString());for(var E=w;E<=y;E++)this.doc.insertInLine({row:E,column:0},b)},T.prototype.outdentRows=function(w){for(var y=w.collapseRows(),b=new a(0,0,0,0),E=this.getTabSize(),_=y.start.row;_<=y.end.row;++_){var R=this.getLine(_);b.start.row=_,b.end.row=_;for(var M=0;M<E&&R.charAt(M)==" ";++M);M<E&&R.charAt(M)=="	"?(b.start.column=M,b.end.column=M+1):(b.start.column=0,b.end.column=M),this.remove(b)}},T.prototype.$moveLines=function(w,y,b){if(w=this.getRowFoldStart(w),y=this.getRowFoldEnd(y),b<0){var E=this.getRowFoldStart(w+b);if(E<0)return 0;var _=E-w}else if(b>0){var E=this.getRowFoldEnd(y+b);if(E>this.doc.getLength()-1)return 0;var _=E-y}else{w=this.$clipRowToDocument(w),y=this.$clipRowToDocument(y);var _=y-w+1}var R=new a(w,0,y,Number.MAX_VALUE),M=this.getFoldsInRange(R).map(function(P){return P=P.clone(),P.start.row+=_,P.end.row+=_,P}),I=b==0?this.doc.getLines(w,y):this.doc.removeFullLines(w,y);return this.doc.insertFullLines(w+_,I),M.length&&this.addFolds(M),_},T.prototype.moveLinesUp=function(w,y){return this.$moveLines(w,y,-1)},T.prototype.moveLinesDown=function(w,y){return this.$moveLines(w,y,1)},T.prototype.duplicateLines=function(w,y){return this.$moveLines(w,y,0)},T.prototype.$clipRowToDocument=function(w){return Math.max(0,Math.min(w,this.doc.getLength()-1))},T.prototype.$clipColumnToRow=function(w,y){return y<0?0:Math.min(this.doc.getLine(w).length,y)},T.prototype.$clipPositionToDocument=function(w,y){if(y=Math.max(0,y),w<0)w=0,y=0;else{var b=this.doc.getLength();w>=b?(w=b-1,y=this.doc.getLine(b-1).length):y=Math.min(this.doc.getLine(w).length,y)}return{row:w,column:y}},T.prototype.$clipRangeToDocument=function(w){w.start.row<0?(w.start.row=0,w.start.column=0):w.start.column=this.$clipColumnToRow(w.start.row,w.start.column);var y=this.doc.getLength()-1;return w.end.row>y?(w.end.row=y,w.end.column=this.doc.getLine(y).length):w.end.column=this.$clipColumnToRow(w.end.row,w.end.column),w},T.prototype.setUseWrapMode=function(w){if(w!=this.$useWrapMode){if(this.$useWrapMode=w,this.$modified=!0,this.$resetRowCache(0),w){var y=this.getLength();this.$wrapData=Array(y),this.$updateWrapData(0,y-1)}this._signal("changeWrapMode")}},T.prototype.getUseWrapMode=function(){return this.$useWrapMode},T.prototype.setWrapLimitRange=function(w,y){(this.$wrapLimitRange.min!==w||this.$wrapLimitRange.max!==y)&&(this.$wrapLimitRange={min:w,max:y},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},T.prototype.adjustWrapLimit=function(w,y){var b=this.$wrapLimitRange;b.max<0&&(b={min:y,max:y});var E=this.$constrainWrapLimit(w,b.min,b.max);return E!=this.$wrapLimit&&E>1?(this.$wrapLimit=E,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},T.prototype.$constrainWrapLimit=function(w,y,b){return y&&(w=Math.max(y,w)),b&&(w=Math.min(b,w)),w},T.prototype.getWrapLimit=function(){return this.$wrapLimit},T.prototype.setWrapLimit=function(w){this.setWrapLimitRange(w,w)},T.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},T.prototype.$updateInternalDataOnChange=function(w){var y=this.$useWrapMode,b=w.action,E=w.start,_=w.end,R=E.row,M=_.row,I=M-R,P=null;if(this.$updating=!0,I!=0)if(b==="remove"){this[y?"$wrapData":"$rowLengthCache"].splice(R,I);var O=this.$foldData;P=this.getFoldsInRange(w),this.removeFolds(P);var N=this.getFoldLine(_.row),D=0;if(N){N.addRemoveChars(_.row,_.column,E.column-_.column),N.shiftRow(-I);var F=this.getFoldLine(R);F&&F!==N&&(F.merge(N),N=F),D=O.indexOf(N)+1}for(D;D<O.length;D++){var N=O[D];N.start.row>=_.row&&N.shiftRow(-I)}M=R}else{var z=Array(I);z.unshift(R,0);var W=y?this.$wrapData:this.$rowLengthCache;W.splice.apply(W,z);var O=this.$foldData,N=this.getFoldLine(R),D=0;if(N){var j=N.range.compareInside(E.row,E.column);j==0?(N=N.split(E.row,E.column),N&&(N.shiftRow(I),N.addRemoveChars(M,0,_.column-E.column))):j==-1&&(N.addRemoveChars(R,0,_.column-E.column),N.shiftRow(I)),D=O.indexOf(N)+1}for(D;D<O.length;D++){var N=O[D];N.start.row>=R&&N.shiftRow(I)}}else{I=Math.abs(w.start.column-w.end.column),b==="remove"&&(P=this.getFoldsInRange(w),this.removeFolds(P),I=-I);var N=this.getFoldLine(R);N&&N.addRemoveChars(R,E.column,I)}return y&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,y?this.$updateWrapData(R,M):this.$updateRowLengthCache(R,M),P},T.prototype.$updateRowLengthCache=function(w,y){this.$rowLengthCache[w]=null,this.$rowLengthCache[y]=null},T.prototype.$updateWrapData=function(w,y){var b=this.doc.getAllLines(),E=this.getTabSize(),_=this.$wrapData,R=this.$wrapLimit,M,I,P=w;for(y=Math.min(y,b.length-1);P<=y;)I=this.getFoldLine(P,I),I?(M=[],I.walk(function(O,N,D,F){var z;if(O!=null){z=this.$getDisplayTokens(O,M.length),z[0]=x;for(var W=1;W<z.length;W++)z[W]=A}else z=this.$getDisplayTokens(b[N].substring(F,D),M.length);M=M.concat(z)}.bind(this),I.end.row,b[I.end.row].length+1),_[I.start.row]=this.$computeWrapSplits(M,R,E),P=I.end.row+1):(M=this.$getDisplayTokens(b[P]),_[P]=this.$computeWrapSplits(M,R,E),P++)},T.prototype.$computeWrapSplits=function(w,y,b){if(w.length==0)return[];var E=[],_=w.length,R=0,M=0,I=this.$wrapAsCode,P=this.$indentedSoftWrap,O=y<=Math.max(2*b,8)||P===!1?0:Math.floor(y/2);function N(){var j=0;if(O===0)return j;if(P)for(var Z=0;Z<w.length;Z++){var Y=w[Z];if(Y==f)j+=1;else if(Y==L)j+=b;else{if(Y==$)continue;break}}return I&&P!==!1&&(j+=b),Math.min(j,O)}function D(j){for(var Z=j-R,Y=R;Y<j;Y++){var q=w[Y];(q===12||q===2)&&(Z-=1)}E.length||(F=N(),E.indent=F),M+=Z,E.push(M),R=j}for(var F=0;_-R>y-F;){var z=R+y-F;if(w[z-1]>=f&&w[z]>=f){D(z);continue}if(w[z]==x||w[z]==A){for(z;z!=R-1&&w[z]!=x;z--);if(z>R){D(z);continue}for(z=R+y,z;z<w.length&&w[z]==A;z++);if(z==w.length)break;D(z);continue}for(var W=Math.max(z-(y-(y>>2)),R-1);z>W&&w[z]<x;)z--;if(I){for(;z>W&&w[z]<x;)z--;for(;z>W&&w[z]==S;)z--}else for(;z>W&&w[z]<f;)z--;if(z>W){D(++z);continue}z=R+y,w[z]==k&&z--,D(z-F)}return E},T.prototype.$getDisplayTokens=function(w,y){var b=[],E;y=y||0;for(var _=0;_<w.length;_++){var R=w.charCodeAt(_);if(R==9){E=this.getScreenTabSize(b.length+y),b.push(L);for(var M=1;M<E;M++)b.push($)}else R==32?b.push(f):R>39&&R<48||R>57&&R<64?b.push(S):R>=4352&&C(R)?b.push(v,k):b.push(v)}return b},T.prototype.$getStringScreenWidth=function(w,y,b){if(y==0)return[0,0];y==null&&(y=1/0),b=b||0;var E,_;for(_=0;_<w.length&&(E=w.charCodeAt(_),E==9?b+=this.getScreenTabSize(b):E>=4352&&C(E)?b+=2:b+=1,!(b>y));_++);return[b,_]},T.prototype.getRowLength=function(w){var y=1;return this.lineWidgets&&(y+=this.lineWidgets[w]&&this.lineWidgets[w].rowCount||0),!this.$useWrapMode||!this.$wrapData[w]?y:this.$wrapData[w].length+y},T.prototype.getRowLineCount=function(w){return!this.$useWrapMode||!this.$wrapData[w]?1:this.$wrapData[w].length+1},T.prototype.getRowWrapIndent=function(w){if(this.$useWrapMode){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE),b=this.$wrapData[y.row];return b.length&&b[0]<y.column?b.indent:0}else return 0},T.prototype.getScreenLastRowColumn=function(w){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE);return this.documentToScreenColumn(y.row,y.column)},T.prototype.getDocumentLastRowColumn=function(w,y){var b=this.documentToScreenRow(w,y);return this.getScreenLastRowColumn(b)},T.prototype.getDocumentLastRowColumnPosition=function(w,y){var b=this.documentToScreenRow(w,y);return this.screenToDocumentPosition(b,Number.MAX_VALUE/10)},T.prototype.getRowSplitData=function(w){if(this.$useWrapMode)return this.$wrapData[w]},T.prototype.getScreenTabSize=function(w){return this.$tabSize-(w%this.$tabSize|0)},T.prototype.screenToDocumentRow=function(w,y){return this.screenToDocumentPosition(w,y).row},T.prototype.screenToDocumentColumn=function(w,y){return this.screenToDocumentPosition(w,y).column},T.prototype.screenToDocumentPosition=function(w,y,b){if(w<0)return{row:0,column:0};var E,_=0,R=0,M,I=0,P=0,O=this.$screenRowCache,N=this.$getRowCacheIndex(O,w),D=O.length;if(D&&N>=0)var I=O[N],_=this.$docRowCache[N],F=w>O[D-1];else var F=!D;for(var z=this.getLength()-1,W=this.getNextFoldLine(_),j=W?W.start.row:1/0;I<=w&&(P=this.getRowLength(_),!(I+P>w||_>=z));)I+=P,_++,_>j&&(_=W.end.row+1,W=this.getNextFoldLine(_,W),j=W?W.start.row:1/0),F&&(this.$docRowCache.push(_),this.$screenRowCache.push(I));if(W&&W.start.row<=_)E=this.getFoldDisplayLine(W),_=W.start.row;else{if(I+P<=w||_>z)return{row:z,column:this.getLine(z).length};E=this.getLine(_),W=null}var Z=0,Y=Math.floor(w-I);if(this.$useWrapMode){var q=this.$wrapData[_];q&&(M=q[Y],Y>0&&q.length&&(Z=q.indent,R=q[Y-1]||q[q.length-1],E=E.substring(R)))}return b!==void 0&&this.$bidiHandler.isBidiRow(I+Y,_,Y)&&(y=this.$bidiHandler.offsetToCol(b)),R+=this.$getStringScreenWidth(E,y-Z)[1],this.$useWrapMode&&R>=M&&(R=M-1),W?W.idxToPosition(R):{row:_,column:R}},T.prototype.documentToScreenPosition=function(w,y){if(typeof y>"u")var b=this.$clipPositionToDocument(w.row,w.column);else b=this.$clipPositionToDocument(w,y);w=b.row,y=b.column;var E=0,_=null,R=null;R=this.getFoldAt(w,y,1),R&&(w=R.start.row,y=R.start.column);var M,I=0,P=this.$docRowCache,O=this.$getRowCacheIndex(P,w),N=P.length;if(N&&O>=0)var I=P[O],E=this.$screenRowCache[O],D=w>P[N-1];else var D=!N;for(var F=this.getNextFoldLine(I),z=F?F.start.row:1/0;I<w;){if(I>=z){if(M=F.end.row+1,M>w)break;F=this.getNextFoldLine(M,F),z=F?F.start.row:1/0}else M=I+1;E+=this.getRowLength(I),I=M,D&&(this.$docRowCache.push(I),this.$screenRowCache.push(E))}var W="";F&&I>=z?(W=this.getFoldDisplayLine(F,w,y),_=F.start.row):(W=this.getLine(w).substring(0,y),_=w);var j=0;if(this.$useWrapMode){var Z=this.$wrapData[_];if(Z){for(var Y=0;W.length>=Z[Y];)E++,Y++;W=W.substring(Z[Y-1]||0,W.length),j=Y>0?Z.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(E+=this.lineWidgets[I].rowsAbove),{row:E,column:j+this.$getStringScreenWidth(W)[0]}},T.prototype.documentToScreenColumn=function(w,y){return this.documentToScreenPosition(w,y).column},T.prototype.documentToScreenRow=function(w,y){return this.documentToScreenPosition(w,y).row},T.prototype.getScreenLength=function(){var w=0,y=null;if(this.$useWrapMode)for(var _=this.$wrapData.length,R=0,E=0,y=this.$foldData[E++],M=y?y.start.row:1/0;R<_;){var I=this.$wrapData[R];w+=I?I.length+1:1,R++,R>M&&(R=y.end.row+1,y=this.$foldData[E++],M=y?y.start.row:1/0)}else{w=this.getLength();for(var b=this.$foldData,E=0;E<b.length;E++)y=b[E],w-=y.end.row-y.start.row}return this.lineWidgets&&(w+=this.$getWidgetScreenLength()),w},T.prototype.$setFontMetrics=function(w){this.$enableVarChar&&(this.$getStringScreenWidth=function(y,b,E){if(b===0)return[0,0];b||(b=1/0),E=E||0;var _,R;for(R=0;R<y.length&&(_=y.charAt(R),_==="	"?E+=this.getScreenTabSize(E):E+=w.getCharacterWidth(_),!(E>b));R++);return[E,R]})},T.prototype.getPrecedingCharacter=function(){var w=this.selection.getCursor();if(w.column===0)return w.row===0?"":this.doc.getNewLineCharacter();var y=this.getLine(w.row);return y[w.column-1]},T.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},T}();h.$uid=0,h.prototype.$modes=n.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=C,d.implement(h.prototype,u);var v=1,k=2,x=3,A=4,S=9,f=10,L=11,$=12;function C(T){return T<4352?!1:T>=4352&&T<=4447||T>=4515&&T<=4519||T>=4602&&T<=4607||T>=9001&&T<=9002||T>=11904&&T<=11929||T>=11931&&T<=12019||T>=12032&&T<=12245||T>=12272&&T<=12283||T>=12288&&T<=12350||T>=12353&&T<=12438||T>=12441&&T<=12543||T>=12549&&T<=12589||T>=12593&&T<=12686||T>=12688&&T<=12730||T>=12736&&T<=12771||T>=12784&&T<=12830||T>=12832&&T<=12871||T>=12880&&T<=13054||T>=13056&&T<=19903||T>=19968&&T<=42124||T>=42128&&T<=42182||T>=43360&&T<=43388||T>=44032&&T<=55203||T>=55216&&T<=55238||T>=55243&&T<=55291||T>=63744&&T<=64255||T>=65040&&T<=65049||T>=65072&&T<=65106||T>=65108&&T<=65126||T>=65128&&T<=65131||T>=65281&&T<=65376||T>=65504&&T<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),n.defineOptions(h.prototype,"session",{wrap:{set:function(T){if(!T||T=="off"?T=!1:T=="free"?T=!0:T=="printMargin"?T=-1:typeof T=="string"&&(T=parseInt(T,10)||!1),this.$wrap!=T)if(this.$wrap=T,!T)this.setUseWrapMode(!1);else{var w=typeof T=="number"?T:null;this.setWrapLimitRange(w,w),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(T){T=T=="auto"?this.$mode.type!="text":T!="text",T!=this.$wrapAsCode&&(this.$wrapAsCode=T,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(T){this.$useWorker=T,this.$stopWorker(),T&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(T){T=parseInt(T),T>0&&this.$tabSize!==T&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=T,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(T){this.setFoldStyle(T)},handlesSet:!0},overwrite:{set:function(T){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(T){this.doc.setNewLineMode(T)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(T){this.setMode(T)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,r){"use strict";var d=e("./lib/lang"),p=e("./lib/oop"),g=e("./range").Range,n=function(){function o(){this.$options={}}return o.prototype.set=function(i){return p.mixin(this.$options,i),this},o.prototype.getOptions=function(){return d.copyObject(this.$options)},o.prototype.setOptions=function(i){this.$options=i},o.prototype.find=function(i){var a=this.$options,l=this.$matchIterator(i,a);if(!l)return!1;var s=null;return l.forEach(function(c,m,h,v){return s=new g(c,m,h,v),m==v&&a.start&&a.start.start&&a.skipCurrent!=!1&&s.isEqual(a.start)?(s=null,!1):!0}),s},o.prototype.findAll=function(i){var a=this.$options;if(!a.needle)return[];this.$assembleRegExp(a);var l=a.range,s=l?i.getLines(l.start.row,l.end.row):i.doc.getAllLines(),c=[],m=a.re;if(a.$isMultiLine){var h=m.length,v=s.length-h,k;t:for(var x=m.offset||0;x<=v;x++){for(var A=0;A<h;A++)if(s[x+A].search(m[A])==-1)continue t;var S=s[x],f=s[x+h-1],L=S.length-S.match(m[0])[0].length,$=f.match(m[h-1])[0].length;k&&k.end.row===x&&k.end.column>L||(c.push(k=new g(x,L,x+h-1,$)),h>2&&(x=x+h-2))}}else for(var C=0;C<s.length;C++)for(var T=d.getMatchOffsets(s[C],m),A=0;A<T.length;A++){var w=T[A];c.push(new g(C,w.offset,C,w.offset+w.length))}if(l){for(var y=l.start.column,b=l.end.column,C=0,A=c.length-1;C<A&&c[C].start.column<y&&c[C].start.row==0;)C++;for(var E=l.end.row-l.start.row;C<A&&c[A].end.column>b&&c[A].end.row==E;)A--;for(c=c.slice(C,A+1),C=0,A=c.length;C<A;C++)c[C].start.row+=l.start.row,c[C].end.row+=l.start.row}return c},o.prototype.replace=function(i,a){var l=this.$options,s=this.$assembleRegExp(l);if(l.$isMultiLine)return a;if(s){var c=s.exec(i);if(!c||c[0].length!=i.length)return null;if(l.regExp||(a=a.replace(/\$/g,"$$$$")),a=i.replace(s,a),l.preserveCase){a=a.split("");for(var m=Math.min(i.length,i.length);m--;){var h=i[m];h&&h.toLowerCase()!=h?a[m]=a[m].toUpperCase():a[m]=a[m].toLowerCase()}a=a.join("")}return a}},o.prototype.$assembleRegExp=function(i,a){if(i.needle instanceof RegExp)return i.re=i.needle;var l=i.needle;if(!i.needle)return i.re=!1;i.regExp||(l=d.escapeRegExp(l));var s=i.caseSensitive?"gm":"gmi";try{new RegExp(l,"u"),i.$supportsUnicodeFlag=!0,s+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(l=u(l,i)),i.$isMultiLine=!a&&/[\n\r]/.test(l),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(l,s);try{var c=new RegExp(l,s)}catch{c=!1}return i.re=c},o.prototype.$assembleMultilineRegExp=function(i,a){for(var l=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),s=[],c=0;c<l.length;c++)try{s.push(new RegExp(l[c],a))}catch{return!1}return s},o.prototype.$matchIterator=function(i,a){var l=this.$assembleRegExp(a);if(!l)return!1;var s=a.backwards==!0,c=a.skipCurrent!=!1,m=l.unicode,h=a.range,v=a.start;v||(v=h?h[s?"end":"start"]:i.selection.getRange()),v.start&&(v=v[c!=s?"end":"start"]);var k=h?h.start.row:0,x=h?h.end.row:i.getLength()-1;if(s)var A=function(L){var $=v.row;if(!f($,v.column,L)){for($--;$>=k;$--)if(f($,Number.MAX_VALUE,L))return;if(a.wrap!=!1){for($=x,k=v.row;$>=k;$--)if(f($,Number.MAX_VALUE,L))return}}};else var A=function($){var C=v.row;if(!f(C,v.column,$)){for(C=C+1;C<=x;C++)if(f(C,0,$))return;if(a.wrap!=!1){for(C=k,x=v.row;C<=x;C++)if(f(C,0,$))return}}};if(a.$isMultiLine)var S=l.length,f=function(L,$,C){var T=s?L-S+1:L;if(!(T<0||T+S>i.getLength())){var w=i.getLine(T),y=w.search(l[0]);if(!(!s&&y<$||y===-1)){for(var b=1;b<S;b++)if(w=i.getLine(T+b),w.search(l[b])==-1)return;var E=w.match(l[S-1])[0].length;if(!(s&&E>$)&&C(T,y,T+S-1,E))return!0}}};else if(s)var f=function($,C,T){var w=i.getLine($),y=[],b,E=0;for(l.lastIndex=0;b=l.exec(w);){var _=b[0].length;if(E=b.index,!_){if(E>=w.length)break;l.lastIndex=E+=d.skipEmptyMatch(w,E,m)}if(b.index+_>C)break;y.push(b.index,_)}for(var R=y.length-1;R>=0;R-=2){var M=y[R-1],_=y[R];if(T($,M,$,M+_))return!0}};else var f=function($,C,T){var w=i.getLine($),y,b;for(l.lastIndex=C;b=l.exec(w);){var E=b[0].length;if(y=b.index,T($,y,$,y+E))return!0;if(!E&&(l.lastIndex=y+=d.skipEmptyMatch(w,y,m),y>=w.length))return!1}};return{forEach:A}},o}();function u(o,i){var a=d.supportsLookbehind();function l(h,v){v===void 0&&(v=!0);var k=a&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return k.test(h)||i.regExp?a&&i.$supportsUnicodeFlag?v?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var s=Array.from(o),c=s[0],m=s[s.length-1];return l(c)+o+l(m,!1)}t.Search=n});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var a=function(l,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])},a(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(l,s);function c(){this.constructor=l}l.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),p=e("../lib/keys"),g=e("../lib/useragent"),n=p.KEY_MODS,u=function(){function a(l,s){this.$init(l,s,!1)}return a.prototype.$init=function(l,s,c){this.platform=s||(g.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=c},a.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},a.prototype.removeCommand=function(l,s){var c=l&&(typeof l=="string"?l:l.name);l=this.commands[c],s||delete this.commands[c];var m=this.commandKeyBinding;for(var h in m){var v=m[h];if(v==l)delete m[h];else if(Array.isArray(v)){var k=v.indexOf(l);k!=-1&&(v.splice(k,1),v.length==1&&(m[h]=v[0]))}}},a.prototype.bindKey=function(l,s,c){if(typeof l=="object"&&l&&(c==null&&(c=l.position),l=l[this.platform]),!!l){if(typeof s=="function")return this.addCommand({exec:s,bindKey:l,name:s.name||l});l.split("|").forEach(function(m){var h="";if(m.indexOf(" ")!=-1){var v=m.split(/\s+/);m=v.pop(),v.forEach(function(A){var S=this.parseKeys(A),f=n[S.hashId]+S.key;h+=(h?" ":"")+f,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var k=this.parseKeys(m),x=n[k.hashId]+k.key;this._addCommandToBinding(h+x,s,c)},this)}},a.prototype._addCommandToBinding=function(l,s,c){var m=this.commandKeyBinding,h;if(!s)delete m[l];else if(!m[l]||this.$singleCommand)m[l]=s;else{Array.isArray(m[l])?(h=m[l].indexOf(s))!=-1&&m[l].splice(h,1):m[l]=[m[l]],typeof c!="number"&&(c=o(s));var v=m[l];for(h=0;h<v.length;h++){var k=v[h],x=o(k);if(x>c)break}v.splice(h,0,s)}},a.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(s){var c=l[s];if(c){if(typeof c=="string")return this.bindKey(c,s);typeof c=="function"&&(c={exec:c}),typeof c=="object"&&(c.name||(c.name=s),this.addCommand(c))}},this)},a.prototype.removeCommands=function(l){Object.keys(l).forEach(function(s){this.removeCommand(l[s])},this)},a.prototype.bindKeys=function(l){Object.keys(l).forEach(function(s){this.bindKey(s,l[s])},this)},a.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},a.prototype.parseKeys=function(l){var s=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x}),c=s.pop(),m=p[c];if(p.FUNCTION_KEYS[m])c=p.FUNCTION_KEYS[m].toLowerCase();else if(s.length){if(s.length==1&&s[0]=="shift")return{key:c.toUpperCase(),hashId:-1}}else return{key:c,hashId:-1};for(var h=0,v=s.length;v--;){var k=p.KEY_MODS[s[v]];if(k==null)return typeof console<"u"&&console.error("invalid modifier "+s[v]+" in "+l),!1;h|=k}return{key:c,hashId:h}},a.prototype.findKeyCommand=function(l,s){var c=n[l]+s;return this.commandKeyBinding[c]},a.prototype.handleKeyboard=function(l,s,c,m){if(!(m<0)){var h=n[s]+c,v=this.commandKeyBinding[h];return l.$keyChain&&(l.$keyChain+=" "+h,v=this.commandKeyBinding[l.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||h,{command:"null"}):(l.$keyChain&&((!s||s==4)&&c.length==1?l.$keyChain=l.$keyChain.slice(0,-h.length-1):(s==-1||m>0)&&(l.$keyChain="")),{command:v})}},a.prototype.getStatusText=function(l,s){return s.$keyChain||""},a}();function o(a){return typeof a=="object"&&a.bindKey&&a.bindKey.position||(a.isDefault?-100:0)}var i=function(a){d(l,a);function l(s,c){var m=a.call(this,s,c)||this;return m.$singleCommand=!0,m}return l}(u);i.call=function(a,l,s){u.prototype.$init.call(a,l,s,!0)},u.call=function(a,l,s){u.prototype.$init.call(a,l,s,!1)},t.HashHandler=i,t.MultiHashHandler=u});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var o=function(i,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(l[c]=s[c])},o(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(i,a);function l(){this.constructor=i}i.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),p=e("../lib/oop"),g=e("../keyboard/hash_handler").MultiHashHandler,n=e("../lib/event_emitter").EventEmitter,u=function(o){d(i,o);function i(a,l){var s=o.call(this,l,a)||this;return s.byName=s.commands,s.setDefaultHandler("exec",function(c){return c.args?c.command.exec(c.editor,c.args,c.event,!1):c.command.exec(c.editor,{},c.event,!0)}),s}return i.prototype.exec=function(a,l,s){if(Array.isArray(a)){for(var c=a.length;c--;)if(this.exec(a[c],l,s))return!0;return!1}if(typeof a=="string"&&(a=this.commands[a]),!this.canExecute(a,l))return!1;var m={editor:l,command:a,args:s};return m.returnValue=this._emit("exec",m),this._signal("afterExec",m),m.returnValue!==!1},i.prototype.canExecute=function(a,l){return typeof a=="string"&&(a=this.commands[a]),!(!a||l&&l.$readOnly&&!a.readOnly||this.$checkCommandState!=!1&&a.isAvailable&&!a.isAvailable(l))},i.prototype.toggleRecording=function(a){if(!this.$inReplay)return a&&a._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(a){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,a):this.exec(l[0],a,l[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(a){return a.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},i}(g);p.implement(u.prototype,n),t.CommandManager=u});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,r){"use strict";var d=e("../lib/lang"),p=e("../config"),g=e("../range").Range;function n(o,i){return{win:o,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:n("Ctrl-,","Command-,"),exec:function(o){p.loadModule("ace/ext/settings_menu",function(i){i.init(o),o.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:n("Alt-E","F4"),exec:function(o){p.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:n("Alt-Shift-E","Shift-F4"),exec:function(o){p.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:n("Ctrl-A","Command-A"),exec:function(o){o.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:n(null,"Ctrl-L"),exec:function(o){o.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:n("Ctrl-L","Command-L"),exec:function(o,i){typeof i=="number"&&!isNaN(i)&&o.gotoLine(i),o.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:n("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(o){o.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:n("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(o){o.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:n("F2","F2"),exec:function(o){o.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:n("Alt-F2","Alt-F2"),exec:function(o){o.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:n(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:n(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:n("Alt-0","Command-Option-0"),exec:function(o){o.session.foldAll(),o.session.unfold(o.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:n("Alt-Shift-0","Command-Option-Shift-0"),exec:function(o){o.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:n("Ctrl-K","Command-G"),exec:function(o){o.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:n("Ctrl-Shift-K","Command-Shift-G"),exec:function(o){o.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:n("Alt-K","Ctrl-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:n("Alt-Shift-K","Ctrl-Shift-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:n("Ctrl-F","Command-F"),exec:function(o){p.loadModule("ace/ext/searchbox",function(i){i.Search(o)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(o){o.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:n("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(o){o.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:n("Ctrl-Home","Command-Home|Command-Up"),exec:function(o){o.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:n("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(o){o.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:n("Up","Up|Ctrl-P"),exec:function(o,i){o.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:n("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(o){o.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:n("Ctrl-End","Command-End|Command-Down"),exec:function(o){o.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:n("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(o){o.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:n("Down","Down|Ctrl-N"),exec:function(o,i){o.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:n("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(o){o.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:n("Ctrl-Left","Option-Left"),exec:function(o){o.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:n("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:n("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(o){o.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:n("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(o){o.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:n("Left","Left|Ctrl-B"),exec:function(o,i){o.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:n("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(o){o.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:n("Ctrl-Right","Option-Right"),exec:function(o){o.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:n("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:n("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(o){o.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:n("Shift-Right","Shift-Right"),exec:function(o){o.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:n("Right","Right|Ctrl-F"),exec:function(o,i){o.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(o){o.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:n(null,"Option-PageDown"),exec:function(o){o.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:n("PageDown","PageDown|Ctrl-V"),exec:function(o){o.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(o){o.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:n(null,"Option-PageUp"),exec:function(o){o.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(o){o.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:n("Ctrl-Up",null),exec:function(o){o.renderer.scrollBy(0,-2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:n("Ctrl-Down",null),exec:function(o){o.renderer.scrollBy(0,2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:n("Ctrl-Alt-E","Command-Option-E"),exec:function(o){o.commands.toggleRecording(o)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:n("Ctrl-Shift-E","Command-Shift-E"),exec:function(o){o.commands.replay(o)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:n("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(o){o.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:n("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(o){o.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:n("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(o){o.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:n(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(o){},readOnly:!0},{name:"cut",description:"Cut",exec:function(o){var i=o.$copyWithEmptySelection&&o.selection.isEmpty(),a=i?o.selection.getLineRange():o.selection.getRange();o._emit("cut",a),a.isEmpty()||o.session.remove(a),o.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(o,i){o.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:n("Ctrl-D","Command-D"),exec:function(o){o.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:n("Ctrl-Shift-D","Command-Shift-D"),exec:function(o){o.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:n("Ctrl-Alt-S","Command-Alt-S"),exec:function(o){o.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:n("Ctrl-/","Command-/"),exec:function(o){o.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:n("Ctrl-Shift-/","Command-Shift-/"),exec:function(o){o.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:n("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(o){o.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:n("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(o){o.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:n("Ctrl-H","Command-Option-F"),exec:function(o){p.loadModule("ace/ext/searchbox",function(i){i.Search(o,!0)})}},{name:"undo",description:"Undo",bindKey:n("Ctrl-Z","Command-Z"),exec:function(o){o.undo()}},{name:"redo",description:"Redo",bindKey:n("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(o){o.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:n("Alt-Shift-Up","Command-Option-Up"),exec:function(o){o.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:n("Alt-Up","Option-Up"),exec:function(o){o.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:n("Alt-Shift-Down","Command-Option-Down"),exec:function(o){o.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:n("Alt-Down","Option-Down"),exec:function(o){o.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:n("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(o){o.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:n("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(o){o.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:n("Shift-Delete",null),exec:function(o){if(o.selection.isEmpty())o.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:n("Alt-Backspace","Command-Backspace"),exec:function(o){o.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:n("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(o){o.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:n("Ctrl-Shift-Backspace",null),exec:function(o){var i=o.selection.getRange();i.start.column=0,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:n("Ctrl-Shift-Delete",null),exec:function(o){var i=o.selection.getRange();i.end.column=Number.MAX_VALUE,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:n("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(o){o.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:n("Ctrl-Delete","Alt-Delete"),exec:function(o){o.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:n("Shift-Tab","Shift-Tab"),exec:function(o){o.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:n("Tab","Tab"),exec:function(o){o.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:n("Ctrl-[","Ctrl-["),exec:function(o){o.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:n("Ctrl-]","Ctrl-]"),exec:function(o){o.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(o,i){o.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(o,i){o.insert(d.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:n(null,"Ctrl-O"),exec:function(o){o.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:n("Alt-Shift-X","Ctrl-T"),exec:function(o){o.transposeLetters()},multiSelectAction:function(o){o.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:n("Ctrl-U","Ctrl-U"),exec:function(o){o.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:n("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(o){o.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:n(null,null),exec:function(o){o.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:n("Ctrl-Shift-L","Command-Shift-L"),exec:function(o){var i=o.selection.getRange();i.start.column=i.end.column=0,i.end.row++,o.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:n("Ctrl+F3","F3"),exec:function(o){o.openLink()}},{name:"joinlines",description:"Join lines",bindKey:n(null,null),exec:function(o){for(var i=o.selection.isBackwards(),a=i?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),l=i?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),s=o.session.doc.getLine(a.row).length,c=o.session.doc.getTextRange(o.selection.getRange()),m=c.replace(/\n\s*/," ").length,h=o.session.doc.getLine(a.row),v=a.row+1;v<=l.row+1;v++){var k=d.stringTrimLeft(d.stringTrimRight(o.session.doc.getLine(v)));k.length!==0&&(k=" "+k),h+=k}l.row+1<o.session.doc.getLength()-1&&(h+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new g(a.row,0,l.row+2,0),h),m>0?(o.selection.moveCursorTo(a.row,a.column),o.selection.selectTo(a.row,a.column+m)):(s=o.session.doc.getLine(a.row).length>s?s+1:s,o.selection.moveCursorTo(a.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:n(null,null),exec:function(o){var i=o.session.doc.getLength()-1,a=o.session.doc.getLine(i).length,l=o.selection.rangeList.ranges,s=[];l.length<1&&(l=[o.selection.getRange()]);for(var c=0;c<l.length;c++)c==l.length-1&&(l[c].end.row===i&&l[c].end.column===a||s.push(new g(l[c].end.row,l[c].end.column,i,a))),c===0?l[c].start.row===0&&l[c].start.column===0||s.push(new g(0,0,l[c].start.row,l[c].start.column)):s.push(new g(l[c-1].end.row,l[c-1].end.column,l[c].start.row,l[c].start.column));o.exitMultiSelectMode(),o.clearSelection();for(var c=0;c<s.length;c++)o.selection.addRange(s[c],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(o){o.selection.clearSelection(),o.navigateLineEnd(),o.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(o){o.selection.clearSelection();var i=o.getCursorPosition();o.selection.moveTo(i.row-1,Number.MAX_VALUE),o.insert(`
`),i.row===0&&o.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(o){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),o.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:n("F1","F1"),exec:function(o){o.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:n(null,null),exec:function(o){o.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)t.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(o){o.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("./lib/dom"),p=function(){function g(n){this.session=n,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return g.prototype.getRowLength=function(n){var u;return this.lineWidgets?u=this.lineWidgets[n]&&this.lineWidgets[n].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[n]?1+u:this.$wrapData[n].length+1+u},g.prototype.$getWidgetScreenLength=function(){var n=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(n+=u.rowCount)}),n},g.prototype.$onChangeEditor=function(n){this.attach(n.editor)},g.prototype.attach=function(n){n&&n.widgetManager&&n.widgetManager!=this&&n.widgetManager.detach(),this.editor!=n&&(this.detach(),this.editor=n,n&&(n.widgetManager=this,n.renderer.on("beforeRender",this.measureWidgets),n.renderer.on("afterRender",this.renderWidgets)))},g.prototype.detach=function(n){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var o=this.session.lineWidgets;o&&o.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},g.prototype.updateOnFold=function(n,u){var o=u.lineWidgets;if(!(!o||!n.action)){for(var i=n.data,a=i.start.row,l=i.end.row,s=n.action=="add",c=a+1;c<l;c++)o[c]&&(o[c].hidden=s);o[l]&&(s?o[a]?o[l].hidden=s:o[a]=o[l]:(o[a]==o[l]&&(o[a]=void 0),o[l].hidden=s))}},g.prototype.updateOnChange=function(n){var u=this.session.lineWidgets;if(u){var o=n.start.row,i=n.end.row-o;if(i!==0)if(n.action=="remove"){var a=u.splice(o+1,i);!u[o]&&a[a.length-1]&&(u[o]=a.pop()),a.forEach(function(s){s&&this.removeLineWidget(s)},this),this.$updateRows()}else{var l=new Array(i);u[o]&&u[o].column!=null&&n.start.column>u[o].column&&o++,l.unshift(o,0),u.splice.apply(u,l),this.$updateRows()}}},g.prototype.$updateRows=function(){var n=this.session.lineWidgets;if(n){var u=!0;n.forEach(function(o,i){if(o)for(u=!1,o.row=i;o.$oldWidget;)o.$oldWidget.row=i,o=o.$oldWidget}),u&&(this.session.lineWidgets=null)}},g.prototype.$registerLineWidget=function(n){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[n.row];return u&&(n.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[n.row]=n,n},g.prototype.addLineWidget=function(n){if(this.$registerLineWidget(n),n.session=this.session,!this.editor)return n;var u=this.editor.renderer;n.html&&!n.el&&(n.el=d.createElement("div"),n.el.innerHTML=n.html),n.text&&!n.el&&(n.el=d.createElement("div"),n.el.textContent=n.text),n.el&&(d.addCssClass(n.el,"ace_lineWidgetContainer"),n.className&&d.addCssClass(n.el,n.className),n.el.style.position="absolute",n.el.style.zIndex="5",u.container.appendChild(n.el),n._inDocument=!0,n.coverGutter||(n.el.style.zIndex="3"),n.pixelHeight==null&&(n.pixelHeight=n.el.offsetHeight)),n.rowCount==null&&(n.rowCount=n.pixelHeight/u.layerConfig.lineHeight);var o=this.session.getFoldAt(n.row,0);if(n.$fold=o,o){var i=this.session.lineWidgets;n.row==o.end.row&&!i[o.start.row]?i[o.start.row]=n:n.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:n.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(n),n},g.prototype.removeLineWidget=function(n){if(n._inDocument=!1,n.session=null,n.el&&n.el.parentNode&&n.el.parentNode.removeChild(n.el),n.editor&&n.editor.destroy)try{n.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[n.row];if(u==n)this.session.lineWidgets[n.row]=n.$oldWidget,n.$oldWidget&&this.onWidgetChanged(n.$oldWidget);else for(;u;){if(u.$oldWidget==n){u.$oldWidget=n.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:n.row}}}),this.$updateRows()},g.prototype.getWidgetsAtRow=function(n){for(var u=this.session.lineWidgets,o=u&&u[n],i=[];o;)i.push(o),o=o.$oldWidget;return i},g.prototype.onWidgetChanged=function(n){this.session._changedWidgets.push(n),this.editor&&this.editor.renderer.updateFull()},g.prototype.measureWidgets=function(n,u){var o=this.session._changedWidgets,i=u.layerConfig;if(!(!o||!o.length)){for(var a=1/0,l=0;l<o.length;l++){var s=o[l];if(!(!s||!s.el)&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,u.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var c=s.h/i.lineHeight;s.coverLine&&(c-=this.session.getRowLineCount(s.row),c<0&&(c=0)),s.rowCount!=c&&(s.rowCount=c,s.row<a&&(a=s.row))}}a!=1/0&&(this.session._emit("changeFold",{data:{start:{row:a}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},g.prototype.renderWidgets=function(n,u){var o=u.layerConfig,i=this.session.lineWidgets;if(i){for(var a=Math.min(this.firstRow,o.firstRow),l=Math.max(this.lastRow,o.lastRow,i.length);a>0&&!i[a];)a--;this.firstRow=o.firstRow,this.lastRow=o.lastRow,u.$cursorLayer.config=o;for(var s=a;s<=l;s++){var c=i[s];if(!(!c||!c.el)){if(c.hidden){c.el.style.top=-100-(c.pixelHeight||0)+"px";continue}c._inDocument||(c._inDocument=!0,u.container.appendChild(c.el));var m=u.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;c.coverLine||(m+=o.lineHeight*this.session.getRowLineCount(c.row)),c.el.style.top=m-o.offset+"px";var h=c.coverGutter?0:u.gutterWidth;c.fixedWidth||(h-=u.scrollLeft),c.el.style.left=h+"px",c.fullWidth&&c.screenWidth&&(c.el.style.minWidth=o.width+2*o.padding+"px"),c.fixedWidth?c.el.style.right=u.scrollBar.getWidth()+"px":c.el.style.right=""}}}},g}();t.LineWidgets=p});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,r){"use strict";var d=e("../lib/keys"),p=e("../mouse/default_gutter_handler").GutterTooltip,g=function(){function u(o){this.editor=o,this.gutterLayer=o.renderer.$gutterLayer,this.element=o.renderer.$gutter,this.lines=o.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new p(this.editor)}return u.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},u.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},u.prototype.$onGutterKeyDown=function(o){if(this.annotationTooltip.isOpen){o.preventDefault(),o.keyCode===d.escape&&this.annotationTooltip.hideTooltip();return}if(o.target===this.element){if(o.keyCode!=d.enter)return;o.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var a=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(a),s=this.$findNearestAnnotation(a);if(!(l===null&&s===null)){if(l===null&&s!==null){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&s===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(s-a)<Math.abs(l-a)){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(o),setTimeout(function(){this.editor._signal("gutterkeydown",new n(o,this))}.bind(this),10)},u.prototype.$handleGutterKeyboardInteraction=function(o){if(o.keyCode===d.tab){o.preventDefault();return}if(o.keyCode===d.escape){o.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(o.keyCode===d.up){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(o.keyCode===d.down){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(o.keyCode===d.left){o.preventDefault(),this.$switchLane("annotation");return}if(o.keyCode===d.right){o.preventDefault(),this.$switchLane("fold");return}if(o.keyCode===d.enter||o.keyCode===d.space){switch(o.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),o),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var a=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=a.getBoundingClientRect(),s=this.annotationTooltip.getElement().style;s.left=l.right+"px",s.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},u.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},u.prototype.$isFoldWidgetVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),a=this.$getFoldWidget(o).style.display!=="none";return i&&a},u.prototype.$isAnnotationVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),a=this.$getAnnotation(o).style.display!=="none";return i&&a},u.prototype.$getFoldWidget=function(o){var i=this.lines.get(o),a=i.element;return a.childNodes[1]},u.prototype.$getAnnotation=function(o){var i=this.lines.get(o),a=i.element;return a.childNodes[2]},u.prototype.$findNearestFoldWidget=function(o){if(this.$isFoldWidgetVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isFoldWidgetVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(o+i))return o+i}return null},u.prototype.$findNearestAnnotation=function(o){if(this.$isAnnotationVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isAnnotationVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(o+i))return o+i}return null},u.prototype.$focusFoldWidget=function(o){if(o!=null){var i=this.$getFoldWidget(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},u.prototype.$focusAnnotation=function(o){if(o!=null){var i=this.$getAnnotation(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},u.prototype.$blurFoldWidget=function(o){var i=this.$getFoldWidget(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},u.prototype.$blurAnnotation=function(o){var i=this.$getAnnotation(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},u.prototype.$moveFoldWidgetUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveFoldWidgetDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveAnnotationUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$moveAnnotationDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$switchLane=function(o){switch(o){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var a=this.$findNearestFoldWidget(this.activeRowIndex);if(a==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=a,this.$focusFoldWidget(this.activeRowIndex);break}},u.prototype.$rowIndexToRow=function(o){var i=this.lines.get(o);return i?i.row:null},u.prototype.$rowToRowIndex=function(o){for(var i=0;i<this.lines.getLength();i++){var a=this.lines.get(i);if(a.row==o)return i}return null},u}();t.GutterKeyboardHandler=g;var n=function(){function u(o,i){this.gutterKeyboardHandler=i,this.domEvent=o}return u.prototype.getKey=function(){return d.keyCodeToString(this.domEvent.keyCode)},u.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},u.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},u.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},u}();t.GutterKeyboardEvent=n});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var d=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,E=b&&y[b],_=0;if(E)return E.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&_>=y.length&&(y=void 0),{value:y&&y[_++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},p=e("./lib/oop"),g=e("./lib/dom"),n=e("./lib/lang"),u=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,a=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,s=e("./edit_session").EditSession,c=e("./search").Search,m=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,k=e("./commands/default_commands").commands,x=e("./config"),A=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,f=e("./keyboard/gutter_handler").GutterKeyboardHandler,L=e("./config").nls,$=e("./clipboard"),C=e("./lib/keys"),T=function(){function y(b,E,_){this.session,this.$toDestroy=[];var R=b.getContainerElement();this.container=R,this.renderer=b,this.id="editor"+ ++y.$uid,this.commands=new v(u.isMac?"mac":"win",k),typeof document=="object"&&(this.textInput=new o(b.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new a(this)),this.keyBinding=new l(this),this.$search=new c().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=n.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(M,I){I._$emitInputEvent.schedule(31)}),this.setSession(E||_&&_.session||new s("")),x.resetOptions(this),_&&this.setOptions(_),x._signal("editor",this)}return y.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=n.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},y.prototype.startOperation=function(b){if(this.curOp){if(!b||this.curOp.command)return;this.prevOp=this.curOp}b||(this.previousCommand=null,b={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:b.command||{},args:b.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},y.prototype.endOperation=function(b){if(this.curOp&&this.session){if(b&&b.returnValue===!1||!this.session)return this.curOp=null;if(b==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var E=this.curOp.command,_=E&&E.scrollIntoView;if(_){switch(_){case"center-animate":_="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),M=this.renderer.layerConfig;(R.start.row>=M.lastRow||R.end.row<=M.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}_=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},y.prototype.$historyTracker=function(b){if(this.$mergeUndoDeltas){var E=this.prevOp,_=this.$mergeableCommands,R=E.command&&b.command.name==E.command.name;if(b.command.name=="insertstring"){var M=b.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(M)||/\s/.test(E.args)),this.mergeNextCommand=!0}else R=R&&_.indexOf(b.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:_.indexOf(b.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},y.prototype.setKeyboardHandler=function(b,E){if(b&&typeof b=="string"&&b!="ace"){this.$keybindingId=b;var _=this;x.loadModule(["keybinding",b],function(R){_.$keybindingId==b&&_.keyBinding.setKeyboardHandler(R&&R.handler),E&&E()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(b),E&&E()},y.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},y.prototype.setSession=function(b){if(this.session!=b){this.curOp&&this.endOperation(),this.curOp={};var E=this.session;if(E){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var _=this.session.getSelection();_.off("changeCursor",this.$onCursorChange),_.off("changeSelection",this.$onSelectionChange)}this.session=b,b?(this.$onDocumentChange=this.onDocumentChange.bind(this),b.on("change",this.$onDocumentChange),this.renderer.setSession(b),this.$onChangeMode=this.onChangeMode.bind(this),b.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),b.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),b.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),b.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),b.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),b.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=b.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(b)),this._signal("changeSession",{session:b,oldSession:E}),this.curOp=null,E&&E._signal("changeEditor",{oldEditor:this}),b&&b._signal("changeEditor",{editor:this}),b&&!b.destroyed&&b.bgTokenizer.scheduleStart()}},y.prototype.getSession=function(){return this.session},y.prototype.setValue=function(b,E){return this.session.doc.setValue(b),E?E==1?this.navigateFileEnd():E==-1&&this.navigateFileStart():this.selectAll(),b},y.prototype.getValue=function(){return this.session.getValue()},y.prototype.getSelection=function(){return this.selection},y.prototype.resize=function(b){this.renderer.onResize(b)},y.prototype.setTheme=function(b,E){this.renderer.setTheme(b,E)},y.prototype.getTheme=function(){return this.renderer.getTheme()},y.prototype.setStyle=function(b){this.renderer.setStyle(b)},y.prototype.unsetStyle=function(b){this.renderer.unsetStyle(b)},y.prototype.getFontSize=function(){return this.getOption("fontSize")||g.computedStyle(this.container).fontSize},y.prototype.setFontSize=function(b){this.setOption("fontSize",b)},y.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var b=this;this.$highlightPending=!0,setTimeout(function(){b.$highlightPending=!1;var E=b.session;if(!(!E||E.destroyed)){E.$bracketHighlight&&(E.$bracketHighlight.markerIds.forEach(function(F){E.removeMarker(F)}),E.$bracketHighlight=null);var _=b.getCursorPosition(),R=b.getKeyboardHandler(),M=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(b),I=E.getMatchingBracketRanges(_,M);if(!I){var P=new A(E,_.row,_.column),O=P.getCurrentToken();if(O&&/\b(?:tag-open|tag-name)/.test(O.type)){var N=E.getMatchingTags(_);N&&(I=[N.openTagName.isEmpty()?N.openTag:N.openTagName,N.closeTagName.isEmpty()?N.closeTag:N.closeTagName])}}if(!I&&E.$mode.getMatching&&(I=E.$mode.getMatching(b.session)),!I){b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide();return}var D="ace_bracket";Array.isArray(I)?I.length==1&&(D="ace_error_bracket"):I=[I],I.length==2&&(m.comparePoints(I[0].end,I[1].start)==0?I=[m.fromPoints(I[0].start,I[1].end)]:m.comparePoints(I[0].start,I[1].end)==0&&(I=[m.fromPoints(I[1].start,I[0].end)])),E.$bracketHighlight={ranges:I,markerIds:I.map(function(F){return E.addMarker(F,D,"text")})},b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide()}},50)}},y.prototype.focus=function(){this.textInput.focus()},y.prototype.isFocused=function(){return this.textInput.isFocused()},y.prototype.blur=function(){this.textInput.blur()},y.prototype.onFocus=function(b){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",b))},y.prototype.onBlur=function(b){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",b))},y.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},y.prototype.onDocumentChange=function(b){var E=this.session.$useWrapMode,_=b.start.row==b.end.row?b.end.row:1/0;this.renderer.updateLines(b.start.row,_,E),this._signal("change",b),this.$cursorChange()},y.prototype.onTokenizerUpdate=function(b){var E=b.data;this.renderer.updateLines(E.first,E.last)},y.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},y.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},y.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},y.prototype.$updateHighlightActiveLine=function(){var b=this.getSession(),E;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(E=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(E=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(E=!1)),b.$highlightLineMarker&&!E)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&E){var _=new m(E.row,E.column,E.row,1/0);_.id=b.addMarker(_,"ace_active-line","screenLine"),b.$highlightLineMarker=_}else E&&(b.$highlightLineMarker.start.row=E.row,b.$highlightLineMarker.end.row=E.row,b.$highlightLineMarker.start.column=E.column,b._signal("changeBackMarker"))},y.prototype.onSelectionChange=function(b){var E=this.session;if(E.$selectionMarker&&E.removeMarker(E.$selectionMarker),E.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var _=this.selection.getRange(),R=this.getSelectionStyle();E.$selectionMarker=E.addMarker(_,"ace_selection",R)}var M=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(M),this._signal("changeSelection")},y.prototype.$getSelectionHighLightRegexp=function(){var b=this.session,E=this.getSelectionRange();if(!(E.isEmpty()||E.isMultiLine())){var _=E.start.column,R=E.end.column,M=b.getLine(E.start.row),I=M.substring(_,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var P=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),O=M.substring(_-1,R+1);if(P.test(O))return P}}},y.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},y.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},y.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},y.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},y.prototype.onChangeMode=function(b){this.renderer.updateText(),this._emit("changeMode",b)},y.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},y.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},y.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},y.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},y.prototype.getCopyText=function(){var b=this.getSelectedText(),E=this.session.doc.getNewLineCharacter(),_=!1;if(!b&&this.$copyWithEmptySelection){_=!0;for(var R=this.selection.getAllRanges(),M=0;M<R.length;M++){var I=R[M];M&&R[M-1].start.row==I.start.row||(b+=this.session.getLine(I.start.row)+E)}}var P={text:b};return this._signal("copy",P),$.lineMode=_?P.text:!1,P.text},y.prototype.onCopy=function(){this.commands.exec("copy",this)},y.prototype.onCut=function(){this.commands.exec("cut",this)},y.prototype.onPaste=function(b,E){var _={text:b,event:E};this.commands.exec("paste",this,_)},y.prototype.$handlePaste=function(b){typeof b=="string"&&(b={text:b}),this._signal("paste",b);var E=b.text,_=E===$.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)_?R.insert({row:this.selection.lead.row,column:0},E):this.insert(E);else if(_)this.selection.rangeList.ranges.forEach(function(D){R.insert({row:D.start.row,column:0},E)});else{var M=E.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,P=M.length==2&&(!M[0]||!M[1]);if(M.length!=I.length||P)return this.commands.exec("insertstring",this,E);for(var O=I.length;O--;){var N=I[O];N.isEmpty()||R.remove(N),R.insert(N.start,M[O])}}},y.prototype.execCommand=function(b,E){return this.commands.exec(b,this,E)},y.prototype.insert=function(b,E){var _=this.session,R=_.getMode(),M=this.getCursorPosition();if(this.getBehavioursEnabled()&&!E){var I=R.transformAction(_.getState(M.row),"insertion",this,_,b);I&&(b!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),b=I.text)}if(b=="	"&&(b=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&b.indexOf(`
`)==-1){var P=m.fromPoints(M,M);P.end.column+=b.length,this.session.remove(P)}}else{var P=this.getSelectionRange();M=this.session.remove(P),this.clearSelection()}if(b==`
`||b==`\r
`){var F=_.getLine(M.row);if(M.column>F.search(/\S|$/)){var O=F.substr(M.column).search(/\S|$/);_.doc.removeInLine(M.row,M.column,M.column+O)}}this.clearSelection();var N=M.column,D=_.getState(M.row),F=_.getLine(M.row),z=R.checkOutdent(D,F,b);if(_.insert(M,b),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new m(M.row,N+I.selection[0],M.row,N+I.selection[1])):this.selection.setSelectionRange(new m(M.row+I.selection[0],I.selection[1],M.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(_.getDocument().isNewLine(b)){var W=R.getNextLineIndent(D,F.slice(0,M.column),_.getTabString());_.insert({row:M.row+1,column:0},W)}z&&R.autoOutdent(D,_,M.row)}},y.prototype.autoIndent=function(){for(var b=this.session,E=b.getMode(),_=this.selection.isEmpty()?[new m(0,0,b.doc.getLength()-1,0)]:this.selection.getAllRanges(),R="",M="",I="",P=b.getTabString(),O=0;O<_.length;O++)for(var N=_[O].start.row,D=_[O].end.row,F=N;F<=D;F++){F>0&&(R=b.getState(F-1),M=b.getLine(F-1),I=E.getNextLineIndent(R,M,P));var z=b.getLine(F),W=E.$getIndent(z);if(I!==W){if(W.length>0){var j=new m(F,0,F,W.length);b.remove(j)}I.length>0&&b.insert({row:F,column:0},I)}E.autoOutdent(R,b,F)}},y.prototype.onTextInput=function(b,E){if(!E)return this.keyBinding.onTextInput(b);this.startOperation({command:{name:"insertstring"}});var _=this.applyComposition.bind(this,b,E);this.selection.rangeCount?this.forEachSelection(_):_(),this.endOperation()},y.prototype.applyComposition=function(b,E){if(E.extendLeft||E.extendRight){var _=this.selection.getRange();_.start.column-=E.extendLeft,_.end.column+=E.extendRight,_.start.column<0&&(_.start.row--,_.start.column+=this.session.getLine(_.start.row).length+1),this.selection.setRange(_),!b&&!_.isEmpty()&&this.remove()}if((b||!this.selection.isEmpty())&&this.insert(b,!0),E.restoreStart||E.restoreEnd){var _=this.selection.getRange();_.start.column-=E.restoreStart,_.end.column-=E.restoreEnd,this.selection.setRange(_)}},y.prototype.onCommandKey=function(b,E,_){return this.keyBinding.onCommandKey(b,E,_)},y.prototype.setOverwrite=function(b){this.session.setOverwrite(b)},y.prototype.getOverwrite=function(){return this.session.getOverwrite()},y.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},y.prototype.setScrollSpeed=function(b){this.setOption("scrollSpeed",b)},y.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},y.prototype.setDragDelay=function(b){this.setOption("dragDelay",b)},y.prototype.getDragDelay=function(){return this.getOption("dragDelay")},y.prototype.setSelectionStyle=function(b){this.setOption("selectionStyle",b)},y.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},y.prototype.setHighlightActiveLine=function(b){this.setOption("highlightActiveLine",b)},y.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},y.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},y.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},y.prototype.setHighlightSelectedWord=function(b){this.setOption("highlightSelectedWord",b)},y.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},y.prototype.setAnimatedScroll=function(b){this.renderer.setAnimatedScroll(b)},y.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},y.prototype.setShowInvisibles=function(b){this.renderer.setShowInvisibles(b)},y.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},y.prototype.setDisplayIndentGuides=function(b){this.renderer.setDisplayIndentGuides(b)},y.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},y.prototype.setHighlightIndentGuides=function(b){this.renderer.setHighlightIndentGuides(b)},y.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},y.prototype.setShowPrintMargin=function(b){this.renderer.setShowPrintMargin(b)},y.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},y.prototype.setPrintMarginColumn=function(b){this.renderer.setPrintMarginColumn(b)},y.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},y.prototype.setReadOnly=function(b){this.setOption("readOnly",b)},y.prototype.getReadOnly=function(){return this.getOption("readOnly")},y.prototype.setBehavioursEnabled=function(b){this.setOption("behavioursEnabled",b)},y.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},y.prototype.setWrapBehavioursEnabled=function(b){this.setOption("wrapBehavioursEnabled",b)},y.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},y.prototype.setShowFoldWidgets=function(b){this.setOption("showFoldWidgets",b)},y.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},y.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},y.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},y.prototype.remove=function(b){this.selection.isEmpty()&&(b=="left"?this.selection.selectLeft():this.selection.selectRight());var E=this.getSelectionRange();if(this.getBehavioursEnabled()){var _=this.session,R=_.getState(E.start.row),M=_.getMode().transformAction(R,"deletion",this,_,E);if(E.end.column===0){var I=_.getTextRange(E);if(I[I.length-1]==`
`){var P=_.getLine(E.end.row);/^\s+$/.test(P)&&(E.end.column=P.length)}}M&&(E=M)}this.session.remove(E),this.clearSelection()},y.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var b=this.getSelectionRange();b.start.column==b.end.column&&b.start.row==b.end.row&&(b.end.column=0,b.end.row++),this.session.remove(b),this.clearSelection()},y.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var b=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(b)},y.prototype.setGhostText=function(b,E){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(b,E)},y.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},y.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var b=this.getCursorPosition(),E=b.column;if(E!==0){var _=this.session.getLine(b.row),R,M;E<_.length?(R=_.charAt(E)+_.charAt(E-1),M=new m(b.row,E-1,b.row,E+1)):(R=_.charAt(E-1)+_.charAt(E-2),M=new m(b.row,E-2,b.row,E)),this.session.replace(M,R),this.session.selection.moveToPosition(M.end)}}},y.prototype.toLowerCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var E=this.getSelectionRange(),_=this.session.getTextRange(E);this.session.replace(E,_.toLowerCase()),this.selection.setSelectionRange(b)},y.prototype.toUpperCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var E=this.getSelectionRange(),_=this.session.getTextRange(E);this.session.replace(E,_.toUpperCase()),this.selection.setSelectionRange(b)},y.prototype.indent=function(){var b=this.session,E=this.getSelectionRange();if(E.start.row<E.end.row){var _=this.$getSelectedRows();b.indentRows(_.first,_.last,"	");return}else if(E.start.column<E.end.column){var R=b.getTextRange(E);if(!/^\s+$/.test(R)){var _=this.$getSelectedRows();b.indentRows(_.first,_.last,"	");return}}var M=b.getLine(E.start.row),I=E.start,P=b.getTabSize(),O=b.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var N=P-O%P,D=n.stringRepeat(" ",N);else{for(var N=O%P;M[E.start.column-1]==" "&&N;)E.start.column--,N--;this.selection.setSelectionRange(E),D="	"}return this.insert(D)},y.prototype.blockIndent=function(){var b=this.$getSelectedRows();this.session.indentRows(b.first,b.last,"	")},y.prototype.blockOutdent=function(){var b=this.session.getSelection();this.session.outdentRows(b.getRange())},y.prototype.sortLines=function(){for(var b=this.$getSelectedRows(),E=this.session,_=[],R=b.first;R<=b.last;R++)_.push(E.getLine(R));_.sort(function(P,O){return P.toLowerCase()<O.toLowerCase()?-1:P.toLowerCase()>O.toLowerCase()?1:0});for(var M=new m(0,0,0,0),R=b.first;R<=b.last;R++){var I=E.getLine(R);M.start.row=R,M.end.row=R,M.end.column=I.length,E.replace(M,_[R-b.first])}},y.prototype.toggleCommentLines=function(){var b=this.session.getState(this.getCursorPosition().row),E=this.$getSelectedRows();this.session.getMode().toggleCommentLines(b,this.session,E.first,E.last)},y.prototype.toggleBlockComment=function(){var b=this.getCursorPosition(),E=this.session.getState(b.row),_=this.getSelectionRange();this.session.getMode().toggleBlockComment(E,this.session,_,b)},y.prototype.getNumberAt=function(b,E){var _=/[\-]?[0-9]+(?:\.[0-9]+)?/g;_.lastIndex=0;for(var R=this.session.getLine(b);_.lastIndex<E;){var M=_.exec(R);if(M.index<=E&&M.index+M[0].length>=E){var I={value:M[0],start:M.index,end:M.index+M[0].length};return I}}return null},y.prototype.modifyNumber=function(b){var E=this.selection.getCursor().row,_=this.selection.getCursor().column,R=new m(E,_-1,E,_),M=this.session.getTextRange(R);if(!isNaN(parseFloat(M))&&isFinite(M)){var I=this.getNumberAt(E,_);if(I){var P=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,O=I.start+I.value.length-P,N=parseFloat(I.value);N*=Math.pow(10,O),P!==I.end&&_<P?b*=Math.pow(10,I.end-_-1):b*=Math.pow(10,I.end-_),N+=b,N/=Math.pow(10,O);var D=N.toFixed(O),F=new m(E,I.start,E,I.end);this.session.replace(F,D),this.moveCursorTo(E,Math.max(I.start+1,_+D.length-I.value.length))}}else this.toggleWord()},y.prototype.toggleWord=function(){var b=this.selection.getCursor().row,E=this.selection.getCursor().column;this.selection.selectWord();var _=this.getSelectedText(),R=this.selection.getWordRange().start.column,M=_.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=E-R-1;I<0&&(I=0);var P=0,O=0,N=this;_.match(/[A-Za-z0-9_]+/)&&M.forEach(function(nt,ot){O=P+nt.length,I>=P&&I<=O&&(_=nt,N.selection.clearSelection(),N.moveCursorTo(b,P+R),N.selection.selectTo(b,O+R)),P=O});for(var D=this.$toggleWordPairs,F,z=0;z<D.length;z++)for(var W=D[z],j=0;j<=1;j++){var Z=+!j,Y=_.match(new RegExp("^\\s?_?("+n.escapeRegExp(W[j])+")\\s?$","i"));if(Y){var q=_.match(new RegExp("([_]|^|\\s)("+n.escapeRegExp(Y[1])+")($|\\s)","g"));q&&(F=_.replace(new RegExp(n.escapeRegExp(W[j]),"i"),function(nt){var ot=W[Z];return nt.toUpperCase()==nt?ot=ot.toUpperCase():nt.charAt(0).toUpperCase()==nt.charAt(0)&&(ot=ot.substr(0,0)+W[Z].charAt(0).toUpperCase()+ot.substr(1)),ot}),this.insert(F),F="")}}},y.prototype.findLinkAt=function(b,E){var _,R,M=this.session.getLine(b),I=M.split(/((?:https?|ftp):\/\/[\S]+)/),P=E;P<0&&(P=0);var O=0,N=0,D;try{for(var F=d(I),z=F.next();!z.done;z=F.next()){var W=z.value;if(N=O+W.length,P>=O&&P<=N&&W.match(/((?:https?|ftp):\/\/[\S]+)/)){D=W.replace(/[\s:.,'";}\]]+$/,"");break}O=N}}catch(j){_={error:j}}finally{try{z&&!z.done&&(R=F.return)&&R.call(F)}finally{if(_)throw _.error}}return D},y.prototype.openLink=function(){var b=this.selection.getCursor(),E=this.findLinkAt(b.row,b.column);return E&&window.open(E,"_blank"),E!=null},y.prototype.removeLines=function(){var b=this.$getSelectedRows();this.session.removeFullLines(b.first,b.last),this.clearSelection()},y.prototype.duplicateSelection=function(){var b=this.selection,E=this.session,_=b.getRange(),R=b.isBackwards();if(_.isEmpty()){var M=_.start.row;E.duplicateLines(M,M)}else{var I=R?_.start:_.end,P=E.insert(I,E.getTextRange(_));_.start=I,_.end=P,b.setSelectionRange(_,R)}},y.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},y.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},y.prototype.moveText=function(b,E,_){return this.session.moveText(b,E,_)},y.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},y.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},y.prototype.$moveLines=function(b,E){var _,R,M=this.selection;if(!M.inMultiSelectMode||this.inVirtualSelectionMode){var I=M.toOrientedRange();_=this.$getSelectedRows(I),R=this.session.$moveLines(_.first,_.last,E?0:b),E&&b==-1&&(R=0),I.moveBy(R,0),M.fromOrientedRange(I)}else{var P=M.rangeList.ranges;M.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var O=0,N=0,D=P.length,F=0;F<D;F++){var z=F;P[F].moveBy(O,0),_=this.$getSelectedRows(P[F]);for(var W=_.first,j=_.last;++F<D;){N&&P[F].moveBy(N,0);var Z=this.$getSelectedRows(P[F]);if(E&&Z.first!=j)break;if(!E&&Z.first>j+1)break;j=Z.last}for(F--,O=this.session.$moveLines(W,j,E?0:b),E&&b==-1&&(z=F+1);z<=F;)P[z].moveBy(O,0),z++;E||(O=0),N+=O}M.fromOrientedRange(M.ranges[0]),M.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},y.prototype.$getSelectedRows=function(b){return b=(b||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(b.start.row),last:this.session.getRowFoldEnd(b.end.row)}},y.prototype.onCompositionStart=function(b){this.renderer.showComposition(b)},y.prototype.onCompositionUpdate=function(b){this.renderer.setCompositionText(b)},y.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},y.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},y.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},y.prototype.isRowVisible=function(b){return b>=this.getFirstVisibleRow()&&b<=this.getLastVisibleRow()},y.prototype.isRowFullyVisible=function(b){return b>=this.renderer.getFirstFullyVisibleRow()&&b<=this.renderer.getLastFullyVisibleRow()},y.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},y.prototype.$moveByPage=function(b,E){var _=this.renderer,R=this.renderer.layerConfig,M=b*Math.floor(R.height/R.lineHeight);E===!0?this.selection.$moveSelection(function(){this.moveCursorBy(M,0)}):E===!1&&(this.selection.moveCursorBy(M,0),this.selection.clearSelection());var I=_.scrollTop;_.scrollBy(0,M*R.lineHeight),E!=null&&_.scrollCursorIntoView(null,.5),_.animateScrolling(I)},y.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},y.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},y.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},y.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},y.prototype.scrollPageDown=function(){this.$moveByPage(1)},y.prototype.scrollPageUp=function(){this.$moveByPage(-1)},y.prototype.scrollToRow=function(b){this.renderer.scrollToRow(b)},y.prototype.scrollToLine=function(b,E,_,R){this.renderer.scrollToLine(b,E,_,R)},y.prototype.centerSelection=function(){var b=this.getSelectionRange(),E={row:Math.floor(b.start.row+(b.end.row-b.start.row)/2),column:Math.floor(b.start.column+(b.end.column-b.start.column)/2)};this.renderer.alignCursor(E,.5)},y.prototype.getCursorPosition=function(){return this.selection.getCursor()},y.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},y.prototype.getSelectionRange=function(){return this.selection.getRange()},y.prototype.selectAll=function(){this.selection.selectAll()},y.prototype.clearSelection=function(){this.selection.clearSelection()},y.prototype.moveCursorTo=function(b,E){this.selection.moveCursorTo(b,E)},y.prototype.moveCursorToPosition=function(b){this.selection.moveCursorToPosition(b)},y.prototype.jumpToMatching=function(b,E){var _=this.getCursorPosition(),R=new A(this.session,_.row,_.column),M=R.getCurrentToken(),I=0;M&&M.type.indexOf("tag-name")!==-1&&(M=R.stepBackward());var P=M||R.stepForward();if(P){var O,N=!1,D={},F=_.column-P.start,z,W={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(P.value.match(/[{}()\[\]]/g)){for(;F<P.value.length&&!N;F++)if(W[P.value[F]])switch(z=W[P.value[F]]+"."+P.type.replace("rparen","lparen"),isNaN(D[z])&&(D[z]=0),P.value[F]){case"(":case"[":case"{":D[z]++;break;case")":case"]":case"}":D[z]--,D[z]===-1&&(O="bracket",N=!0);break}}else P.type.indexOf("tag-name")!==-1&&(isNaN(D[P.value])&&(D[P.value]=0),M.value==="<"&&I>1?D[P.value]++:M.value==="</"&&D[P.value]--,D[P.value]===-1&&(O="tag",N=!0));N||(M=P,I++,P=R.stepForward(),F=0)}while(P&&!N);if(O){var j,Z;if(O==="bracket")j=this.session.getBracketRange(_),j||(j=new m(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+F-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+F-1),Z=j.start,(E||Z.row===_.row&&Math.abs(Z.column-_.column)<2)&&(j=this.session.getBracketRange(Z)));else if(O==="tag"){if(!P||P.type.indexOf("tag-name")===-1)return;if(j=new m(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),j.compare(_.row,_.column)===0){var Y=this.session.getMatchingTags(_);Y&&(Y.openTag.contains(_.row,_.column)?(j=Y.closeTag,Z=j.start):(j=Y.openTag,Y.closeTag.start.row===_.row&&Y.closeTag.start.column===_.column?Z=j.end:Z=j.start))}Z=Z||j.start}Z=j&&j.cursor||Z,Z&&(b?j&&E?this.selection.setRange(j):j&&j.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Z.row,Z.column):this.selection.moveTo(Z.row,Z.column))}}},y.prototype.gotoLine=function(b,E,_){this.selection.clearSelection(),this.session.unfold({row:b-1,column:E||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(b-1,E||0),this.isRowFullyVisible(b-1)||this.scrollToLine(b-1,!0,_)},y.prototype.navigateTo=function(b,E){this.selection.moveTo(b,E)},y.prototype.navigateUp=function(b){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var E=this.selection.anchor.getPosition();return this.moveCursorToPosition(E)}this.selection.clearSelection(),this.selection.moveCursorBy(-b||-1,0)},y.prototype.navigateDown=function(b){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var E=this.selection.anchor.getPosition();return this.moveCursorToPosition(E)}this.selection.clearSelection(),this.selection.moveCursorBy(b||1,0)},y.prototype.navigateLeft=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorLeft();else{var E=this.getSelectionRange().start;this.moveCursorToPosition(E)}this.clearSelection()},y.prototype.navigateRight=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorRight();else{var E=this.getSelectionRange().end;this.moveCursorToPosition(E)}this.clearSelection()},y.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},y.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},y.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},y.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},y.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},y.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},y.prototype.replace=function(b,E){E&&this.$search.set(E);var _=this.$search.find(this.session),R=0;return _&&(this.$tryReplace(_,b)&&(R=1),this.selection.setSelectionRange(_),this.renderer.scrollSelectionIntoView(_.start,_.end)),R},y.prototype.replaceAll=function(b,E){E&&this.$search.set(E);var _=this.$search.findAll(this.session),R=0;if(!_.length)return R;var M=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=_.length-1;I>=0;--I)this.$tryReplace(_[I],b)&&R++;return this.selection.setSelectionRange(M),R},y.prototype.$tryReplace=function(b,E){var _=this.session.getTextRange(b);return E=this.$search.replace(_,E),E!==null?(b.end=this.session.replace(b,E),b):null},y.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},y.prototype.find=function(b,E,_){E||(E={}),typeof b=="string"||b instanceof RegExp?E.needle=b:typeof b=="object"&&p.mixin(E,b);var R=this.selection.getRange();E.needle==null&&(b=this.session.getTextRange(R)||this.$search.$options.needle,b||(R=this.session.getWordRange(R.start.row,R.start.column),b=this.session.getTextRange(R)),this.$search.set({needle:b})),this.$search.set(E),E.start||this.$search.set({start:R});var M=this.$search.find(this.session);if(E.preventScroll)return M;if(M)return this.revealRange(M,_),M;E.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},y.prototype.findNext=function(b,E){this.find({skipCurrent:!0,backwards:!1},b,E)},y.prototype.findPrevious=function(b,E){this.find(b,{skipCurrent:!0,backwards:!0},E)},y.prototype.revealRange=function(b,E){this.session.unfold(b),this.selection.setSelectionRange(b);var _=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(b.start,b.end,.5),E!==!1&&this.renderer.animateScrolling(_)},y.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(b){b.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},y.prototype.setAutoScrollEditorIntoView=function(b){if(b){var E,_=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var M=this.$scrollAnchor;M.style.cssText="position:absolute",this.container.insertBefore(M,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),P=this.renderer.on("beforeRender",function(){R&&(E=_.renderer.container.getBoundingClientRect())}),O=this.renderer.on("afterRender",function(){if(R&&E&&(_.isFocused()||_.searchBox&&_.searchBox.isFocused())){var N=_.renderer,D=N.$cursorLayer.$pixelPos,F=N.layerConfig,z=D.top-F.offset;D.top>=0&&z+E.top<0?R=!0:D.top<F.height&&D.top+E.top+F.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(M.style.top=z+"px",M.style.left=D.left+"px",M.style.height=F.lineHeight+"px",M.scrollIntoView(R)),R=E=null}});this.setAutoScrollEditorIntoView=function(N){N||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",O),this.renderer.off("beforeRender",P))}}},y.prototype.$resetCursorStyle=function(){var b=this.$cursorStyle||"ace",E=this.renderer.$cursorLayer;E&&(E.setSmoothBlinking(/smooth/.test(b)),E.isBlinking=!this.$readOnly&&b!="wide",g.setCssClass(E.element,"ace_slim-cursors",/slim/.test(b)))},y.prototype.prompt=function(b,E,_){var R=this;x.loadModule("ace/ext/prompt",function(M){M.prompt(R,b,E,_)})},y}();T.$uid=0,T.prototype.curOp=null,T.prototype.prevOp={},T.prototype.$mergeableCommands=["backspace","del","insertstring"],T.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],p.implement(T.prototype,h),x.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(y){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:y})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(y){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(y){this.textInput.setReadOnly(y),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(y){this.textInput.setCopyWithEmptySelection(y)},initialValue:!1},cursorStyle:{set:function(y){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(y){this.setAutoScrollEditorIntoView(y)}},keyboardHandler:{set:function(y){this.setKeyboardHandler(y)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(y){this.session.setValue(y)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(y){this.setSession(y)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(y){this.renderer.$gutterLayer.setShowLineNumbers(y),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),y&&this.$relativeLineNumbers?w.attach(this):w.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(y){this.$showLineNumbers&&y?w.attach(this):w.detach(this)}},placeholder:{set:function(y){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var b=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(b&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),g.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!b&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),g.addCssClass(this.container,"ace_hasPlaceholder");var E=g.createElement("div");E.className="ace_placeholder",E.textContent=this.$placeholder||"",this.renderer.placeholderNode=E,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!b&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(y){var b={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},E=function(R){if(R.target==this.renderer.scroller&&R.keyCode===C.enter){R.preventDefault();var M=this.getCursorPosition().row;this.isRowVisible(M)||this.scrollToLine(M,!0,!0),this.focus()}},_;y?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(u.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",L("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",L("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",E.bind(this)),this.commands.addCommand(b),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",L("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",L("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),_||(_=new f(this)),_.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",E.bind(this)),this.commands.removeCommand(b),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),_&&_.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(y){this.$textInputAriaLabel=y},initialValue:""},enableMobileMenu:{set:function(y){this.$enableMobileMenu=y},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var w={getText:function(y,b){return(Math.abs(y.selection.lead.row-b)||b+1+(b<9?"\xB7":""))+""},getWidth:function(y,b,E){return Math.max(b.toString().length,(E.lastRow+1).toString().length,2)*E.characterWidth},update:function(y,b){b.renderer.$loop.schedule(b.renderer.CHANGE_GUTTER)},attach:function(y){y.renderer.$gutterLayer.$renderer=this,y.on("changeSelection",this.update),this.update(null,y)},detach:function(y){y.renderer.$gutterLayer.$renderer==this&&(y.renderer.$gutterLayer.$renderer=null),y.off("changeSelection",this.update),this.update(null,y)}};t.Editor=T});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../lib/dom"),p=function(){function g(n,u){this.element=n,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return g.prototype.moveContainer=function(n){d.translate(this.element,0,-(n.firstRowScreen*n.lineHeight%this.canvasHeight)-n.offset*this.$offsetCoefficient)},g.prototype.pageChanged=function(n,u){return Math.floor(n.firstRowScreen*n.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},g.prototype.computeLineTop=function(n,u,o){var i=u.firstRowScreen*u.lineHeight,a=Math.floor(i/this.canvasHeight),l=o.documentToScreenRow(n,0)*u.lineHeight;return l-a*this.canvasHeight},g.prototype.computeLineHeight=function(n,u,o){return u.lineHeight*o.getRowLineCount(n)},g.prototype.getLength=function(){return this.cells.length},g.prototype.get=function(n){return this.cells[n]},g.prototype.shift=function(){this.$cacheCell(this.cells.shift())},g.prototype.pop=function(){this.$cacheCell(this.cells.pop())},g.prototype.push=function(n){if(Array.isArray(n)){this.cells.push.apply(this.cells,n);for(var u=d.createFragment(this.element),o=0;o<n.length;o++)u.appendChild(n[o].element);this.element.appendChild(u)}else this.cells.push(n),this.element.appendChild(n.element)},g.prototype.unshift=function(n){if(Array.isArray(n)){this.cells.unshift.apply(this.cells,n);for(var u=d.createFragment(this.element),o=0;o<n.length;o++)u.appendChild(n[o].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(n),this.element.insertAdjacentElement("afterbegin",n.element)},g.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},g.prototype.$cacheCell=function(n){n&&(n.element.remove(),this.cellCache.push(n))},g.prototype.createCell=function(n,u,o,i){var a=this.cellCache.pop();if(!a){var l=d.createElement("div");i&&i(l),this.element.appendChild(l),a={element:l,text:"",row:n}}return a.row=n,a},g}();t.Lines=p});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,r){"use strict";var d=e("../lib/dom"),p=e("../lib/oop"),g=e("../lib/lang"),n=e("../lib/event_emitter").EventEmitter,u=e("./lines").Lines,o=e("../config").nls,i=function(){function l(s){this.element=d.createElement("div"),this.element.className="ace_layer ace_gutter-layer",s.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(s){this.session&&this.session.off("change",this.$updateAnnotations),this.session=s,s&&s.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(s,c){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(s,c)},l.prototype.removeGutterDecoration=function(s,c){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(s,c)},l.prototype.setAnnotations=function(s){this.$annotations=[];for(var c=0;c<s.length;c++){var m=s[c],h=m.row,v=this.$annotations[h];v||(v=this.$annotations[h]={text:[],type:[],displayText:[]});var k=m.text,x=m.text,A=m.type;k=k?g.escapeHTML(k):m.html||"",x=x||m.html||"",v.text.indexOf(k)===-1&&(v.text.push(k),v.type.push(A),v.displayText.push(x));var S=m.className;S?v.className=S:A=="error"?v.className=" ace_error":A=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":A=="info"&&!v.className&&(v.className=" ace_info")}},l.prototype.$updateAnnotations=function(s){if(this.$annotations.length){var c=s.start.row,m=s.end.row-c;if(m!==0)if(s.action=="remove")this.$annotations.splice(c,m+1,null);else{var h=new Array(m+1);h.unshift(c,1),this.$annotations.splice.apply(this.$annotations,h)}}},l.prototype.update=function(s){this.config=s;var c=this.session,m=s.firstRow,h=Math.min(s.lastRow+s.gutterOffset,c.getLength()-1);this.oldLastRow=h,this.config=s,this.$lines.moveContainer(s),this.$updateCursorRow();for(var v=c.getNextFoldLine(m),k=v?v.start.row:1/0,x=null,A=-1,S=m;;){if(S>k&&(S=v.end.row+1,v=c.getNextFoldLine(S,v),k=v?v.start.row:1/0),S>h){for(;this.$lines.getLength()>A+1;)this.$lines.pop();break}x=this.$lines.get(++A),x?x.row=S:(x=this.$lines.createCell(S,s,this.session,a),this.$lines.push(x)),this.$renderCell(x,s,v,S),S++}this._signal("afterRender"),this.$updateGutterWidth(s)},l.prototype.$updateGutterWidth=function(s){var c=this.session,m=c.gutterRenderer||this.$renderer,h=c.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||c.$useWrapMode)&&(v=c.getLength()+h-1);var k=m?m.getWidth(c,v,s):v.toString().length*s.characterWidth,x=this.$padding||this.$computePadding();k+=x.left+x.right,k!==this.gutterWidth&&!isNaN(k)&&(this.gutterWidth=k,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",k))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var s=this.session.selection.getCursor();this.$cursorRow!==s.row&&(this.$cursorRow=s.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var s=this.session.selection.cursor.row;if(this.$cursorRow=s,!(this.$cursorCell&&this.$cursorCell.row==s)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var c=this.$lines.cells;this.$cursorCell=null;for(var m=0;m<c.length;m++){var h=c[m];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(m>0&&v&&v.start.row==c[m-1].row)h=c[m-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},l.prototype.scrollLines=function(s){var c=this.config;if(this.config=s,this.$updateCursorRow(),this.$lines.pageChanged(c,s))return this.update(s);this.$lines.moveContainer(s);var m=Math.min(s.lastRow+s.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=m,!c||h<s.firstRow)return this.update(s);if(m<c.firstRow)return this.update(s);if(c.firstRow<s.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,s.firstRow-1);v>0;v--)this.$lines.shift();if(h>m)for(var v=this.session.getFoldedRowCount(m+1,h);v>0;v--)this.$lines.pop();s.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLines(s,s.firstRow,c.firstRow-1)),m>h&&this.$lines.push(this.$renderLines(s,h+1,m)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(s)},l.prototype.$renderLines=function(s,c,m){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>m);){var A=this.$lines.createCell(v,s,this.session,a);this.$renderCell(A,s,k,v),h.push(A),v++}return h},l.prototype.$renderCell=function(s,c,m,h){var v=s.element,k=this.session,x=v.childNodes[0],A=v.childNodes[1],S=v.childNodes[2],f=S.firstChild,L=k.$firstLineNumber,$=k.$breakpoints,C=k.$decorations,T=k.gutterRenderer||this.$renderer,w=this.$showFoldWidgets&&k.foldWidgets,y=m?m.start.row:Number.MAX_VALUE,b=c.lineHeight+"px",E=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",_=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(T?T.getText(k,h):h+L).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||m&&h<this.$cursorRow&&h>=y&&this.$cursorRow<=m.end.row)&&(E+="ace_gutter-active-line ",this.$cursorCell!=s&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=s)),$[h]&&(E+=$[h]),C[h]&&(E+=C[h]),this.$annotations[h]&&h!==y&&(E+=this.$annotations[h].className),w){var M=w[h];M==null&&(M=w[h]=k.getFoldWidget(h))}if(M){var I="ace_fold-widget ace_"+M,P=M=="start"&&h==y&&h<m.end.row;if(P){I+=" ace_closed";for(var O="",N=!1,D=h+1;D<=m.end.row;D++)if(this.$annotations[D]){if(this.$annotations[D].className===" ace_error"){N=!0,O=" ace_error_fold";break}if(this.$annotations[D].className===" ace_warning"){N=!0,O=" ace_warning_fold";continue}}E+=O}else I+=" ace_open";A.className!=I&&(A.className=I),d.setStyle(A.style,"height",b),d.setStyle(A.style,"display","inline-block"),A.setAttribute("role","button"),A.setAttribute("tabindex","-1");var F=k.getFoldWidgetRange(h);F?A.setAttribute("aria-label",o("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[F.start.row+1,F.end.row+1])):m?A.setAttribute("aria-label",o("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[m.start.row+1,m.end.row+1])):A.setAttribute("aria-label",o("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[h+1])),P?(A.setAttribute("aria-expanded","false"),A.setAttribute("title",o("gutter.code-folding.closed.title","Unfold code"))):(A.setAttribute("aria-expanded","true"),A.setAttribute("title",o("gutter.code-folding.open.title","Fold code")))}else A&&(d.setStyle(A.style,"display","none"),A.setAttribute("tabindex","0"),A.removeAttribute("role"),A.removeAttribute("aria-label"));if(N&&this.$showFoldedAnnotations){S.className="ace_gutter_annotation",f.className=_,f.className+=O,d.setStyle(f.style,"height",b),d.setStyle(S.style,"display","block"),d.setStyle(S.style,"height",b);var z;switch(O){case" ace_error_fold":z=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning_fold":z=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break}S.setAttribute("aria-label",z),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else if(this.$annotations[h]){S.className="ace_gutter_annotation",f.className=_,this.$useSvgGutterIcons?f.className+=this.$annotations[h].className:v.classList.add(this.$annotations[h].className.replace(" ","")),d.setStyle(f.style,"height",b),d.setStyle(S.style,"display","block"),d.setStyle(S.style,"height",b);var z;switch(this.$annotations[h].className){case" ace_error":z=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning":z=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break;case" ace_info":z=o("gutter.annotation.aria-label.info","Read annotations row $0",[R]);break}S.setAttribute("aria-label",z),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else d.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0");return R!==x.data&&(x.data=R),v.className!=E&&(v.className=E),d.setStyle(s.element.style,"height",this.$lines.computeLineHeight(h,c,k)+"px"),d.setStyle(s.element.style,"top",this.$lines.computeLineTop(h,c,k)+"px"),s.text=R,S.style.display==="none"&&A.style.display==="none"?s.element.setAttribute("aria-hidden",!0):s.element.setAttribute("aria-hidden",!1),s},l.prototype.setHighlightGutterLine=function(s){this.$highlightGutterLine=s},l.prototype.setShowLineNumbers=function(s){this.$renderer=!s&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(s){s?d.addCssClass(this.element,"ace_folding-enabled"):d.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=s,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var s=d.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(s.borderLeftWidth)||0)+(parseInt(s.paddingLeft)||0)+1,this.$padding.right=(parseInt(s.borderRightWidth)||0)+(parseInt(s.paddingRight)||0),this.$padding},l.prototype.getRegion=function(s){var c=this.$padding||this.$computePadding(),m=this.element.getBoundingClientRect();if(s.x<c.left+m.left)return"markers";if(this.$showFoldWidgets&&s.x>m.right-c.right)return"foldWidgets"},l}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,p.implement(i.prototype,n);function a(l){var s=document.createTextNode("");l.appendChild(s);var c=d.createElement("span");l.appendChild(c);var m=d.createElement("span");l.appendChild(m);var h=d.createElement("span");return m.appendChild(h),l}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../range").Range,p=e("../lib/dom"),g=function(){function u(o){this.element=p.createElement("div"),this.element.className="ace_layer ace_marker-layer",o.appendChild(this.element)}return u.prototype.setPadding=function(o){this.$padding=o},u.prototype.setSession=function(o){this.session=o},u.prototype.setMarkers=function(o){this.markers=o},u.prototype.elt=function(o,i){var a=this.i!=-1&&this.element.childNodes[this.i];a?this.i++:(a=document.createElement("div"),this.element.appendChild(a),this.i=-1),a.style.cssText=i,a.className=o},u.prototype.update=function(o){if(o){this.config=o,this.i=0;var i;for(var a in this.markers){var l=this.markers[a];if(!l.range){l.update(i,this,this.session,o);continue}var s=l.range.clipRows(o.firstRow,o.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),l.renderer){var c=this.$getTop(s.start.row,o),m=this.$padding+s.start.column*o.characterWidth;l.renderer(i,s,m,c,o)}else l.type=="fullLine"?this.drawFullLineMarker(i,s,l.clazz,o):l.type=="screenLine"?this.drawScreenLineMarker(i,s,l.clazz,o):s.isMultiLine()?l.type=="text"?this.drawTextMarker(i,s,l.clazz,o):this.drawMultiLineMarker(i,s,l.clazz,o):this.drawSingleLineMarker(i,s,l.clazz+" ace_start ace_br15",o)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},u.prototype.$getTop=function(o,i){return(o-i.firstRowScreen)*i.lineHeight},u.prototype.drawTextMarker=function(o,i,a,l,s){for(var c=this.session,m=i.start.row,h=i.end.row,v=m,k=0,x=0,A=c.getScreenLastRowColumn(v),S=new d(v,i.start.column,v,x);v<=h;v++)S.start.row=S.end.row=v,S.start.column=v==m?i.start.column:c.getRowWrapIndent(v),S.end.column=A,k=x,x=A,A=v+1<h?c.getScreenLastRowColumn(v+1):v==h?0:i.end.column,this.drawSingleLineMarker(o,S,a+(v==m?" ace_start":"")+" ace_br"+n(v==m||v==m+1&&i.start.column,k<x,x>A,v==h),l,v==h?0:1,s)},u.prototype.drawMultiLineMarker=function(o,i,a,l,s){var c=this.$padding,m=l.lineHeight,h=this.$getTop(i.start.row,l),v=c+i.start.column*l.characterWidth;if(s=s||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var k=i.clone();k.end.row=k.start.row,k.end.column=this.session.getLine(k.start.row).length,this.drawBidiSingleLineMarker(o,k,a+" ace_br1 ace_start",l,null,s)}else this.elt(a+" ace_br1 ace_start","height:"+m+"px;right:0;top:"+h+"px;left:"+v+"px;"+(s||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var k=i.clone();k.start.row=k.end.row,k.start.column=0,this.drawBidiSingleLineMarker(o,k,a+" ace_br12",l,null,s)}else{h=this.$getTop(i.end.row,l);var x=i.end.column*l.characterWidth;this.elt(a+" ace_br12","height:"+m+"px;width:"+x+"px;top:"+h+"px;left:"+c+"px;"+(s||""))}if(m=(i.end.row-i.start.row-1)*l.lineHeight,!(m<=0)){h=this.$getTop(i.start.row+1,l);var A=(i.start.column?1:0)|(i.end.column?0:8);this.elt(a+(A?" ace_br"+A:""),"height:"+m+"px;right:0;top:"+h+"px;left:"+c+"px;"+(s||""))}},u.prototype.drawSingleLineMarker=function(o,i,a,l,s,c){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(o,i,a,l,s,c);var m=l.lineHeight,h=(i.end.column+(s||0)-i.start.column)*l.characterWidth,v=this.$getTop(i.start.row,l),k=this.$padding+i.start.column*l.characterWidth;this.elt(a,"height:"+m+"px;width:"+h+"px;top:"+v+"px;left:"+k+"px;"+(c||""))},u.prototype.drawBidiSingleLineMarker=function(o,i,a,l,s,c){var m=l.lineHeight,h=this.$getTop(i.start.row,l),v=this.$padding,k=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);k.forEach(function(x){this.elt(a,"height:"+m+"px;width:"+(x.width+(s||0))+"px;top:"+h+"px;left:"+(v+x.left)+"px;"+(c||""))},this)},u.prototype.drawFullLineMarker=function(o,i,a,l,s){var c=this.$getTop(i.start.row,l),m=l.lineHeight;i.start.row!=i.end.row&&(m+=this.$getTop(i.end.row,l)-c),this.elt(a,"height:"+m+"px;top:"+c+"px;left:0;right:0;"+(s||""))},u.prototype.drawScreenLineMarker=function(o,i,a,l,s){var c=this.$getTop(i.start.row,l),m=l.lineHeight;this.elt(a,"height:"+m+"px;top:"+c+"px;left:0;right:0;"+(s||""))},u}();g.prototype.$padding=0;function n(u,o,i,a){return(u?1:0)|(o?2:0)|(i?4:0)|(a?8:0)}t.Marker=g});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,r){var d=new Set(["text","rparen","lparen"]);t.isTextToken=function(p){return d.has(p)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,r){"use strict";var d=e("../lib/oop"),p=e("../lib/dom"),g=e("../lib/lang"),n=e("./lines").Lines,u=e("../lib/event_emitter").EventEmitter,o=e("../config").nls,i=e("./text_util").isTextToken,a=function(){function l(s){this.dom=p,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",s.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new n(this.element)}return l.prototype.$updateEolChar=function(){var s=this.session.doc,c=s.getNewLineCharacter()==`
`&&s.getNewLineMode()!="windows",m=c?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=m)return this.EOL_CHAR=m,!0},l.prototype.setPadding=function(s){this.$padding=s,this.element.style.margin="0 "+s+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(s){this.$fontMetrics=s,this.$fontMetrics.on("changeCharacterSize",function(c){this._signal("changeCharacterSize",c)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(s){this.session=s,s&&this.$computeTabString()},l.prototype.setShowInvisibles=function(s){return this.showInvisibles==s?!1:(this.showInvisibles=s,typeof s=="string"?(this.showSpaces=/tab/i.test(s),this.showTabs=/space/i.test(s),this.showEOL=/eol/i.test(s)):this.showSpaces=this.showTabs=this.showEOL=s,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(s){return this.displayIndentGuides==s?!1:(this.displayIndentGuides=s,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(s){return this.$highlightIndentGuides===s?!1:(this.$highlightIndentGuides=s,s)},l.prototype.$computeTabString=function(){var s=this.session.getTabSize();this.tabSize=s;for(var c=this.$tabStrings=[0],m=1;m<s+1;m++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=g.stringRepeat(this.TAB_CHAR,m),c.push(h)}else c.push(this.dom.createTextNode(g.stringRepeat(" ",m),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",k=this.showSpaces?" ace_invisible ace_invisible_space":"",x=this.showSpaces?g.stringRepeat(this.SPACE_CHAR,this.tabSize):g.stringRepeat(" ",this.tabSize),A=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?g.stringRepeat(this.TAB_CHAR,this.tabSize):x,h=this.dom.createElement("span");h.className=v+k,h.textContent=x,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=v+A,h.textContent=S,this.$tabStrings["	"]=h}},l.prototype.updateLines=function(s,c,m){if(this.config.lastRow!=s.lastRow||this.config.firstRow!=s.firstRow)return this.update(s);this.config=s;for(var h=Math.max(c,s.firstRow),v=Math.min(m,s.lastRow),k=this.element.childNodes,x=0,S=s.firstRow;S<h;S++){var f=this.session.getFoldLine(S);if(f)if(f.containsRow(h)){h=f.start.row;break}else S=f.end.row;x++}for(var A=!1,S=h,f=this.session.getNextFoldLine(S),L=f?f.start.row:1/0;S>L&&(S=f.end.row+1,f=this.session.getNextFoldLine(S,f),L=f?f.start.row:1/0),!(S>v);){var $=k[x++];if($){this.dom.removeChildren($),this.$renderLine($,S,S==L?f:!1),A&&($.style.top=this.$lines.computeLineTop(S,s,this.session)+"px");var C=s.lineHeight*this.session.getRowLength(S)+"px";$.style.height!=C&&(A=!0,$.style.height=C)}S++}if(A)for(;x<this.$lines.cells.length;){var T=this.$lines.cells[x++];T.element.style.top=this.$lines.computeLineTop(T.row,s,this.session)+"px"}},l.prototype.scrollLines=function(s){var c=this.config;if(this.config=s,this.$lines.pageChanged(c,s))return this.update(s);this.$lines.moveContainer(s);var m=s.lastRow,h=c?c.lastRow:-1;if(!c||h<s.firstRow)return this.update(s);if(m<c.firstRow)return this.update(s);if(!c||c.lastRow<s.firstRow)return this.update(s);if(s.lastRow<c.firstRow)return this.update(s);if(c.firstRow<s.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,s.firstRow-1);v>0;v--)this.$lines.shift();if(c.lastRow>s.lastRow)for(var v=this.session.getFoldedRowCount(s.lastRow+1,c.lastRow);v>0;v--)this.$lines.pop();s.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLinesFragment(s,s.firstRow,c.firstRow-1)),s.lastRow>c.lastRow&&this.$lines.push(this.$renderLinesFragment(s,c.lastRow+1,s.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(s,c,m){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>m);){var A=this.$lines.createCell(v,s,this.session),S=A.element;this.dom.removeChildren(S),p.setStyle(S.style,"height",this.$lines.computeLineHeight(v,s,this.session)+"px"),p.setStyle(S.style,"top",this.$lines.computeLineTop(v,s,this.session)+"px"),this.$renderLine(S,v,v==x?k:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",h.push(A),v++}return h},l.prototype.update=function(s){this.$lines.moveContainer(s),this.config=s;for(var c=s.firstRow,m=s.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(s,c,m))},l.prototype.$renderToken=function(s,c,m,h){for(var v=this,k=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,x=this.dom.createFragment(this.element),A,S=0;A=k.exec(h);){var f=A[1],L=A[2],$=A[3],C=A[4],T=A[5];if(!(!v.showSpaces&&L)){var w=S!=A.index?h.slice(S,A.index):"";if(S=A.index+A[0].length,w&&x.appendChild(this.dom.createTextNode(w,this.element)),f){var y=v.session.getScreenTabSize(c+A.index);x.appendChild(v.$tabStrings[y].cloneNode(!0)),c+=y-1}else if(L)if(v.showSpaces){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space",b.textContent=g.stringRepeat(v.SPACE_CHAR,L.length),x.appendChild(b)}else x.appendChild(this.dom.createTextNode(L,this.element));else if($){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space ace_invalid",b.textContent=g.stringRepeat(v.SPACE_CHAR,$.length),x.appendChild(b)}else if(C){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",b.textContent=v.showSpaces?v.SPACE_CHAR:C,x.appendChild(b)}else if(T){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className="ace_cjk",b.textContent=T,x.appendChild(b)}}}if(x.appendChild(this.dom.createTextNode(S?h.slice(S):h,this.element)),i(m.type))s.appendChild(x);else{var E="ace_"+m.type.replace(/\./g," ace_"),b=this.dom.createElement("span");m.type=="fold"&&(b.style.width=m.value.length*this.config.characterWidth+"px",b.setAttribute("title",o("inline-fold.closed.title","Unfold code"))),b.className=E,b.appendChild(x),s.appendChild(b)}return c+h.length},l.prototype.renderIndentGuide=function(s,c,m){var h=c.search(this.$indentGuideRe);if(h<=0||h>=m)return c;if(c[0]==" "){h-=h%this.tabSize;for(var v=h/this.tabSize,k=0;k<v;k++)s.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}else if(c[0]=="	"){for(var k=0;k<h;k++)s.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}return this.$highlightIndentGuide(),c},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var s=this.session.doc.$lines;if(s){var c=this.session.selection.getCursor(),m=/^\s*/.exec(this.session.doc.getLine(c.row))[0].length,h=Math.floor(m/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:c.row};var v=this.session.$bracketHighlight;if(v){for(var k=this.session.$bracketHighlight.ranges,x=0;x<k.length;x++)if(c.row!==k[x].start.row){this.$highlightIndentGuideMarker.end=k[x].start.row,c.row>k[x].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&s[c.row]!==""&&c.column===s[c.row].length){this.$highlightIndentGuideMarker.dir=1;for(var x=c.row+1;x<s.length;x++){var A=s[x],S=/^\s*/.exec(A)[0].length;if(A!==""&&(this.$highlightIndentGuideMarker.end=x,S<=m))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){for(var s=this.$lines.cells,c=0;c<s.length;c++){var m=s[c],h=m.element.childNodes;if(h.length>0){for(var v=0;v<h.length;v++)if(h[v].classList&&h[v].classList.contains("ace_indent-guide-active")){h[v].classList.remove("ace_indent-guide-active");break}}}},l.prototype.$setIndentGuideActive=function(s,c){var m=this.session.doc.getLine(s.row);if(m!==""){var h=s.element.childNodes;if(h){var v=h[c-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var s=this.$lines.cells;this.$clearActiveIndentGuide();var c=this.$highlightIndentGuideMarker.indentLevel;if(c!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var m=0;m<s.length;m++){var h=s[m];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}else for(var m=s.length-1;m>=0;m--){var h=s[m];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}}},l.prototype.$createLineElement=function(s){var c=this.dom.createElement("div");return c.className="ace_line",c.style.height=this.config.lineHeight+"px",c},l.prototype.$renderWrappedLine=function(s,c,m){var h=0,v=0,k=m[0],x=0,A=this.$createLineElement();s.appendChild(A);for(var S=0;S<c.length;S++){var f=c[S],L=f.value;if(S==0&&this.displayIndentGuides){if(h=L.length,L=this.renderIndentGuide(A,L,k),!L)continue;h-=L.length}if(h+L.length<k)x=this.$renderToken(A,x,f,L),h+=L.length;else{for(;h+L.length>=k;)x=this.$renderToken(A,x,f,L.substring(0,k-h)),L=L.substring(k-h),h=k,A=this.$createLineElement(),s.appendChild(A),A.appendChild(this.dom.createTextNode(g.stringRepeat("\xA0",m.indent),this.element)),v++,x=0,k=m[v]||Number.MAX_VALUE;L.length!=0&&(h+=L.length,x=this.$renderToken(A,x,f,L))}}m[m.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(A,x,null,"",!0)},l.prototype.$renderSimpleLine=function(s,c){for(var m=0,h=0;h<c.length;h++){var v=c[h],k=v.value;if(!(h==0&&this.displayIndentGuides&&(k=this.renderIndentGuide(s,k),!k))){if(m+k.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(s,m,v,k);m=this.$renderToken(s,m,v,k)}}},l.prototype.$renderOverflowMessage=function(s,c,m,h,v){m&&this.$renderToken(s,c,m,h.slice(0,this.MAX_LINE_LENGTH-c));var k=this.dom.createElement("span");k.className="ace_inline_button ace_keyword ace_toggle_wrap",k.textContent=v?"<hide>":"<click to see more...>",s.appendChild(k)},l.prototype.$renderLine=function(s,c,m){if(!m&&m!=!1&&(m=this.session.getFoldLine(c)),m)var h=this.$getFoldLineTokens(c,m);else var h=this.session.getTokens(c);var v=s;if(h.length){var k=this.session.getRowSplitData(c);if(k&&k.length){this.$renderWrappedLine(s,h,k);var v=s.lastChild}else{var v=s;this.$useLineGroups()&&(v=this.$createLineElement(),s.appendChild(v)),this.$renderSimpleLine(v,h)}}else this.$useLineGroups()&&(v=this.$createLineElement(),s.appendChild(v));if(this.showEOL&&v){m&&(c=m.end.row);var x=this.dom.createElement("span");x.className="ace_invisible ace_invisible_eol",x.textContent=c==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(x)}},l.prototype.$getFoldLineTokens=function(s,c){var m=this.session,h=[];function v(x,A,S){for(var f=0,L=0;L+x[f].value.length<A;)if(L+=x[f].value.length,f++,f==x.length)return;if(L!=A){var $=x[f].value.substring(A-L);$.length>S-A&&($=$.substring(0,S-A)),h.push({type:x[f].type,value:$}),L=A+$.length,f+=1}for(;L<S&&f<x.length;){var $=x[f].value;$.length+L>S?h.push({type:x[f].type,value:$.substring(0,S-L)}):h.push(x[f]),L+=$.length,f+=1}}var k=m.getTokens(s);return c.walk(function(x,A,S,f,L){x!=null?h.push({type:"fold",value:x}):(L&&(k=m.getTokens(A)),k.length&&v(k,f,S))},c.end.row,this.session.getLine(c.end.row).length),h},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();a.prototype.EOF_CHAR="\xB6",a.prototype.EOL_CHAR_LF="\xAC",a.prototype.EOL_CHAR_CRLF="\xA4",a.prototype.EOL_CHAR=a.prototype.EOL_CHAR_LF,a.prototype.TAB_CHAR="\u2014",a.prototype.SPACE_CHAR="\xB7",a.prototype.$padding=0,a.prototype.MAX_LINE_LENGTH=1e4,a.prototype.showInvisibles=!1,a.prototype.showSpaces=!1,a.prototype.showTabs=!1,a.prototype.showEOL=!1,a.prototype.displayIndentGuides=!0,a.prototype.$highlightIndentGuides=!0,a.prototype.$tabStrings=[],a.prototype.destroy={},a.prototype.onChangeTabSize=a.prototype.$computeTabString,d.implement(a.prototype,u),t.Text=a});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../lib/dom"),p=function(){function g(n){this.element=d.createElement("div"),this.element.className="ace_layer ace_cursor-layer",n.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),d.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return g.prototype.$updateOpacity=function(n){for(var u=this.cursors,o=u.length;o--;)d.setStyle(u[o].style,"opacity",n?"":"0")},g.prototype.$startCssAnimation=function(){for(var n=this.cursors,u=n.length;u--;)n[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&d.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},g.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,d.removeCssClass(this.element,"ace_animate-blinking")},g.prototype.setPadding=function(n){this.$padding=n},g.prototype.setSession=function(n){this.session=n},g.prototype.setBlinking=function(n){n!=this.isBlinking&&(this.isBlinking=n,this.restartTimer())},g.prototype.setBlinkInterval=function(n){n!=this.blinkInterval&&(this.blinkInterval=n,this.restartTimer())},g.prototype.setSmoothBlinking=function(n){n!=this.smoothBlinking&&(this.smoothBlinking=n,d.setCssClass(this.element,"ace_smooth-blinking",n),this.$updateCursors(!0),this.restartTimer())},g.prototype.addCursor=function(){var n=d.createElement("div");return n.className="ace_cursor",this.element.appendChild(n),this.cursors.push(n),n},g.prototype.removeCursor=function(){if(this.cursors.length>1){var n=this.cursors.pop();return n.parentNode.removeChild(n),n}},g.prototype.hideCursor=function(){this.isVisible=!1,d.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},g.prototype.showCursor=function(){this.isVisible=!0,d.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},g.prototype.restartTimer=function(){var n=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,d.removeCssClass(this.element,"ace_smooth-blinking")),n(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&d.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),d.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=function(){this.timeoutId=setTimeout(function(){n(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){n(!0),u()},this.blinkInterval),u()}},g.prototype.getPixelPosition=function(n,u){if(!this.config||!this.session)return{left:0,top:0};n||(n=this.session.selection.getCursor());var o=this.session.documentToScreenPosition(n),i=this.$padding+(this.session.$bidiHandler.isBidiRow(o.row,n.row)?this.session.$bidiHandler.getPosLeft(o.column):o.column*this.config.characterWidth),a=(o.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:a}},g.prototype.isCursorInView=function(n,u){return n.top>=0&&n.top<u.maxHeight},g.prototype.update=function(n){this.config=n;var u=this.session.$selectionMarkers,o=0,i=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var o=0,a=u.length;o<a;o++){var l=this.getPixelPosition(u[o].cursor,!0);if(!((l.top>n.height+n.offset||l.top<0)&&o>1)){var s=this.cursors[i++]||this.addCursor(),c=s.style;this.drawCursor?this.drawCursor(s,l,n,u[o],this.session):this.isCursorInView(l,n)?(d.setStyle(c,"display","block"),d.translate(s,l.left,l.top),d.setStyle(c,"width",Math.round(n.characterWidth)+"px"),d.setStyle(c,"height",n.lineHeight+"px")):d.setStyle(c,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var m=this.session.getOverwrite();this.$setOverwrite(m),this.$pixelPos=l,this.restartTimer()},g.prototype.$setOverwrite=function(n){n!=this.overwrite&&(this.overwrite=n,n?d.addCssClass(this.element,"ace_overwrite-cursors"):d.removeCssClass(this.element,"ace_overwrite-cursors"))},g.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},g}();p.prototype.$padding=0,p.prototype.drawCursor=null,t.Cursor=p});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var s=function(c,m){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},s(c,m)};return function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");s(c,m);function h(){this.constructor=c}c.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),p=e("./lib/oop"),g=e("./lib/dom"),n=e("./lib/event"),u=e("./lib/event_emitter").EventEmitter,o=32768,i=function(){function s(c,m){this.element=g.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+m,this.inner=g.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),c.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,n.addListener(this.element,"scroll",this.onScroll.bind(this)),n.addListener(this.element,"mousedown",n.preventDefault)}return s.prototype.setVisible=function(c){this.element.style.display=c?"":"none",this.isVisible=c,this.coeff=1},s}();p.implement(i.prototype,u);var a=function(s){d(c,s);function c(m,h){var v=s.call(this,m,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,h.$scrollbarWidth=v.width=g.scrollbarWidth(m.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return c.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var m=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-m)/(this.coeff-m)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},c.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},c.prototype.setHeight=function(m){this.element.style.height=m+"px"},c.prototype.setScrollHeight=function(m){this.scrollHeight=m,m>o?(this.coeff=o/m,m=o):this.coeff!=1&&(this.coeff=1),this.inner.style.height=m+"px"},c.prototype.setScrollTop=function(m){this.scrollTop!=m&&(this.skipEvent=!0,this.scrollTop=m,this.element.scrollTop=m*this.coeff)},c}(i);a.prototype.setInnerHeight=a.prototype.setScrollHeight;var l=function(s){d(c,s);function c(m,h){var v=s.call(this,m,"-h")||this;return v.scrollLeft=0,v.height=h.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return c.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},c.prototype.getHeight=function(){return this.isVisible?this.height:0},c.prototype.setWidth=function(m){this.element.style.width=m+"px"},c.prototype.setInnerWidth=function(m){this.inner.style.width=m+"px"},c.prototype.setScrollWidth=function(m){this.inner.style.width=m+"px"},c.prototype.setScrollLeft=function(m){this.scrollLeft!=m&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=m)},c}(i);t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=l,t.VScrollBar=a,t.HScrollBar=l});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var l=function(s,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(m[v]=h[v])},l(s,c)};return function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(s,c);function m(){this.constructor=s}s.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}(),p=e("./lib/oop"),g=e("./lib/dom"),n=e("./lib/event"),u=e("./lib/event_emitter").EventEmitter;g.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var o=function(){function l(s,c){this.element=g.createElement("div"),this.element.className="ace_sb"+c,this.inner=g.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,s.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,n.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(s){this.element.style.display=s?"":"none",this.isVisible=s,this.coeff=1},l}();p.implement(o.prototype,u);var i=function(l){d(s,l);function s(c,m){var h=l.call(this,c,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=c,h.width=h.VScrollWidth,h.renderer=m,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return s.prototype.onMouseDown=function(c,m){if(c==="mousedown"&&!(n.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var h=this,v=m.clientY,k=function(C){v=C.clientY},x=function(){clearInterval(L)},A=m.clientY,S=this.thumbTop,f=function(){if(v!==void 0){var C=h.scrollTopFromThumbTop(S+v-A);C!==h.scrollTop&&h._emit("scroll",{data:C})}};n.capture(this.inner,k,x);var L=setInterval(f,20);return n.preventDefault(m)}var $=m.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop($)}),n.preventDefault(m)}},s.prototype.getHeight=function(){return this.height},s.prototype.scrollTopFromThumbTop=function(c){var m=c*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return m=m>>0,m<0?m=0:m>this.pageHeight-this.viewHeight&&(m=this.pageHeight-this.viewHeight),m},s.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},s.prototype.setHeight=function(c){this.height=Math.max(0,c),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},s.prototype.setScrollHeight=function(c,m){this.pageHeight===c&&!m||(this.pageHeight=c,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},s.prototype.setScrollTop=function(c){this.scrollTop=c,c<0&&(c=0),this.thumbTop=c*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},s}(o);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var a=function(l){d(s,l);function s(c,m){var h=l.call(this,c,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=m,h}return s.prototype.onMouseDown=function(c,m){if(c==="mousedown"&&!(n.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var h=this,v=m.clientX,k=function(C){v=C.clientX},x=function(){clearInterval(L)},A=m.clientX,S=this.thumbLeft,f=function(){if(v!==void 0){var C=h.scrollLeftFromThumbLeft(S+v-A);C!==h.scrollLeft&&h._emit("scroll",{data:C})}};n.capture(this.inner,k,x);var L=setInterval(f,20);return n.preventDefault(m)}var $=m.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft($)}),n.preventDefault(m)}},s.prototype.getHeight=function(){return this.isVisible?this.height:0},s.prototype.scrollLeftFromThumbLeft=function(c){var m=c*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return m=m>>0,m<0?m=0:m>this.pageWidth-this.viewWidth&&(m=this.pageWidth-this.viewWidth),m},s.prototype.setWidth=function(c){this.width=Math.max(0,c),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},s.prototype.setScrollWidth=function(c,m){this.pageWidth===c&&!m||(this.pageWidth=c,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},s.prototype.setScrollLeft=function(c){this.scrollLeft=c,c<0&&(c=0),this.thumbLeft=c*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},s}(o);a.prototype.setInnerWidth=a.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=a,t.VScrollBar=i,t.HScrollBar=a});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,r){"use strict";var d=e("./lib/event"),p=function(){function g(n,u){this.onRender=n,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var o=this;this._flush=function(i){o.pending=!1;var a=o.changes;if(a&&(d.blockIdle(100),o.changes=0,o.onRender(a)),o.changes){if(o.$recursionLimit--<0)return;o.schedule()}else o.$recursionLimit=2}}return g.prototype.schedule=function(n){this.changes=this.changes|n,this.changes&&!this.pending&&(d.nextFrame(this._flush),this.pending=!0)},g.prototype.clear=function(n){var u=this.changes;return this.changes=0,u},g}();t.RenderLoop=p});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,r){var d=e("../lib/oop"),p=e("../lib/dom"),g=e("../lib/lang"),n=e("../lib/event"),u=e("../lib/useragent"),o=e("../lib/event_emitter").EventEmitter,i=512,a=typeof ResizeObserver=="function",l=200,s=function(){function c(m){this.el=p.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=p.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=p.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),m.appendChild(this.el),this.$measureNode.textContent=g.stringRepeat("X",i),this.$characterSize={width:0,height:0},a?this.$addObserver():this.checkForSizeChanges()}return c.prototype.$setMeasureNodeStyles=function(m,h){m.width=m.height="auto",m.left=m.top="0px",m.visibility="hidden",m.position="absolute",m.whiteSpace="pre",u.isIE<8?m["font-family"]="inherit":m.font="inherit",m.overflow=h?"hidden":"visible"},c.prototype.checkForSizeChanges=function(m){if(m===void 0&&(m=this.$measureSizes()),m&&(this.$characterSize.width!==m.width||this.$characterSize.height!==m.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=m,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===m.width&&h.height===m.height,this._emit("changeCharacterSize",{data:m})}},c.prototype.$addObserver=function(){var m=this;this.$observer=new window.ResizeObserver(function(h){m.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},c.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var m=this;return this.$pollSizeChangesTimer=n.onIdle(function h(){m.checkForSizeChanges(),n.onIdle(h,500)},500)},c.prototype.setPolling=function(m){m?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},c.prototype.$measureSizes=function(m){var h={height:(m||this.$measureNode).clientHeight,width:(m||this.$measureNode).clientWidth/i};return h.width===0||h.height===0?null:h},c.prototype.$measureCharWidth=function(m){this.$main.textContent=g.stringRepeat(m,i);var h=this.$main.getBoundingClientRect();return h.width/i},c.prototype.getCharacterWidth=function(m){var h=this.charSizes[m];return h===void 0&&(h=this.charSizes[m]=this.$measureCharWidth(m)/this.$characterSize.width),h},c.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},c.prototype.$getZoom=function(m){return!m||!m.parentElement?1:(Number(window.getComputedStyle(m).zoom)||1)*this.$getZoom(m.parentElement)},c.prototype.$initTransformMeasureNodes=function(){var m=function(h,v){return["div",{style:"position: absolute;top:"+h+"px;left:"+v+"px;"}]};this.els=p.buildDom([m(0,0),m(l,0),m(0,l),m(l,l)],this.el)},c.prototype.transformCoordinates=function(m,h){if(m){var v=this.$getZoom(this.el);m=S(1/v,m)}function k(P,O,N){var D=P[1]*O[0]-P[0]*O[1];return[(-O[1]*N[0]+O[0]*N[1])/D,(+P[1]*N[0]-P[0]*N[1])/D]}function x(P,O){return[P[0]-O[0],P[1]-O[1]]}function A(P,O){return[P[0]+O[0],P[1]+O[1]]}function S(P,O){return[P*O[0],P*O[1]]}this.els||this.$initTransformMeasureNodes();function f(P){var O=P.getBoundingClientRect();return[O.left,O.top]}var L=f(this.els[0]),$=f(this.els[1]),C=f(this.els[2]),T=f(this.els[3]),w=k(x(T,$),x(T,C),x(A($,C),A(T,L))),y=S(1+w[0],x($,L)),b=S(1+w[1],x(C,L));if(h){var E=h,_=w[0]*E[0]/l+w[1]*E[1]/l+1,R=A(S(E[0],y),S(E[1],b));return A(S(1/_/l,R),L)}var M=x(m,L),I=k(x(y,S(w[0],M)),x(b,S(w[1],M)),M);return S(l,I)},c}();s.prototype.$characterSize={width:0,height:0},d.implement(s.prototype,o),t.FontMetrics=s});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,r){r.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "\u21A9";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=e("../lib/dom"),p=e("../lib/oop"),g=e("../lib/event_emitter").EventEmitter,n=function(){function u(o,i){this.canvas=d.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=o.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=o.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},o.element.appendChild(this.canvas)}return u.prototype.$updateDecorators=function(o){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(o){this.maxHeight=o.maxHeight,this.lineHeight=o.lineHeight,this.canvasHeight=o.height;var a=(o.lastRow+1)*this.lineHeight;a<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function s(T,w){return T.priority<w.priority?-1:T.priority>w.priority?1:0}var c=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),c){var m={info:1,warning:2,error:3};c.forEach(function(T){T.priority=m[T.type]||null}),c=c.sort(s);for(var h=this.renderer.session.$foldData,v=0;v<c.length;v++){var k=c[v].row,x=this.compensateFoldRows(k,h),A=Math.round((k-x)*this.lineHeight*this.heightRatio),S=Math.round((k-x)*this.lineHeight*this.heightRatio),f=Math.round(((k-x)*this.lineHeight+this.lineHeight)*this.heightRatio),L=f-S;if(L<this.minDecorationHeight){var $=(S+f)/2|0;$<this.halfMinDecorationHeight?$=this.halfMinDecorationHeight:$+this.halfMinDecorationHeight>this.canvasHeight&&($=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round($-this.halfMinDecorationHeight),f=Math.round($+this.halfMinDecorationHeight)}l.fillStyle=i[c[v].type]||null,l.fillRect(0,A,this.canvasWidth,f-S)}}var C=this.renderer.session.selection.getCursor();if(C){var x=this.compensateFoldRows(C.row,h),A=Math.round((C.row-x)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,A,this.canvasWidth,2)}},u.prototype.compensateFoldRows=function(o,i){var a=0;if(i&&i.length>0)for(var l=0;l<i.length;l++)o>i[l].start.row&&o<i[l].end.row?a+=o-i[l].start.row:o>=i[l].end.row&&(a+=i[l].end.row-i[l].start.row);return a},u}();p.implement(n.prototype,g),t.Decorator=n});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(e,t,r){"use strict";var d=e("./lib/oop"),p=e("./lib/dom"),g=e("./lib/lang"),n=e("./config"),u=e("./layer/gutter").Gutter,o=e("./layer/marker").Marker,i=e("./layer/text").Text,a=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,s=e("./scrollbar").VScrollBar,c=e("./scrollbar_custom").HScrollBar,m=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,k=e("./lib/event_emitter").EventEmitter,x=e("./css/editor-css"),A=e("./layer/decorators").Decorator,S=e("./lib/useragent"),f=e("./layer/text_util").isTextToken;p.importCssString(x,"ace_editor.css",!1);var L=function(){function $(C,T){var w=this;this.container=C||p.createElement("div"),p.addCssClass(this.container,"ace_editor"),p.HI_DPI&&p.addCssClass(this.container,"ace_hidpi"),this.setTheme(T),n.get("useStrictCSP")==null&&n.set("useStrictCSP",!1),this.$gutter=p.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=p.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=p.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new o(this.content);var y=this.$textLayer=new i(this.content);this.canvas=y.element,this.$markerFront=new o(this.content),this.$cursorLayer=new a(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new s(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollTop(b.data-w.scrollMargin.top)}),this.scrollBarH.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollLeft(b.data-w.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(b){w.updateCharacterSize(),w.onResize(!0,w.gutterWidth,w.$size.width,w.$size.height),w._signal("changeCharacterSize",b)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),n.resetOptions(this),n._signal("renderer",this)}return $.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),p.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},$.prototype.setSession=function(C){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=C,C&&this.scrollMargin.top&&C.getScrollTop()<=0&&C.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(C),this.$markerBack.setSession(C),this.$markerFront.setSession(C),this.$gutterLayer.setSession(C),this.$textLayer.setSession(C),C&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},$.prototype.updateLines=function(C,T,w){if(T===void 0&&(T=1/0),this.$changedLines?(this.$changedLines.firstRow>C&&(this.$changedLines.firstRow=C),this.$changedLines.lastRow<T&&(this.$changedLines.lastRow=T)):this.$changedLines={firstRow:C,lastRow:T},this.$changedLines.lastRow<this.layerConfig.firstRow)if(w)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},$.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},$.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},$.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},$.prototype.updateFull=function(C){C?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},$.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},$.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},$.prototype.onResize=function(C,T,w,y){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=C?1:0;var b=this.container;y||(y=b.clientHeight||b.scrollHeight),!y&&this.$maxLines&&this.lineHeight>1&&(!b.style.height||b.style.height=="0px")&&(b.style.height="1px",y=b.clientHeight||b.scrollHeight),w||(w=b.clientWidth||b.scrollWidth);var E=this.$updateCachedSize(C,T,w,y);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!w&&!y)return this.resizing=0;C&&(this.$gutterLayer.$padding=null),C?this.$renderChanges(E|this.$changes,!0):this.$loop.schedule(E|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},$.prototype.$updateCachedSize=function(C,T,w,y){y-=this.$extraHeight||0;var b=0,E=this.$size,_={width:E.width,height:E.height,scrollerHeight:E.scrollerHeight,scrollerWidth:E.scrollerWidth};if(y&&(C||E.height!=y)&&(E.height=y,b|=this.CHANGE_SIZE,E.scrollerHeight=E.height,this.$horizScroll&&(E.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(E.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",b=b|this.CHANGE_SCROLL),w&&(C||E.width!=w)){b|=this.CHANGE_SIZE,E.width=w,T==null&&(T=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=T,p.setStyle(this.scrollBarH.element.style,"left",T+"px"),p.setStyle(this.scroller.style,"left",T+this.margin.left+"px"),E.scrollerWidth=Math.max(0,w-T-this.scrollBarV.getWidth()-this.margin.h),p.setStyle(this.$gutter.style,"left",this.margin.left+"px");var R=this.scrollBarV.getWidth()+"px";p.setStyle(this.scrollBarH.element.style,"right",R),p.setStyle(this.scroller.style,"right",R),p.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(E.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||C)&&(b|=this.CHANGE_FULL)}return E.$dirty=!w||!y,b&&this._signal("resize",_),b},$.prototype.onGutterResize=function(C){var T=this.$showGutter?C:0;T!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,T,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},$.prototype.adjustWrapLimit=function(){var C=this.$size.scrollerWidth-this.$padding*2,T=Math.floor(C/this.characterWidth);return this.session.adjustWrapLimit(T,this.$showPrintMargin&&this.$printMarginColumn)},$.prototype.setAnimatedScroll=function(C){this.setOption("animatedScroll",C)},$.prototype.getAnimatedScroll=function(){return this.$animatedScroll},$.prototype.setShowInvisibles=function(C){this.setOption("showInvisibles",C),this.session.$bidiHandler.setShowInvisibles(C)},$.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},$.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},$.prototype.setDisplayIndentGuides=function(C){this.setOption("displayIndentGuides",C)},$.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},$.prototype.setHighlightIndentGuides=function(C){this.setOption("highlightIndentGuides",C)},$.prototype.setShowPrintMargin=function(C){this.setOption("showPrintMargin",C)},$.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},$.prototype.setPrintMarginColumn=function(C){this.setOption("printMarginColumn",C)},$.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},$.prototype.getShowGutter=function(){return this.getOption("showGutter")},$.prototype.setShowGutter=function(C){return this.setOption("showGutter",C)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.setFadeFoldWidgets=function(C){this.setOption("fadeFoldWidgets",C)},$.prototype.setHighlightGutterLine=function(C){this.setOption("highlightGutterLine",C)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var C=p.createElement("div");C.className="ace_layer ace_print-margin-layer",this.$printMarginEl=p.createElement("div"),this.$printMarginEl.className="ace_print-margin",C.appendChild(this.$printMarginEl),this.content.insertBefore(C,this.content.firstChild)}var T=this.$printMarginEl.style;T.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",T.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},$.prototype.getContainerElement=function(){return this.container},$.prototype.getMouseEventTarget=function(){return this.scroller},$.prototype.getTextAreaContainer=function(){return this.container},$.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var C=this.textarea.style,T=this.$composition;if(!this.$keepTextAreaAtCursor&&!T){p.translate(this.textarea,-100,0);return}var w=this.$cursorLayer.$pixelPos;if(w){T&&T.markerRange&&(w=this.$cursorLayer.getPixelPosition(T.markerRange.start,!0));var y=this.layerConfig,b=w.top,E=w.left;b-=y.offset;var _=T&&T.useTextareaForIME||S.isMobile?this.lineHeight:1;if(b<0||b>y.height-_){p.translate(this.textarea,0,0);return}var R=1,M=this.$size.height-_;if(!T)b+=this.lineHeight;else if(T.useTextareaForIME){var I=this.textarea.value;R=this.characterWidth*this.session.$getStringScreenWidth(I)[0]}else b+=this.lineHeight+2;E-=this.scrollLeft,E>this.$size.scrollerWidth-R&&(E=this.$size.scrollerWidth-R),E+=this.gutterWidth+this.margin.left,p.setStyle(C,"height",_+"px"),p.setStyle(C,"width",R+"px"),p.translate(this.textarea,Math.min(E,this.$size.scrollerWidth-R),Math.min(b,M))}}},$.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},$.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},$.prototype.getLastFullyVisibleRow=function(){var C=this.layerConfig,T=C.lastRow,w=this.session.documentToScreenRow(T,0)*C.lineHeight;return w-this.session.getScrollTop()>C.height-C.lineHeight?T-1:T},$.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},$.prototype.setPadding=function(C){this.$padding=C,this.$textLayer.setPadding(C),this.$cursorLayer.setPadding(C),this.$markerFront.setPadding(C),this.$markerBack.setPadding(C),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},$.prototype.setScrollMargin=function(C,T,w,y){var b=this.scrollMargin;b.top=C|0,b.bottom=T|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,b.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-b.top),this.updateFull()},$.prototype.setMargin=function(C,T,w,y){var b=this.margin;b.top=C|0,b.bottom=T|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},$.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},$.prototype.setHScrollBarAlwaysVisible=function(C){this.setOption("hScrollBarAlwaysVisible",C)},$.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},$.prototype.setVScrollBarAlwaysVisible=function(C){this.setOption("vScrollBarAlwaysVisible",C)},$.prototype.$updateScrollBarV=function(){var C=this.layerConfig.maxHeight,T=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(C-=(T-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>C-T&&(C=this.scrollTop+T,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(C+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},$.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},$.prototype.freeze=function(){this.$frozen=!0},$.prototype.unfreeze=function(){this.$frozen=!1},$.prototype.$renderChanges=function(C,T){if(this.$changes&&(C|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!C&&!T){this.$changes|=C;return}if(this.$size.$dirty)return this.$changes|=C,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",C),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var w=this.layerConfig;if(C&this.CHANGE_FULL||C&this.CHANGE_SIZE||C&this.CHANGE_TEXT||C&this.CHANGE_LINES||C&this.CHANGE_SCROLL||C&this.CHANGE_H_SCROLL){if(C|=this.$computeLayerConfig()|this.$loop.clear(),w.firstRow!=this.layerConfig.firstRow&&w.firstRowScreen==this.layerConfig.firstRowScreen){var y=this.scrollTop+(w.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;y>0&&(this.scrollTop=y,C=C|this.CHANGE_SCROLL,C|=this.$computeLayerConfig()|this.$loop.clear())}w=this.layerConfig,this.$updateScrollBarV(),C&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),p.translate(this.content,-this.scrollLeft,-w.offset);var b=w.width+2*this.$padding+"px",E=w.minHeight+"px";p.setStyle(this.content.style,"width",b),p.setStyle(this.content.style,"height",E)}if(C&this.CHANGE_H_SCROLL&&(p.translate(this.content,-this.scrollLeft,-w.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),C&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}if(C&this.CHANGE_SCROLL){this.$changedLines=null,C&this.CHANGE_TEXT||C&this.CHANGE_LINES?this.$textLayer.update(w):this.$textLayer.scrollLines(w),this.$showGutter&&(C&this.CHANGE_GUTTER||C&this.CHANGE_LINES?this.$gutterLayer.update(w):this.$gutterLayer.scrollLines(w)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}C&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):C&this.CHANGE_LINES?((this.$updateLines()||C&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):C&this.CHANGE_TEXT||C&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):C&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)),C&this.CHANGE_CURSOR&&(this.$cursorLayer.update(w),this.$moveTextAreaToCursor()),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(w),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(w),this._signal("afterRender",C)},$.prototype.$autosize=function(){var C=this.session.getScreenLength()*this.lineHeight,T=this.$maxLines*this.lineHeight,w=Math.min(T,Math.max((this.$minLines||1)*this.lineHeight,C))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(w+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&w>this.$maxPixelHeight&&(w=this.$maxPixelHeight);var y=w<=2*this.lineHeight,b=!y&&C>T;if(w!=this.desiredHeight||this.$size.height!=this.desiredHeight||b!=this.$vScroll){b!=this.$vScroll&&(this.$vScroll=b,this.scrollBarV.setVisible(b));var E=this.container.clientWidth;this.container.style.height=w+"px",this.$updateCachedSize(!0,this.$gutterWidth,E,w),this.desiredHeight=w,this._signal("autosize")}},$.prototype.$computeLayerConfig=function(){var C=this.session,T=this.$size,w=T.height<=2*this.lineHeight,y=this.session.getScreenLength(),b=y*this.lineHeight,E=this.$getLongestLine(),_=!w&&(this.$hScrollBarAlwaysVisible||T.scrollerWidth-E-2*this.$padding<0),R=this.$horizScroll!==_;R&&(this.$horizScroll=_,this.scrollBarH.setVisible(_));var M=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var I=T.scrollerHeight+this.lineHeight,P=!this.$maxLines&&this.$scrollPastEnd?(T.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;b+=P;var O=this.scrollMargin;this.session.setScrollTop(Math.max(-O.top,Math.min(this.scrollTop,b-T.scrollerHeight+O.bottom))),this.session.setScrollLeft(Math.max(-O.left,Math.min(this.scrollLeft,E+2*this.$padding-T.scrollerWidth+O.right)));var N=!w&&(this.$vScrollBarAlwaysVisible||T.scrollerHeight-b+P<0||this.scrollTop>O.top),D=M!==N;D&&(this.$vScroll=N,this.scrollBarV.setVisible(N));var F=this.scrollTop%this.lineHeight,z=Math.ceil(I/this.lineHeight)-1,W=Math.max(0,Math.round((this.scrollTop-F)/this.lineHeight)),j=W+z,Z,Y,q=this.lineHeight;W=C.screenToDocumentRow(W,0);var nt=C.getFoldLine(W);nt&&(W=nt.start.row),Z=C.documentToScreenRow(W,0),Y=C.getRowLength(W)*q,j=Math.min(C.screenToDocumentRow(j,0),C.getLength()-1),I=T.scrollerHeight+C.getRowLength(j)*q+Y,F=this.scrollTop-Z*q;var ot=0;return(this.layerConfig.width!=E||R)&&(ot=this.CHANGE_H_SCROLL),(R||D)&&(ot|=this.$updateCachedSize(!0,this.gutterWidth,T.width,T.height),this._signal("scrollbarVisibilityChanged"),D&&(E=this.$getLongestLine())),this.layerConfig={width:E,padding:this.$padding,firstRow:W,firstRowScreen:Z,lastRow:j,lineHeight:q,characterWidth:this.characterWidth,minHeight:I,maxHeight:b,offset:F,gutterOffset:q?Math.max(0,Math.ceil((F+T.height-T.scrollerHeight)/q)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(E-this.$padding),ot},$.prototype.$updateLines=function(){if(this.$changedLines){var C=this.$changedLines.firstRow,T=this.$changedLines.lastRow;this.$changedLines=null;var w=this.layerConfig;if(!(C>w.lastRow+1)&&!(T<w.firstRow)){if(T===1/0){this.$showGutter&&this.$gutterLayer.update(w),this.$textLayer.update(w);return}return this.$textLayer.updateLines(w,C,T),!0}}},$.prototype.$getLongestLine=function(){var C=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(C+=1),this.$textLayer&&C>this.$textLayer.MAX_LINE_LENGTH&&(C=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(C*this.characterWidth))},$.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},$.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},$.prototype.addGutterDecoration=function(C,T){this.$gutterLayer.addGutterDecoration(C,T)},$.prototype.removeGutterDecoration=function(C,T){this.$gutterLayer.removeGutterDecoration(C,T)},$.prototype.updateBreakpoints=function(C){this._rows=C,this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.setAnnotations=function(C){this.$gutterLayer.setAnnotations(C),this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},$.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},$.prototype.showCursor=function(){this.$cursorLayer.showCursor()},$.prototype.scrollSelectionIntoView=function(C,T,w){this.scrollCursorIntoView(C,w),this.scrollCursorIntoView(T,w)},$.prototype.scrollCursorIntoView=function(C,T,w){if(this.$size.scrollerHeight!==0){var y=this.$cursorLayer.getPixelPosition(C),b=y.left,E=y.top,_=w&&w.top||0,R=w&&w.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var M=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;M+_>E?(T&&M+_>E+this.lineHeight&&(E-=T*this.$size.scrollerHeight),E===0&&(E=-this.scrollMargin.top),this.session.setScrollTop(E)):M+this.$size.scrollerHeight-R<E+this.lineHeight&&(T&&M+this.$size.scrollerHeight-R<E-this.lineHeight&&(E+=T*this.$size.scrollerHeight),this.session.setScrollTop(E+this.lineHeight+R-this.$size.scrollerHeight));var I=this.scrollLeft,P=2*this.layerConfig.characterWidth;b-P<I?(b-=P,b<this.$padding+P&&(b=-this.scrollMargin.left),this.session.setScrollLeft(b)):(b+=P,I+this.$size.scrollerWidth<b+this.characterWidth?this.session.setScrollLeft(Math.round(b+this.characterWidth-this.$size.scrollerWidth)):I<=this.$padding&&b-I<this.characterWidth&&this.session.setScrollLeft(0))}},$.prototype.getScrollTop=function(){return this.session.getScrollTop()},$.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},$.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},$.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},$.prototype.scrollToRow=function(C){this.session.setScrollTop(C*this.lineHeight)},$.prototype.alignCursor=function(C,T){typeof C=="number"&&(C={row:C,column:0});var w=this.$cursorLayer.getPixelPosition(C),y=this.$size.scrollerHeight-this.lineHeight,b=w.top-y*(T||0);return this.session.setScrollTop(b),b},$.prototype.$calcSteps=function(C,T){var w=0,y=this.STEPS,b=[],E=function(_,R,M){return M*(Math.pow(_-1,3)+1)+R};for(w=0;w<y;++w)b.push(E(w/this.STEPS,C,T-C));return b},$.prototype.scrollToLine=function(C,T,w,y){var b=this.$cursorLayer.getPixelPosition({row:C,column:0}),E=b.top;T&&(E-=this.$size.scrollerHeight/2);var _=this.scrollTop;this.session.setScrollTop(E),w!==!1&&this.animateScrolling(_,y)},$.prototype.animateScrolling=function(C,T){var w=this.scrollTop;if(!this.$animatedScroll)return;var y=this;if(C==w)return;if(this.$scrollAnimation){var b=this.$scrollAnimation.steps;if(b.length&&(C=b[0],C==w))return}var E=y.$calcSteps(C,w);this.$scrollAnimation={from:C,to:w,steps:E},clearInterval(this.$timer),y.session.setScrollTop(E.shift()),y.session.$scrollTop=w;function _(){y.$timer=clearInterval(y.$timer),y.$scrollAnimation=null,y.$stopAnimation=!1,T&&T()}this.$timer=setInterval(function(){if(y.$stopAnimation){_();return}if(!y.session)return clearInterval(y.$timer);E.length?(y.session.setScrollTop(E.shift()),y.session.$scrollTop=w):w!=null?(y.session.$scrollTop=-1,y.session.setScrollTop(w),w=null):_()},10)},$.prototype.scrollToY=function(C){this.scrollTop!==C&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=C)},$.prototype.scrollToX=function(C){this.scrollLeft!==C&&(this.scrollLeft=C),this.$loop.schedule(this.CHANGE_H_SCROLL)},$.prototype.scrollTo=function(C,T){this.session.setScrollTop(T),this.session.setScrollLeft(C)},$.prototype.scrollBy=function(C,T){T&&this.session.setScrollTop(this.session.getScrollTop()+T),C&&this.session.setScrollLeft(this.session.getScrollLeft()+C)},$.prototype.isScrollableBy=function(C,T){if(T<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||T>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||C<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||C>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},$.prototype.pixelToScreenCoordinates=function(C,T){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([C,T]);C=y[1]-this.gutterWidth-this.margin.left,T=y[0]}else w=this.scroller.getBoundingClientRect();var b=C+this.scrollLeft-w.left-this.$padding,E=b/this.characterWidth,_=Math.floor((T+this.scrollTop-w.top)/this.lineHeight),R=this.$blockCursor?Math.floor(E):Math.round(E);return{row:_,column:R,side:E-R>0?1:-1,offsetX:b}},$.prototype.screenToTextCoordinates=function(C,T){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([C,T]);C=y[1]-this.gutterWidth-this.margin.left,T=y[0]}else w=this.scroller.getBoundingClientRect();var b=C+this.scrollLeft-w.left-this.$padding,E=b/this.characterWidth,_=this.$blockCursor?Math.floor(E):Math.round(E),R=Math.floor((T+this.scrollTop-w.top)/this.lineHeight);return this.session.screenToDocumentPosition(R,Math.max(_,0),b)},$.prototype.textToScreenCoordinates=function(C,T){var w=this.scroller.getBoundingClientRect(),y=this.session.documentToScreenPosition(C,T),b=this.$padding+(this.session.$bidiHandler.isBidiRow(y.row,C)?this.session.$bidiHandler.getPosLeft(y.column):Math.round(y.column*this.characterWidth)),E=y.row*this.lineHeight;return{pageX:w.left+b-this.scrollLeft,pageY:w.top+E-this.scrollTop}},$.prototype.visualizeFocus=function(){p.addCssClass(this.container,"ace_focus")},$.prototype.visualizeBlur=function(){p.removeCssClass(this.container,"ace_focus")},$.prototype.showComposition=function(C){this.$composition=C,C.cssText||(C.cssText=this.textarea.style.cssText),C.useTextareaForIME==null&&(C.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(p.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):C.markerId=this.session.addMarker(C.markerRange,"ace_composition_marker","text")},$.prototype.setCompositionText=function(C){var T=this.session.selection.cursor;this.addToken(C,"composition_placeholder",T.row,T.column),this.$moveTextAreaToCursor()},$.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),p.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var C=this.session.selection.cursor;this.removeExtraToken(C.row,C.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},$.prototype.setGhostText=function(C,T){var w=this.session.selection.cursor,y=T||{row:w.row,column:w.column};this.removeGhostText();var b=this.$calculateWrappedTextChunks(C,y);this.addToken(b[0].text,"ghost_text",y.row,y.column),this.$ghostText={text:C,position:{row:y.row,column:y.column}};var E=p.createElement("div");if(b.length>1){var _=this.hideTokensAfterPosition(y.row,y.column),R;b.slice(1).forEach(function(D){var F=p.createElement("div"),z=p.createElement("span");z.className="ace_ghost_text",D.wrapped&&(F.className="ghost_text_line_wrapped"),D.text.length===0&&(D.text=" "),z.appendChild(p.createTextNode(D.text)),F.appendChild(z),E.appendChild(F),R=F}),_.forEach(function(D){var F=p.createElement("span");f(D.type)||(F.className="ace_"+D.type.replace(/\./g," ace_")),F.appendChild(p.createTextNode(D.value)),R.appendChild(F)}),this.$ghostTextWidget={el:E,row:y.row,column:y.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var M=this.$cursorLayer.getPixelPosition(y,!0),I=this.container,P=I.getBoundingClientRect().height,O=b.length*this.lineHeight,N=O<P-M.top;if(N)return;O<P?this.scrollBy(0,(b.length-1)*this.lineHeight):this.scrollToRow(y.row)}},$.prototype.$calculateWrappedTextChunks=function(C,T){var w=this.$size.scrollerWidth-this.$padding*2,y=Math.floor(w/this.characterWidth)-2;y=y<=0?60:y;for(var b=C.split(/\r?\n/),E=[],_=0;_<b.length;_++){var R=this.session.$getDisplayTokens(b[_],T.column),M=this.session.$computeWrapSplits(R,y,this.session.$tabSize);if(M.length>0){var I=0;M.push(b[_].length);for(var P=0;P<M.length;P++){var O=b[_].slice(I,M[P]);E.push({text:O,wrapped:!0}),I=M[P]}}else E.push({text:b[_],wrapped:!1})}return E},$.prototype.removeGhostText=function(){if(this.$ghostText){var C=this.$ghostText.position;this.removeExtraToken(C.row,C.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},$.prototype.addToken=function(C,T,w,y){var b=this.session;b.bgTokenizer.lines[w]=null;var E={type:T,value:C},_=b.getTokens(w);if(y==null||!_.length)_.push(E);else for(var R=0,M=0;M<_.length;M++){var I=_[M];if(R+=I.value.length,y<=R){var P=I.value.length-(R-y),O=I.value.slice(0,P),N=I.value.slice(P);_.splice(M,1,{type:I.type,value:O},E,{type:I.type,value:N});break}}this.updateLines(w,w)},$.prototype.hideTokensAfterPosition=function(C,T){for(var w=this.session.getTokens(C),y=0,b=!1,E=[],_=0;_<w.length;_++){var R=w[_];if(y+=R.value.length,R.type!=="ghost_text"){if(b){E.push({type:R.type,value:R.value}),R.type="hidden_token";continue}y===T&&(b=!0)}}return this.updateLines(C,C),E},$.prototype.removeExtraToken=function(C,T){this.session.bgTokenizer.lines[C]=null,this.updateLines(C,C)},$.prototype.setTheme=function(C,T){var w=this;if(this.$themeId=C,w._dispatchEvent("themeChange",{theme:C}),!C||typeof C=="string"){var y=C||this.$options.theme.initialValue;n.loadModule(["theme",y],b)}else b(C);function b(E){if(w.$themeId!=C)return T&&T();if(!E||!E.cssClass)throw new Error("couldn't load module "+C+" or it didn't call define");E.$id&&(w.$themeId=E.$id),p.importCssString(E.cssText,E.cssClass,w.container),w.theme&&p.removeCssClass(w.container,w.theme.cssClass);var _="padding"in E?E.padding:"padding"in(w.theme||{})?4:w.$padding;w.$padding&&_!=w.$padding&&w.setPadding(_),w.$theme=E.cssClass,w.theme=E,p.addCssClass(w.container,E.cssClass),p.setCssClass(w.container,"ace_dark",E.isDark),w.$size&&(w.$size.width=0,w.$updateSizeAsync()),w._dispatchEvent("themeLoaded",{theme:E}),T&&T(),S.isSafari&&w.scroller&&(w.scroller.style.background="red",w.scroller.style.background="")}},$.prototype.getTheme=function(){return this.$themeId},$.prototype.setStyle=function(C,T){p.setCssClass(this.container,C,T!==!1)},$.prototype.unsetStyle=function(C){p.removeCssClass(this.container,C)},$.prototype.setCursorStyle=function(C){p.setStyle(this.scroller.style,"cursor",C)},$.prototype.setMouseCursor=function(C){p.setStyle(this.scroller.style,"cursor",C)},$.prototype.attachToShadowRoot=function(){p.importCssString(x,"ace_editor.css",this.container)},$.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},$.prototype.$updateCustomScrollbar=function(C){var T=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,C===!0?(this.scrollBarV=new m(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollTop(w.data-T.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollLeft(w.data-T.scrollMargin.left)}),this.$scrollDecorator=new A(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new s(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollTop(w.data-T.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){T.$scrollAnimation||T.session.setScrollLeft(w.data-T.scrollMargin.left)}))},$.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var C=this;this.$resizeTimer=g.delayedCall(function(){C.destroyed||C.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(T){var w=T[0].contentRect.width,y=T[0].contentRect.height;Math.abs(C.$size.width-w)>1||Math.abs(C.$size.height-y)>1?C.$resizeTimer.delay():C.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},$}();L.prototype.CHANGE_CURSOR=1,L.prototype.CHANGE_MARKER=2,L.prototype.CHANGE_GUTTER=4,L.prototype.CHANGE_SCROLL=8,L.prototype.CHANGE_LINES=16,L.prototype.CHANGE_TEXT=32,L.prototype.CHANGE_SIZE=64,L.prototype.CHANGE_MARKER_BACK=128,L.prototype.CHANGE_MARKER_FRONT=256,L.prototype.CHANGE_FULL=512,L.prototype.CHANGE_H_SCROLL=1024,L.prototype.$changes=0,L.prototype.$padding=null,L.prototype.$frozen=!1,L.prototype.STEPS=8,d.implement(L.prototype,k),n.defineOptions(L.prototype,"renderer",{useResizeObserver:{set:function($){!$&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):$&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function($){this.$textLayer.setShowInvisibles($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function($){typeof $=="number"&&(this.$printMarginColumn=$),this.$showPrintMargin=!!$,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function($){this.$gutter.style.display=$?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function($){this.$gutterLayer.$useSvgGutterIcons=$},initialValue:!1},showFoldedAnnotations:{set:function($){this.$gutterLayer.$showFoldedAnnotations=$},initialValue:!1},fadeFoldWidgets:{set:function($){p.setCssClass(this.$gutter,"ace_fade-fold-widgets",$)},initialValue:!1},showFoldWidgets:{set:function($){this.$gutterLayer.setShowFoldWidgets($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function($){this.$textLayer.setDisplayIndentGuides($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function($){this.$textLayer.setHighlightIndentGuides($)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function($){this.$gutterLayer.setHighlightGutterLine($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function($){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function($){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function($){typeof $=="number"&&($=$+"px"),this.container.style.fontSize=$,this.updateFontSize()},initialValue:12},fontFamily:{set:function($){this.container.style.fontFamily=$,this.updateFontSize()}},maxLines:{set:function($){this.updateFull()}},minLines:{set:function($){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function($){this.updateFull()},initialValue:0},scrollPastEnd:{set:function($){$=+$||0,this.$scrollPastEnd!=$&&(this.$scrollPastEnd=$,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function($){this.$gutterLayer.$fixedWidth=!!$,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function($){this.$updateCustomScrollbar($)},initialValue:!1},theme:{set:function($){this.setTheme($)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=L});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,r){"use strict";var d=e("../lib/oop"),p=e("../lib/net"),g=e("../lib/event_emitter").EventEmitter,n=e("../config");function u(l){var s="importScripts('"+p.qualifyURL(l)+"');";try{return new Blob([s],{type:"application/javascript"})}catch{var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,m=new c;return m.append(s),m.getBlob("application/javascript")}}function o(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(n.get("loadWorkerFromBlob")){var s=u(l),c=window.URL||window.webkitURL,m=c.createObjectURL(s);return new Worker(m)}return new Worker(l)}var i=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){d.implement(this,g),this.$createWorkerFromOldConfig=function(l,s,c,m,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),n.get("packaged")||!e.toUrl)m=m||n.moduleUrl(s,"worker");else{var v=this.$normalizePath;m=m||v(e.toUrl("ace/worker/worker.js",null,"_"));var k={};l.forEach(function(x){k[x]=v(e.toUrl(x,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=o(m),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:k,module:s,classname:c}),this.$worker},this.onMessage=function(l){var s=l.data;switch(s.type){case"event":this._signal(s.name,{data:s.data});break;case"call":var c=this.callbacks[s.id];c&&(c(s.data),delete this.callbacks[s.id]);break;case"error":this.reportError(s.data);break;case"log":window.console&&console.log&&console.log.apply(console,s.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return p.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,s){this.$worker.postMessage({command:l,args:s})},this.call=function(l,s,c){if(c){var m=this.callbackId++;this.callbacks[m]=c,s.push(m)}this.send(l,s)},this.emit=function(l,s){try{s.data&&s.data.err&&(s.data.err={message:s.data.err.message,stack:s.data.err.stack,code:s.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:s.data}})}catch(c){console.error(c.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(i.prototype);var a=function(l,s,c){var m=null,h=!1,v=Object.create(g),k=[],x=new i({messageBuffer:k,terminate:function(){},postMessage:function(S){k.push(S),m&&(h?setTimeout(A):A())}});x.setEmitSync=function(S){h=S};var A=function(){var S=k.shift();S.command?m[S.command].apply(m,S.args):S.event&&v._signal(S.event,S.data)};return v.postMessage=function(S){x.onMessage({data:S})},v.callback=function(S,f){this.postMessage({type:"call",id:f,data:S})},v.emit=function(S,f){this.postMessage({type:"event",name:S,data:f})},n.loadModule(["worker",s],function(S){for(m=new S[c](v);k.length;)A()}),x};t.UIWorkerClient=a,t.WorkerClient=i,t.createWorker=o});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,r){"use strict";var d=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,g=e("./lib/oop"),n=function(){function u(o,i,a,l,s,c){var m=this;this.length=i,this.session=o,this.doc=o.getDocument(),this.mainClass=s,this.othersClass=c,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){m.onCursorChange()})},this.$pos=a;var h=o.getUndoManager().$undoStack||o.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),o.selection.on("changeCursor",this.$onCursorChange)}return u.prototype.setup=function(){var o=this,i=this.doc,a=this.session;this.selectionBefore=a.selection.toJSON(),a.selection.inMultiSelectMode&&a.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=a.addMarker(new d(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(s){var c=i.createAnchor(s.row,s.column);c.$insertRight=!0,c.detach(),o.others.push(c)}),a.setUndoSelect(!1)},u.prototype.showOtherMarkers=function(){if(!this.othersActive){var o=this.session,i=this;this.othersActive=!0,this.others.forEach(function(a){a.markerId=o.addMarker(new d(a.row,a.column,a.row,a.column+i.length),i.othersClass,null,!1)})}},u.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var o=0;o<this.others.length;o++)this.session.removeMarker(this.others[o].markerId)}},u.prototype.onUpdate=function(o){if(this.$updating)return this.updateAnchors(o);var i=o;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var a=o.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,l=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,s=i.start.column-this.pos.column;if(this.updateAnchors(o),l&&(this.length+=a),l&&!this.session.$fromUndo){if(o.action==="insert")for(var c=this.others.length-1;c>=0;c--){var m=this.others[c],h={row:m.row,column:m.column+s};this.doc.insertMergedLines(h,o.lines)}else if(o.action==="remove")for(var c=this.others.length-1;c>=0;c--){var m=this.others[c],h={row:m.row,column:m.column+s};this.doc.remove(new d(h.row,h.column,h.row,h.column-a))}}this.$updating=!1,this.updateMarkers()}},u.prototype.updateAnchors=function(o){this.pos.onChange(o);for(var i=this.others.length;i--;)this.others[i].onChange(o);this.updateMarkers()},u.prototype.updateMarkers=function(){if(!this.$updating){var o=this,i=this.session,a=function(s,c){i.removeMarker(s.markerId),s.markerId=i.addMarker(new d(s.row,s.column,s.row,s.column+o.length),c,null,!1)};a(this.pos,this.mainClass);for(var l=this.others.length;l--;)a(this.others[l],this.othersClass)}},u.prototype.onCursorChange=function(o){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",o)):(this.hideOtherMarkers(),this._emit("cursorLeave",o))}},u.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},u.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var o=this.session.getUndoManager(),i=(o.$undoStack||o.$undostack).length-this.$undoStackDepth,a=0;a<i;a++)o.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},u}();g.implement(n.prototype,p),t.PlaceHolder=n});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){var d=e("../lib/event"),p=e("../lib/useragent");function g(u,o){return u.row==o.row&&u.column==o.column}function n(u){var o=u.domEvent,i=o.altKey,a=o.shiftKey,l=o.ctrlKey,s=u.getAccelKey(),c=u.getButton();if(l&&p.isMac&&(c=o.button),u.editor.inMultiSelectMode&&c==2){u.editor.textInput.onContextMenu(u.domEvent);return}if(!l&&!i&&!s){c===0&&u.editor.inMultiSelectMode&&u.editor.exitMultiSelectMode();return}if(c===0){var m=u.editor,h=m.selection,v=m.inMultiSelectMode,k=u.getDocumentPosition(),x=h.getCursor(),A=u.inSelection()||h.isEmpty()&&g(k,x),S=u.x,f=u.y,L=function(O){S=O.clientX,f=O.clientY},$=m.session,C=m.renderer.pixelToScreenCoordinates(S,f),T=C,w;if(m.$mouseHandler.$enableJumpToDef)l&&i||s&&i?w=a?"block":"add":i&&m.$blockSelectEnabled&&(w="block");else if(s&&!i){if(w="add",!v&&a)return}else i&&m.$blockSelectEnabled&&(w="block");if(w&&p.isMac&&o.ctrlKey&&m.$mouseHandler.cancelContextMenu(),w=="add"){if(!v&&A)return;if(!v){var y=h.toOrientedRange();m.addSelectionMarker(y)}var b=h.rangeList.rangeAtPoint(k);m.inVirtualSelectionMode=!0,a&&(b=null,y=h.ranges[0]||y,m.removeSelectionMarker(y)),m.once("mouseup",function(){var O=h.toOrientedRange();b&&O.isEmpty()&&g(b.cursor,O.cursor)?h.substractPoint(O.cursor):(a?h.substractPoint(y.cursor):y&&(m.removeSelectionMarker(y),h.addRange(y)),h.addRange(O)),m.inVirtualSelectionMode=!1})}else if(w=="block"){u.stop(),m.inVirtualSelectionMode=!0;var E,_=[],R=function(){var O=m.renderer.pixelToScreenCoordinates(S,f),N=$.screenToDocumentPosition(O.row,O.column,O.offsetX);g(T,O)&&g(N,h.lead)||(T=O,m.selection.moveToPosition(N),m.renderer.scrollCursorIntoView(),m.removeSelectionMarkers(_),_=h.rectangularRangeBlock(T,C),m.$mouseHandler.$clickSelection&&_.length==1&&_[0].isEmpty()&&(_[0]=m.$mouseHandler.$clickSelection.clone()),_.forEach(m.addSelectionMarker,m),m.updateSelectionMarkers())};v&&!s?h.toSingleRange():!v&&s&&(E=h.toOrientedRange(),m.addSelectionMarker(E)),a?C=$.documentToScreenPosition(h.lead):h.moveToPosition(k),T={row:-1,column:-1};var M=function(O){R(),clearInterval(P),m.removeSelectionMarkers(_),_.length||(_=[h.toOrientedRange()]),E&&(m.removeSelectionMarker(E),h.toSingleRange(E));for(var N=0;N<_.length;N++)h.addRange(_[N]);m.inVirtualSelectionMode=!1,m.$mouseHandler.$clickSelection=null},I=R;d.capture(m.container,L,M);var P=setInterval(function(){I()},20);return u.preventDefault()}}}t.onMouseDown=n});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,r){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(p){p.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(p){p.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(p){p.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(p){p.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(p){p.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(p){p.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(p){p.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(p){p.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(p){p.multiSelect.rangeCount>1?p.multiSelect.joinSelections():p.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(p){p.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(p){p.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(p){p.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(p){p.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(p){return p&&p.inMultiSelectMode}}];var d=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new d(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,r){var d=e("./range_list").RangeList,p=e("./range").Range,g=e("./selection").Selection,n=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),o=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var a=e("./search").Search,l=new a;function s(x,A,S){return l.$options.wrap=!0,l.$options.needle=A,l.$options.backwards=S==-1,l.find(x)}var c=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(c.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(x,A){if(x){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(x),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),A||this.fromOrientedRange(x);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}x.cursor||(x.cursor=x.end);var f=this.rangeList.add(x);return this.$onAddRange(x),f.length&&this.$onRemoveRange(f),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),A||this.fromOrientedRange(x)}},this.toSingleRange=function(x){x=x||this.ranges[0];var A=this.rangeList.removeAll();A.length&&this.$onRemoveRange(A),x&&this.fromOrientedRange(x)},this.substractPoint=function(x){var A=this.rangeList.substractPoint(x);if(A)return this.$onRemoveRange(A),A[0]},this.mergeOverlappingRanges=function(){var x=this.rangeList.merge();x.length&&this.$onRemoveRange(x)},this.$onAddRange=function(x){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(x),this._signal("addRange",{range:x})},this.$onRemoveRange=function(x){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var A=this.rangeList.ranges.pop();x.push(A),this.rangeCount=0}for(var S=x.length;S--;){var f=this.ranges.indexOf(x[S]);this.ranges.splice(f,1)}this._signal("removeRange",{ranges:x}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),A=A||this.ranges[0],A&&!A.isEqual(this.getRange())&&this.fromOrientedRange(A)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new d,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var x=this.ranges.length?this.ranges:[this.getRange()],A=[],S=0;S<x.length;S++){var f=x[S],L=f.start.row,$=f.end.row;if(L===$)A.push(f.clone());else{for(A.push(new p(L,f.start.column,L,this.session.getLine(L).length));++L<$;)A.push(this.getLineRange(L,!0));A.push(new p($,0,$,f.end.column))}S==0&&!this.isBackwards()&&(A=A.reverse())}this.toSingleRange();for(var S=A.length;S--;)this.addRange(A[S])},this.joinSelections=function(){var x=this.rangeList.ranges,A=x[x.length-1],S=p.fromPoints(x[0].start,A.end);this.toSingleRange(),this.setSelectionRange(S,A.cursor==A.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var x=this.rangeList.ranges,A=x[x.length-1],S=p.fromPoints(x[0].start,A.end);this.toSingleRange(),this.setSelectionRange(S,A.cursor==A.start)}else{var f=this.session.documentToScreenPosition(this.cursor),L=this.session.documentToScreenPosition(this.anchor),$=this.rectangularRangeBlock(f,L);$.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(x,A,S){var f=[],L=x.column<A.column;if(L)var $=x.column,C=A.column,T=x.offsetX,w=A.offsetX;else var $=A.column,C=x.column,T=A.offsetX,w=x.offsetX;var y=x.row<A.row;if(y)var b=x.row,E=A.row;else var b=A.row,E=x.row;$<0&&($=0),b<0&&(b=0),b==E&&(S=!0);for(var _,R=b;R<=E;R++){var M=p.fromPoints(this.session.screenToDocumentPosition(R,$,T),this.session.screenToDocumentPosition(R,C,w));if(M.isEmpty()){if(_&&h(M.end,_))break;_=M.end}M.cursor=L?M.start:M.end,f.push(M)}if(y&&f.reverse(),!S){for(var I=f.length-1;f[I].isEmpty()&&I>0;)I--;if(I>0)for(var P=0;f[P].isEmpty();)P++;for(var O=I;O>=P;O--)f[O].isEmpty()&&f.splice(O,1)}return f}}.call(g.prototype);var m=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(x){x.cursor||(x.cursor=x.end);var A=this.getSelectionStyle();return x.marker=this.session.addMarker(x,"ace_selection",A),this.session.$selectionMarkers.push(x),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,x},this.removeSelectionMarker=function(x){if(x.marker){this.session.removeMarker(x.marker);var A=this.session.$selectionMarkers.indexOf(x);A!=-1&&this.session.$selectionMarkers.splice(A,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(x){for(var A=this.session.$selectionMarkers,S=x.length;S--;){var f=x[S];if(f.marker){this.session.removeMarker(f.marker);var L=A.indexOf(f);L!=-1&&A.splice(L,1)}}this.session.selectionMarkerCount=A.length},this.$onAddRange=function(x){this.addSelectionMarker(x.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(x){this.removeSelectionMarkers(x.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(x){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(x){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(x){var A=x.command,S=x.editor;if(S.multiSelect){if(A.multiSelectAction)A.multiSelectAction=="forEach"?f=S.forEachSelection(A,x.args):A.multiSelectAction=="forEachLine"?f=S.forEachSelection(A,x.args,!0):A.multiSelectAction=="single"?(S.exitMultiSelectMode(),f=A.exec(S,x.args||{})):f=A.multiSelectAction(S,x.args||{});else{var f=A.exec(S,x.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return f}},this.forEachSelection=function(x,A,S){if(!this.inVirtualSelectionMode){var f=S&&S.keepOrder,L=S==!0||S&&S.$byLines,$=this.session,C=this.selection,T=C.rangeList,w=(f?C:T).ranges,y;if(!w.length)return x.exec?x.exec(this,A||{}):x(this,A||{});var b=C._eventRegistry;C._eventRegistry={};var E=new g($);this.inVirtualSelectionMode=!0;for(var _=w.length;_--;){if(L)for(;_>0&&w[_].start.row==w[_-1].end.row;)_--;E.fromOrientedRange(w[_]),E.index=_,this.selection=$.selection=E;var R=x.exec?x.exec(this,A||{}):x(this,A||{});!y&&R!==void 0&&(y=R),E.toOrientedRange(w[_])}E.detach(),this.selection=$.selection=C,this.inVirtualSelectionMode=!1,C._eventRegistry=b,C.mergeOverlappingRanges(),C.ranges[0]&&C.fromOrientedRange(C.ranges[0]);var M=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),M&&M.from==M.to&&this.renderer.animateScrolling(M.from),y}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var x="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var A=this.multiSelect.rangeList.ranges,S=[],f=0;f<A.length;f++)S.push(this.session.getTextRange(A[f]));var L=this.session.getDocument().getNewLineCharacter();x=S.join(L),x.length==(S.length-1)*L.length&&(x="")}else this.selection.isEmpty()||(x=this.session.getTextRange(this.getSelectionRange()));return x},this.$checkMultiselectChange=function(x,A){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&A==this.multiSelect.anchor)return;var f=A==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;f.row!=A.row||this.session.$clipPositionToDocument(f.row,f.column).column!=A.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(x,A,S){if(A=A||{},A.needle=x||A.needle,A.needle==null){var f=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();A.needle=this.session.getTextRange(f)}this.$search.set(A);var L=this.$search.findAll(this.session);if(!L.length)return 0;var $=this.multiSelect;S||$.toSingleRange(L[0]);for(var C=L.length;C--;)$.addRange(L[C],!0);return f&&$.rangeList.rangeAtPoint(f.start)&&$.addRange(f,!0),L.length},this.selectMoreLines=function(x,A){var S=this.selection.toOrientedRange(),f=S.cursor==S.end,L=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(L.column=this.selection.$desiredColumn);var $=this.session.screenToDocumentPosition(L.row+x,L.column);if(S.isEmpty())var T=$;else var C=this.session.documentToScreenPosition(f?S.end:S.start),T=this.session.screenToDocumentPosition(C.row+x,C.column);if(f){var w=p.fromPoints($,T);w.cursor=w.start}else{var w=p.fromPoints(T,$);w.cursor=w.end}if(w.desiredColumn=L.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(A)var y=S.cursor;this.selection.addRange(w),y&&this.selection.substractPoint(y)},this.transposeSelections=function(x){for(var A=this.session,S=A.multiSelect,f=S.ranges,L=f.length;L--;){var $=f[L];if($.isEmpty()){var C=A.getWordRange($.start.row,$.start.column);$.start.row=C.start.row,$.start.column=C.start.column,$.end.row=C.end.row,$.end.column=C.end.column}}S.mergeOverlappingRanges();for(var T=[],L=f.length;L--;){var $=f[L];T.unshift(A.getTextRange($))}x<0?T.unshift(T.pop()):T.push(T.shift());for(var L=f.length;L--;){var $=f[L],w=$.clone();A.replace($,T[L]),$.start.row=w.start.row,$.start.column=w.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(x,A,S){var f=this.session,L=f.multiSelect,$=L.toOrientedRange();if(!($.isEmpty()&&($=f.getWordRange($.start.row,$.start.column),$.cursor=x==-1?$.start:$.end,this.multiSelect.addRange($),S))){var C=f.getTextRange($),T=s(f,C,x);T&&(T.cursor=x==-1?T.start:T.end,this.session.unfold(T),this.multiSelect.addRange(T),this.renderer.scrollCursorIntoView(null,.5)),A&&this.multiSelect.substractPoint($.cursor)}},this.alignCursors=function(){var x=this.session,A=x.multiSelect,S=A.ranges,f=-1,L=S.filter(function(I){if(I.cursor.row==f)return!0;f=I.cursor.row});if(!S.length||L.length==S.length-1){var $=this.selection.getRange(),C=$.start.row,T=$.end.row,w=C==T;if(w){var y=this.session.getLength(),b;do b=this.session.getLine(T);while(/[=:]/.test(b)&&++T<y);do b=this.session.getLine(C);while(/[=:]/.test(b)&&--C>0);C<0&&(C=0),T>=y&&(T=y-1)}var E=this.session.removeFullLines(C,T);E=this.$reAlignText(E,w),this.session.insert({row:C,column:0},E.join(`
`)+`
`),w||($.start.column=0,$.end.column=E[E.length-1].length),this.selection.setRange($)}else{L.forEach(function(I){A.substractPoint(I.cursor)});var _=0,R=1/0,M=S.map(function(I){var P=I.cursor,O=x.getLine(P.row),N=O.substr(P.column).search(/\S/g);return N==-1&&(N=0),P.column>_&&(_=P.column),N<R&&(R=N),N});S.forEach(function(I,P){var O=I.cursor,N=_-O.column,D=M[P]-R;N>D?x.insert(O,o.stringRepeat(" ",N-D)):x.remove(new p(O.row,O.column,O.row,O.column-N+D)),I.start.column=I.end.column=_,I.start.row=I.end.row=O.row,I.cursor=I.end}),A.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(x,A){var S=!0,f=!0,L,$,C;return x.map(function(E){var _=E.match(/(\s*)(.*?)(\s*)([=:].*)/);return _?L==null?(L=_[1].length,$=_[2].length,C=_[3].length,_):(L+$+C!=_[1].length+_[2].length+_[3].length&&(f=!1),L!=_[1].length&&(S=!1),L>_[1].length&&(L=_[1].length),$<_[2].length&&($=_[2].length),C>_[3].length&&(C=_[3].length),_):[E]}).map(A?w:S?f?y:w:b);function T(E){return o.stringRepeat(" ",E)}function w(E){return E[2]?T(L)+E[2]+T($-E[2].length+C)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}function y(E){return E[2]?T(L+$-E[2].length)+E[2]+T(C)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}function b(E){return E[2]?T(L)+E[2]+T(C)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}}}).call(m.prototype);function h(x,A){return x.row==A.row&&x.column==A.column}t.onSessionChange=function(x){var A=x.session;A&&!A.multiSelect&&(A.$selectionMarkers=[],A.selection.$initRangeList(),A.multiSelect=A.selection),this.multiSelect=A&&A.multiSelect;var S=x.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),A&&(A.multiSelect.on("addRange",this.$onAddRange),A.multiSelect.on("removeRange",this.$onRemoveRange),A.multiSelect.on("multiSelect",this.$onMultiSelect),A.multiSelect.on("singleSelect",this.$onSingleSelect),A.multiSelect.lead.on("change",this.$checkMultiselectChange),A.multiSelect.anchor.on("change",this.$checkMultiselectChange)),A&&this.inMultiSelectMode!=A.selection.inMultiSelectMode&&(A.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(x){x.$multiselectOnSessionChange||(x.$onAddRange=x.$onAddRange.bind(x),x.$onRemoveRange=x.$onRemoveRange.bind(x),x.$onMultiSelect=x.$onMultiSelect.bind(x),x.$onSingleSelect=x.$onSingleSelect.bind(x),x.$multiselectOnSessionChange=t.onSessionChange.bind(x),x.$checkMultiselectChange=x.$checkMultiselectChange.bind(x),x.$multiselectOnSessionChange(x),x.on("changeSession",x.$multiselectOnSessionChange),x.on("mousedown",n),x.commands.addCommands(i.defaultCommands),k(x))}function k(x){if(!x.textInput)return;var A=x.textInput.getElement(),S=!1;u.addListener(A,"keydown",function(L){var $=L.keyCode==18&&!(L.ctrlKey||L.shiftKey||L.metaKey);x.$blockSelectEnabled&&$?S||(x.renderer.setMouseCursor("crosshair"),S=!0):S&&f()},x),u.addListener(A,"keyup",f,x),u.addListener(A,"blur",f,x);function f(L){S&&(x.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=v,e("./config").defineOptions(m.prototype,"editor",{enableMultiselect:{set:function(x){v(this),x?this.on("mousedown",n):this.off("mousedown",n)},value:!0},enableBlockSelect:{set:function(x){this.$blockSelectEnabled=x},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("../../range").Range,p=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(g,n,u){var o=g.getLine(u);return this.foldingStartMarker.test(o)?"start":n=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(o)?"end":""},this.getFoldWidgetRange=function(g,n,u){return null},this.indentationBlock=function(g,n,u){var o=/\S/,i=g.getLine(n),a=i.search(o);if(a!=-1){for(var l=u||i.length,s=g.getLength(),c=n,m=n;++n<s;){var h=g.getLine(n).search(o);if(h!=-1){if(h<=a){var v=g.getTokenAt(n,0);if(!v||v.type!=="string")break}m=n}}if(m>c){var k=g.getLine(m).length;return new d(c,l,m,k)}}},this.openingBracketBlock=function(g,n,u,o,i){var a={row:u,column:o+1},l=g.$findClosingBracket(n,a,i);if(l){var s=g.foldWidgets[l.row];return s==null&&(s=g.getFoldWidget(l.row)),s=="start"&&l.row>a.row&&(l.row--,l.column=g.getLine(l.row).length),d.fromPoints(a,l)}},this.closingBracketBlock=function(g,n,u,o,i){var a={row:u,column:o},l=g.$findOpeningBracket(n,a);if(l)return l.column++,a.column--,d.fromPoints(l,a)}}).call(p.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,r){"use strict";var d=e("../line_widgets").LineWidgets,p=e("../lib/dom"),g=e("../range").Range,n=e("../config").nls;function u(i,a,l){for(var s=0,c=i.length-1;s<=c;){var m=s+c>>1,h=l(a,i[m]);if(h>0)s=m+1;else if(h<0)c=m-1;else return m}return-(s+1)}function o(i,a,l){var s=i.getAnnotations().sort(g.comparePoints);if(s.length){var c=u(s,{row:a,column:-1},g.comparePoints);c<0&&(c=-c-1),c>=s.length?c=l>0?0:s.length-1:c===0&&l<0&&(c=s.length-1);var m=s[c];if(!(!m||!l)){if(m.row===a){do m=s[c+=l];while(m&&m.row===a);if(!m)return s.slice()}var h=[];a=m.row;do h[l<0?"unshift":"push"](m),m=s[c+=l];while(m&&m.row==a);return h.length&&h}}}t.showErrorMarker=function(i,a){var l=i.session;l.widgetManager||(l.widgetManager=new d(l),l.widgetManager.attach(i));var s=i.getCursorPosition(),c=s.row,m=l.widgetManager.getWidgetsAtRow(c).filter(function($){return $.type=="errorMarker"})[0];m?m.destroy():c-=a;var h=o(l,c,a),v;if(h){var k=h[0];s.column=(k.pos&&typeof k.column!="number"?k.pos.sc:k.column)||0,s.row=k.row,v=i.renderer.$gutterLayer.$annotations[s.row]}else{if(m)return;v={displayText:[n("error-marker.good-state","Looks good!")],className:"ace_ok"}}i.session.unfold(s.row),i.selection.moveToPosition(s);var x={row:s.row,fixedWidth:!0,coverGutter:!0,el:p.createElement("div"),type:"errorMarker"},A=x.el.appendChild(p.createElement("div")),S=x.el.appendChild(p.createElement("div"));S.className="error_widget_arrow "+v.className;var f=i.renderer.$cursorLayer.getPixelPosition(s).left;S.style.left=f+i.renderer.gutterWidth-5+"px",x.el.className="error_widget_wrapper",A.className="error_widget "+v.className,v.displayText.forEach(function($,C){A.appendChild(p.createTextNode($)),C<v.displayText.length-1&&A.appendChild(p.createElement("br"))}),A.appendChild(p.createElement("div"));var L=function($,C,T){if(C===0&&(T==="esc"||T==="return"))return x.destroy(),{command:"null"}};x.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(L),l.widgetManager.removeLineWidget(x),i.off("changeSelection",x.destroy),i.off("changeSession",x.destroy),i.off("mouseup",x.destroy),i.off("change",x.destroy))},i.keyBinding.addKeyboardHandler(L),i.on("changeSelection",x.destroy),i.on("changeSession",x.destroy),i.on("mouseup",x.destroy),i.on("change",x.destroy),i.session.widgetManager.addLineWidget(x),x.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:x.el.offsetHeight})},p.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,r){"use strict";e("./loader_build")(t);var d=e("./lib/dom"),p=e("./range").Range,g=e("./editor").Editor,n=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,o=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,a){if(typeof i=="string"){var l=i;if(i=document.getElementById(l),!i)throw new Error("ace.edit can't find div #"+l)}if(i&&i.env&&i.env.editor instanceof g)return i.env.editor;var s="";if(i&&/input|textarea/i.test(i.tagName)){var c=i;s=c.value,i=d.createElement("pre"),c.parentNode.replaceChild(i,c)}else i&&(s=i.textContent,i.innerHTML="");var m=t.createEditSession(s),h=new g(new o(i),m,a),v={document:m,editor:h,onResize:h.resize.bind(h,null)};return c&&(v.textarea=c),h.on("destroy",function(){v.editor.container.env=null}),h.container.env=h.env=v,h},t.createEditSession=function(i,a){var l=new n(i,a);return l.setUndoManager(new u),l},t.Range=p,t.Editor=g,t.EditSession=n,t.UndoManager=u,t.VirtualRenderer=o,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var r in e)e.hasOwnProperty(r)&&(t.ace[r]=e[r]);t.ace.default=t.ace,typeof ga=="object"&&typeof bp=="object"&&ga&&(ga.exports=t.ace)})})()});var vp=Mn((Xs,Js)=>{(function(e,t){typeof Xs=="object"&&typeof Js<"u"?Js.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.DOMPurify=t())})(Xs,function(){"use strict";let{entries:e,setPrototypeOf:t,isFrozen:r,getPrototypeOf:d,getOwnPropertyDescriptor:p}=Object,{freeze:g,seal:n,create:u}=Object,{apply:o,construct:i}=typeof Reflect<"u"&&Reflect;g||(g=function(V){return V}),n||(n=function(V){return V}),o||(o=function(V,st,it){return V.apply(st,it)}),i||(i=function(V,st){return new V(...st)});let a=L(Array.prototype.forEach),l=L(Array.prototype.pop),s=L(Array.prototype.push),c=L(String.prototype.toLowerCase),m=L(String.prototype.toString),h=L(String.prototype.match),v=L(String.prototype.replace),k=L(String.prototype.indexOf),x=L(String.prototype.trim),A=L(Object.prototype.hasOwnProperty),S=L(RegExp.prototype.test),f=$(TypeError);function L(K){return function(V){for(var st=arguments.length,it=new Array(st>1?st-1:0),bt=1;bt<st;bt++)it[bt-1]=arguments[bt];return o(K,V,it)}}function $(K){return function(){for(var V=arguments.length,st=new Array(V),it=0;it<V;it++)st[it]=arguments[it];return i(K,st)}}function C(K,V){let st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c;t&&t(K,null);let it=V.length;for(;it--;){let bt=V[it];if(typeof bt=="string"){let H=st(bt);H!==bt&&(r(V)||(V[it]=H),bt=H)}K[bt]=!0}return K}function T(K){for(let V=0;V<K.length;V++)A(K,V)||(K[V]=null);return K}function w(K){let V=u(null);for(let[st,it]of e(K))A(K,st)&&(Array.isArray(it)?V[st]=T(it):it&&typeof it=="object"&&it.constructor===Object?V[st]=w(it):V[st]=it);return V}function y(K,V){for(;K!==null;){let it=p(K,V);if(it){if(it.get)return L(it.get);if(typeof it.value=="function")return L(it.value)}K=d(K)}function st(){return null}return st}let b=g(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),E=g(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_=g(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=g(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=g(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=g(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=g(["#text"]),O=g(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),N=g(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D=g(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=g(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=n(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=n(/<%[\w\W]*|[\w\W]*%>/gm),j=n(/\${[\w\W]*}/gm),Z=n(/^data-[\-\w.\u00B7-\uFFFF]/),Y=n(/^aria-[\-\w]+$/),q=n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nt=n(/^(?:\w+script|data):/i),ot=n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wt=n(/^html$/i),_t=n(/^[a-z][.\w]*(-[.\w]+)+$/i);var vt=Object.freeze({__proto__:null,MUSTACHE_EXPR:z,ERB_EXPR:W,TMPLIT_EXPR:j,DATA_ATTR:Z,ARIA_ATTR:Y,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:nt,ATTR_WHITESPACE:ot,DOCTYPE_NAME:wt,CUSTOM_ELEMENT:_t});let U={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},X=function(){return typeof window>"u"?null:window},at=function(V,st){if(typeof V!="object"||typeof V.createPolicy!="function")return null;let it=null,bt="data-tt-policy-suffix";st&&st.hasAttribute(bt)&&(it=st.getAttribute(bt));let H="dompurify"+(it?"#"+it:"");try{return V.createPolicy(H,{createHTML(G){return G},createScriptURL(G){return G}})}catch{return console.warn("TrustedTypes policy "+H+" could not be created."),null}};function tt(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X(),V=ut=>tt(ut);if(V.version="3.1.6",V.removed=[],!K||!K.document||K.document.nodeType!==U.document)return V.isSupported=!1,V;let{document:st}=K,it=st,bt=it.currentScript,{DocumentFragment:H,HTMLTemplateElement:G,Node:rt,Element:ft,NodeFilter:kt,NamedNodeMap:Mt=K.NamedNodeMap||K.MozNamedAttrMap,HTMLFormElement:It,DOMParser:Pt,trustedTypes:Dt}=K,Lt=ft.prototype,Xt=y(Lt,"cloneNode"),rr=y(Lt,"remove"),he=y(Lt,"nextSibling"),Ui=y(Lt,"childNodes"),or=y(Lt,"parentNode");if(typeof G=="function"){let ut=st.createElement("template");ut.content&&ut.content.ownerDocument&&(st=ut.content.ownerDocument)}let Le,_o="",{implementation:ti,createNodeIterator:Hi,createDocumentFragment:So,getElementsByTagName:be}=st,{importNode:se}=it,te={};V.isSupported=typeof e=="function"&&typeof or=="function"&&ti&&ti.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:$e,ERB_EXPR:we,TMPLIT_EXPR:le,DATA_ATTR:br,ARIA_ATTR:fr,IS_SCRIPT_OR_DATA:no,ATTR_WHITESPACE:rd,CUSTOM_ELEMENT:Im}=vt,{IS_ALLOWED_URI:od}=vt,xe=null,id=C({},[...b,...E,..._,...M,...P]),ke=null,nd=C({},[...O,...N,...D,...F]),de=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ji=null,za=null,ad=!0,Ba=!0,sd=!1,ld=!0,ei=!1,Ua=!0,Co=!1,Ha=!1,ja=!1,ri=!1,Tn=!1,An=!1,dd=!0,cd=!1,Om="user-content-",Wa=!0,Wi=!1,oi={},ii=null,pd=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ud=null,md=C({},["audio","video","img","source","image","track"]),Va=null,gd=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ln="http://www.w3.org/1998/Math/MathML",$n="http://www.w3.org/2000/svg",Br="http://www.w3.org/1999/xhtml",ni=Br,Ga=!1,Ka=null,Pm=C({},[Ln,$n,Br],m),Vi=null,Dm=["application/xhtml+xml","text/html"],Nm="text/html",Ee=null,ai=null,Fm=st.createElement("form"),hd=function(B){return B instanceof RegExp||B instanceof Function},Ya=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ai&&ai===B)){if((!B||typeof B!="object")&&(B={}),B=w(B),Vi=Dm.indexOf(B.PARSER_MEDIA_TYPE)===-1?Nm:B.PARSER_MEDIA_TYPE,Ee=Vi==="application/xhtml+xml"?m:c,xe=A(B,"ALLOWED_TAGS")?C({},B.ALLOWED_TAGS,Ee):id,ke=A(B,"ALLOWED_ATTR")?C({},B.ALLOWED_ATTR,Ee):nd,Ka=A(B,"ALLOWED_NAMESPACES")?C({},B.ALLOWED_NAMESPACES,m):Pm,Va=A(B,"ADD_URI_SAFE_ATTR")?C(w(gd),B.ADD_URI_SAFE_ATTR,Ee):gd,ud=A(B,"ADD_DATA_URI_TAGS")?C(w(md),B.ADD_DATA_URI_TAGS,Ee):md,ii=A(B,"FORBID_CONTENTS")?C({},B.FORBID_CONTENTS,Ee):pd,ji=A(B,"FORBID_TAGS")?C({},B.FORBID_TAGS,Ee):{},za=A(B,"FORBID_ATTR")?C({},B.FORBID_ATTR,Ee):{},oi=A(B,"USE_PROFILES")?B.USE_PROFILES:!1,ad=B.ALLOW_ARIA_ATTR!==!1,Ba=B.ALLOW_DATA_ATTR!==!1,sd=B.ALLOW_UNKNOWN_PROTOCOLS||!1,ld=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ei=B.SAFE_FOR_TEMPLATES||!1,Ua=B.SAFE_FOR_XML!==!1,Co=B.WHOLE_DOCUMENT||!1,ri=B.RETURN_DOM||!1,Tn=B.RETURN_DOM_FRAGMENT||!1,An=B.RETURN_TRUSTED_TYPE||!1,ja=B.FORCE_BODY||!1,dd=B.SANITIZE_DOM!==!1,cd=B.SANITIZE_NAMED_PROPS||!1,Wa=B.KEEP_CONTENT!==!1,Wi=B.IN_PLACE||!1,od=B.ALLOWED_URI_REGEXP||q,ni=B.NAMESPACE||Br,de=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&hd(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(de.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&hd(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(de.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(de.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ei&&(Ba=!1),Tn&&(ri=!0),oi&&(xe=C({},P),ke=[],oi.html===!0&&(C(xe,b),C(ke,O)),oi.svg===!0&&(C(xe,E),C(ke,N),C(ke,F)),oi.svgFilters===!0&&(C(xe,_),C(ke,N),C(ke,F)),oi.mathMl===!0&&(C(xe,M),C(ke,D),C(ke,F))),B.ADD_TAGS&&(xe===id&&(xe=w(xe)),C(xe,B.ADD_TAGS,Ee)),B.ADD_ATTR&&(ke===nd&&(ke=w(ke)),C(ke,B.ADD_ATTR,Ee)),B.ADD_URI_SAFE_ATTR&&C(Va,B.ADD_URI_SAFE_ATTR,Ee),B.FORBID_CONTENTS&&(ii===pd&&(ii=w(ii)),C(ii,B.FORBID_CONTENTS,Ee)),Wa&&(xe["#text"]=!0),Co&&C(xe,["html","head","body"]),xe.table&&(C(xe,["tbody"]),delete ji.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw f('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw f('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Le=B.TRUSTED_TYPES_POLICY,_o=Le.createHTML("")}else Le===void 0&&(Le=at(Dt,bt)),Le!==null&&typeof _o=="string"&&(_o=Le.createHTML(""));g&&g(B),ai=B}},bd=C({},["mi","mo","mn","ms","mtext"]),fd=C({},["foreignobject","annotation-xml"]),zm=C({},["title","style","font","a","script"]),vd=C({},[...E,..._,...R]),wd=C({},[...M,...I]),Bm=function(B){let et=or(B);(!et||!et.tagName)&&(et={namespaceURI:ni,tagName:"template"});let dt=c(B.tagName),Jt=c(et.tagName);return Ka[B.namespaceURI]?B.namespaceURI===$n?et.namespaceURI===Br?dt==="svg":et.namespaceURI===Ln?dt==="svg"&&(Jt==="annotation-xml"||bd[Jt]):!!vd[dt]:B.namespaceURI===Ln?et.namespaceURI===Br?dt==="math":et.namespaceURI===$n?dt==="math"&&fd[Jt]:!!wd[dt]:B.namespaceURI===Br?et.namespaceURI===$n&&!fd[Jt]||et.namespaceURI===Ln&&!bd[Jt]?!1:!wd[dt]&&(zm[dt]||!vd[dt]):!!(Vi==="application/xhtml+xml"&&Ka[B.namespaceURI]):!1},Lr=function(B){s(V.removed,{element:B});try{or(B).removeChild(B)}catch{rr(B)}},Rn=function(B,et){try{s(V.removed,{attribute:et.getAttributeNode(B),from:et})}catch{s(V.removed,{attribute:null,from:et})}if(et.removeAttribute(B),B==="is"&&!ke[B])if(ri||Tn)try{Lr(et)}catch{}else try{et.setAttribute(B,"")}catch{}},yd=function(B){let et=null,dt=null;if(ja)B="<remove></remove>"+B;else{let Re=h(B,/^[\r\n\t ]+/);dt=Re&&Re[0]}Vi==="application/xhtml+xml"&&ni===Br&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");let Jt=Le?Le.createHTML(B):B;if(ni===Br)try{et=new Pt().parseFromString(Jt,Vi)}catch{}if(!et||!et.documentElement){et=ti.createDocument(ni,"template",null);try{et.documentElement.innerHTML=Ga?_o:Jt}catch{}}let Oe=et.body||et.documentElement;return B&&dt&&Oe.insertBefore(st.createTextNode(dt),Oe.childNodes[0]||null),ni===Br?be.call(et,Co?"html":"body")[0]:Co?et.documentElement:Oe},xd=function(B){return Hi.call(B.ownerDocument||B,B,kt.SHOW_ELEMENT|kt.SHOW_COMMENT|kt.SHOW_TEXT|kt.SHOW_PROCESSING_INSTRUCTION|kt.SHOW_CDATA_SECTION,null)},kd=function(B){return B instanceof It&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof Mt)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Ed=function(B){return typeof rt=="function"&&B instanceof rt},Ur=function(B,et,dt){te[B]&&a(te[B],Jt=>{Jt.call(V,et,dt,ai)})},_d=function(B){let et=null;if(Ur("beforeSanitizeElements",B,null),kd(B))return Lr(B),!0;let dt=Ee(B.nodeName);if(Ur("uponSanitizeElement",B,{tagName:dt,allowedTags:xe}),B.hasChildNodes()&&!Ed(B.firstElementChild)&&S(/<[/\w]/g,B.innerHTML)&&S(/<[/\w]/g,B.textContent)||B.nodeType===U.progressingInstruction||Ua&&B.nodeType===U.comment&&S(/<[/\w]/g,B.data))return Lr(B),!0;if(!xe[dt]||ji[dt]){if(!ji[dt]&&Cd(dt)&&(de.tagNameCheck instanceof RegExp&&S(de.tagNameCheck,dt)||de.tagNameCheck instanceof Function&&de.tagNameCheck(dt)))return!1;if(Wa&&!ii[dt]){let Jt=or(B)||B.parentNode,Oe=Ui(B)||B.childNodes;if(Oe&&Jt){let Re=Oe.length;for(let We=Re-1;We>=0;--We){let $r=Xt(Oe[We],!0);$r.__removalCount=(B.__removalCount||0)+1,Jt.insertBefore($r,he(B))}}}return Lr(B),!0}return B instanceof ft&&!Bm(B)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&S(/<\/no(script|embed|frames)/i,B.innerHTML)?(Lr(B),!0):(ei&&B.nodeType===U.text&&(et=B.textContent,a([$e,we,le],Jt=>{et=v(et,Jt," ")}),B.textContent!==et&&(s(V.removed,{element:B.cloneNode()}),B.textContent=et)),Ur("afterSanitizeElements",B,null),!1)},Sd=function(B,et,dt){if(dd&&(et==="id"||et==="name")&&(dt in st||dt in Fm))return!1;if(!(Ba&&!za[et]&&S(br,et))){if(!(ad&&S(fr,et))){if(!ke[et]||za[et]){if(!(Cd(B)&&(de.tagNameCheck instanceof RegExp&&S(de.tagNameCheck,B)||de.tagNameCheck instanceof Function&&de.tagNameCheck(B))&&(de.attributeNameCheck instanceof RegExp&&S(de.attributeNameCheck,et)||de.attributeNameCheck instanceof Function&&de.attributeNameCheck(et))||et==="is"&&de.allowCustomizedBuiltInElements&&(de.tagNameCheck instanceof RegExp&&S(de.tagNameCheck,dt)||de.tagNameCheck instanceof Function&&de.tagNameCheck(dt))))return!1}else if(!Va[et]){if(!S(od,v(dt,rd,""))){if(!((et==="src"||et==="xlink:href"||et==="href")&&B!=="script"&&k(dt,"data:")===0&&ud[B])){if(!(sd&&!S(no,v(dt,rd,"")))){if(dt)return!1}}}}}}return!0},Cd=function(B){return B!=="annotation-xml"&&h(B,Im)},Td=function(B){Ur("beforeSanitizeAttributes",B,null);let{attributes:et}=B;if(!et)return;let dt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke},Jt=et.length;for(;Jt--;){let Oe=et[Jt],{name:Re,namespaceURI:We,value:$r}=Oe,Gi=Ee(Re),Be=Re==="value"?$r:x($r);if(dt.attrName=Gi,dt.attrValue=Be,dt.keepAttr=!0,dt.forceKeepAttr=void 0,Ur("uponSanitizeAttribute",B,dt),Be=dt.attrValue,Ua&&S(/((--!?|])>)|<\/(style|title)/i,Be)){Rn(Re,B);continue}if(dt.forceKeepAttr||(Rn(Re,B),!dt.keepAttr))continue;if(!ld&&S(/\/>/i,Be)){Rn(Re,B);continue}ei&&a([$e,we,le],Ld=>{Be=v(Be,Ld," ")});let Ad=Ee(B.nodeName);if(Sd(Ad,Gi,Be)){if(cd&&(Gi==="id"||Gi==="name")&&(Rn(Re,B),Be=Om+Be),Le&&typeof Dt=="object"&&typeof Dt.getAttributeType=="function"&&!We)switch(Dt.getAttributeType(Ad,Gi)){case"TrustedHTML":{Be=Le.createHTML(Be);break}case"TrustedScriptURL":{Be=Le.createScriptURL(Be);break}}try{We?B.setAttributeNS(We,Re,Be):B.setAttribute(Re,Be),kd(B)?Lr(B):l(V.removed)}catch{}}}Ur("afterSanitizeAttributes",B,null)},Um=function ut(B){let et=null,dt=xd(B);for(Ur("beforeSanitizeShadowDOM",B,null);et=dt.nextNode();)Ur("uponSanitizeShadowNode",et,null),!_d(et)&&(et.content instanceof H&&ut(et.content),Td(et));Ur("afterSanitizeShadowDOM",B,null)};return V.sanitize=function(ut){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=null,dt=null,Jt=null,Oe=null;if(Ga=!ut,Ga&&(ut="<!-->"),typeof ut!="string"&&!Ed(ut))if(typeof ut.toString=="function"){if(ut=ut.toString(),typeof ut!="string")throw f("dirty is not a string, aborting")}else throw f("toString is not a function");if(!V.isSupported)return ut;if(Ha||Ya(B),V.removed=[],typeof ut=="string"&&(Wi=!1),Wi){if(ut.nodeName){let $r=Ee(ut.nodeName);if(!xe[$r]||ji[$r])throw f("root node is forbidden and cannot be sanitized in-place")}}else if(ut instanceof rt)et=yd("<!---->"),dt=et.ownerDocument.importNode(ut,!0),dt.nodeType===U.element&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?et=dt:et.appendChild(dt);else{if(!ri&&!ei&&!Co&&ut.indexOf("<")===-1)return Le&&An?Le.createHTML(ut):ut;if(et=yd(ut),!et)return ri?null:An?_o:""}et&&ja&&Lr(et.firstChild);let Re=xd(Wi?ut:et);for(;Jt=Re.nextNode();)_d(Jt)||(Jt.content instanceof H&&Um(Jt.content),Td(Jt));if(Wi)return ut;if(ri){if(Tn)for(Oe=So.call(et.ownerDocument);et.firstChild;)Oe.appendChild(et.firstChild);else Oe=et;return(ke.shadowroot||ke.shadowrootmode)&&(Oe=se.call(it,Oe,!0)),Oe}let We=Co?et.outerHTML:et.innerHTML;return Co&&xe["!doctype"]&&et.ownerDocument&&et.ownerDocument.doctype&&et.ownerDocument.doctype.name&&S(wt,et.ownerDocument.doctype.name)&&(We="<!DOCTYPE "+et.ownerDocument.doctype.name+`>
`+We),ei&&a([$e,we,le],$r=>{We=v(We,$r," ")}),Le&&An?Le.createHTML(We):We},V.setConfig=function(){let ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ya(ut),Ha=!0},V.clearConfig=function(){ai=null,Ha=!1},V.isValidAttribute=function(ut,B,et){ai||Ya({});let dt=Ee(ut),Jt=Ee(B);return Sd(dt,Jt,et)},V.addHook=function(ut,B){typeof B=="function"&&(te[ut]=te[ut]||[],s(te[ut],B))},V.removeHook=function(ut){if(te[ut])return l(te[ut])},V.removeHooks=function(ut){te[ut]&&(te[ut]=[])},V.removeAllHooks=function(){te={}},V}var ct=tt();return ct})});var jn={};Km(jn,{afterMain:()=>Pd,afterRead:()=>Md,afterWrite:()=>Fd,applyStyles:()=>li,arrow:()=>Pn,auto:()=>Ki,basePlacements:()=>Hr,beforeMain:()=>Id,beforeRead:()=>$d,beforeWrite:()=>Dd,bottom:()=>fe,clippingParents:()=>Ja,computeStyles:()=>ci,createPopper:()=>rn,createPopperBase:()=>Kd,createPopperLite:()=>Yd,detectOverflow:()=>He,end:()=>ao,eventListeners:()=>pi,flip:()=>zn,hide:()=>Bn,left:()=>ne,main:()=>Od,modifierPhases:()=>Qa,offset:()=>Un,placements:()=>Xi,popper:()=>To,popperGenerator:()=>Po,popperOffsets:()=>gi,preventOverflow:()=>Hn,read:()=>Rd,reference:()=>qa,right:()=>ce,start:()=>Rr,top:()=>oe,variationPlacements:()=>On,viewport:()=>Yi,write:()=>Nd});var oe="top",fe="bottom",ce="right",ne="left",Ki="auto",Hr=[oe,fe,ce,ne],Rr="start",ao="end",Ja="clippingParents",Yi="viewport",To="popper",qa="reference",On=Hr.reduce(function(e,t){return e.concat([t+"-"+Rr,t+"-"+ao])},[]),Xi=[].concat(Hr,[Ki]).reduce(function(e,t){return e.concat([t,t+"-"+Rr,t+"-"+ao])},[]),$d="beforeRead",Rd="read",Md="afterRead",Id="beforeMain",Od="main",Pd="afterMain",Dd="beforeWrite",Nd="write",Fd="afterWrite",Qa=[$d,Rd,Md,Id,Od,Pd,Dd,Nd,Fd];function _e(e){return e?(e.nodeName||"").toLowerCase():null}function ee(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ir(e){var t=ee(e).Element;return e instanceof t||e instanceof Element}function ye(e){var t=ee(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function si(e){if(typeof ShadowRoot>"u")return!1;var t=ee(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Xm(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var d=t.styles[r]||{},p=t.attributes[r]||{},g=t.elements[r];!ye(g)||!_e(g)||(Object.assign(g.style,d),Object.keys(p).forEach(function(n){var u=p[n];u===!1?g.removeAttribute(n):g.setAttribute(n,u===!0?"":u)}))})}function Jm(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(d){var p=t.elements[d],g=t.attributes[d]||{},n=Object.keys(t.styles.hasOwnProperty(d)?t.styles[d]:r[d]),u=n.reduce(function(o,i){return o[i]="",o},{});!ye(p)||!_e(p)||(Object.assign(p.style,u),Object.keys(g).forEach(function(o){p.removeAttribute(o)}))})}}var li={name:"applyStyles",enabled:!0,phase:"write",fn:Xm,effect:Jm,requires:["computeStyles"]};function Se(e){return e.split("-")[0]}var vr=Math.max,Ao=Math.min,jr=Math.round;function di(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ji(){return!/^((?!chrome|android).)*safari/i.test(di())}function nr(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var d=e.getBoundingClientRect(),p=1,g=1;t&&ye(e)&&(p=e.offsetWidth>0&&jr(d.width)/e.offsetWidth||1,g=e.offsetHeight>0&&jr(d.height)/e.offsetHeight||1);var n=ir(e)?ee(e):window,u=n.visualViewport,o=!Ji()&&r,i=(d.left+(o&&u?u.offsetLeft:0))/p,a=(d.top+(o&&u?u.offsetTop:0))/g,l=d.width/p,s=d.height/g;return{width:l,height:s,top:a,right:i+l,bottom:a+s,left:i,x:i,y:a}}function Lo(e){var t=nr(e),r=e.offsetWidth,d=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-d)<=1&&(d=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:d}}function qi(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&si(r)){var d=t;do{if(d&&e.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function Ue(e){return ee(e).getComputedStyle(e)}function Za(e){return["table","td","th"].indexOf(_e(e))>=0}function Me(e){return((ir(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wr(e){return _e(e)==="html"?e:e.assignedSlot||e.parentNode||(si(e)?e.host:null)||Me(e)}function zd(e){return!ye(e)||Ue(e).position==="fixed"?null:e.offsetParent}function qm(e){var t=/firefox/i.test(di()),r=/Trident/i.test(di());if(r&&ye(e)){var d=Ue(e);if(d.position==="fixed")return null}var p=Wr(e);for(si(p)&&(p=p.host);ye(p)&&["html","body"].indexOf(_e(p))<0;){var g=Ue(p);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||t&&g.willChange==="filter"||t&&g.filter&&g.filter!=="none")return p;p=p.parentNode}return null}function wr(e){for(var t=ee(e),r=zd(e);r&&Za(r)&&Ue(r).position==="static";)r=zd(r);return r&&(_e(r)==="html"||_e(r)==="body"&&Ue(r).position==="static")?t:r||qm(e)||t}function $o(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ro(e,t,r){return vr(e,Ao(t,r))}function Bd(e,t,r){var d=Ro(e,t,r);return d>r?r:d}function Qi(){return{top:0,right:0,bottom:0,left:0}}function Zi(e){return Object.assign({},Qi(),e)}function tn(e,t){return t.reduce(function(r,d){return r[d]=e,r},{})}var Qm=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Zi(typeof t!="number"?t:tn(t,Hr))};function Zm(e){var t,r=e.state,d=e.name,p=e.options,g=r.elements.arrow,n=r.modifiersData.popperOffsets,u=Se(r.placement),o=$o(u),i=[ne,ce].indexOf(u)>=0,a=i?"height":"width";if(!(!g||!n)){var l=Qm(p.padding,r),s=Lo(g),c=o==="y"?oe:ne,m=o==="y"?fe:ce,h=r.rects.reference[a]+r.rects.reference[o]-n[o]-r.rects.popper[a],v=n[o]-r.rects.reference[o],k=wr(g),x=k?o==="y"?k.clientHeight||0:k.clientWidth||0:0,A=h/2-v/2,S=l[c],f=x-s[a]-l[m],L=x/2-s[a]/2+A,$=Ro(S,L,f),C=o;r.modifiersData[d]=(t={},t[C]=$,t.centerOffset=$-L,t)}}function tg(e){var t=e.state,r=e.options,d=r.element,p=d===void 0?"[data-popper-arrow]":d;p!=null&&(typeof p=="string"&&(p=t.elements.popper.querySelector(p),!p)||qi(t.elements.popper,p)&&(t.elements.arrow=p))}var Pn={name:"arrow",enabled:!0,phase:"main",fn:Zm,effect:tg,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ar(e){return e.split("-")[1]}var eg={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rg(e,t){var r=e.x,d=e.y,p=t.devicePixelRatio||1;return{x:jr(r*p)/p||0,y:jr(d*p)/p||0}}function Ud(e){var t,r=e.popper,d=e.popperRect,p=e.placement,g=e.variation,n=e.offsets,u=e.position,o=e.gpuAcceleration,i=e.adaptive,a=e.roundOffsets,l=e.isFixed,s=n.x,c=s===void 0?0:s,m=n.y,h=m===void 0?0:m,v=typeof a=="function"?a({x:c,y:h}):{x:c,y:h};c=v.x,h=v.y;var k=n.hasOwnProperty("x"),x=n.hasOwnProperty("y"),A=ne,S=oe,f=window;if(i){var L=wr(r),$="clientHeight",C="clientWidth";if(L===ee(r)&&(L=Me(r),Ue(L).position!=="static"&&u==="absolute"&&($="scrollHeight",C="scrollWidth")),L=L,p===oe||(p===ne||p===ce)&&g===ao){S=fe;var T=l&&L===f&&f.visualViewport?f.visualViewport.height:L[$];h-=T-d.height,h*=o?1:-1}if(p===ne||(p===oe||p===fe)&&g===ao){A=ce;var w=l&&L===f&&f.visualViewport?f.visualViewport.width:L[C];c-=w-d.width,c*=o?1:-1}}var y=Object.assign({position:u},i&&eg),b=a===!0?rg({x:c,y:h},ee(r)):{x:c,y:h};if(c=b.x,h=b.y,o){var E;return Object.assign({},y,(E={},E[S]=x?"0":"",E[A]=k?"0":"",E.transform=(f.devicePixelRatio||1)<=1?"translate("+c+"px, "+h+"px)":"translate3d("+c+"px, "+h+"px, 0)",E))}return Object.assign({},y,(t={},t[S]=x?h+"px":"",t[A]=k?c+"px":"",t.transform="",t))}function og(e){var t=e.state,r=e.options,d=r.gpuAcceleration,p=d===void 0?!0:d,g=r.adaptive,n=g===void 0?!0:g,u=r.roundOffsets,o=u===void 0?!0:u,i={placement:Se(t.placement),variation:ar(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:p,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Ud(Object.assign({},i,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:n,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ud(Object.assign({},i,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ci={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:og,data:{}};var Dn={passive:!0};function ig(e){var t=e.state,r=e.instance,d=e.options,p=d.scroll,g=p===void 0?!0:p,n=d.resize,u=n===void 0?!0:n,o=ee(t.elements.popper),i=[].concat(t.scrollParents.reference,t.scrollParents.popper);return g&&i.forEach(function(a){a.addEventListener("scroll",r.update,Dn)}),u&&o.addEventListener("resize",r.update,Dn),function(){g&&i.forEach(function(a){a.removeEventListener("scroll",r.update,Dn)}),u&&o.removeEventListener("resize",r.update,Dn)}}var pi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ig,data:{}};var ng={left:"right",right:"left",bottom:"top",top:"bottom"};function ui(e){return e.replace(/left|right|bottom|top/g,function(t){return ng[t]})}var ag={start:"end",end:"start"};function Nn(e){return e.replace(/start|end/g,function(t){return ag[t]})}function Mo(e){var t=ee(e),r=t.pageXOffset,d=t.pageYOffset;return{scrollLeft:r,scrollTop:d}}function Io(e){return nr(Me(e)).left+Mo(e).scrollLeft}function ts(e,t){var r=ee(e),d=Me(e),p=r.visualViewport,g=d.clientWidth,n=d.clientHeight,u=0,o=0;if(p){g=p.width,n=p.height;var i=Ji();(i||!i&&t==="fixed")&&(u=p.offsetLeft,o=p.offsetTop)}return{width:g,height:n,x:u+Io(e),y:o}}function es(e){var t,r=Me(e),d=Mo(e),p=(t=e.ownerDocument)==null?void 0:t.body,g=vr(r.scrollWidth,r.clientWidth,p?p.scrollWidth:0,p?p.clientWidth:0),n=vr(r.scrollHeight,r.clientHeight,p?p.scrollHeight:0,p?p.clientHeight:0),u=-d.scrollLeft+Io(e),o=-d.scrollTop;return Ue(p||r).direction==="rtl"&&(u+=vr(r.clientWidth,p?p.clientWidth:0)-g),{width:g,height:n,x:u,y:o}}function Oo(e){var t=Ue(e),r=t.overflow,d=t.overflowX,p=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+p+d)}function Fn(e){return["html","body","#document"].indexOf(_e(e))>=0?e.ownerDocument.body:ye(e)&&Oo(e)?e:Fn(Wr(e))}function so(e,t){var r;t===void 0&&(t=[]);var d=Fn(e),p=d===((r=e.ownerDocument)==null?void 0:r.body),g=ee(d),n=p?[g].concat(g.visualViewport||[],Oo(d)?d:[]):d,u=t.concat(n);return p?u:u.concat(so(Wr(n)))}function mi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sg(e,t){var r=nr(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Hd(e,t,r){return t===Yi?mi(ts(e,r)):ir(t)?sg(t,r):mi(es(Me(e)))}function lg(e){var t=so(Wr(e)),r=["absolute","fixed"].indexOf(Ue(e).position)>=0,d=r&&ye(e)?wr(e):e;return ir(d)?t.filter(function(p){return ir(p)&&qi(p,d)&&_e(p)!=="body"}):[]}function rs(e,t,r,d){var p=t==="clippingParents"?lg(e):[].concat(t),g=[].concat(p,[r]),n=g[0],u=g.reduce(function(o,i){var a=Hd(e,i,d);return o.top=vr(a.top,o.top),o.right=Ao(a.right,o.right),o.bottom=Ao(a.bottom,o.bottom),o.left=vr(a.left,o.left),o},Hd(e,n,d));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function en(e){var t=e.reference,r=e.element,d=e.placement,p=d?Se(d):null,g=d?ar(d):null,n=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,o;switch(p){case oe:o={x:n,y:t.y-r.height};break;case fe:o={x:n,y:t.y+t.height};break;case ce:o={x:t.x+t.width,y:u};break;case ne:o={x:t.x-r.width,y:u};break;default:o={x:t.x,y:t.y}}var i=p?$o(p):null;if(i!=null){var a=i==="y"?"height":"width";switch(g){case Rr:o[i]=o[i]-(t[a]/2-r[a]/2);break;case ao:o[i]=o[i]+(t[a]/2-r[a]/2);break;default:}}return o}function He(e,t){t===void 0&&(t={});var r=t,d=r.placement,p=d===void 0?e.placement:d,g=r.strategy,n=g===void 0?e.strategy:g,u=r.boundary,o=u===void 0?Ja:u,i=r.rootBoundary,a=i===void 0?Yi:i,l=r.elementContext,s=l===void 0?To:l,c=r.altBoundary,m=c===void 0?!1:c,h=r.padding,v=h===void 0?0:h,k=Zi(typeof v!="number"?v:tn(v,Hr)),x=s===To?qa:To,A=e.rects.popper,S=e.elements[m?x:s],f=rs(ir(S)?S:S.contextElement||Me(e.elements.popper),o,a,n),L=nr(e.elements.reference),$=en({reference:L,element:A,strategy:"absolute",placement:p}),C=mi(Object.assign({},A,$)),T=s===To?C:L,w={top:f.top-T.top+k.top,bottom:T.bottom-f.bottom+k.bottom,left:f.left-T.left+k.left,right:T.right-f.right+k.right},y=e.modifiersData.offset;if(s===To&&y){var b=y[p];Object.keys(w).forEach(function(E){var _=[ce,fe].indexOf(E)>=0?1:-1,R=[oe,fe].indexOf(E)>=0?"y":"x";w[E]+=b[R]*_})}return w}function os(e,t){t===void 0&&(t={});var r=t,d=r.placement,p=r.boundary,g=r.rootBoundary,n=r.padding,u=r.flipVariations,o=r.allowedAutoPlacements,i=o===void 0?Xi:o,a=ar(d),l=a?u?On:On.filter(function(m){return ar(m)===a}):Hr,s=l.filter(function(m){return i.indexOf(m)>=0});s.length===0&&(s=l);var c=s.reduce(function(m,h){return m[h]=He(e,{placement:h,boundary:p,rootBoundary:g,padding:n})[Se(h)],m},{});return Object.keys(c).sort(function(m,h){return c[m]-c[h]})}function dg(e){if(Se(e)===Ki)return[];var t=ui(e);return[Nn(e),t,Nn(t)]}function cg(e){var t=e.state,r=e.options,d=e.name;if(!t.modifiersData[d]._skip){for(var p=r.mainAxis,g=p===void 0?!0:p,n=r.altAxis,u=n===void 0?!0:n,o=r.fallbackPlacements,i=r.padding,a=r.boundary,l=r.rootBoundary,s=r.altBoundary,c=r.flipVariations,m=c===void 0?!0:c,h=r.allowedAutoPlacements,v=t.options.placement,k=Se(v),x=k===v,A=o||(x||!m?[ui(v)]:dg(v)),S=[v].concat(A).reduce(function(W,j){return W.concat(Se(j)===Ki?os(t,{placement:j,boundary:a,rootBoundary:l,padding:i,flipVariations:m,allowedAutoPlacements:h}):j)},[]),f=t.rects.reference,L=t.rects.popper,$=new Map,C=!0,T=S[0],w=0;w<S.length;w++){var y=S[w],b=Se(y),E=ar(y)===Rr,_=[oe,fe].indexOf(b)>=0,R=_?"width":"height",M=He(t,{placement:y,boundary:a,rootBoundary:l,altBoundary:s,padding:i}),I=_?E?ce:ne:E?fe:oe;f[R]>L[R]&&(I=ui(I));var P=ui(I),O=[];if(g&&O.push(M[b]<=0),u&&O.push(M[I]<=0,M[P]<=0),O.every(function(W){return W})){T=y,C=!1;break}$.set(y,O)}if(C)for(var N=m?3:1,D=function(j){var Z=S.find(function(Y){var q=$.get(Y);if(q)return q.slice(0,j).every(function(nt){return nt})});if(Z)return T=Z,"break"},F=N;F>0;F--){var z=D(F);if(z==="break")break}t.placement!==T&&(t.modifiersData[d]._skip=!0,t.placement=T,t.reset=!0)}}var zn={name:"flip",enabled:!0,phase:"main",fn:cg,requiresIfExists:["offset"],data:{_skip:!1}};function jd(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Wd(e){return[oe,ce,fe,ne].some(function(t){return e[t]>=0})}function pg(e){var t=e.state,r=e.name,d=t.rects.reference,p=t.rects.popper,g=t.modifiersData.preventOverflow,n=He(t,{elementContext:"reference"}),u=He(t,{altBoundary:!0}),o=jd(n,d),i=jd(u,p,g),a=Wd(o),l=Wd(i);t.modifiersData[r]={referenceClippingOffsets:o,popperEscapeOffsets:i,isReferenceHidden:a,hasPopperEscaped:l},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":l})}var Bn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pg};function ug(e,t,r){var d=Se(e),p=[ne,oe].indexOf(d)>=0?-1:1,g=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,n=g[0],u=g[1];return n=n||0,u=(u||0)*p,[ne,ce].indexOf(d)>=0?{x:u,y:n}:{x:n,y:u}}function mg(e){var t=e.state,r=e.options,d=e.name,p=r.offset,g=p===void 0?[0,0]:p,n=Xi.reduce(function(a,l){return a[l]=ug(l,t.rects,g),a},{}),u=n[t.placement],o=u.x,i=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=i),t.modifiersData[d]=n}var Un={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mg};function gg(e){var t=e.state,r=e.name;t.modifiersData[r]=en({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var gi={name:"popperOffsets",enabled:!0,phase:"read",fn:gg,data:{}};function is(e){return e==="x"?"y":"x"}function hg(e){var t=e.state,r=e.options,d=e.name,p=r.mainAxis,g=p===void 0?!0:p,n=r.altAxis,u=n===void 0?!1:n,o=r.boundary,i=r.rootBoundary,a=r.altBoundary,l=r.padding,s=r.tether,c=s===void 0?!0:s,m=r.tetherOffset,h=m===void 0?0:m,v=He(t,{boundary:o,rootBoundary:i,padding:l,altBoundary:a}),k=Se(t.placement),x=ar(t.placement),A=!x,S=$o(k),f=is(S),L=t.modifiersData.popperOffsets,$=t.rects.reference,C=t.rects.popper,T=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,w=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,b={x:0,y:0};if(L){if(g){var E,_=S==="y"?oe:ne,R=S==="y"?fe:ce,M=S==="y"?"height":"width",I=L[S],P=I+v[_],O=I-v[R],N=c?-C[M]/2:0,D=x===Rr?$[M]:C[M],F=x===Rr?-C[M]:-$[M],z=t.elements.arrow,W=c&&z?Lo(z):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Qi(),Z=j[_],Y=j[R],q=Ro(0,$[M],W[M]),nt=A?$[M]/2-N-q-Z-w.mainAxis:D-q-Z-w.mainAxis,ot=A?-$[M]/2+N+q+Y+w.mainAxis:F+q+Y+w.mainAxis,wt=t.elements.arrow&&wr(t.elements.arrow),_t=wt?S==="y"?wt.clientTop||0:wt.clientLeft||0:0,vt=(E=y?.[S])!=null?E:0,U=I+nt-vt-_t,X=I+ot-vt,at=Ro(c?Ao(P,U):P,I,c?vr(O,X):O);L[S]=at,b[S]=at-I}if(u){var tt,ct=S==="x"?oe:ne,K=S==="x"?fe:ce,V=L[f],st=f==="y"?"height":"width",it=V+v[ct],bt=V-v[K],H=[oe,ne].indexOf(k)!==-1,G=(tt=y?.[f])!=null?tt:0,rt=H?it:V-$[st]-C[st]-G+w.altAxis,ft=H?V+$[st]+C[st]-G-w.altAxis:bt,kt=c&&H?Bd(rt,V,ft):Ro(c?rt:it,V,c?ft:bt);L[f]=kt,b[f]=kt-V}t.modifiersData[d]=b}}var Hn={name:"preventOverflow",enabled:!0,phase:"main",fn:hg,requiresIfExists:["offset"]};function ns(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function as(e){return e===ee(e)||!ye(e)?Mo(e):ns(e)}function bg(e){var t=e.getBoundingClientRect(),r=jr(t.width)/e.offsetWidth||1,d=jr(t.height)/e.offsetHeight||1;return r!==1||d!==1}function ss(e,t,r){r===void 0&&(r=!1);var d=ye(t),p=ye(t)&&bg(t),g=Me(t),n=nr(e,p,r),u={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(d||!d&&!r)&&((_e(t)!=="body"||Oo(g))&&(u=as(t)),ye(t)?(o=nr(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):g&&(o.x=Io(g))),{x:n.left+u.scrollLeft-o.x,y:n.top+u.scrollTop-o.y,width:n.width,height:n.height}}function fg(e){var t=new Map,r=new Set,d=[];e.forEach(function(g){t.set(g.name,g)});function p(g){r.add(g.name);var n=[].concat(g.requires||[],g.requiresIfExists||[]);n.forEach(function(u){if(!r.has(u)){var o=t.get(u);o&&p(o)}}),d.push(g)}return e.forEach(function(g){r.has(g.name)||p(g)}),d}function ls(e){var t=fg(e);return Qa.reduce(function(r,d){return r.concat(t.filter(function(p){return p.phase===d}))},[])}function ds(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function cs(e){var t=e.reduce(function(r,d){var p=r[d.name];return r[d.name]=p?Object.assign({},p,d,{options:Object.assign({},p.options,d.options),data:Object.assign({},p.data,d.data)}):d,r},{});return Object.keys(t).map(function(r){return t[r]})}var Vd={placement:"bottom",modifiers:[],strategy:"absolute"};function Gd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function Po(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,d=r===void 0?[]:r,p=t.defaultOptions,g=p===void 0?Vd:p;return function(u,o,i){i===void 0&&(i=g);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vd,g),modifiersData:{},elements:{reference:u,popper:o},attributes:{},styles:{}},l=[],s=!1,c={state:a,setOptions:function(k){var x=typeof k=="function"?k(a.options):k;h(),a.options=Object.assign({},g,a.options,x),a.scrollParents={reference:ir(u)?so(u):u.contextElement?so(u.contextElement):[],popper:so(o)};var A=ls(cs([].concat(d,a.options.modifiers)));return a.orderedModifiers=A.filter(function(S){return S.enabled}),m(),c.update()},forceUpdate:function(){if(!s){var k=a.elements,x=k.reference,A=k.popper;if(Gd(x,A)){a.rects={reference:ss(x,wr(A),a.options.strategy==="fixed"),popper:Lo(A)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(w){return a.modifiersData[w.name]=Object.assign({},w.data)});for(var S=0;S<a.orderedModifiers.length;S++){if(a.reset===!0){a.reset=!1,S=-1;continue}var f=a.orderedModifiers[S],L=f.fn,$=f.options,C=$===void 0?{}:$,T=f.name;typeof L=="function"&&(a=L({state:a,options:C,name:T,instance:c})||a)}}}},update:ds(function(){return new Promise(function(v){c.forceUpdate(),v(a)})}),destroy:function(){h(),s=!0}};if(!Gd(u,o))return c;c.setOptions(i).then(function(v){!s&&i.onFirstUpdate&&i.onFirstUpdate(v)});function m(){a.orderedModifiers.forEach(function(v){var k=v.name,x=v.options,A=x===void 0?{}:x,S=v.effect;if(typeof S=="function"){var f=S({state:a,name:k,instance:c,options:A}),L=function(){};l.push(f||L)}})}function h(){l.forEach(function(v){return v()}),l=[]}return c}}var Kd=Po();var vg=[pi,gi,ci,li],Yd=Po({defaultModifiers:vg});var wg=[pi,gi,ci,li,Un,zn,Hn,Pn,Bn],rn=Po({defaultModifiers:wg});var lo=new Map,ps={set(e,t,r){lo.has(e)||lo.set(e,new Map);let d=lo.get(e);if(!d.has(t)&&d.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(d.keys())[0]}.`);return}d.set(t,r)},get(e,t){return lo.has(e)&&lo.get(e).get(t)||null},remove(e,t){if(!lo.has(e))return;let r=lo.get(e);r.delete(t),r.size===0&&lo.delete(e)}},yg=1e6,xg=1e3,Cs="transitionend",Ec=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,r)=>`#${CSS.escape(r)}`)),e),kg=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Eg=e=>{do e+=Math.floor(Math.random()*yg);while(document.getElementById(e));return e},_g=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e),d=Number.parseFloat(t),p=Number.parseFloat(r);return!d&&!p?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*xg)},_c=e=>{e.dispatchEvent(new Event(Cs))},Vr=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),co=e=>Vr(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(Ec(e)):null,xi=e=>{if(!Vr(e)||e.getClientRects().length===0)return!1;let t=getComputedStyle(e).getPropertyValue("visibility")==="visible",r=e.closest("details:not([open])");if(!r)return t;if(r!==e){let d=e.closest("summary");if(d&&d.parentNode!==r||d===null)return!1}return t},po=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",Sc=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Sc(e.parentNode):null},Qn=()=>{},dn=e=>{e.offsetHeight},Cc=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,us=[],Sg=e=>{document.readyState==="loading"?(us.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of us)t()}),us.push(e)):e()},sr=()=>document.documentElement.dir==="rtl",dr=e=>{Sg(()=>{let t=Cc();if(t){let r=e.NAME,d=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=d,e.jQueryInterface)}})},Ve=(e,t=[],r=e)=>typeof e=="function"?e(...t):r,Tc=(e,t,r=!0)=>{if(!r){Ve(e);return}let p=_g(t)+5,g=!1,n=({target:u})=>{u===t&&(g=!0,t.removeEventListener(Cs,n),Ve(e))};t.addEventListener(Cs,n),setTimeout(()=>{g||_c(t)},p)},Rs=(e,t,r,d)=>{let p=e.length,g=e.indexOf(t);return g===-1?!r&&d?e[p-1]:e[0]:(g+=r?1:-1,d&&(g=(g+p)%p),e[Math.max(0,Math.min(g,p-1))])},Cg=/[^.]*(?=\..*)\.|.*/,Tg=/\..*/,Ag=/::\d+$/,ms={},Xd=1,Ac={mouseenter:"mouseover",mouseleave:"mouseout"},Lg=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Lc(e,t){return t&&`${t}::${Xd++}`||e.uidEvent||Xd++}function $c(e){let t=Lc(e);return e.uidEvent=t,ms[t]=ms[t]||{},ms[t]}function $g(e,t){return function r(d){return Ms(d,{delegateTarget:e}),r.oneOff&&J.off(e,d.type,t),t.apply(e,[d])}}function Rg(e,t,r){return function d(p){let g=e.querySelectorAll(t);for(let{target:n}=p;n&&n!==this;n=n.parentNode)for(let u of g)if(u===n)return Ms(p,{delegateTarget:n}),d.oneOff&&J.off(e,p.type,t,r),r.apply(n,[p])}}function Rc(e,t,r=null){return Object.values(e).find(d=>d.callable===t&&d.delegationSelector===r)}function Mc(e,t,r){let d=typeof t=="string",p=d?r:t||r,g=Ic(e);return Lg.has(g)||(g=e),[d,p,g]}function Jd(e,t,r,d,p){if(typeof t!="string"||!e)return;let[g,n,u]=Mc(t,r,d);t in Ac&&(n=(m=>function(h){if(!h.relatedTarget||h.relatedTarget!==h.delegateTarget&&!h.delegateTarget.contains(h.relatedTarget))return m.call(this,h)})(n));let o=$c(e),i=o[u]||(o[u]={}),a=Rc(i,n,g?r:null);if(a){a.oneOff=a.oneOff&&p;return}let l=Lc(n,t.replace(Cg,"")),s=g?Rg(e,r,n):$g(e,n);s.delegationSelector=g?r:null,s.callable=n,s.oneOff=p,s.uidEvent=l,i[l]=s,e.addEventListener(u,s,g)}function Ts(e,t,r,d,p){let g=Rc(t[r],d,p);g&&(e.removeEventListener(r,g,!!p),delete t[r][g.uidEvent])}function Mg(e,t,r,d){let p=t[r]||{};for(let[g,n]of Object.entries(p))g.includes(d)&&Ts(e,t,r,n.callable,n.delegationSelector)}function Ic(e){return e=e.replace(Tg,""),Ac[e]||e}var J={on(e,t,r,d){Jd(e,t,r,d,!1)},one(e,t,r,d){Jd(e,t,r,d,!0)},off(e,t,r,d){if(typeof t!="string"||!e)return;let[p,g,n]=Mc(t,r,d),u=n!==t,o=$c(e),i=o[n]||{},a=t.startsWith(".");if(typeof g<"u"){if(!Object.keys(i).length)return;Ts(e,o,n,g,p?r:null);return}if(a)for(let l of Object.keys(o))Mg(e,o,l,t.slice(1));for(let[l,s]of Object.entries(i)){let c=l.replace(Ag,"");(!u||t.includes(c))&&Ts(e,o,n,s.callable,s.delegationSelector)}},trigger(e,t,r){if(typeof t!="string"||!e)return null;let d=Cc(),p=Ic(t),g=t!==p,n=null,u=!0,o=!0,i=!1;g&&d&&(n=d.Event(t,r),d(e).trigger(n),u=!n.isPropagationStopped(),o=!n.isImmediatePropagationStopped(),i=n.isDefaultPrevented());let a=Ms(new Event(t,{bubbles:u,cancelable:!0}),r);return i&&a.preventDefault(),o&&e.dispatchEvent(a),a.defaultPrevented&&n&&n.preventDefault(),a}};function Ms(e,t={}){for(let[r,d]of Object.entries(t))try{e[r]=d}catch{Object.defineProperty(e,r,{configurable:!0,get(){return d}})}return e}function qd(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function gs(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var Gr={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${gs(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${gs(t)}`)},getDataAttributes(e){if(!e)return{};let t={},r=Object.keys(e.dataset).filter(d=>d.startsWith("bs")&&!d.startsWith("bsConfig"));for(let d of r){let p=d.replace(/^bs/,"");p=p.charAt(0).toLowerCase()+p.slice(1,p.length),t[p]=qd(e.dataset[d])}return t},getDataAttribute(e,t){return qd(e.getAttribute(`data-bs-${gs(t)}`))}},Fo=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,r){let d=Vr(r)?Gr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof d=="object"?d:{},...Vr(r)?Gr.getDataAttributes(r):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,r=this.constructor.DefaultType){for(let[d,p]of Object.entries(r)){let g=t[d],n=Vr(g)?"element":kg(g);if(!new RegExp(p).test(n))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${d}" provided type "${n}" but expected type "${p}".`)}}},Ig="5.3.3",qe=class extends Fo{constructor(t,r){super(),t=co(t),t&&(this._element=t,this._config=this._getConfig(r),ps.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ps.remove(this._element,this.constructor.DATA_KEY),J.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,r,d=!0){Tc(t,r,d)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return ps.get(co(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return Ig}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},hs=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t?t.split(",").map(r=>Ec(r)).join(","):null},gt={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){let r=[],d=e.parentNode.closest(t);for(;d;)r.push(d),d=d.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(r=>!po(r)&&xi(r))},getSelectorFromElement(e){let t=hs(e);return t&&gt.findOne(t)?t:null},getElementFromSelector(e){let t=hs(e);return t?gt.findOne(t):null},getMultipleElementsFromSelector(e){let t=hs(e);return t?gt.find(t):[]}},sa=(e,t="hide")=>{let r=`click.dismiss${e.EVENT_KEY}`,d=e.NAME;J.on(document,r,`[data-bs-dismiss="${d}"]`,function(p){if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),po(this))return;let g=gt.getElementFromSelector(this)||this.closest(`.${d}`);e.getOrCreateInstance(g)[t]()})},Og="alert",Pg="bs.alert",Oc=`.${Pg}`,Dg=`close${Oc}`,Ng=`closed${Oc}`,Fg="fade",zg="show",Zn=class e extends qe{static get NAME(){return Og}close(){if(J.trigger(this._element,Dg).defaultPrevented)return;this._element.classList.remove(zg);let r=this._element.classList.contains(Fg);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),J.trigger(this._element,Ng),this.dispose()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};sa(Zn,"close");dr(Zn);var Bg="button",Ug="bs.button",Hg=`.${Ug}`,jg=".data-api",Wg="active",Qd='[data-bs-toggle="button"]',Vg=`click${Hg}${jg}`,ta=class e extends qe{static get NAME(){return Bg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Wg))}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);t==="toggle"&&r[t]()})}};J.on(document,Vg,Qd,e=>{e.preventDefault();let t=e.target.closest(Qd);ta.getOrCreateInstance(t).toggle()});dr(ta);var Gg="swipe",ki=".bs.swipe",Kg=`touchstart${ki}`,Yg=`touchmove${ki}`,Xg=`touchend${ki}`,Jg=`pointerdown${ki}`,qg=`pointerup${ki}`,Qg="touch",Zg="pen",th="pointer-event",eh=40,rh={endCallback:null,leftCallback:null,rightCallback:null},oh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},ea=class e extends Fo{constructor(t,r){super(),this._element=t,!(!t||!e.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return rh}static get DefaultType(){return oh}static get NAME(){return Gg}dispose(){J.off(this._element,ki)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ve(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=eh)return;let r=t/this._deltaX;this._deltaX=0,r&&Ve(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(J.on(this._element,Jg,t=>this._start(t)),J.on(this._element,qg,t=>this._end(t)),this._element.classList.add(th)):(J.on(this._element,Kg,t=>this._start(t)),J.on(this._element,Yg,t=>this._move(t)),J.on(this._element,Xg,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Zg||t.pointerType===Qg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},ih="carousel",nh="bs.carousel",mo=`.${nh}`,Pc=".data-api",ah="ArrowLeft",sh="ArrowRight",lh=500,on="next",hi="prev",fi="left",Jn="right",dh=`slide${mo}`,bs=`slid${mo}`,ch=`keydown${mo}`,ph=`mouseenter${mo}`,uh=`mouseleave${mo}`,mh=`dragstart${mo}`,gh=`load${mo}${Pc}`,hh=`click${mo}${Pc}`,Dc="carousel",Wn="active",bh="slide",fh="carousel-item-end",vh="carousel-item-start",wh="carousel-item-next",yh="carousel-item-prev",Nc=".active",Fc=".carousel-item",xh=Nc+Fc,kh=".carousel-item img",Eh=".carousel-indicators",_h="[data-bs-slide], [data-bs-slide-to]",Sh='[data-bs-ride="carousel"]',Ch={[ah]:Jn,[sh]:fi},Th={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ah={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},an=class e extends qe{constructor(t,r){super(t,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=gt.findOne(Eh,this._element),this._addEventListeners(),this._config.ride===Dc&&this.cycle()}static get Default(){return Th}static get DefaultType(){return Ah}static get NAME(){return ih}next(){this._slide(on)}nextWhenVisible(){!document.hidden&&xi(this._element)&&this.next()}prev(){this._slide(hi)}pause(){this._isSliding&&_c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){J.one(this._element,bs,()=>this.cycle());return}this.cycle()}}to(t){let r=this._getItems();if(t>r.length-1||t<0)return;if(this._isSliding){J.one(this._element,bs,()=>this.to(t));return}let d=this._getItemIndex(this._getActive());if(d===t)return;let p=t>d?on:hi;this._slide(p,r[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&J.on(this._element,ch,t=>this._keydown(t)),this._config.pause==="hover"&&(J.on(this._element,ph,()=>this.pause()),J.on(this._element,uh,()=>this._maybeEnableCycle())),this._config.touch&&ea.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let d of gt.find(kh,this._element))J.on(d,mh,p=>p.preventDefault());let r={leftCallback:()=>this._slide(this._directionToOrder(fi)),rightCallback:()=>this._slide(this._directionToOrder(Jn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),lh+this._config.interval))}};this._swipeHelper=new ea(this._element,r)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let r=Ch[t.key];r&&(t.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let r=gt.findOne(Nc,this._indicatorsElement);r.classList.remove(Wn),r.removeAttribute("aria-current");let d=gt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);d&&(d.classList.add(Wn),d.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let r=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(t,r=null){if(this._isSliding)return;let d=this._getActive(),p=t===on,g=r||Rs(this._getItems(),d,p,this._config.wrap);if(g===d)return;let n=this._getItemIndex(g),u=c=>J.trigger(this._element,c,{relatedTarget:g,direction:this._orderToDirection(t),from:this._getItemIndex(d),to:n});if(u(dh).defaultPrevented||!d||!g)return;let i=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(n),this._activeElement=g;let a=p?vh:fh,l=p?wh:yh;g.classList.add(l),dn(g),d.classList.add(a),g.classList.add(a);let s=()=>{g.classList.remove(a,l),g.classList.add(Wn),d.classList.remove(Wn,l,a),this._isSliding=!1,u(bs)};this._queueCallback(s,d,this._isAnimated()),i&&this.cycle()}_isAnimated(){return this._element.classList.contains(bh)}_getActive(){return gt.findOne(xh,this._element)}_getItems(){return gt.find(Fc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return sr()?t===fi?hi:on:t===fi?on:hi}_orderToDirection(t){return sr()?t===hi?fi:Jn:t===hi?Jn:fi}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="number"){r.to(t);return}if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};J.on(document,hh,_h,function(e){let t=gt.getElementFromSelector(this);if(!t||!t.classList.contains(Dc))return;e.preventDefault();let r=an.getOrCreateInstance(t),d=this.getAttribute("data-bs-slide-to");if(d){r.to(d),r._maybeEnableCycle();return}if(Gr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});J.on(window,gh,()=>{let e=gt.find(Sh);for(let t of e)an.getOrCreateInstance(t)});dr(an);var Lh="collapse",$h="bs.collapse",cn=`.${$h}`,Rh=".data-api",Mh=`show${cn}`,Ih=`shown${cn}`,Oh=`hide${cn}`,Ph=`hidden${cn}`,Dh=`click${cn}${Rh}`,fs="show",wi="collapse",Vn="collapsing",Nh="collapsed",Fh=`:scope .${wi} .${wi}`,zh="collapse-horizontal",Bh="width",Uh="height",Hh=".collapse.show, .collapse.collapsing",As='[data-bs-toggle="collapse"]',jh={parent:null,toggle:!0},Wh={parent:"(null|element)",toggle:"boolean"},ra=class e extends qe{constructor(t,r){super(t,r),this._isTransitioning=!1,this._triggerArray=[];let d=gt.find(As);for(let p of d){let g=gt.getSelectorFromElement(p),n=gt.find(g).filter(u=>u===this._element);g!==null&&n.length&&this._triggerArray.push(p)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return jh}static get DefaultType(){return Wh}static get NAME(){return Lh}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Hh).filter(u=>u!==this._element).map(u=>e.getOrCreateInstance(u,{toggle:!1}))),t.length&&t[0]._isTransitioning||J.trigger(this._element,Mh).defaultPrevented)return;for(let u of t)u.hide();let d=this._getDimension();this._element.classList.remove(wi),this._element.classList.add(Vn),this._element.style[d]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let p=()=>{this._isTransitioning=!1,this._element.classList.remove(Vn),this._element.classList.add(wi,fs),this._element.style[d]="",J.trigger(this._element,Ih)},n=`scroll${d[0].toUpperCase()+d.slice(1)}`;this._queueCallback(p,this._element,!0),this._element.style[d]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown()||J.trigger(this._element,Oh).defaultPrevented)return;let r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,dn(this._element),this._element.classList.add(Vn),this._element.classList.remove(wi,fs);for(let p of this._triggerArray){let g=gt.getElementFromSelector(p);g&&!this._isShown(g)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0;let d=()=>{this._isTransitioning=!1,this._element.classList.remove(Vn),this._element.classList.add(wi),J.trigger(this._element,Ph)};this._element.style[r]="",this._queueCallback(d,this._element,!0)}_isShown(t=this._element){return t.classList.contains(fs)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=co(t.parent),t}_getDimension(){return this._element.classList.contains(zh)?Bh:Uh}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(As);for(let r of t){let d=gt.getElementFromSelector(r);d&&this._addAriaAndCollapsedClass([r],this._isShown(d))}}_getFirstLevelChildren(t){let r=gt.find(Fh,this._config.parent);return gt.find(t,this._config.parent).filter(d=>!r.includes(d))}_addAriaAndCollapsedClass(t,r){if(t.length)for(let d of t)d.classList.toggle(Nh,!r),d.setAttribute("aria-expanded",r)}static jQueryInterface(t){let r={};return typeof t=="string"&&/show|hide/.test(t)&&(r.toggle=!1),this.each(function(){let d=e.getOrCreateInstance(this,r);if(typeof t=="string"){if(typeof d[t]>"u")throw new TypeError(`No method named "${t}"`);d[t]()}})}};J.on(document,Dh,As,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(let t of gt.getMultipleElementsFromSelector(this))ra.getOrCreateInstance(t,{toggle:!1}).toggle()});dr(ra);var Zd="dropdown",Vh="bs.dropdown",Bo=`.${Vh}`,Is=".data-api",Gh="Escape",tc="Tab",Kh="ArrowUp",ec="ArrowDown",Yh=2,Xh=`hide${Bo}`,Jh=`hidden${Bo}`,qh=`show${Bo}`,Qh=`shown${Bo}`,zc=`click${Bo}${Is}`,Bc=`keydown${Bo}${Is}`,Zh=`keyup${Bo}${Is}`,vi="show",tb="dropup",eb="dropend",rb="dropstart",ob="dropup-center",ib="dropdown-center",Do='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',nb=`${Do}.${vi}`,qn=".dropdown-menu",ab=".navbar",sb=".navbar-nav",lb=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",db=sr()?"top-end":"top-start",cb=sr()?"top-start":"top-end",pb=sr()?"bottom-end":"bottom-start",ub=sr()?"bottom-start":"bottom-end",mb=sr()?"left-start":"right-start",gb=sr()?"right-start":"left-start",hb="top",bb="bottom",fb={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},vb={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},Mr=class e extends qe{constructor(t,r){super(t,r),this._popper=null,this._parent=this._element.parentNode,this._menu=gt.next(this._element,qn)[0]||gt.prev(this._element,qn)[0]||gt.findOne(qn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return fb}static get DefaultType(){return vb}static get NAME(){return Zd}toggle(){return this._isShown()?this.hide():this.show()}show(){if(po(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!J.trigger(this._element,qh,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(sb))for(let d of[].concat(...document.body.children))J.on(d,"mouseover",Qn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(vi),this._element.classList.add(vi),J.trigger(this._element,Qh,t)}}hide(){if(po(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!J.trigger(this._element,Xh,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let d of[].concat(...document.body.children))J.off(d,"mouseover",Qn);this._popper&&this._popper.destroy(),this._menu.classList.remove(vi),this._element.classList.remove(vi),this._element.setAttribute("aria-expanded","false"),Gr.removeDataAttribute(this._menu,"popper"),J.trigger(this._element,Jh,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Vr(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Zd.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof jn>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Vr(this._config.reference)?t=co(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let r=this._getPopperConfig();this._popper=rn(t,this._menu,r)}_isShown(){return this._menu.classList.contains(vi)}_getPlacement(){let t=this._parent;if(t.classList.contains(eb))return mb;if(t.classList.contains(rb))return gb;if(t.classList.contains(ob))return hb;if(t.classList.contains(ib))return bb;let r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(tb)?r?cb:db:r?ub:pb}_detectNavbar(){return this._element.closest(ab)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Gr.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ve(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:r}){let d=gt.find(lb,this._menu).filter(p=>xi(p));d.length&&Rs(d,r,t===ec,!d.includes(r)).focus()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}static clearMenus(t){if(t.button===Yh||t.type==="keyup"&&t.key!==tc)return;let r=gt.find(nb);for(let d of r){let p=e.getInstance(d);if(!p||p._config.autoClose===!1)continue;let g=t.composedPath(),n=g.includes(p._menu);if(g.includes(p._element)||p._config.autoClose==="inside"&&!n||p._config.autoClose==="outside"&&n||p._menu.contains(t.target)&&(t.type==="keyup"&&t.key===tc||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let u={relatedTarget:p._element};t.type==="click"&&(u.clickEvent=t),p._completeHide(u)}}static dataApiKeydownHandler(t){let r=/input|textarea/i.test(t.target.tagName),d=t.key===Gh,p=[Kh,ec].includes(t.key);if(!p&&!d||r&&!d)return;t.preventDefault();let g=this.matches(Do)?this:gt.prev(this,Do)[0]||gt.next(this,Do)[0]||gt.findOne(Do,t.delegateTarget.parentNode),n=e.getOrCreateInstance(g);if(p){t.stopPropagation(),n.show(),n._selectMenuItem(t);return}n._isShown()&&(t.stopPropagation(),n.hide(),g.focus())}};J.on(document,Bc,Do,Mr.dataApiKeydownHandler);J.on(document,Bc,qn,Mr.dataApiKeydownHandler);J.on(document,zc,Mr.clearMenus);J.on(document,Zh,Mr.clearMenus);J.on(document,zc,Do,function(e){e.preventDefault(),Mr.getOrCreateInstance(this).toggle()});dr(Mr);var Uc="backdrop",wb="fade",rc="show",oc=`mousedown.bs.${Uc}`,yb={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},xb={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},oa=class extends Fo{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return yb}static get DefaultType(){return xb}static get NAME(){return Uc}show(t){if(!this._config.isVisible){Ve(t);return}this._append();let r=this._getElement();this._config.isAnimated&&dn(r),r.classList.add(rc),this._emulateAnimation(()=>{Ve(t)})}hide(t){if(!this._config.isVisible){Ve(t);return}this._getElement().classList.remove(rc),this._emulateAnimation(()=>{this.dispose(),Ve(t)})}dispose(){this._isAppended&&(J.off(this._element,oc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(wb),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=co(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),J.on(t,oc,()=>{Ve(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Tc(t,this._getElement(),this._config.isAnimated)}},kb="focustrap",Eb="bs.focustrap",ia=`.${Eb}`,_b=`focusin${ia}`,Sb=`keydown.tab${ia}`,Cb="Tab",Tb="forward",ic="backward",Ab={autofocus:!0,trapElement:null},Lb={autofocus:"boolean",trapElement:"element"},na=class extends Fo{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ab}static get DefaultType(){return Lb}static get NAME(){return kb}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),J.off(document,ia),J.on(document,_b,t=>this._handleFocusin(t)),J.on(document,Sb,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,J.off(document,ia))}_handleFocusin(t){let{trapElement:r}=this._config;if(t.target===document||t.target===r||r.contains(t.target))return;let d=gt.focusableChildren(r);d.length===0?r.focus():this._lastTabNavDirection===ic?d[d.length-1].focus():d[0].focus()}_handleKeydown(t){t.key===Cb&&(this._lastTabNavDirection=t.shiftKey?ic:Tb)}},nc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ac=".sticky-top",Gn="padding-right",sc="margin-right",sn=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Gn,r=>r+t),this._setElementAttributes(nc,Gn,r=>r+t),this._setElementAttributes(ac,sc,r=>r-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Gn),this._resetElementAttributes(nc,Gn),this._resetElementAttributes(ac,sc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,d){let p=this.getWidth(),g=n=>{if(n!==this._element&&window.innerWidth>n.clientWidth+p)return;this._saveInitialAttribute(n,r);let u=window.getComputedStyle(n).getPropertyValue(r);n.style.setProperty(r,`${d(Number.parseFloat(u))}px`)};this._applyManipulationCallback(t,g)}_saveInitialAttribute(t,r){let d=t.style.getPropertyValue(r);d&&Gr.setDataAttribute(t,r,d)}_resetElementAttributes(t,r){let d=p=>{let g=Gr.getDataAttribute(p,r);if(g===null){p.style.removeProperty(r);return}Gr.removeDataAttribute(p,r),p.style.setProperty(r,g)};this._applyManipulationCallback(t,d)}_applyManipulationCallback(t,r){if(Vr(t)){r(t);return}for(let d of gt.find(t,this._element))r(d)}},$b="modal",Rb="bs.modal",lr=`.${Rb}`,Mb=".data-api",Ib="Escape",Ob=`hide${lr}`,Pb=`hidePrevented${lr}`,Hc=`hidden${lr}`,jc=`show${lr}`,Db=`shown${lr}`,Nb=`resize${lr}`,Fb=`click.dismiss${lr}`,zb=`mousedown.dismiss${lr}`,Bb=`keydown.dismiss${lr}`,Ub=`click${lr}${Mb}`,lc="modal-open",Hb="fade",dc="show",vs="modal-static",jb=".modal.show",Wb=".modal-dialog",Vb=".modal-body",Gb='[data-bs-toggle="modal"]',Kb={backdrop:!0,focus:!0,keyboard:!0},Yb={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Ir=class e extends qe{constructor(t,r){super(t,r),this._dialog=gt.findOne(Wb,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sn,this._addEventListeners()}static get Default(){return Kb}static get DefaultType(){return Yb}static get NAME(){return $b}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||J.trigger(this._element,jc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(lc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||J.trigger(this._element,Ob).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(dc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){J.off(window,lr),J.off(this._dialog,lr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new oa({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new na({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let r=gt.findOne(Vb,this._dialog);r&&(r.scrollTop=0),dn(this._element),this._element.classList.add(dc);let d=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,J.trigger(this._element,Db,{relatedTarget:t})};this._queueCallback(d,this._dialog,this._isAnimated())}_addEventListeners(){J.on(this._element,Bb,t=>{if(t.key===Ib){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),J.on(window,Nb,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),J.on(this._element,zb,t=>{J.one(this._element,Fb,r=>{if(!(this._element!==t.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(lc),this._resetAdjustments(),this._scrollBar.reset(),J.trigger(this._element,Hc)})}_isAnimated(){return this._element.classList.contains(Hb)}_triggerBackdropTransition(){if(J.trigger(this._element,Pb).defaultPrevented)return;let r=this._element.scrollHeight>document.documentElement.clientHeight,d=this._element.style.overflowY;d==="hidden"||this._element.classList.contains(vs)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(vs),this._queueCallback(()=>{this._element.classList.remove(vs),this._queueCallback(()=>{this._element.style.overflowY=d},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),d=r>0;if(d&&!t){let p=sr()?"paddingLeft":"paddingRight";this._element.style[p]=`${r}px`}if(!d&&t){let p=sr()?"paddingRight":"paddingLeft";this._element.style[p]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){let d=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof d[t]>"u")throw new TypeError(`No method named "${t}"`);d[t](r)}})}};J.on(document,Ub,Gb,function(e){let t=gt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),J.one(t,jc,p=>{p.defaultPrevented||J.one(t,Hc,()=>{xi(this)&&this.focus()})});let r=gt.findOne(jb);r&&Ir.getInstance(r).hide(),Ir.getOrCreateInstance(t).toggle(this)});sa(Ir);dr(Ir);var Xb="offcanvas",Jb="bs.offcanvas",Kr=`.${Jb}`,Wc=".data-api",qb=`load${Kr}${Wc}`,Qb="Escape",cc="show",pc="showing",uc="hiding",Zb="offcanvas-backdrop",Vc=".offcanvas.show",tf=`show${Kr}`,ef=`shown${Kr}`,rf=`hide${Kr}`,mc=`hidePrevented${Kr}`,Gc=`hidden${Kr}`,of=`resize${Kr}`,nf=`click${Kr}${Wc}`,af=`keydown.dismiss${Kr}`,sf='[data-bs-toggle="offcanvas"]',lf={backdrop:!0,keyboard:!0,scroll:!1},df={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},uo=class e extends qe{constructor(t,r){super(t,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return lf}static get DefaultType(){return df}static get NAME(){return Xb}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||J.trigger(this._element,tf,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(pc);let d=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(cc),this._element.classList.remove(pc),J.trigger(this._element,ef,{relatedTarget:t})};this._queueCallback(d,this._element,!0)}hide(){if(!this._isShown||J.trigger(this._element,rf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(uc),this._backdrop.hide();let r=()=>{this._element.classList.remove(cc,uc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sn().reset(),J.trigger(this._element,Gc)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){J.trigger(this._element,mc);return}this.hide()},r=!!this._config.backdrop;return new oa({className:Zb,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?t:null})}_initializeFocusTrap(){return new na({trapElement:this._element})}_addEventListeners(){J.on(this._element,af,t=>{if(t.key===Qb){if(this._config.keyboard){this.hide();return}J.trigger(this._element,mc)}})}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};J.on(document,nf,sf,function(e){let t=gt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),po(this))return;J.one(t,Gc,()=>{xi(this)&&this.focus()});let r=gt.findOne(Vc);r&&r!==t&&uo.getInstance(r).hide(),uo.getOrCreateInstance(t).toggle(this)});J.on(window,qb,()=>{for(let e of gt.find(Vc))uo.getOrCreateInstance(e).show()});J.on(window,of,()=>{for(let e of gt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&uo.getOrCreateInstance(e).hide()});sa(uo);dr(uo);var cf=/^aria-[\w-]*$/i,Kc={"*":["class","dir","id","lang","role",cf],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},pf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),uf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,mf=(e,t)=>{let r=e.nodeName.toLowerCase();return t.includes(r)?pf.has(r)?!!uf.test(e.nodeValue):!0:t.filter(d=>d instanceof RegExp).some(d=>d.test(r))};function gf(e,t,r){if(!e.length)return e;if(r&&typeof r=="function")return r(e);let p=new window.DOMParser().parseFromString(e,"text/html"),g=[].concat(...p.body.querySelectorAll("*"));for(let n of g){let u=n.nodeName.toLowerCase();if(!Object.keys(t).includes(u)){n.remove();continue}let o=[].concat(...n.attributes),i=[].concat(t["*"]||[],t[u]||[]);for(let a of o)mf(a,i)||n.removeAttribute(a.nodeName)}return p.body.innerHTML}var hf="TemplateFactory",bf={allowList:Kc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ff={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},vf={entry:"(string|element|function|null)",selector:"(string|element)"},Ls=class extends Fo{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return bf}static get DefaultType(){return ff}static get NAME(){return hf}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[p,g]of Object.entries(this._config.content))this._setContent(t,g,p);let r=t.children[0],d=this._resolvePossibleFunction(this._config.extraClass);return d&&r.classList.add(...d.split(" ")),r}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[r,d]of Object.entries(t))super._typeCheckConfig({selector:r,entry:d},vf)}_setContent(t,r,d){let p=gt.findOne(d,t);if(p){if(r=this._resolvePossibleFunction(r),!r){p.remove();return}if(Vr(r)){this._putElementInTemplate(co(r),p);return}if(this._config.html){p.innerHTML=this._maybeSanitize(r);return}p.textContent=r}}_maybeSanitize(t){return this._config.sanitize?gf(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ve(t,[this])}_putElementInTemplate(t,r){if(this._config.html){r.innerHTML="",r.append(t);return}r.textContent=t.textContent}},wf="tooltip",yf=new Set(["sanitize","allowList","sanitizeFn"]),ws="fade",xf="modal",Kn="show",kf=".tooltip-inner",gc=`.${xf}`,hc="hide.bs.modal",nn="hover",ys="focus",Ef="click",_f="manual",Sf="hide",Cf="hidden",Tf="show",Af="shown",Lf="inserted",$f="click",Rf="focusin",Mf="focusout",If="mouseenter",Of="mouseleave",Pf={AUTO:"auto",TOP:"top",RIGHT:sr()?"left":"right",BOTTOM:"bottom",LEFT:sr()?"right":"left"},Df={allowList:Kc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Nf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},yi=class e extends qe{constructor(t,r){if(typeof jn>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Df}static get DefaultType(){return Nf}static get NAME(){return wf}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),J.off(this._element.closest(gc),hc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=J.trigger(this._element,this.constructor.eventName(Tf)),d=(Sc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!d)return;this._disposePopper();let p=this._getTipElement();this._element.setAttribute("aria-describedby",p.getAttribute("id"));let{container:g}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(g.append(p),J.trigger(this._element,this.constructor.eventName(Lf))),this._popper=this._createPopper(p),p.classList.add(Kn),"ontouchstart"in document.documentElement)for(let u of[].concat(...document.body.children))J.on(u,"mouseover",Qn);let n=()=>{J.trigger(this._element,this.constructor.eventName(Af)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(n,this.tip,this._isAnimated())}hide(){if(!this._isShown()||J.trigger(this._element,this.constructor.eventName(Sf)).defaultPrevented)return;if(this._getTipElement().classList.remove(Kn),"ontouchstart"in document.documentElement)for(let p of[].concat(...document.body.children))J.off(p,"mouseover",Qn);this._activeTrigger[Ef]=!1,this._activeTrigger[ys]=!1,this._activeTrigger[nn]=!1,this._isHovered=null;let d=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),J.trigger(this._element,this.constructor.eventName(Cf)))};this._queueCallback(d,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let r=this._getTemplateFactory(t).toHtml();if(!r)return null;r.classList.remove(ws,Kn),r.classList.add(`bs-${this.constructor.NAME}-auto`);let d=Eg(this.constructor.NAME).toString();return r.setAttribute("id",d),this._isAnimated()&&r.classList.add(ws),r}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ls({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[kf]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ws)}_isShown(){return this.tip&&this.tip.classList.contains(Kn)}_createPopper(t){let r=Ve(this._config.placement,[this,t,this._element]),d=Pf[r.toUpperCase()];return rn(this._element,t,this._getPopperConfig(d))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_resolvePossibleFunction(t){return Ve(t,[this._element])}_getPopperConfig(t){let r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:d=>{this._getTipElement().setAttribute("data-popper-placement",d.state.placement)}}]};return{...r,...Ve(this._config.popperConfig,[r])}}_setListeners(){let t=this._config.trigger.split(" ");for(let r of t)if(r==="click")J.on(this._element,this.constructor.eventName($f),this._config.selector,d=>{this._initializeOnDelegatedTarget(d).toggle()});else if(r!==_f){let d=r===nn?this.constructor.eventName(If):this.constructor.eventName(Rf),p=r===nn?this.constructor.eventName(Of):this.constructor.eventName(Mf);J.on(this._element,d,this._config.selector,g=>{let n=this._initializeOnDelegatedTarget(g);n._activeTrigger[g.type==="focusin"?ys:nn]=!0,n._enter()}),J.on(this._element,p,this._config.selector,g=>{let n=this._initializeOnDelegatedTarget(g);n._activeTrigger[g.type==="focusout"?ys:nn]=n._element.contains(g.relatedTarget),n._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},J.on(this._element.closest(gc),hc,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,r){clearTimeout(this._timeout),this._timeout=setTimeout(t,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let r=Gr.getDataAttributes(this._element);for(let d of Object.keys(r))yf.has(d)&&delete r[d];return t={...r,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:co(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[r,d]of Object.entries(this._config))this.constructor.Default[r]!==d&&(t[r]=d);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};dr(yi);var Ff="popover",zf=".popover-header",Bf=".popover-body",Uf={...yi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Hf={...yi.DefaultType,content:"(null|string|element|function)"},$s=class e extends yi{static get Default(){return Uf}static get DefaultType(){return Hf}static get NAME(){return Ff}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[zf]:this._getTitle(),[Bf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};dr($s);var jf="scrollspy",Wf="bs.scrollspy",Os=`.${Wf}`,Vf=".data-api",Gf=`activate${Os}`,bc=`click${Os}`,Kf=`load${Os}${Vf}`,Yf="dropdown-item",bi="active",Xf='[data-bs-spy="scroll"]',xs="[href]",Jf=".nav, .list-group",fc=".nav-link",qf=".nav-item",Qf=".list-group-item",Zf=`${fc}, ${qf} > ${fc}, ${Qf}`,tv=".dropdown",ev=".dropdown-toggle",rv={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ov={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},aa=class e extends qe{constructor(t,r){super(t,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return rv}static get DefaultType(){return ov}static get NAME(){return jf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=co(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(r=>Number.parseFloat(r))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(J.off(this._config.target,bc),J.on(this._config.target,bc,xs,t=>{let r=this._observableSections.get(t.target.hash);if(r){t.preventDefault();let d=this._rootElement||window,p=r.offsetTop-this._element.offsetTop;if(d.scrollTo){d.scrollTo({top:p,behavior:"smooth"});return}d.scrollTop=p}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),t)}_observerCallback(t){let r=n=>this._targetLinks.get(`#${n.target.id}`),d=n=>{this._previousScrollData.visibleEntryTop=n.target.offsetTop,this._process(r(n))},p=(this._rootElement||document.documentElement).scrollTop,g=p>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=p;for(let n of t){if(!n.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(n));continue}let u=n.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(g&&u){if(d(n),!p)return;continue}!g&&!u&&d(n)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=gt.find(xs,this._config.target);for(let r of t){if(!r.hash||po(r))continue;let d=gt.findOne(decodeURI(r.hash),this._element);xi(d)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,d))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(bi),this._activateParents(t),J.trigger(this._element,Gf,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Yf)){gt.findOne(ev,t.closest(tv)).classList.add(bi);return}for(let r of gt.parents(t,Jf))for(let d of gt.prev(r,Zf))d.classList.add(bi)}_clearActiveClass(t){t.classList.remove(bi);let r=gt.find(`${xs}.${bi}`,t);for(let d of r)d.classList.remove(bi)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};J.on(window,Kf,()=>{for(let e of gt.find(Xf))aa.getOrCreateInstance(e)});dr(aa);var iv="tab",nv="bs.tab",Uo=`.${nv}`,av=`hide${Uo}`,sv=`hidden${Uo}`,lv=`show${Uo}`,dv=`shown${Uo}`,cv=`click${Uo}`,pv=`keydown${Uo}`,uv=`load${Uo}`,mv="ArrowLeft",vc="ArrowRight",gv="ArrowUp",wc="ArrowDown",ks="Home",yc="End",No="active",xc="fade",Es="show",hv="dropdown",Yc=".dropdown-toggle",bv=".dropdown-menu",_s=`:not(${Yc})`,fv='.list-group, .nav, [role="tablist"]',vv=".nav-item, .list-group-item",wv=`.nav-link${_s}, .list-group-item${_s}, [role="tab"]${_s}`,Xc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ss=`${wv}, ${Xc}`,yv=`.${No}[data-bs-toggle="tab"], .${No}[data-bs-toggle="pill"], .${No}[data-bs-toggle="list"]`,ln=class e extends qe{constructor(t){super(t),this._parent=this._element.closest(fv),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),J.on(this._element,pv,r=>this._keydown(r)))}static get NAME(){return iv}show(){let t=this._element;if(this._elemIsActive(t))return;let r=this._getActiveElem(),d=r?J.trigger(r,av,{relatedTarget:t}):null;J.trigger(t,lv,{relatedTarget:r}).defaultPrevented||d&&d.defaultPrevented||(this._deactivate(r,t),this._activate(t,r))}_activate(t,r){if(!t)return;t.classList.add(No),this._activate(gt.getElementFromSelector(t));let d=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Es);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),J.trigger(t,dv,{relatedTarget:r})};this._queueCallback(d,t,t.classList.contains(xc))}_deactivate(t,r){if(!t)return;t.classList.remove(No),t.blur(),this._deactivate(gt.getElementFromSelector(t));let d=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Es);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),J.trigger(t,sv,{relatedTarget:r})};this._queueCallback(d,t,t.classList.contains(xc))}_keydown(t){if(![mv,vc,gv,wc,ks,yc].includes(t.key))return;t.stopPropagation(),t.preventDefault();let r=this._getChildren().filter(p=>!po(p)),d;if([ks,yc].includes(t.key))d=r[t.key===ks?0:r.length-1];else{let p=[vc,wc].includes(t.key);d=Rs(r,t.target,p,!0)}d&&(d.focus({preventScroll:!0}),e.getOrCreateInstance(d).show())}_getChildren(){return gt.find(Ss,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,r){this._setAttributeIfNotExists(t,"role","tablist");for(let d of r)this._setInitialAttributesOnChild(d)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let r=this._elemIsActive(t),d=this._getOuterElement(t);t.setAttribute("aria-selected",r),d!==t&&this._setAttributeIfNotExists(d,"role","presentation"),r||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let r=gt.getElementFromSelector(t);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,r){let d=this._getOuterElement(t);if(!d.classList.contains(hv))return;let p=(g,n)=>{let u=gt.findOne(g,d);u&&u.classList.toggle(n,r)};p(Yc,No),p(bv,Es),d.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(t,r,d){t.hasAttribute(r)||t.setAttribute(r,d)}_elemIsActive(t){return t.classList.contains(No)}_getInnerElement(t){return t.matches(Ss)?t:gt.findOne(Ss,t)}_getOuterElement(t){return t.closest(vv)||t}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};J.on(document,cv,Xc,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!po(this)&&ln.getOrCreateInstance(this).show()});J.on(window,uv,()=>{for(let e of gt.find(yv))ln.getOrCreateInstance(e)});dr(ln);var xv="toast",kv="bs.toast",go=`.${kv}`,Ev=`mouseover${go}`,_v=`mouseout${go}`,Sv=`focusin${go}`,Cv=`focusout${go}`,Tv=`hide${go}`,Av=`hidden${go}`,Lv=`show${go}`,$v=`shown${go}`,Rv="fade",kc="hide",Yn="show",Xn="showing",Mv={animation:"boolean",autohide:"boolean",delay:"number"},Iv={animation:!0,autohide:!0,delay:5e3},zo=class e extends qe{constructor(t,r){super(t,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Iv}static get DefaultType(){return Mv}static get NAME(){return xv}show(){if(J.trigger(this._element,Lv).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Rv);let r=()=>{this._element.classList.remove(Xn),J.trigger(this._element,$v),this._maybeScheduleHide()};this._element.classList.remove(kc),dn(this._element),this._element.classList.add(Yn,Xn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||J.trigger(this._element,Tv).defaultPrevented)return;let r=()=>{this._element.classList.add(kc),this._element.classList.remove(Xn,Yn),J.trigger(this._element,Av)};this._element.classList.add(Xn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Yn),super.dispose()}isShown(){return this._element.classList.contains(Yn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,r){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}let d=t.relatedTarget;this._element===d||this._element.contains(d)||this._maybeScheduleHide()}_setListeners(){J.on(this._element,Ev,t=>this._onInteraction(t,!0)),J.on(this._element,_v,t=>this._onInteraction(t,!1)),J.on(this._element,Sv,t=>this._onInteraction(t,!0)),J.on(this._element,Cv,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};sa(zo);dr(zo);var vu=In(Jc());var Ho=class extends Error{};Ho.prototype.name="InvalidTokenError";function Ov(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let d=r.charCodeAt(0).toString(16).toUpperCase();return d.length<2&&(d="0"+d),"%"+d}))}function Pv(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Ov(t)}catch{return atob(t)}}function qc(e,t){if(typeof e!="string")throw new Ho("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,d=e.split(".")[r];if(typeof d!="string")throw new Ho(`Invalid token specified: missing part #${r+1}`);let p;try{p=Pv(d)}catch(g){throw new Ho(`Invalid token specified: invalid base64 for part #${r+1} (${g.message})`)}try{return JSON.parse(p)}catch(g){throw new Ho(`Invalid token specified: invalid json for part #${r+1} (${g.message})`)}}var Dv={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},Pr,Dr,ca=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(ca||{});(e=>{function t(){Pr=3,Dr=Dv}e.reset=t;function r(p){if(!(0<=p&&p<=4))throw new Error("Invalid log level");Pr=p}e.setLevel=r;function d(p){Dr=p}e.setLogger=d})(ca||(ca={}));var Ft=class Or{constructor(t){this._name=t}debug(...t){Pr>=4&&Dr.debug(Or._format(this._name,this._method),...t)}info(...t){Pr>=3&&Dr.info(Or._format(this._name,this._method),...t)}warn(...t){Pr>=2&&Dr.warn(Or._format(this._name,this._method),...t)}error(...t){Pr>=1&&Dr.error(Or._format(this._name,this._method),...t)}throw(t){throw this.error(t),t}create(t){let r=Object.create(this);return r._method=t,r.debug("begin"),r}static createStatic(t,r){let d=new Or(`${t}.${r}`);return d.debug("begin"),d}static _format(t,r){let d=`[${t}]`;return r?`${d} ${r}:`:d}static debug(t,...r){Pr>=4&&Dr.debug(Or._format(t),...r)}static info(t,...r){Pr>=3&&Dr.info(Or._format(t),...r)}static warn(t,...r){Pr>=2&&Dr.warn(Or._format(t),...r)}static error(t,...r){Pr>=1&&Dr.error(Or._format(t),...r)}};ca.reset();var Nv="10000000-1000-4000-8000-100000000000",Qc=e=>btoa([...new Uint8Array(e)].map(t=>String.fromCharCode(t)).join("")),Ei=class pn{static _randomWord(){let t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}static generateUUIDv4(){return Nv.replace(/[018]/g,r=>(+r^pn._randomWord()&15>>+r/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return pn.generateUUIDv4()+pn.generateUUIDv4()+pn.generateUUIDv4()}static async generateCodeChallenge(t){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{let d=new TextEncoder().encode(t),p=await crypto.subtle.digest("SHA-256",d);return Qc(p).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw Ft.error("CryptoUtils.generateCodeChallenge",r),r}}static generateBasicAuth(t,r){let p=new TextEncoder().encode([t,r].join(":"));return Qc(p)}},ho=class{constructor(e){this._name=e,this._logger=new Ft(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){let t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}async raise(...e){this._logger.debug("raise:",...e);for(let t of this._callbacks)await t(...e)}},Fs=class{static decode(e){try{return qc(e)}catch(t){throw Ft.error("JwtUtils.decode",t),t}}},Zc=class{static center({...e}){var t,r,d;return e.width==null&&(e.width=(t=[800,720,600,480].find(p=>p<=window.outerWidth/1.618))!=null?t:360),(r=e.left)!=null||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),e.height!=null&&((d=e.top)!=null||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}=${typeof r!="boolean"?r:r?"yes":"no"}`).join(",")}},Yr=class da extends ho{constructor(){super(...arguments),this._logger=new Ft(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{let t=this._expiration-da.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=da.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){let r=this._logger.create("init");t=Math.max(Math.floor(t),1);let d=da.getEpochTime()+t;if(this.expiration===d&&this._timerHandle){r.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),r.debug("using duration",t),this._expiration=d;let p=Math.min(t,5);this._timerHandle=setInterval(this._callback,p*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},zs=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");let d=new URL(e,"http://127.0.0.1")[t==="fragment"?"hash":"search"];return new URLSearchParams(d.slice(1))}},Bs=";",jo=class extends Error{constructor(e,t){var r,d,p;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw Ft.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=(r=e.error_description)!=null?r:null,this.error_uri=(d=e.error_uri)!=null?d:null,this.state=e.userState,this.session_state=(p=e.session_state)!=null?p:null,this.url_state=e.url_state}},Ws=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},Fv=class{constructor(e){this._logger=new Ft("AccessTokenEvents"),this._expiringTimer=new Yr("Access token expiring"),this._expiredTimer=new Yr("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){let t=this._logger.create("load");if(e.access_token&&e.expires_in!==void 0){let r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){let p=r-this._expiringNotificationTimeInSeconds;p<=0&&(p=1),t.debug("registering expiring timer, raising in",p,"seconds"),this._expiringTimer.init(p)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();let d=r+1;t.debug("registering expired timer, raising in",d,"seconds"),this._expiredTimer.init(d)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},zv=class{constructor(e,t,r,d,p){this._callback=e,this._client_id=t,this._intervalInSeconds=d,this._stopOnError=p,this._logger=new Ft("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=n=>{n.origin===this._frame_origin&&n.source===this._frame.contentWindow&&(n.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):n.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(n.data+" message from check session op iframe"))};let g=new URL(r);this._frame_origin=g.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=g.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;let t=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},op=class{constructor(){this._logger=new Ft("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},Vs=class{constructor(e=[],t=null,r={}){this._jwtHandler=t,this._extraHeaders=r,this._logger=new Ft("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){let{timeoutInSeconds:r,...d}=t;if(!r)return await fetch(e,d);let p=new AbortController,g=setTimeout(()=>p.abort(),r*1e3);try{return await fetch(e,{...t,signal:p.signal})}catch(n){throw n instanceof DOMException&&n.name==="AbortError"?new Ws("Network timed out"):n}finally{clearTimeout(g)}}async getJson(e,{token:t,credentials:r}={}){let d=this._logger.create("getJson"),p={Accept:this._contentTypes.join(", ")};t&&(d.debug("token passed, setting Authorization header"),p.Authorization="Bearer "+t),this.appendExtraHeaders(p);let g;try{d.debug("url:",e),g=await this.fetchWithTimeout(e,{method:"GET",headers:p,credentials:r})}catch(o){throw d.error("Network Error"),o}d.debug("HTTP response received, status",g.status);let n=g.headers.get("Content-Type");if(n&&!this._contentTypes.find(o=>n.startsWith(o))&&d.throw(new Error(`Invalid response Content-Type: ${n??"undefined"}, from URL: ${e}`)),g.ok&&this._jwtHandler&&n?.startsWith("application/jwt"))return await this._jwtHandler(await g.text());let u;try{u=await g.json()}catch(o){throw d.error("Error parsing JSON response",o),g.ok?o:new Error(`${g.statusText} (${g.status})`)}if(!g.ok)throw d.error("Error from server:",u),u.error?new jo(u):new Error(`${g.statusText} (${g.status}): ${JSON.stringify(u)}`);return u}async postForm(e,{body:t,basicAuth:r,timeoutInSeconds:d,initCredentials:p}){let g=this._logger.create("postForm"),n={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};r!==void 0&&(n.Authorization="Basic "+r),this.appendExtraHeaders(n);let u;try{g.debug("url:",e),u=await this.fetchWithTimeout(e,{method:"POST",headers:n,body:t,timeoutInSeconds:d,credentials:p})}catch(l){throw g.error("Network error"),l}g.debug("HTTP response received, status",u.status);let o=u.headers.get("Content-Type");if(o&&!this._contentTypes.find(l=>o.startsWith(l)))throw new Error(`Invalid response Content-Type: ${o??"undefined"}, from URL: ${e}`);let i=await u.text(),a={};if(i)try{a=JSON.parse(i)}catch(l){throw g.error("Error parsing JSON response",l),u.ok?l:new Error(`${u.statusText} (${u.status})`)}if(!u.ok)throw g.error("Error from server:",a),a.error?new jo(a,t):new Error(`${u.statusText} (${u.status}): ${JSON.stringify(a)}`);return a}appendExtraHeaders(e){let t=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),d=["authorization","accept","content-type"];r.length!==0&&r.forEach(p=>{if(d.includes(p.toLocaleLowerCase())){t.warn("Protected header could not be overridden",p,d);return}let g=typeof this._extraHeaders[p]=="function"?this._extraHeaders[p]():this._extraHeaders[p];g&&g!==""&&(e[p]=g)})}},Bv=class{constructor(e){this._settings=e,this._logger=new Ft("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Vs(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){let e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);let t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){let r=this._logger.create(`_getMetadataProperty('${e}')`),d=await this.getMetadata();if(r.debug("resolved"),d[e]===void 0){if(t===!0){r.warn("Metadata does not contain optional property");return}r.throw(new Error("Metadata does not contain property "+e))}return d[e]}async getSigningKeys(){let e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;let t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);let r=await this._jsonService.getJson(t);if(e.debug("got key set",r),!Array.isArray(r.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},ip=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new Ft("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){return this._logger.create(`get('${e}')`),e=this._prefix+e,await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;let t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");let e=await this._store.length,t=[];for(let r=0;r<e;r++){let d=await this._store.key(r);d&&d.indexOf(this._prefix)===0&&t.push(d.substr(this._prefix.length))}return t}},Uv="code",Hv="openid",jv="client_secret_post",Wv=60*15,Us=class{constructor({authority:e,metadataUrl:t,metadata:r,signingKeys:d,metadataSeed:p,client_id:g,client_secret:n,response_type:u=Uv,scope:o=Hv,redirect_uri:i,post_logout_redirect_uri:a,client_authentication:l=jv,prompt:s,display:c,max_age:m,ui_locales:h,acr_values:v,resource:k,response_mode:x,filterProtocolClaims:A=!0,loadUserInfo:S=!1,staleStateAgeInSeconds:f=Wv,mergeClaimsStrategy:L={array:"replace"},disablePKCE:$=!1,stateStore:C,revokeTokenAdditionalContentTypes:T,fetchRequestCredentials:w,refreshTokenAllowedScope:y,extraQueryParams:b={},extraTokenParams:E={},extraHeaders:_={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=p,this.signingKeys=d,this.client_id=g,this.client_secret=n,this.response_type=u,this.scope=o,this.redirect_uri=i,this.post_logout_redirect_uri=a,this.client_authentication=l,this.prompt=s,this.display=c,this.max_age=m,this.ui_locales=h,this.acr_values=v,this.resource=k,this.response_mode=x,this.filterProtocolClaims=A??!0,this.loadUserInfo=!!S,this.staleStateAgeInSeconds=f,this.mergeClaimsStrategy=L,this.disablePKCE=!!$,this.revokeTokenAdditionalContentTypes=T,this.fetchRequestCredentials=w||"same-origin",C)this.stateStore=C;else{let R=typeof window<"u"?window.localStorage:new op;this.stateStore=new ip({store:R})}this.refreshTokenAllowedScope=y,this.extraQueryParams=b,this.extraTokenParams=E,this.extraHeaders=_}},Vv=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ft("UserInfoService"),this._getClaimsFromJwt=async r=>{let d=this._logger.create("_getClaimsFromJwt");try{let p=Fs.decode(r);return d.debug("JWT decoding successful"),p}catch(p){throw d.error("Error parsing JWT response"),p}},this._jsonService=new Vs(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){let t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));let r=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",r);let d=await this._jsonService.getJson(r,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",d),d}},np=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ft("TokenClient"),this._jsonService=new Vs(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:d=this._settings.client_secret,...p}){let g=this._logger.create("exchangeCode");r||g.throw(new Error("A client_id is required")),t||g.throw(new Error("A redirect_uri is required")),p.code||g.throw(new Error("A code is required"));let n=new URLSearchParams({grant_type:e,redirect_uri:t});for(let[a,l]of Object.entries(p))l!=null&&n.set(a,l);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!d)throw g.throw(new Error("A client_secret is required")),null;u=Ei.generateBasicAuth(r,d);break;case"client_secret_post":n.append("client_id",r),d&&n.append("client_secret",d);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:n,basicAuth:u,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:d=this._settings.scope,...p}){let g=this._logger.create("exchangeCredentials");t||g.throw(new Error("A client_id is required"));let n=new URLSearchParams({grant_type:e,scope:d});for(let[a,l]of Object.entries(p))l!=null&&n.set(a,l);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw g.throw(new Error("A client_secret is required")),null;u=Ei.generateBasicAuth(t,r);break;case"client_secret_post":n.append("client_id",t),r&&n.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:n,basicAuth:u,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:d,...p}){let g=this._logger.create("exchangeRefreshToken");t||g.throw(new Error("A client_id is required")),p.refresh_token||g.throw(new Error("A refresh_token is required"));let n=new URLSearchParams({grant_type:e});for(let[a,l]of Object.entries(p))Array.isArray(l)?l.forEach(s=>n.append(a,s)):l!=null&&n.set(a,l);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw g.throw(new Error("A client_secret is required")),null;u=Ei.generateBasicAuth(t,r);break;case"client_secret_post":n.append("client_id",t),r&&n.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:n,basicAuth:u,timeoutInSeconds:d,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async revoke(e){var t;let r=this._logger.create("revoke");e.token||r.throw(new Error("A token is required"));let d=await this._metadataService.getRevocationEndpoint(!1);r.debug(`got revocation endpoint, revoking ${(t=e.token_type_hint)!=null?t:"default token type"}`);let p=new URLSearchParams;for(let[g,n]of Object.entries(e))n!=null&&p.set(g,n);p.set("client_id",this._settings.client_id),this._settings.client_secret&&p.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(d,{body:p}),r.debug("got response")}},Gv=class{constructor(e,t,r){this._settings=e,this._metadataService=t,this._claimsService=r,this._logger=new Ft("ResponseValidator"),this._userInfoService=new Vv(this._settings,this._metadataService),this._tokenClient=new np(this._settings,this._metadataService)}async validateSigninResponse(e,t){let r=this._logger.create("validateSigninResponse");this._processSigninState(e,t),r.debug("state processed"),await this._processCode(e,t),r.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t?.skipUserInfo,e.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(e,t){let r=this._logger.create("validateCredentialsResponse");e.isOpenId&&e.id_token&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),r.debug("claims processed")}async validateRefreshResponse(e,t){var r,d;let p=this._logger.create("validateRefreshResponse");e.userState=t.data,(r=e.session_state)!=null||(e.session_state=t.session_state),(d=e.scope)!=null||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),p.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);let g=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,g),p.debug("claims processed")}validateSignoutResponse(e,t){let r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new jo(e)}_processSigninState(e,t){var r;let d=this._logger.create("_processSigninState");if(t.id!==e.state&&d.throw(new Error("State does not match")),t.client_id||d.throw(new Error("No client_id on state")),t.authority||d.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&d.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&d.throw(new Error("client_id mismatch on settings vs. signin state")),d.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,(r=e.scope)!=null||(e.scope=t.scope),e.error)throw d.warn("Response was error",e.error),new jo(e);t.code_verifier&&!e.code&&d.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,r=!0){let d=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token){d.debug("not loading user info");return}d.debug("loading user info");let p=await this._userInfoService.getClaims(e.access_token);d.debug("user info claims received from user info endpoint"),r&&p.sub!==e.profile.sub&&d.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(p)),d.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){let r=this._logger.create("_processCode");if(e.code){r.debug("Validating code");let d=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,d)}else r.debug("No code to process")}_validateIdTokenAttributes(e,t){var r;let d=this._logger.create("_validateIdTokenAttributes");d.debug("decoding ID Token JWT");let p=Fs.decode((r=e.id_token)!=null?r:"");if(p.sub||d.throw(new Error("ID Token is missing a subject claim")),t){let g=Fs.decode(t);p.sub!==g.sub&&d.throw(new Error("sub in id_token does not match current sub")),p.auth_time&&p.auth_time!==g.auth_time&&d.throw(new Error("auth_time in id_token does not match original auth_time")),p.azp&&p.azp!==g.azp&&d.throw(new Error("azp in id_token does not match original azp")),!p.azp&&g.azp&&d.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=p}},pa=class Hs{constructor(t){this.id=t.id||Ei.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=Yr.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}toStorageString(){return new Ft("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return Ft.createStatic("State","fromStorageString"),Promise.resolve(new Hs(JSON.parse(t)))}static async clearStaleState(t,r){let d=Ft.createStatic("State","clearStaleState"),p=Yr.getEpochTime()-r,g=await t.getAllKeys();d.debug("got keys",g);for(let n=0;n<g.length;n++){let u=g[n],o=await t.get(u),i=!1;if(o)try{let a=await Hs.fromStorageString(o);d.debug("got item from key:",u,a.created),a.created<=p&&(i=!0)}catch(a){d.error("Error parsing state for key:",u,a),i=!0}else d.debug("no item in storage for key:",u),i=!0;i&&(d.debug("removed item for key:",u),t.remove(u))}}},ap=class js extends pa{constructor(t){super(t),this.code_verifier=t.code_verifier,this.code_challenge=t.code_challenge,this.authority=t.authority,this.client_id=t.client_id,this.redirect_uri=t.redirect_uri,this.scope=t.scope,this.client_secret=t.client_secret,this.extraTokenParams=t.extraTokenParams,this.response_mode=t.response_mode,this.skipUserInfo=t.skipUserInfo}static async create(t){let r=t.code_verifier===!0?Ei.generateCodeVerifier():t.code_verifier||void 0,d=r?await Ei.generateCodeChallenge(r):void 0;return new js({...t,code_verifier:r,code_challenge:d})}toStorageString(){return new Ft("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){Ft.createStatic("SigninState","fromStorageString");let r=JSON.parse(t);return js.create(r)}},sp=class lp{constructor(t){this.url=t.url,this.state=t.state}static async create({url:t,authority:r,client_id:d,redirect_uri:p,response_type:g,scope:n,state_data:u,response_mode:o,request_type:i,client_secret:a,nonce:l,url_state:s,resource:c,skipUserInfo:m,extraQueryParams:h,extraTokenParams:v,disablePKCE:k,...x}){if(!t)throw this._logger.error("create: No url passed"),new Error("url");if(!d)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!p)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!g)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!n)throw this._logger.error("create: No scope passed"),new Error("scope");if(!r)throw this._logger.error("create: No authority passed"),new Error("authority");let A=await ap.create({data:u,request_type:i,url_state:s,code_verifier:!k,client_id:d,authority:r,redirect_uri:p,response_mode:o,client_secret:a,scope:n,extraTokenParams:v,skipUserInfo:m}),S=new URL(t);S.searchParams.append("client_id",d),S.searchParams.append("redirect_uri",p),S.searchParams.append("response_type",g),S.searchParams.append("scope",n),l&&S.searchParams.append("nonce",l);let f=A.id;s&&(f=`${f}${Bs}${s}`),S.searchParams.append("state",f),A.code_challenge&&(S.searchParams.append("code_challenge",A.code_challenge),S.searchParams.append("code_challenge_method","S256")),c&&(Array.isArray(c)?c:[c]).forEach($=>S.searchParams.append("resource",$));for(let[L,$]of Object.entries({response_mode:o,...x,...h}))$!=null&&S.searchParams.append(L,$.toString());return new lp({url:S.href,state:A})}};sp._logger=new Ft("SigninRequest");var Kv=sp,Yv="openid",Ds=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){let t=decodeURIComponent(this.state).split(Bs);this.state=t[0],t.length>1&&(this.url_state=t.slice(1).join(Bs))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Yr.getEpochTime()}set expires_in(e){typeof e=="string"&&(e=Number(e)),e!==void 0&&e>=0&&(this.expires_at=Math.floor(e)+Yr.getEpochTime())}get isOpenId(){var e;return((e=this.scope)==null?void 0:e.split(" ").includes(Yv))||!!this.id_token}},Xv=class{constructor({url:e,state_data:t,id_token_hint:r,post_logout_redirect_uri:d,extraQueryParams:p,request_type:g,client_id:n}){if(this._logger=new Ft("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");let u=new URL(e);r&&u.searchParams.append("id_token_hint",r),n&&u.searchParams.append("client_id",n),d&&(u.searchParams.append("post_logout_redirect_uri",d),t&&(this.state=new pa({data:t,request_type:g}),u.searchParams.append("state",this.state.id)));for(let[o,i]of Object.entries({...p}))i!=null&&u.searchParams.append(o,i.toString());this.url=u.href}},Jv=class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},qv=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],Qv=["sub","iss","aud","exp","iat"],Zv=class{constructor(e){this._settings=e,this._logger=new Ft("ClaimsService")}filterProtocolClaims(e){let t={...e};if(this._settings.filterProtocolClaims){let r;Array.isArray(this._settings.filterProtocolClaims)?r=this._settings.filterProtocolClaims:r=qv;for(let d of r)Qv.includes(d)||delete t[d]}return t}mergeClaims(e,t){let r={...e};for(let[d,p]of Object.entries(t))if(r[d]!==p)if(Array.isArray(r[d])||Array.isArray(p))if(this._settings.mergeClaimsStrategy.array=="replace")r[d]=p;else{let g=Array.isArray(r[d])?r[d]:[r[d]];for(let n of Array.isArray(p)?p:[p])g.includes(n)||g.push(n);r[d]=g}else typeof r[d]=="object"&&typeof p=="object"?r[d]=this.mergeClaims(r[d],p):r[d]=p;return r}},tw=class{constructor(e,t){this._logger=new Ft("OidcClient"),this.settings=e instanceof Us?e:new Us(e),this.metadataService=t??new Bv(this.settings),this._claimsService=new Zv(this.settings),this._validator=new Gv(this.settings,this.metadataService,this._claimsService),this._tokenClient=new np(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:r,request_type:d,id_token_hint:p,login_hint:g,skipUserInfo:n,nonce:u,url_state:o,response_type:i=this.settings.response_type,scope:a=this.settings.scope,redirect_uri:l=this.settings.redirect_uri,prompt:s=this.settings.prompt,display:c=this.settings.display,max_age:m=this.settings.max_age,ui_locales:h=this.settings.ui_locales,acr_values:v=this.settings.acr_values,resource:k=this.settings.resource,response_mode:x=this.settings.response_mode,extraQueryParams:A=this.settings.extraQueryParams,extraTokenParams:S=this.settings.extraTokenParams}){let f=this._logger.create("createSigninRequest");if(i!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");let L=await this.metadataService.getAuthorizationEndpoint();f.debug("Received authorization endpoint",L);let $=await Kv.create({url:L,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:l,response_type:i,scope:a,state_data:e,url_state:o,prompt:s,display:c,max_age:m,ui_locales:h,id_token_hint:p,login_hint:g,acr_values:v,resource:k,request:t,request_uri:r,extraQueryParams:A,extraTokenParams:S,request_type:d,response_mode:x,client_secret:this.settings.client_secret,skipUserInfo:n,nonce:u,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();let C=$.state;return await this.settings.stateStore.set(C.id,C.toStorageString()),$}async readSigninResponseState(e,t=!1){let r=this._logger.create("readSigninResponseState"),d=new Ds(zs.readParams(e,this.settings.response_mode));if(!d.state)throw r.throw(new Error("No state in response")),null;let p=await this.settings.stateStore[t?"remove":"get"](d.state);if(!p)throw r.throw(new Error("No matching state found in storage")),null;return{state:await ap.fromStorageString(p),response:d}}async processSigninResponse(e){let t=this._logger.create("processSigninResponse"),{state:r,response:d}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(d,r),d}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r=!1,extraTokenParams:d={}}){let p=await this._tokenClient.exchangeCredentials({username:e,password:t,...d}),g=new Ds(new URLSearchParams);return Object.assign(g,p),await this._validator.validateCredentialsResponse(g,r),g}async useRefreshToken({state:e,redirect_uri:t,resource:r,timeoutInSeconds:d,extraTokenParams:p}){var g;let n=this._logger.create("useRefreshToken"),u;if(this.settings.refreshTokenAllowedScope===void 0)u=e.scope;else{let a=this.settings.refreshTokenAllowedScope.split(" ");u=(((g=e.scope)==null?void 0:g.split(" "))||[]).filter(s=>a.includes(s)).join(" ")}let o=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:u,redirect_uri:t,resource:r,timeoutInSeconds:d,...p}),i=new Ds(new URLSearchParams);return Object.assign(i,o),n.debug("validating response",i),await this._validator.validateRefreshResponse(i,{...e,scope:u}),i}async createSignoutRequest({state:e,id_token_hint:t,client_id:r,request_type:d,post_logout_redirect_uri:p=this.settings.post_logout_redirect_uri,extraQueryParams:g=this.settings.extraQueryParams}={}){let n=this._logger.create("createSignoutRequest"),u=await this.metadataService.getEndSessionEndpoint();if(!u)throw n.throw(new Error("No end session endpoint")),null;n.debug("Received end session endpoint",u),!r&&p&&!t&&(r=this.settings.client_id);let o=new Xv({url:u,id_token_hint:t,client_id:r,post_logout_redirect_uri:p,state_data:e,extraQueryParams:g,request_type:d});await this.clearStaleState();let i=o.state;return i&&(n.debug("Signout request has state to persist"),await this.settings.stateStore.set(i.id,i.toStorageString())),o}async readSignoutResponseState(e,t=!1){let r=this._logger.create("readSignoutResponseState"),d=new Jv(zs.readParams(e,this.settings.response_mode));if(!d.state){if(r.debug("No state in response"),d.error)throw r.warn("Response was error:",d.error),new jo(d);return{state:void 0,response:d}}let p=await this.settings.stateStore[t?"remove":"get"](d.state);if(!p)throw r.throw(new Error("No matching state found in storage")),null;return{state:await pa.fromStorageString(p),response:d}}async processSignoutResponse(e){let t=this._logger.create("processSignoutResponse"),{state:r,response:d}=await this.readSignoutResponseState(e,!0);return r?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(d,r)):t.debug("No state from storage; skipping response validation"),d}clearStaleState(){return this._logger.create("clearStaleState"),pa.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},ew=class{constructor(e){this._userManager=e,this._logger=new Ft("SessionMonitor"),this._start=async t=>{let r=t.session_state;if(!r)return;let d=this._logger.create("_start");if(t.profile?(this._sub=t.profile.sub,d.debug("session_state",r,", sub",this._sub)):(this._sub=void 0,d.debug("session_state",r,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(r);return}try{let p=await this._userManager.metadataService.getCheckSessionIframe();if(p){d.debug("initializing check session iframe");let g=this._userManager.settings.client_id,n=this._userManager.settings.checkSessionIntervalInSeconds,u=this._userManager.settings.stopCheckSessionOnError,o=new zv(this._callback,g,p,n,u);await o.load(),this._checkSessionIFrame=o,o.start(r)}else d.warn("no check session iframe found in the metadata")}catch(p){d.error("Error from getCheckSessionIframe:",p instanceof Error?p.message:p)}},this._stop=()=>{let t=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){let r=setInterval(async()=>{clearInterval(r);try{let d=await this._userManager.querySessionStatus();if(d){let p={session_state:d.session_state,profile:d.sub?{sub:d.sub}:null};this._start(p)}}catch(d){t.error("error from querySessionStatus",d instanceof Error?d.message:d)}},1e3)}},this._callback=async()=>{let t=this._logger.create("_callback");try{let r=await this._userManager.querySessionStatus(),d=!0;r&&this._checkSessionIFrame?r.sub===this._sub?(d=!1,this._checkSessionIFrame.start(r.session_state),t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",r.session_state),await this._userManager.events._raiseUserSessionChanged()):t.debug("different subject signed into OP",r.sub):t.debug("subject no longer signed into OP"),d?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():t.debug("no change in session detected, no event to raise")}catch(r){this._sub&&(t.debug("Error calling queryCurrentSigninSession; raising signed out event",r),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(t=>{this._logger.error(t)})}async _init(){this._logger.create("_init");let e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){let t=await this._userManager.querySessionStatus();if(t){let r={session_state:t.session_state,profile:t.sub?{sub:t.sub}:null};this._start(r)}}}},Ns=class dp{constructor(t){var r;this.id_token=t.id_token,this.session_state=(r=t.session_state)!=null?r:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Yr.getEpochTime()}set expires_in(t){t!==void 0&&(this.expires_at=Math.floor(t)+Yr.getEpochTime())}get expired(){let t=this.expires_in;if(t!==void 0)return t<=0}get scopes(){var t,r;return(r=(t=this.scope)==null?void 0:t.split(" "))!=null?r:[]}toStorageString(){return new Ft("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return Ft.createStatic("User","fromStorageString"),new dp(JSON.parse(t))}},tp="oidc-client",cp=class{constructor(){this._abort=new ho("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){let t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);let{url:r,keepOpen:d}=await new Promise((p,g)=>{let n=u=>{var o;let i=u.data,a=(o=e.scriptOrigin)!=null?o:window.location.origin;if(!(u.origin!==a||i?.source!==tp)){try{let l=zs.readParams(i.url,e.response_mode).get("state");if(l||t.warn("no state found in response url"),u.source!==this._window&&l!==e.state)return}catch{this._dispose(),g(new Error("Invalid response from window"))}p(i)}};window.addEventListener("message",n,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",n,!1)),this._disposeHandlers.add(this._abort.addHandler(u=>{this._dispose(),g(u)}))});return t.debug("got response from window"),this._dispose(),d||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(let e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,r=!1,d=window.location.origin){e.postMessage({source:tp,url:t,keepOpen:r},d)}},pp={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},up="_blank",rw=60,ow=2,mp=10,iw=class extends Us{constructor(e){let{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:r=e.post_logout_redirect_uri,popupWindowFeatures:d=pp,popupWindowTarget:p=up,redirectMethod:g="assign",redirectTarget:n="self",iframeNotifyParentOrigin:u=e.iframeNotifyParentOrigin,iframeScriptOrigin:o=e.iframeScriptOrigin,silent_redirect_uri:i=e.redirect_uri,silentRequestTimeoutInSeconds:a=mp,automaticSilentRenew:l=!0,validateSubOnSilentRenew:s=!0,includeIdTokenInSilentRenew:c=!1,monitorSession:m=!1,monitorAnonymousSession:h=!1,checkSessionIntervalInSeconds:v=ow,query_status_response_type:k="code",stopCheckSessionOnError:x=!0,revokeTokenTypes:A=["access_token","refresh_token"],revokeTokensOnSignout:S=!1,includeIdTokenInSilentSignout:f=!1,accessTokenExpiringNotificationTimeInSeconds:L=rw,userStore:$}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=d,this.popupWindowTarget=p,this.redirectMethod=g,this.redirectTarget=n,this.iframeNotifyParentOrigin=u,this.iframeScriptOrigin=o,this.silent_redirect_uri=i,this.silentRequestTimeoutInSeconds=a,this.automaticSilentRenew=l,this.validateSubOnSilentRenew=s,this.includeIdTokenInSilentRenew=c,this.monitorSession=m,this.monitorAnonymousSession=h,this.checkSessionIntervalInSeconds=v,this.stopCheckSessionOnError=x,this.query_status_response_type=k,this.revokeTokenTypes=A,this.revokeTokensOnSignout=S,this.includeIdTokenInSilentSignout=f,this.accessTokenExpiringNotificationTimeInSeconds=L,$)this.userStore=$;else{let C=typeof window<"u"?window.sessionStorage:new op;this.userStore=new ip({store:C})}}},ep=class gp extends cp{constructor({silentRequestTimeoutInSeconds:t=mp}){super(),this._logger=new Ft("IFrameWindow"),this._timeoutInSeconds=t,this._frame=gp.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){let t=window.document.createElement("iframe");return t.style.visibility="hidden",t.style.position="fixed",t.style.left="-1000px",t.style.top="0",t.width="0",t.height="0",window.document.body.appendChild(t),t}async navigate(t){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);let r=setTimeout(()=>void this._abort.raise(new Ws("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(r)),await super.navigate(t)}close(){var t;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",r=>{var d;let p=r.target;(d=p.parentNode)==null||d.removeChild(p),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(t=this._frame.contentWindow)==null||t.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(t,r){return super._notifyParent(window.parent,t,!1,r)}},nw=class{constructor(e){this._settings=e,this._logger=new Ft("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new ep({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),ep.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},aw=500,sw=1e3,rp=class extends cp{constructor({popupWindowTarget:e=up,popupWindowFeatures:t={}}){super(),this._logger=new Ft("PopupWindow");let r=Zc.center({...pp,...t});this._window=window.open(void 0,e,Zc.serialize(r)),t.closePopupWindowAfterInSeconds&&t.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},t.closePopupWindowAfterInSeconds*sw)}async navigate(e){var t;(t=this._window)==null||t.focus();let r=setInterval(()=>{(!this._window||this._window.closed)&&this._abort.raise(new Error("Popup closed by user"))},aw);return this._disposeHandlers.add(()=>clearInterval(r)),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},lw=class{constructor(e){this._settings=e,this._logger=new Ft("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new rp({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,{keepOpen:t=!1}){this._logger.create("callback"),rp.notifyOpener(e,t)}},dw=class{constructor(e){this._settings=e,this._logger=new Ft("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var r;this._logger.create("prepare");let d=window.self;t==="top"&&(d=(r=window.top)!=null?r:window.self);let p=d.location[e].bind(d.location),g;return{navigate:async n=>{this._logger.create("navigate");let u=new Promise((o,i)=>{g=i});return p(n.url),await u},close:()=>{this._logger.create("close"),g?.(new Error("Redirect aborted")),d.stop()}}}async callback(){}},cw=class extends Fv{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new Ft("UserManagerEvents"),this._userLoaded=new ho("User loaded"),this._userUnloaded=new ho("User unloaded"),this._silentRenewError=new ho("Silent renew error"),this._userSignedIn=new ho("User signed in"),this._userSignedOut=new ho("User signed out"),this._userSessionChanged=new ho("User session changed")}async load(e,t=!0){super.load(e),t&&await this._userLoaded.raise(e)}async unload(){super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},pw=class{constructor(e){this._userManager=e,this._logger=new Ft("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Yr("Retry Silent Renew"),this._tokenExpiring=async()=>{let t=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),t.debug("silent token renewal successful")}catch(r){if(r instanceof Ws){t.warn("ErrorTimeout from signinSilent:",r,"retry in 5s"),this._retryTimer.init(5);return}t.error("Error from signinSilent:",r),await this._userManager.events._raiseSilentRenewError(r)}}}async start(){let e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},uw=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},ua=class{constructor(e,t,r,d){this._logger=new Ft("UserManager"),this.settings=new iw(e),this._client=new tw(e),this._redirectNavigator=t??new dw(this.settings),this._popupNavigator=r??new lw(this.settings),this._iframeNavigator=d??new nw(this.settings),this._events=new cw(this.settings),this._silentRenewService=new pw(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new ew(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){let e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),await this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){let e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");let{redirectMethod:t,...r}=e,d=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...r},d)}async signinRedirectCallback(e=window.location.href){let t=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(e);return r.profile&&r.profile.sub?t.info("success, signed in subject",r.profile.sub):t.info("no subject"),r}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:r=!1}){let d=this._logger.create("signinResourceOwnerCredential"),p=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});d.debug("got signin response");let g=await this._buildUser(p);return g.profile&&g.profile.sub?d.info("success, signed in subject",g.profile.sub):d.info("no subject"),g}async signinPopup(e={}){let t=this._logger.create("signinPopup"),{popupWindowFeatures:r,popupWindowTarget:d,...p}=e,g=this.settings.popup_redirect_uri;g||t.throw(new Error("No popup_redirect_uri configured"));let n=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:d}),u=await this._signin({request_type:"si:p",redirect_uri:g,display:"popup",...p},n);return u&&(u.profile&&u.profile.sub?t.info("success, signed in subject",u.profile.sub):t.info("no subject")),u}async signinPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async signinSilent(e={}){var t;let r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:d,...p}=e,g=await this._loadUser();if(g?.refresh_token){r.debug("using refresh token");let i=new uw(g);return await this._useRefreshToken({state:i,redirect_uri:p.redirect_uri,resource:p.resource,extraTokenParams:p.extraTokenParams,timeoutInSeconds:d})}let n=this.settings.silent_redirect_uri;n||r.throw(new Error("No silent_redirect_uri configured"));let u;g&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",g.profile.sub),u=g.profile.sub);let o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:d});return g=await this._signin({request_type:"si:s",redirect_uri:n,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?g?.id_token:void 0,...p},o,u),g&&((t=g.profile)!=null&&t.sub?r.info("success, signed in subject",g.profile.sub):r.info("no subject")),g}async _useRefreshToken(e){let t=await this._client.useRefreshToken({...e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),r=new Ns({...e.state,...t});return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(e=window.location.href){let t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){let{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){let{state:r}=await this._client.readSignoutResponseState(e);if(r)switch(r.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){let t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...d}=e,p=this.settings.silent_redirect_uri;p||t.throw(new Error("No silent_redirect_uri configured"));let g=await this._loadUser(),n=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),u=await this._signinStart({request_type:"si:s",redirect_uri:p,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?g?.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...d},n);try{let o=await this._client.processSigninResponse(u.url);return t.debug("got signin response"),o.session_state&&o.profile.sub?(t.info("success for subject",o.profile.sub),{session_state:o.session_state,sub:o.profile.sub}):(t.info("success, user not authenticated"),null)}catch(o){if(this.settings.monitorAnonymousSession&&o instanceof jo)switch(o.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:o.session_state}}throw o}}async _signin(e,t,r){let d=await this._signinStart(e,t);return await this._signinEnd(d.url,r)}async _signinStart(e,t){let r=this._logger.create("_signinStart");try{let d=await this._client.createSigninRequest(e);return r.debug("got signin request"),await t.navigate({url:d.url,state:d.state.id,response_mode:d.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(d){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),d}}async _signinEnd(e,t){let r=this._logger.create("_signinEnd"),d=await this._client.processSigninResponse(e);return r.debug("got signin response"),await this._buildUser(d,t)}async _buildUser(e,t){let r=this._logger.create("_buildUser"),d=new Ns(e);if(t){if(t!==d.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",d.profile.sub),new jo({...e,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(d),r.debug("user stored"),await this._events.load(d),d}async signoutRedirect(e={}){let t=this._logger.create("signoutRedirect"),{redirectMethod:r,...d}=e,p=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...d},p),t.info("success")}async signoutRedirectCallback(e=window.location.href){let t=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(e);return t.info("success"),r}async signoutPopup(e={}){let t=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:d,...p}=e,g=this.settings.popup_post_logout_redirect_uri,n=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:d});await this._signout({request_type:"so:p",post_logout_redirect_uri:g,state:g==null?void 0:{},...p},n),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async _signout(e,t){let r=await this._signoutStart(e,t);return await this._signoutEnd(r.url)}async _signoutStart(e={},t){var r;let d=this._logger.create("_signoutStart");try{let p=await this._loadUser();d.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(p);let g=e.id_token_hint||p&&p.id_token;g&&(d.debug("setting id_token_hint in signout request"),e.id_token_hint=g),await this.removeUser(),d.debug("user removed, creating signout request");let n=await this._client.createSignoutRequest(e);return d.debug("got signout request"),await t.navigate({url:n.url,state:(r=n.state)==null?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(p){throw d.debug("error after preparing navigator, closing navigator window"),t.close(),p}}async _signoutEnd(e){let t=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(e);return t.debug("got signout response"),r}async signoutSilent(e={}){var t;let r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:d,...p}=e,g=this.settings.includeIdTokenInSilentSignout?(t=await this._loadUser())==null?void 0:t.id_token:void 0,n=this.settings.popup_post_logout_redirect_uri,u=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:d});await this._signout({request_type:"so:s",post_logout_redirect_uri:n,id_token_hint:g,...p},u),r.info("success")}async signoutSilentCallback(e=window.location.href){let t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){let t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){let r=this._logger.create("_revokeInternal");if(!e)return;let d=t.filter(p=>typeof e[p]=="string");if(!d.length){r.debug("no need to revoke due to no token(s)");return}for(let p of d)await this._client.revokeToken(e[p],p),r.info(`${p} revoked successfully`),p!=="access_token"&&(e[p]=null);await this.storeUser(e),r.debug("user stored"),await this._events.load(e)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){let e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),Ns.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){let t=this._logger.create("storeUser");if(e){t.debug("storing user");let r=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}};var yp=In(hp()),xp=In(fp());var kp=In(vp()),_i={modalBodyConfirm:null,buttonConfirmed:null,toastContainer:null};function Ep(){ht(_i)}var Ut=function(e,t,r,d,...p){let g=e.insertRow();g.id=t,bo(g,t,t,0);let n=t;return p.forEach(u=>{bo(g,u),n=u}),r&&g.classList.add("table-active"),d&&Qs(g,wp,gw(wp,mw,d),"Copy to clipboard"),g};function Si(e,t,r,d=!1,p=null){let g=e.insertCell(0);g.style.verticalAlign="middle",g.style.width="25px";let n=document.createElement("input");return n.classList.add("form-check-input"),n.type="checkbox",n.id=t,n.checked=r,n.disabled=d,p&&(n.onchange=p),g.append(n),n}function bo(e,t,r=null,d=-1){let p=e.insertCell(d);return p.textContent=t,p.setAttribute("data-bs-toggle","tooltip"),p.title=r??t,p}function Qs(e,t,r,d){let p=e.insertCell();p.classList.add("table-action-column");let g=document.createElement("button");g.classList.add("btn"),g.style.padding="0",g.innerHTML=`<i class="bi ${t}"></i>`,d&&(g.title=d),g.onclick=r,p.appendChild(g)}var wp="bi-copy",mw="bi-check-lg";function gw(e,t,r){return d=>{navigator.clipboard.writeText(r);let p=d.currentTarget.querySelector(".bi");p.classList.replace(e,t),setTimeout(()=>p.classList.replace(t,e),500)}}function ha(e,t){let r=document.createElement("th");r.textContent=t,e.appendChild(r)}function Ge(e,t){e.textContent="",t.forEach(r=>{let d=document.createElement("option");d.text=r,e.appendChild(d)})}function Zs(e,t){e.textContent="",t.forEach(r=>{let d=document.createElement("option");d.value=r.key,d.text=r.text,e.appendChild(d)})}function fo(e,t){t.forEach(r=>{Wo(e,r)})}function Wo(e,t,r=!1,d){let p=document.createElement("li");p.innerHTML=r?`<h6 class="dropdown-header" data-value='${d}'>${Xr(t)}</h6>`:`<a class="dropdown-item" data-value='${d}'>${Xr(t)}</a>`,e.appendChild(p)}function Ci(e,t,r,d,p=null){let g="tab"+Math.random().toString(36).replace("0.",""),n=document.createElement("li");n.classList.add("nav-item"),p&&(n.setAttribute("data-bs-toggle","tooltip"),n.setAttribute("title",p)),n.innerHTML=`<a class="nav-link" data-bs-toggle="tab" data-bs-target="#${g}">${r}</a>`,e.appendChild(n);let u=document.createElement("template");return u.innerHTML=d,u.content.firstElementChild.id=g,t.appendChild(u.content.firstElementChild),g}function ht(e,t=null){Object.keys(e).forEach(r=>{if(e[r]=(t??document).getElementById(r),!e[r])throw new Error(`Element ${r} not found.`)})}function Xr(e){return kp.sanitize(e)}function tl(e,t="Info"){let r=document.createElement("div");r.classList.add("toast"),r.innerHTML=`<div class="toast-header toast-header-info">
  <i class="bi me-2 bi-info-circle-fill"></i>
  <strong class="me-auto">${Xr(t)}</strong>
  <small>${status}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Xr(e)}</div>`,_i.toastContainer.appendChild(r),r.addEventListener("hidden.bs.toast",()=>{r.remove()}),new zo(r).show()}function ae(e,t="Error",r=""){let d=document.createElement("div");d.classList.add("toast"),d.innerHTML=`<div class="toast-header toast-header-warn alert-danger">
  <i class="bi me-2 bi-exclamation-triangle-fill"></i>
  <strong class="me-auto">${Xr(t)}</strong>
  <small>${r}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Xr(e)}</div>`,_i.toastContainer.appendChild(d),d.addEventListener("hidden.bs.toast",()=>{d.remove()}),new zo(d).show()}function hw(e){this.message=e,this.name="UserException"}function lt(e,t,r=null){if(r&&r.classList.remove("is-invalid"),!e)throw r?(r.parentNode.getElementsByClassName("invalid-feedback")[0].textContent=t,r.classList.add("is-invalid")):ae(t,"Error"),new hw(t)}function un(e,t=!1){return t?e.replace("T"," ").replace("Z","").replace("."," "):e.split(".")[0].replace("T"," ")}var qs;function Ke(e,t,r){qs=qs??new Ir("#modalConfirm"),_i.modalBodyConfirm.textContent=e,_i.buttonConfirmed.innerText=t,_i.buttonConfirmed.onclick=r,qs.show()}function Nt(e,t,r=!1,d=!1){let p=xp.edit(e);return p.setOption("wrap",d),p.setOption("useWorker",!1),p.session.setMode(t),r&&(p.setReadOnly(!0),p.renderer.setShowGutter(!1)),p}function _p(e,t,r){return new yp.default({selector:e,data:{src:t,keys:["label","group"]},placeHolder:r,resultsList:{class:"dropdown-menu show",maxResults:30},resultItem:{class:"dropdown-item",highlight:!0,element:(d,p)=>{d.style="display: flex;",d.innerHTML=`<span style="flex-grow: 1;" >${Xr(p.key==="label"?p.match:p.value.label)}</span>
            <span style="color: 3a8c9a;" class="fw-light fst-italic ms-1">
              ${p.key==="group"?p.match:p.value.group}</span>`}},events:{input:{results:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(d=>{d.style.overflow="unset"})},close:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(d=>{d.style.overflow="auto"})}}}})}function cr(e,t){e.addEventListener("click",()=>{t.classList.remove("is-invalid")})}function Sp(e,t){Array.from(e.rows).forEach(r=>{t(r)?r.classList.add("table-active"):r.classList.remove("table-active")})}function Tt(e){return JSON.stringify(e,null,2)}function Cp(e,t){let r=e.value.indexOf(t);return r>=0?(e.focus(),e.setSelectionRange(r,r+t.length),!0):!1}function mn(e,t,r){!r||r.length===t.length?e.textContent=t.length>0?t.length.toString():"":e.textContent=`${r.length}/${t.length}`}var Tp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="row resizable_pane" style="height: 80vh">
    <div class="col-md-4 resizable_flex_column">
        <div class="input-group has-validation">
            <input class="form-control" id="tableValidationEnvironments" hidden="true"></input>
            <div class="invalid-feedback"></div>
        </div>
        <div class="table-wrap">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyEnvironments"></tbody>
            </table>
        </div>
    </div>
    <div class="col-md-8 resizable_flex_column">
        <ul class="nav nav-tabs nav-fill">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabEnvDetails">Manage</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabEnvJson">JSON</a>
            </li>
        </ul>
        <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
            <div class="tab-pane container active no-margin" id="tabEnvDetails">
                <crud-toolbar label="Name" id="crudEnvironmentFields" allowIdChange>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="URI including protocol, host and port (e.g. http://localhost:8080)">API URI</label>
                        <input type="text" class="form-control form-control-sm" id="inputApiUri" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="A comma-separated list of namespaces (e.g. com.example.namespace). The given namespaces are used as a parameter for the Things search">Search Namespaces</label>
                        <input type="text" class="form-control form-control-sm" spellcheck="false" id="inputSearchNamespaces" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1 mb-3">
                        <label class="input-group-text">Ditto Version</label>
                        <select class="form-select form-select-sm" id="selectDittoVersion" disabled>
                            <option selected value="3">3</option>
                            <option value="2">2</option>
                        </select>
                    </div>    
                    <label class="form-label">Optional Tabs</label>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabPolicies" disabled>
                        <label class="form-check-label" for="inputTabPolicies">Policies</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabConnections" disabled>
                        <label class="form-check-label" for="inputTabConnections">Connections</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabOperations" disabled>
                        <label class="form-check-label" for="inputTabOperations">Operations</label>
                      </div>
            </crud-toolbar>
            </div>
            <div class="tab-pane container no-margin" id="tabEnvJson">
                <crud-toolbar label="Name" id="crudEnvironmentJson" allowIdChange>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div>
                            <div class="script_editor" id="settingsEditor"></div>
                        </div>
                    </div>
                </crud-toolbar>
            </div>
        </div>
    </div>
</div>`;var Ap={local_ditto:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},local_ditto_ide:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"pre",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:"pre:ditto"}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},ditto_sandbox:{api_uri:"https://ditto.eclipseprojects.io",ditto_version:3,disablePolicies:!1,disableConnections:!0,disableOperations:!0,authSettings:{main:{method:"basic",oidc:{enabled:!0,defaultProvider:"fake"},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!1}},oidc:{}}},oidc_example:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0}},oidc:{providers:{fake:{displayName:"Fake IDP to test",extractBearerTokenFrom:"access_token",authority:"http://localhost:9900/fake",client_id:"some-client-id",redirect_uri:"http://localhost:8000",response_type:"code",scope:"openid"}}}}}};var vw="state",Ti="primaryEnvironmentName",ba="oidcProvider",ww="environmentsURL",Ip="ditto-ui-env",Vo=(p=>(p.oidc="oidc",p.basic="basic",p.bearer="bearer",p.pre="pre",p))(Vo||{}),yw={main:{method:"basic",oidc:{enabled:!1,defaultProvider:null,autoSso:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null,autoSso:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!1}},oidc:{}},qt,re,vo,mt={environmentSelector:null,tbodyEnvironments:null,tableValidationEnvironments:null,crudEnvironmentFields:null,crudEnvironmentJson:null,inputApiUri:null,inputSearchNamespaces:null,selectDittoVersion:null,inputTabPolicies:null,inputTabConnections:null,inputTabOperations:null},Op=[];document.getElementById("environmentsHTML").innerHTML=Tp;function el(e){Object.assign(this,e),this.authSettings||(this.authSettings=yw),this.authSettings.main.oidc.provider=e.authSettings?.main?.oidc?.defaultProvider,Np(e.authSettings?.main?.basic?.defaultUsernamePassword),this.authSettings.main.pre.dittoPreAuthenticatedUsername=e.authSettings?.main?.pre?.defaultDittoPreAuthenticatedUsername,this.authSettings.devops.oidc.provider=e.authSettings?.devops?.oidc?.defaultProvider,Fp(e.authSettings?.devops?.basic?.defaultUsernamePassword)}function gn(){return mt.environmentSelector.value}function Q(){return qt[gn()]}function Ye(e){Op.push(e)}async function Pp(e,t=null){await zp(e),Op.forEach(r=>r.call(null,t))}async function Dp(){ht(mt),cr(mt.tbodyEnvironments,mt.tableValidationEnvironments),qt=await Ew(),vo=Nt("settingsEditor","ace/mode/json",!0),mt.tbodyEnvironments.addEventListener("click",kw),mt.crudEnvironmentJson.addEventListener("onCreateClick",$p),mt.crudEnvironmentJson.addEventListener("onUpdateClick",Rp),mt.crudEnvironmentJson.addEventListener("onDeleteClick",Lp),mt.crudEnvironmentJson.addEventListener("onEditToggle",Mp),mt.crudEnvironmentFields.addEventListener("onCreateClick",$p),mt.crudEnvironmentFields.addEventListener("onUpdateClick",Rp),mt.crudEnvironmentFields.addEventListener("onDeleteClick",Lp),mt.crudEnvironmentFields.addEventListener("onEditToggle",Mp),mt.environmentSelector.onchange=xw,document.querySelector('a[data-bs-target="#tabEnvJson"]').addEventListener("shown.bs.tab",()=>{vo.renderer.updateFull()}),await ie(!0)}async function xw(){let e=new URLSearchParams(window.location.search);e.set(Ti,gn()),window.history.replaceState(null,null,`${window.location.pathname}?${e}`),await Pp(!1)}async function Lp(){lt(re,"No environment selected",mt.tableValidationEnvironments),lt(Object.keys(qt).length>=2,"At least one environment is required",mt.tableValidationEnvironments),delete qt[re],re=null,await ie(!1)}async function $p(e){lt(e.target.idValue,"Environment name must not be empty",e.target.validationElement),lt(!qt[e.target.idValue],"Environment name already used",e.target.validationElement),e.target===mt.crudEnvironmentFields?qt[e.target.idValue]=new el({api_uri:mt.inputApiUri.value??"",searchNamespaces:mt.inputSearchNamespaces.value??"",ditto_version:mt.selectDittoVersion.value?mt.selectDittoVersion.value:"3"}):qt[e.target.idValue]=new el(JSON.parse(vo.getValue())),re=e.target.idValue,e.target.toggleEdit(),await ie(!1)}function kw(e){e.target&&e.target.tagName==="TD"&&(re&&re===e.target.parentNode.id?re=null:re=e.target.parentNode.id,rl())}async function Rp(e){re!==e.target.idValue&&t(),e.target===mt.crudEnvironmentFields?(qt[re].api_uri=mt.inputApiUri.value,qt[re].ditto_version=mt.selectDittoVersion.value,qt[re].searchNamespaces=mt.inputSearchNamespaces.value,qt[re].disablePolicies=!mt.inputTabPolicies.checked,qt[re].disableConnections=!mt.inputTabConnections.checked,qt[re].disableOperations=!mt.inputTabOperations.checked):qt[re]=JSON.parse(vo.getValue()),e.target.toggleEdit(),await ie(!1);function t(){qt[e.target.idValue]=qt[re],delete qt[re],re=e.target.idValue}}function Go(){qt&&localStorage.setItem(Ip,JSON.stringify(qt))}async function ie(e,t=null){r(),Go(),rl(),d(),await Pp(e,t);function r(){let p=mt.environmentSelector.value,g=new URLSearchParams(window.location.search);p||(p=g.get(Ti));let n=g.get(vw);if(!p&&n!==null){let u=n.split(";");if(u.length>1){let o=atob(u[1]),i=new URLSearchParams(o),a=i.get(Ti),l=i.get(ba);p=a,l&&(qt[p].authSettings.main.oidc.provider=l)}}(!p||!qt[p])&&(p=Object.keys(qt)[0]),Ge(mt.environmentSelector,Object.keys(qt)),mt.environmentSelector.value=p}function d(){mt.tbodyEnvironments.textContent="",Object.keys(qt).forEach(p=>{Ut(mt.tbodyEnvironments,p,p===re)})}}function rl(){if(re){let e=qt[re];mt.crudEnvironmentFields.idValue=re,mt.crudEnvironmentJson.idValue=re,vo.setValue(Tt(e),-1),mt.inputApiUri.value=e.api_uri,mt.inputSearchNamespaces.value=e.searchNamespaces??"",mt.selectDittoVersion.value=e.ditto_version?e.ditto_version:"3",mt.inputTabPolicies.checked=!e.disablePolicies,mt.inputTabConnections.checked=!e.disableConnections,mt.inputTabOperations.checked=!e.disableOperations}else mt.crudEnvironmentFields.idValue=null,mt.crudEnvironmentJson.idValue=null,vo.setValue(""),mt.inputApiUri.value=null,mt.inputSearchNamespaces.value=null,mt.selectDittoVersion.value=3,mt.inputTabPolicies.checked=!0,mt.inputTabConnections.checked=!0,mt.inputTabOperations.checked=!0}async function Ew(){let e,t,d=new URLSearchParams(window.location.search).get(ww);if(d)try{let o=await fetch(d);if(!o.ok)throw new Error(`URL ${d} can not be loaded`);e=await o.json(),n(e)}catch(o){e=null,ae(o.message,"Error loading environments from URL")}let p=localStorage.getItem(Ip);p&&(t=JSON.parse(p));let g;return e?t?g=u(e,t):g=e:t?g=t:g=Ap,Object.keys(g).forEach(o=>{g[o]=new el(g[o])}),g;function n(o){Object.keys(o).forEach(i=>{if(!o[i].hasOwnProperty("api_uri"))throw new SyntaxError("Environments json invalid")})}function u(o,i){let a={};return Object.keys(o).forEach(l=>{a[l]={...i[l],...o[l]}}),{...i,...a}}}function Mp(e){mt.inputApiUri.disabled=!e.detail.isEditing,mt.inputSearchNamespaces.disabled=!e.detail.isEditing,mt.selectDittoVersion.disabled=!e.detail.isEditing,mt.inputTabPolicies.disabled=!e.detail.isEditing,mt.inputTabConnections.disabled=!e.detail.isEditing,mt.inputTabOperations.disabled=!e.detail.isEditing,vo.setReadOnly(!e.detail.isEditing),vo.renderer.setShowGutter(e.detail.isEditing),e.detail.isEditing||rl()}var nl=class{add(t,r,d){if(typeof arguments[0]!="string")for(let p in arguments[0])this.add(p,arguments[0][p],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(p){this[p]=this[p]||[],r&&this[p][d?"unshift":"push"](r)},this)}run(t,r){this[t]=this[t]||[],this[t].forEach(function(d){d.call(r&&r.context?r.context:r,r)})}},al=class{constructor(t){this.jsep=t,this.registered={}}register(){for(var t=arguments.length,r=new Array(t),d=0;d<t;d++)r[d]=arguments[d];r.forEach(p=>{if(typeof p!="object"||!p.name||!p.init)throw new Error("Invalid JSEP plugin format");this.registered[p.name]||(p.init(this.jsep),this.registered[p.name]=p)})}},Xe=class e{static get version(){return"1.3.9"}static toString(){return"JavaScript Expression Parser (JSEP) v"+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,r,d){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=r,d?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,r){return e.literals[t]=r,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(r=>r.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(t){let r=new Error(t+" at character "+this.index);throw r.index=this.index,r.description=t,r}runHook(t,r){if(e.hooks[t]){let d={context:this,node:r};return e.hooks.run(t,d),d.node}return r}searchHook(t){if(e.hooks[t]){let r={context:this};return e.hooks[t].find(function(d){return d.call(r.context,r),r.node}),r.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),r=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook("after-all",r)}gobbleExpressions(t){let r=[],d,p;for(;this.index<this.expr.length;)if(d=this.code,d===e.SEMCOL_CODE||d===e.COMMA_CODE)this.index++;else if(p=this.gobbleExpression())r.push(p);else if(this.index<this.expr.length){if(d===t)break;this.throwError('Unexpected "'+this.char+'"')}return r}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),r=t.length;for(;r>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=r,t;t=t.substr(0,--r)}return!1}gobbleBinaryExpression(){let t,r,d,p,g,n,u,o,i;if(n=this.gobbleToken(),!n||(r=this.gobbleBinaryOp(),!r))return n;for(g={value:r,prec:e.binaryPrecedence(r),right_a:e.right_associative.has(r)},u=this.gobbleToken(),u||this.throwError("Expected expression after "+r),p=[n,g,u];r=this.gobbleBinaryOp();){if(d=e.binaryPrecedence(r),d===0){this.index-=r.length;break}g={value:r,prec:d,right_a:e.right_associative.has(r)},i=r;let a=l=>g.right_a&&l.right_a?d>l.prec:d<=l.prec;for(;p.length>2&&a(p[p.length-2]);)u=p.pop(),r=p.pop().value,n=p.pop(),t={type:e.BINARY_EXP,operator:r,left:n,right:u},p.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+i),p.push(g,t)}for(o=p.length-1,t=p[o];o>1;)t={type:e.BINARY_EXP,operator:p[o-1].value,left:p[o-2],right:t},o-=2;return t}gobbleToken(){let t,r,d,p;if(this.gobbleSpaces(),p=this.searchHook("gobble-token"),p)return this.runHook("after-token",p);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)p=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)p=this.gobbleArray();else{for(r=this.expr.substr(this.index,e.max_unop_len),d=r.length;d>0;){if(e.unary_ops.hasOwnProperty(r)&&(!e.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+r.length)))){this.index+=d;let g=this.gobbleToken();return g||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:e.UNARY_EXP,operator:r,argument:g,prefix:!0})}r=r.substr(0,--d)}e.isIdentifierStart(t)?(p=this.gobbleIdentifier(),e.literals.hasOwnProperty(p.name)?p={type:e.LITERAL,value:e.literals[p.name],raw:p.name}:p.name===e.this_str&&(p={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(p=this.gobbleGroup())}return p?(p=this.gobbleTokenProperty(p),this.runHook("after-token",p)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let r=this.code;for(;r===e.PERIOD_CODE||r===e.OBRACK_CODE||r===e.OPAREN_CODE||r===e.QUMARK_CODE;){let d;if(r===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;d=!0,this.index+=2,this.gobbleSpaces(),r=this.code}this.index++,r===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},t.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),r=this.code,r!==e.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):r===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(r===e.PERIOD_CODE||d)&&(d&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),d&&(t.optional=!0),this.gobbleSpaces(),r=this.code}return t}gobbleNumericLiteral(){let t="",r,d;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(r=this.char,r==="e"||r==="E"){for(t+=this.expr.charAt(this.index++),r=this.char,(r==="+"||r==="-")&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return d=this.code,e.isIdentifierStart(d)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(d===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",r=this.index,d=this.expr.charAt(this.index++),p=!1;for(;this.index<this.expr.length;){let g=this.expr.charAt(this.index++);if(g===d){p=!0;break}else if(g==="\\")switch(g=this.expr.charAt(this.index++),g){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=g}else t+=g}return p||this.throwError('Unclosed quote after "'+t+'"'),{type:e.LITERAL,value:t,raw:this.expr.substring(r,this.index)}}gobbleIdentifier(){let t=this.code,r=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(r,this.index)}}gobbleArguments(t){let r=[],d=!1,p=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let g=this.code;if(g===t){d=!0,this.index++,t===e.CPAREN_CODE&&p&&p>=r.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(g===e.COMMA_CODE){if(this.index++,p++,p!==r.length){if(t===e.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===e.CBRACK_CODE)for(let n=r.length;n<p;n++)r.push(null)}}else if(r.length!==p&&p!==0)this.throwError("Expected comma");else{let n=this.gobbleExpression();(!n||n.type===e.COMPOUND)&&this.throwError("Expected comma"),r.push(n)}}return d||this.throwError("Expected "+String.fromCharCode(t)),r}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},_w=new nl;Object.assign(Xe,{hooks:_w,plugins:new al(Xe),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});Xe.max_unop_len=Xe.getMaxKeyLen(Xe.unary_ops);Xe.max_binop_len=Xe.getMaxKeyLen(Xe.binary_ops);var Li=e=>new Xe(e).parse(),Sw=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(Xe).filter(e=>!Sw.includes(e)&&Li[e]===void 0).forEach(e=>{Li[e]=Xe[e]});Li.Jsep=Xe;var Cw="ConditionalExpression",Tw={name:"ternary",init(e){e.hooks.add("after-expression",function(r){if(r.node&&this.code===e.QUMARK_CODE){this.index++;let d=r.node,p=this.gobbleExpression();if(p||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let g=this.gobbleExpression();if(g||this.throwError("Expected expression"),r.node={type:Cw,test:d,consequent:p,alternate:g},d.operator&&e.binary_ops[d.operator]<=.9){let n=d;for(;n.right.operator&&e.binary_ops[n.right.operator]<=.9;)n=n.right;r.node.test=n.right,n.right=r.node,r.node=d}}else this.throwError("Expected :")}})}};Li.plugins.register(Tw);var Bp=47,Aw=92,Lw={name:"regex",init(e){e.hooks.add("gobble-token",function(r){if(this.code===Bp){let d=++this.index,p=!1;for(;this.index<this.expr.length;){if(this.code===Bp&&!p){let g=this.expr.slice(d,this.index),n="";for(;++this.index<this.expr.length;){let o=this.code;if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57)n+=this.char;else break}let u;try{u=new RegExp(g,n)}catch(o){this.throwError(o.message)}return r.node={type:e.LITERAL,value:u,raw:this.expr.slice(d-1,this.index)},r.node=this.gobbleTokenProperty(r.node),r.node}this.code===e.OBRACK_CODE?p=!0:p&&this.code===e.CBRACK_CODE&&(p=!1),this.index+=this.code===Aw?2:1}this.throwError("Unclosed Regex")}})}},il=43,$w=45,Ai={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|="]),updateOperators:[il,$w],assignmentPrecedence:.9,init(e){let t=[e.IDENTIFIER,e.MEMBER_EXP];Ai.assignmentOperators.forEach(d=>e.addBinaryOp(d,Ai.assignmentPrecedence,!0)),e.hooks.add("gobble-token",function(p){let g=this.code;Ai.updateOperators.some(n=>n===g&&n===this.expr.charCodeAt(this.index+1))&&(this.index+=2,p.node={type:"UpdateExpression",operator:g===il?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!p.node.argument||!t.includes(p.node.argument.type))&&this.throwError(`Unexpected ${p.node.operator}`))}),e.hooks.add("after-token",function(p){if(p.node){let g=this.code;Ai.updateOperators.some(n=>n===g&&n===this.expr.charCodeAt(this.index+1))&&(t.includes(p.node.type)||this.throwError(`Unexpected ${p.node.operator}`),this.index+=2,p.node={type:"UpdateExpression",operator:g===il?"++":"--",argument:p.node,prefix:!1})}}),e.hooks.add("after-expression",function(p){p.node&&r(p.node)});function r(d){Ai.assignmentOperators.has(d.operator)?(d.type="AssignmentExpression",r(d.left),r(d.right)):d.operator||Object.values(d).forEach(p=>{p&&typeof p=="object"&&r(p)})}}};Li.plugins.register(Lw,Ai);var Gt={evalAst(e,t){switch(e.type){case"BinaryExpression":case"LogicalExpression":return Gt.evalBinaryExpression(e,t);case"Compound":return Gt.evalCompound(e,t);case"ConditionalExpression":return Gt.evalConditionalExpression(e,t);case"Identifier":return Gt.evalIdentifier(e,t);case"Literal":return Gt.evalLiteral(e,t);case"MemberExpression":return Gt.evalMemberExpression(e,t);case"UnaryExpression":return Gt.evalUnaryExpression(e,t);case"ArrayExpression":return Gt.evalArrayExpression(e,t);case"CallExpression":return Gt.evalCallExpression(e,t);case"AssignmentExpression":return Gt.evalAssignmentExpression(e,t);default:throw SyntaxError("Unexpected expression",e)}},evalBinaryExpression(e,t){return{"||":(d,p)=>d||p(),"&&":(d,p)=>d&&p(),"|":(d,p)=>d|p(),"^":(d,p)=>d^p(),"&":(d,p)=>d&p(),"==":(d,p)=>d==p(),"!=":(d,p)=>d!=p(),"===":(d,p)=>d===p(),"!==":(d,p)=>d!==p(),"<":(d,p)=>d<p(),">":(d,p)=>d>p(),"<=":(d,p)=>d<=p(),">=":(d,p)=>d>=p(),"<<":(d,p)=>d<<p(),">>":(d,p)=>d>>p(),">>>":(d,p)=>d>>>p(),"+":(d,p)=>d+p(),"-":(d,p)=>d-p(),"*":(d,p)=>d*p(),"/":(d,p)=>d/p(),"%":(d,p)=>d%p()}[e.operator](Gt.evalAst(e.left,t),()=>Gt.evalAst(e.right,t))},evalCompound(e,t){let r;for(let d=0;d<e.body.length;d++){e.body[d].type==="Identifier"&&["var","let","const"].includes(e.body[d].name)&&e.body[d+1]&&e.body[d+1].type==="AssignmentExpression"&&(d+=1);let p=e.body[d];r=Gt.evalAst(p,t)}return r},evalConditionalExpression(e,t){return Gt.evalAst(e.test,t)?Gt.evalAst(e.consequent,t):Gt.evalAst(e.alternate,t)},evalIdentifier(e,t){if(e.name in t)return t[e.name];throw ReferenceError(`${e.name} is not defined`)},evalLiteral(e){return e.value},evalMemberExpression(e,t){if(e.property.type==="Identifier"&&e.property.name==="constructor"||e.object.type==="Identifier"&&e.object.name==="constructor")throw new Error("'constructor' property is disabled");let r=e.computed?Gt.evalAst(e.property):e.property.name,d=Gt.evalAst(e.object,t),p=d[r];if(typeof p=="function"){if(d===Function&&r==="bind")throw new Error("Function.prototype.bind is disabled");if(d===Function&&(r==="call"||r==="apply"))throw new Error("Function.prototype.call and Function.prototype.apply are disabled");return p===Function?p:p.bind(d)}return p},evalUnaryExpression(e,t){return{"-":d=>-Gt.evalAst(d,t),"!":d=>!Gt.evalAst(d,t),"~":d=>~Gt.evalAst(d,t),"+":d=>+Gt.evalAst(d,t)}[e.operator](e.argument)},evalArrayExpression(e,t){return e.elements.map(r=>Gt.evalAst(r,t))},evalCallExpression(e,t){let r=e.arguments.map(p=>Gt.evalAst(p,t)),d=Gt.evalAst(e.callee,t);if(d===Function)throw new Error("Function constructor is disabled");return d(...r)},evalAssignmentExpression(e,t){if(e.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");let r=e.left.name;if(r==="__proto__")throw new Error("Assignment to __proto__ is disabled");let d=Gt.evalAst(e.right,t);return t[r]=d,t[r]}},sl=class{constructor(t){this.code=t,this.ast=Li(this.code)}runInNewContext(t){let r={...t};return Gt.evalAst(this.ast,r)}};function wo(e,t){return e=e.slice(),e.push(t),e}function ll(e,t){return t=t.slice(),t.unshift(e),t}var dl=class extends Error{constructor(t){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=t,this.name="NewError"}};function Rt(e,t,r,d,p){if(!(this instanceof Rt))try{return new Rt(e,t,r,d,p)}catch(n){if(!n.avoidNew)throw n;return n.value}typeof e=="string"&&(p=d,d=r,r=t,t=e,e=null);let g=e&&typeof e=="object";if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=Object.hasOwn(e,"wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},this.eval=e.eval===void 0?"safe":e.eval,this.ignoreEvalErrors=typeof e.ignoreEvalErrors>"u"?!1:e.ignoreEvalErrors,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||d||null,this.otherTypeCallback=e.otherTypeCallback||p||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},e.autostart!==!1){let n={path:g?e.path:t};g?"json"in e&&(n.json=e.json):n.json=r;let u=this.evaluate(n);if(!u||typeof u!="object")throw new dl(u);return u}}Rt.prototype.evaluate=function(e,t,r,d){let p=this.parent,g=this.parentProperty,{flatten:n,wrap:u}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=d||this.otherTypeCallback,t=t||this.json,e=e||this.path,e&&typeof e=="object"&&!Array.isArray(e)){if(!e.path&&e.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:t}=e),n=Object.hasOwn(e,"flatten")?e.flatten:n,this.currResultType=Object.hasOwn(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Object.hasOwn(e,"sandbox")?e.sandbox:this.currSandbox,u=Object.hasOwn(e,"wrap")?e.wrap:u,this.currEval=Object.hasOwn(e,"eval")?e.eval:this.currEval,r=Object.hasOwn(e,"callback")?e.callback:r,this.currOtherTypeCallback=Object.hasOwn(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,p=Object.hasOwn(e,"parent")?e.parent:p,g=Object.hasOwn(e,"parentProperty")?e.parentProperty:g,e=e.path}if(p=p||null,g=g||null,Array.isArray(e)&&(e=Rt.toPathString(e)),!e&&e!==""||!t)return;let o=Rt.toPathArray(e);o[0]==="$"&&o.length>1&&o.shift(),this._hasParentSelector=null;let i=this._trace(o,t,["$"],p,g,r).filter(function(a){return a&&!a.isParentSelector});return i.length?!u&&i.length===1&&!i[0].hasArrExpr?this._getPreferredOutput(i[0]):i.reduce((a,l)=>{let s=this._getPreferredOutput(l);return n&&Array.isArray(s)?a=a.concat(s):a.push(s),a},[]):u?[]:void 0};Rt.prototype._getPreferredOutput=function(e){let t=this.currResultType;switch(t){case"all":{let r=Array.isArray(e.path)?e.path:Rt.toPathArray(e.path);return e.pointer=Rt.toPointer(r),e.path=typeof e.path=="string"?e.path:Rt.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return Rt.toPathString(e[t]);case"pointer":return Rt.toPointer(e.path);default:throw new TypeError("Unknown result type")}};Rt.prototype._handleCallback=function(e,t,r){if(t){let d=this._getPreferredOutput(e);e.path=typeof e.path=="string"?e.path:Rt.toPathString(e.path),t(d,r,e)}};Rt.prototype._trace=function(e,t,r,d,p,g,n,u){let o;if(!e.length)return o={path:r,value:t,parent:d,parentProperty:p,hasArrExpr:n},this._handleCallback(o,g,"value"),o;let i=e[0],a=e.slice(1),l=[];function s(c){Array.isArray(c)?c.forEach(m=>{l.push(m)}):l.push(c)}if((typeof i!="string"||u)&&t&&Object.hasOwn(t,i))s(this._trace(a,t[i],wo(r,i),t,i,g,n));else if(i==="*")this._walk(t,c=>{s(this._trace(a,t[c],wo(r,c),t,c,g,!0,!0))});else if(i==="..")s(this._trace(a,t,r,d,p,g,n)),this._walk(t,c=>{typeof t[c]=="object"&&s(this._trace(e.slice(),t[c],wo(r,c),t,c,g,!0))});else{if(i==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:a,isParentSelector:!0};if(i==="~")return o={path:wo(r,i),value:p,parent:d,parentProperty:null},this._handleCallback(o,g,"property"),o;if(i==="$")s(this._trace(a,t,r,null,null,g,n));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(i))s(this._slice(i,a,t,r,d,p,g));else if(i.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");let c=i.replace(/^\?\((.*?)\)$/u,"$1"),m=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(c);m?this._walk(t,h=>{let v=[m[2]],k=m[1]?t[h][m[1]]:t[h];this._trace(v,k,r,d,p,g,!0).length>0&&s(this._trace(a,t[h],wo(r,h),t,h,g,!0))}):this._walk(t,h=>{this._eval(c,t[h],h,r,d,p)&&s(this._trace(a,t[h],wo(r,h),t,h,g,!0))})}else if(i[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");s(this._trace(ll(this._eval(i,t,r.at(-1),r.slice(0,-1),d,p),a),t,r,d,p,g,n))}else if(i[0]==="@"){let c=!1,m=i.slice(1,-2);switch(m){case"scalar":(!t||!["object","function"].includes(typeof t))&&(c=!0);break;case"boolean":case"string":case"undefined":case"function":typeof t===m&&(c=!0);break;case"integer":Number.isFinite(t)&&!(t%1)&&(c=!0);break;case"number":Number.isFinite(t)&&(c=!0);break;case"nonFinite":typeof t=="number"&&!Number.isFinite(t)&&(c=!0);break;case"object":t&&typeof t===m&&(c=!0);break;case"array":Array.isArray(t)&&(c=!0);break;case"other":c=this.currOtherTypeCallback(t,r,d,p);break;case"null":t===null&&(c=!0);break;default:throw new TypeError("Unknown value type "+m)}if(c)return o={path:r,value:t,parent:d,parentProperty:p},this._handleCallback(o,g,"value"),o}else if(i[0]==="`"&&t&&Object.hasOwn(t,i.slice(1))){let c=i.slice(1);s(this._trace(a,t[c],wo(r,c),t,c,g,n,!0))}else if(i.includes(",")){let c=i.split(",");for(let m of c)s(this._trace(ll(m,a),t,r,d,p,g,!0))}else!u&&t&&Object.hasOwn(t,i)&&s(this._trace(a,t[i],wo(r,i),t,i,g,n,!0))}if(this._hasParentSelector)for(let c=0;c<l.length;c++){let m=l[c];if(m&&m.isParentSelector){let h=this._trace(m.expr,t,m.path,d,p,g,n);if(Array.isArray(h)){l[c]=h[0];let v=h.length;for(let k=1;k<v;k++)c++,l.splice(c,0,h[k])}else l[c]=h}}return l};Rt.prototype._walk=function(e,t){if(Array.isArray(e)){let r=e.length;for(let d=0;d<r;d++)t(d)}else e&&typeof e=="object"&&Object.keys(e).forEach(r=>{t(r)})};Rt.prototype._slice=function(e,t,r,d,p,g,n){if(!Array.isArray(r))return;let u=r.length,o=e.split(":"),i=o[2]&&Number.parseInt(o[2])||1,a=o[0]&&Number.parseInt(o[0])||0,l=o[1]&&Number.parseInt(o[1])||u;a=a<0?Math.max(0,a+u):Math.min(u,a),l=l<0?Math.max(0,l+u):Math.min(u,l);let s=[];for(let c=a;c<l;c+=i)this._trace(ll(c,t),r,d,p,g,n,!0).forEach(h=>{s.push(h)});return s};Rt.prototype._eval=function(e,t,r,d,p,g){this.currSandbox._$_parentProperty=g,this.currSandbox._$_parent=p,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;let n=e.includes("@path");n&&(this.currSandbox._$_path=Rt.toPathString(d.concat([r])));let u=this.currEval+"Script:"+e;if(!Rt.cache[u]){let o=e.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(n&&(o=o.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)Rt.cache[u]=new this.safeVm.Script(o);else if(this.currEval==="native")Rt.cache[u]=new this.vm.Script(o);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){let i=this.currEval;Rt.cache[u]=new i(o)}else if(typeof this.currEval=="function")Rt.cache[u]={runInNewContext:i=>this.currEval(o,i)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return Rt.cache[u].runInNewContext(this.currSandbox)}catch(o){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+o.message+": "+e)}};Rt.cache={};Rt.toPathString=function(e){let t=e,r=t.length,d="$";for(let p=1;p<r;p++)/^(~|\^|@.*?\(\))$/u.test(t[p])||(d+=/^[0-9*]+$/u.test(t[p])?"["+t[p]+"]":"['"+t[p]+"']");return d};Rt.toPointer=function(e){let t=e,r=t.length,d="";for(let p=1;p<r;p++)/^(~|\^|@.*?\(\))$/u.test(t[p])||(d+="/"+t[p].toString().replaceAll("~","~0").replaceAll("/","~1"));return d};Rt.toPathArray=function(e){let{cache:t}=Rt;if(t[e])return t[e].concat();let r=[],p=e.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(g,n){return"[#"+(r.push(n)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(g,n){return"['"+n.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(g,n){return";"+n.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(g){let n=g.match(/#(\d+)/u);return!n||!n[1]?g:r[n[1]]});return t[e]=p,t[e].concat()};Rt.prototype.safeVm={Script:sl};var Rw=function(e,t,r){let d=e.length;for(let p=0;p<d;p++){let g=e[p];r(g)&&t.push(e.splice(p--,1)[0])}},cl=class{constructor(t){this.code=t}runInNewContext(t){let r=this.code,d=Object.keys(t),p=[];Rw(d,p,i=>typeof t[i]=="function");let g=d.map(i=>t[i]);r=p.reduce((i,a)=>{let l=t[a].toString();return/function/u.test(l)||(l="function "+l),"var "+a+"="+l+";"+i},"")+r,!/(['"])use strict\1/u.test(r)&&!d.includes("arguments")&&(r="var arguments = undefined;"+r),r=r.replace(/;\s*$/u,"");let u=r.lastIndexOf(";"),o=u>-1?r.slice(0,u+1)+" return "+r.slice(u+1):" return "+r;return new Function(...d,o)(...g)}};Rt.prototype.vm={Script:cl};var Up=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<!-- Scrollable modal -->
<div id="fieldsModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Adjust fields for things table
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1 mt-1">
                    <div class="form-control-sm" style="flex-grow: 1;"></div>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUp">
                        <i class="bi bi-chevron-up"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDown">
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <table class="table table-striped table-hover table-sm has-validation">
                    <tbody id="fieldList"></tbody>
                </table>
                <h6>Field Details</h6>
                <div class="input-group input-group-sm mb-1 mt-1 has-validation">
                    <label class="input-group-text">Field Path</label>
                    <input type="text" class="form-control" id="fieldPath"></input>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldCreate" data-bs-toggle="tooltip"
                        title="Add a new field with the given path">
                        <i class="bi bi-plus-circle"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUpdate" data-bs-toggle="tooltip"
                        title="Save selected field details">
                        <i class="bi bi-save"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDelete" data-bs-toggle="tooltip"
                        title="Delete selected field">
                        <i class="bi bi-trash3"></i>
                    </button>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Field Label</label>
                    <input type="text" class="form-control form-control-sm" id="fieldLabel"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>`;var Qt=-1,Vt={fieldPath:null,fieldLabel:null,fieldList:null,fieldsModal:null};document.getElementById("fieldsHTML").innerHTML=Up;function ul(){Q().fieldList||(Q().fieldList=[]);let e=Q().fieldList.filter(t=>t.active).map(t=>t.path);return"fields=thingId"+(e.length>0?","+e:"")}var pl=null;function Hp(e){Vt.fieldPath.value=e,Vt.fieldLabel.value=null,pl||(pl=new Ir(Vt.fieldsModal)),pl.show()}async function jp(){Ye(Ow),ht(Vt),Vt.fieldList.addEventListener("click",e=>{e.target&&e.target.tagName==="TD"&&Iw(e.target.parentNode.rowIndex)}),Vt.fieldsModal.addEventListener("hide.bs.modal",async()=>{await ie(!1)}),document.getElementById("fieldUpdate").onclick=()=>{lt(Qt>=0,"No field selected");let e=Q().fieldList[Qt],d=Q().fieldList.filter((p,g)=>g!=Qt).map(p=>p.path).includes(e.path);lt(!Q().fieldList.filter((p,g)=>g!=Qt).map(p=>p.path).includes(Vt.fieldPath.value),"Changed field path already exists",Vt.fieldPath),e.path=Vt.fieldPath.value,e.label=Vt.fieldLabel.value,Ko()},document.getElementById("fieldCreate").onclick=()=>{lt(Vt.fieldPath.value,"Field path must not be empty",Vt.fieldPath),lt(!Q().fieldList.map(e=>e.path).includes(Vt.fieldPath.value),"Field path already exists",Vt.fieldPath),Q().fieldList.push({active:!0,path:Vt.fieldPath.value,label:Vt.fieldLabel.value?Vt.fieldLabel.value:Vt.fieldPath.value.split("/").slice(-1)[0]}),Ko()},document.getElementById("fieldDelete").onclick=()=>{lt(Qt>=0,"No field selected"),Q().fieldList.splice(Qt,1),Ko(),Qt=-1},document.getElementById("fieldUp").onclick=()=>{if(Qt<=0)return;let e=Q().fieldList[Qt];Q().fieldList.splice(Qt,1),Qt--,Q().fieldList.splice(Qt,0,e),Ko()},document.getElementById("fieldDown").onclick=()=>{if(Qt<0||Qt===Q().fieldList.length-1)return;let e=Q().fieldList[Qt];Q().fieldList.splice(Qt,1),Qt++,Q().fieldList.splice(Qt,0,e),Ko()}}function Iw(e){if(Qt===e)Qt=-1,Vt.fieldPath.value=null,Vt.fieldLabel.value=null;else{Qt=e;let t=Q().fieldList[Qt];Vt.fieldPath.value=t.path,Vt.fieldLabel.value=t.label?t.label:null}}function Ow(){Q().fieldList||(Q().fieldList=[]),Ko()}function Ko(){Vt.fieldList.textContent="",Qt=-1,Q().fieldList.forEach((e,t)=>{let r=Vt.fieldPath.value===e.path,d=Vt.fieldList.insertRow();Si(d,String(t),e.active,!1,Pw),d.insertCell(-1).textContent=e.path,d.insertCell(-1).textContent=e.label?e.label:null,r&&(Qt=t,d.classList.add("table-active"),Vt.fieldLabel.value=e.label)}),Qt<0&&(Vt.fieldPath.value=null,Vt.fieldLabel.value=null)}function Pw(e){Q().fieldList[e.target.id].active=e.target.checked,Ko()}function Nr(e,t,r,d=null){let p=e,g=t,n=r,u=d,o=!1;return p.addEventListener("click",i),Ye(a),{set viewDirty(l){o=l}};function i(){Wp(p.dataset.auth==="devOps"),o&&(n.call(null,!1),o=!1)}function a(l){p.toggleAttribute("hidden",Q()[u]??!1),["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(l)||(g.classList.contains("show")?n.call(null,!0):o=!0)}}var Vp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div>
    <div>
        <div class="row resizable_pane" style="height: 40vh;">
            <div class="col-md-7 resizable_flex_column">
                <form class="input-group input-group-sm mb-1 mt-1" autocomplete="off">
                    <div class="btn-group dropend">
                        <button id="searchFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                            title="Toggle favorite for search filter">
                            <i id="favIcon" class="bi bi-star"></i>
                        </button>
                    </div>
                    <input autocomplete="false" name="hidden" type="text" style="display:none;">
                    <input type="search" class="form-control form-control-sm" id="searchFilterEdit" name="search"
                           spellcheck=false autocomplete="off" />
                    <span class="input-group-text" id="searchFilterCount" data-bs-toggle="tooltip"
                          title="Amount of things matching the filter">
                    </span>
                    <button type="button" id="searchThings" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip"
                        title="Search things by thingId or valid ditto search filter">
                        search
                    </button>
                    <button type="button" id="pinnedThings" class="btn btn-outline-secondary btn-sm me-3 button_round_right"
                        data-bs-toggle="tooltip" title="Pinned things: get the list of all individually pinned things">
                        pinned
                    </button>
                    <button type="button" id="tableSettings" class="btn btn-outline-secondary btn-sm button_round_both"
                        data-bs-toggle="modal" data-bs-target="#fieldsModal">
                        <span data-bs-toggle="tooltip" title="Adjust fields for things table">
                            <i class="bi bi-gear"></i>
                        </span>
                    </button>
                </form>
                <div class="table-wrap">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr id="thingsTableHead"></tr>
                        </thead>
                        <tbody id="thingsTableBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-5 resizable_flex_column" style="height: auto" id="details">
                <ul id="tabItemsThing" class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabThingDetails">Details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabModifyThing">Manage</a>
                        </li>
                    </ul>
                    <div id="tabContentThing" class="tab-content" style="flex-grow:1; overflow:hidden;">
                        <div class="tab-pane fade show active container no-margin" id="tabThingDetails">
                            <div class="table-wrap">
                                <table class="table table-striped table-hover table-sm">
                                    <tbody id="tbodyThingDetails"></tbody>
                                </table>
                            </div>
                    </div>
                    <div class="tab-pane fade container no-margin" id="tabModifyThing">
                        <crud-toolbar id="crudThings" label="Thing ID">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text" id="labelX">Definition</label>
                                <div class="btn-group dropend">
                                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                    data-bs-toggle="dropdown" disabled id="buttonThingDefinitions"></button>
                                    <ul id="ulThingDefinitions" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                                </div>
                                <input type="text" class="form-control" id="inputThingDefinition" disabled></input>
                            </div>
                            <div class="ace_container mb-1" style="flex-grow: 1;">
                                <div class="script_editor" id="thingJsonEditor"></div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#collapseAttributes">Attributes <span class="badge rounded-pill bg-info"
        id="badgeAttributeCount"></span></h5>
<hr />
<div class="collapse" id="collapseAttributes">
    <div class="row resizable_pane" style="height: 20vh;">
        <div class="col-md-7 resizable_flex_column" style="overflow-y:scroll;">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyAttributes"></tbody>
            </table>
        </div>
        <div class="col-md-5 resizable_flex_column" style="height: auto">
            <ul class="nav nav-tabs nav-fill" id="tabItemsAttribute">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudAttribute">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentAttribute">
                <div class="tab-pane container active no-margin" id="tabCrudAttribute">
                    <crud-toolbar id="crudAttribute" label="Attribute key">
                        <div class="ace_container mb-1" style="flex-grow: 1;">
                            <div class="script_editor" id="attributeEditor"></div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>
`;var St,Gp=[],gl={collapseThings:null,tabThings:null};document.getElementById("thingsHTML").innerHTML=Vp;function Ce(e){Gp.push(e)}async function Kp(){ht(gl),Nr(gl.tabThings,gl.collapseThings,Nw)}function yr(e,t=null){console.assert(e&&e!=="","thingId expected"),xt("GET",`/things/${e}?fields=thingId%2CpolicyId%2Cdefinition%2Cattributes%2Cfeatures%2C_created%2C_modified%2C_revision%2C_metadata`).then(r=>{Fr(r),t&&t()}).catch(()=>Fr(null))}function Fr(e){let t=e&&(!St||St.thingId!==e.thingId);St=e,Gp.forEach(r=>r.call(null,St,t))}function Nw(){fa()}var $i,va;async function Yp(){Ce(Bw),Jp(zw),Ye(Uw)}var Xp=[];function ya(e){Xp.push(e)}function Fw(e){Xp.forEach(t=>t.call(null,e))}function zw(e,t){wa(va),e&&e.length>0&&(va=fl(e,t),va.onmessage=jw)}function Bw(e,t){e?t&&($i&&$i.close(),$i=fl(e.thingId,"fields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata,_context/topic,_context/path,_context/value&extraFields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata"),$i.onmessage=Hw):wa($i)}function wa(e){e&&e.close()}function Uw(e){["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(e)||(wa($i),wa(va))}function Hw(e){if(e.data&&e.data!==""){let t=JSON.parse(e.data);Fr(t),Fw(JSON.parse(e.data))}}function jw(e){e.data&&e.data!==""&&bl(JSON.parse(e.data))}var yo=class{static{this.lastSearch=""}},xa,ue={searchFilterCount:null,thingsTableHead:null,thingsTableBody:null,searchFilterEdit:null,favIcon:null},qp=[];function Jp(e){qp.push(e)}function Ri(e=null,t=null){qp.forEach(r=>r.call(null,e,t))}async function Qp(){Ce(Kw),ya(bl),ht(ue),ue.thingsTableBody.addEventListener("click",Ww)}function Ww(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;t.id==="searchThingsMore"?(t.style.pointerEvents="none",e.stopImmediatePropagation(),Zp(ue.searchFilterEdit.value,!0)):St&&St.thingId===t.id?(e.stopImmediatePropagation(),Fr(null)):yr(t.id,null)}}function bn(e,t){yo.lastSearch=e,e===""||/^(eq\(|ne\(|gt\(|ge\(|lt\(|le\(|in\(|like\(|ilike\(|exists\(|and\(|or\(|not\().*/.test(e)?(Zp(e),t()):fn([e]);let d=new URLSearchParams(window.location.search);d.get("filter")!==e&&(d.set("filter",e),window.history.replaceState(null,null,`${window.location.pathname}?${d}`))}function vl(){yo.lastSearch="pinned",ue.searchFilterEdit.value=null,ue.favIcon.classList.replace("bi-star-fill","bi-star"),fn(Q().pinnedThings)}function fa(){yo.lastSearch==="pinned"?vl():bn(yo.lastSearch,()=>null)}function fn(e){ue.searchFilterCount.textContent="",ue.thingsTableBody.textContent="";let t=ul();e.length>0?xt("GET",`/things?${t}&ids=${e}&option=sort(%2BthingId)`).then(r=>{tu(r),ue.searchFilterCount.textContent="#: "+r.length,Ri(e,t)}).catch(r=>{ka(),Ri()}):(ka(),Ri())}function ka(e=!1){xa=null,ue.searchFilterCount.textContent="",ue.thingsTableHead.textContent="",ue.thingsTableBody.textContent="",e||Fr(null)}function Vw(e){ue.searchFilterCount.textContent="";let t=Q().searchNamespaces;xt("GET","/search/things/count"+(e&&e!==""?"?filter="+encodeURIComponent(e):"")+(t&&t!==""?"&namespaces="+t:""),null,null).then(r=>{ue.searchFilterCount.textContent="#: "+r}).catch(r=>{Ri()})}function Zp(e,t=!1){document.body.style.cursor="progress";let r=Q().searchNamespaces,d=ul();xt("GET","/search/things?"+d+(e&&e!==""?"&filter="+encodeURIComponent(e):"")+(r&&r!==""?"&namespaces="+r:"")+"&option=sort(%2BthingId)"+(t?",cursor("+xa+")":""),null,null).then(n=>{t?wl():(Vw(e),ka(!0)),tu(n.items),p(n),t||Ri(n.items.map(u=>u.thingId),d)}).catch(n=>{ka(),Ri()}).finally(()=>{document.body.style.cursor="default"});function p(n){n.cursor?(g(),xa=n.cursor):xa=null}function g(){let n=ue.thingsTableBody.insertRow().insertCell(-1);n.textContent="load more...",n.colSpan=ue.thingsTableBody.rows[0].childElementCount,n.style.textAlign="center",n.style.cursor="pointer",n.disabled=!0,n.style.color="#3a8c9a",n.parentNode.id="searchThingsMore"}}function wl(){let e=document.getElementById("searchThingsMore");e&&e.parentNode.removeChild(e)}function tu(e){let t=Q().fieldList.filter(n=>n.active);d();let r=!1;e.forEach((n,u)=>{let o=ue.thingsTableBody.insertRow();p(o,n)}),r||Fr(null);function d(){ue.thingsTableHead.textContent="",ha(ue.thingsTableHead,""),ha(ue.thingsTableHead,"Thing ID"),t.forEach(n=>{ha(ue.thingsTableHead,n.label?n.label:n.path)})}function p(n,u){n.id=u.thingId,St&&u.thingId===St.thingId&&(r=!0,n.classList.add("table-active")),Si(n,u.thingId,Q().pinnedThings.includes(u.thingId),!1,Gw),bo(n,g(u.thingId),u.thingId),t.forEach(o=>{let i=o.path.replace(/\//g,".");i.charAt(0)!=="."&&(i="$."+i);let a=Rt({json:u,path:i});bo(n,a.length!==0?a[0]:"").setAttribute("jsonPath",i)})}function g(n){let u=/([0-9a-f]{7})[0-9a-f]-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,o=n;return Q().shortenUUID&&(o=o.replace(u,"$1")),Q().defaultNamespace&&(o=o.replace(Q().defaultNamespace,"dn")),o}}async function Gw(e){if(e.target.checked)Q().pinnedThings.push(this.id);else{let t=Q().pinnedThings.indexOf(this.id);t>-1&&Q().pinnedThings.splice(t,1)}await ie(!1,"pinnedThings")}function Kw(e){e||Sp(ue.thingsTableBody,()=>!1)}function bl(e){let t=document.getElementById(e.thingId);console.assert(t!==null,"Unexpected thingId for table update. thingId was not loaded before"),Array.from(t.cells).forEach(r=>{let d=r.getAttribute("jsonPath");if(d){let p=Rt({json:e,path:d});p.length!==0&&(r.innerHTML=Xr(p[0]))}})}var Yw=['eq(attributes/location,"kitchen")','ge(thingId,"myThing1")','gt(_created,"2020-08-05T12:17")',"exists(features/featureId)",'and(eq(attributes/location,"kitchen"),eq(attributes/color,"red"))','or(eq(attributes/location,"kitchen"),eq(attributes/location,"living-room"))','like(attributes/key1,"known-chars-at-start*")'],yl=[],eu,zr="...",ru,me={favIcon:null,searchFilterEdit:null,searchThings:null,searchFavorite:null,tabThings:null,pinnedThings:null};async function iu(){Ye(Xw),ht(me),me.pinnedThings.onclick=vl,ru=_p("#searchFilterEdit",qw,"Search for Things..."),ru.input.addEventListener("selection",e=>{let t=e.detail.selection.value;Jw(t.rql)}),me.searchThings.onclick=()=>{bn(me.searchFilterEdit.value,()=>ou(me.searchFilterEdit.value))},me.searchFavorite.onclick=async e=>{e.preventDefault(),await Qw(me.searchFilterEdit.value)&&(me.favIcon.classList.toggle("bi-star"),me.favIcon.classList.toggle("bi-star-fill"))},me.searchFilterEdit.onkeyup=e=>{(e.key==="Enter"||e.code===13)&&me.searchFilterEdit.value.indexOf(zr)<0?bn(me.searchFilterEdit.value,()=>ou(me.searchFilterEdit.value)):(clearTimeout(eu),eu=setTimeout(nu,1e3))},me.searchFilterEdit.onchange=()=>{wl()},me.searchFilterEdit.focus()}function Xw(){Q().filterList||(Q().filterList=[]),Q().pinnedThings||(Q().pinnedThings=[])}function xl(e){me.searchFilterEdit.value=e}function Jw(e){xl(e),nu(),Cp(me.searchFilterEdit,zr)||bn(me.searchFilterEdit.value,()=>null)}async function qw(e){let t=new Date,r=new Date,d=new Date;return t.setDate(t.getDate()-1),r.setHours(r.getHours()-1),d.setMinutes(d.getMinutes()-1),[{label:"Created since 1m",rql:`gt(_created,"${d.toISOString()}")`,group:"Time"},{label:"Created since 1h",rql:`gt(_created,"${r.toISOString()}")`,group:"Time"},{label:"Created since 24h",rql:`gt(_created,"${t.toISOString()}")`,group:"Time"},{label:"Modified since 1m",rql:`gt(_modified,"${d.toISOString()}")`,group:"Time"},{label:"Modified since 1h",rql:`gt(_modified,"${r.toISOString()}")`,group:"Time"},{label:"Modified since 24h",rql:`gt(_modified,"${t.toISOString()}")`,group:"Time"},{label:`thingId = ${zr}`,rql:`eq(thingId,"${zr}")`,group:"ThingId"},{label:`thingId ~ ${zr}`,rql:`like(thingId,"${zr}*")`,group:"ThingId"},...(Q().filterList??[]).map(p=>({label:p,rql:p,group:"Favorite"})),...(Q().fieldList??[]).map(p=>({label:`${p.label} = ${zr}`,rql:`eq(${p.path},"${zr}")`,group:"Field"})),...(Q().fieldList??[]).map(p=>({label:`${p.label} ~ ${zr}`,rql:`like(${p.path},"*${zr}*")`,group:"Field"})),...yl.map(p=>({label:p,rql:p,group:"Recent"})),...Yw.map(p=>({label:p,rql:p,group:"Example"}))]}async function Qw(e){if(!e||e==="")return!1;let t=Q().filterList.indexOf(e);return t>=0?Q().filterList.splice(t,1):Q().filterList.push(e),await ie(!1,"filterList"),!0}function nu(){Q().filterList.indexOf(me.searchFilterEdit.value)>=0?me.favIcon.classList.replace("bi-star","bi-star-fill"):me.favIcon.classList.replace("bi-star-fill","bi-star")}function ou(e){yl.includes(e)||yl.unshift(e)}var au=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="authorizationModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Authorize
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form class="modal-body">
                <div class="row">
                    <h5>Main authentication</h5>
                    <hr />
                    <div class="row" id="mainOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="main-oidc" name="main-auth-method" value="oidc">
                        <label for="main-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="oidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="oidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearer" name="oidcBearer" />
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="main-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="main-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="mainBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-userpass" name="main-auth-method" value="basic" />
                            <label for="main-userpass">Basic</label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="userName" class="input-group-text">Username</label>
                                <input type="text" class="form-control form-control-sm" id="userName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="password" class="input-group-text">Password</label>
                                <input type="password" class="form-control form-control-sm" id="password" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-bearer" name="main-auth-method" value="bearer">
                            <label for="main-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearer" class="input-group-text">Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearer" name="bearer" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainPreAuthenticatedSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-pre" name="main-auth-method" value="pre" />
                            <label for="main-pre">Pre authenticated<br />
                                <small>(via HTTP header 'x-ditto-pre-authenticated', must take the form
                                    <code>prefix:suffix</code>)</small>
                            </label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="dittoPreAuthenticatedUsername" class="input-group-text">prefix:suffix</label>
                                <input type="text" class="form-control form-control-sm" id="dittoPreAuthenticatedUsername" name="pre-authenticated-username"  />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <h5>DevOps authentication</h5>
                    <small>(for Connections and administrative tasks, optional)</small>
                    <hr />
                    <div class="row" id="devOpsOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="devops-oidc" name="devops-auth-method" value="oidc" />
                        <label for="devops-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="devOpsOidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="devOpsOidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearerDevOps" name="oidcBearerDevOps" />
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="devops-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="devops-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="devOpsBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-userpass" name="devops-auth-method" value="basic" />
                            <label for="devops-userpass">Basic<br /></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsUserName" class="input-group-text">DevOps Username</label>
                                <input type="text" class="form-control form-control-sm" id="devOpsUserName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsPassword" class="input-group-text">DevOps Password</label>
                                <input type="password" class="form-control form-control-sm" id="devOpsPassword" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="devOpsBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-bearer" name="devops-auth-method" value="bearer" />
                            <label for="devops-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearerDevOps" class="input-group-text">DevOps Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearerDevOps" name="devops-bearer" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="input-group input-group-sm" style="flex-direction: row-reverse;">
                    <button class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal"
                        id="authorizeSubmit">Authorize</button>
                </div>
            </form>
        </div>
    </div>
</div>
`;var yt={mainBearerSection:null,oidcBearer:null,bearer:null,mainBasicSection:null,userName:null,password:null,devOpsBearerSection:null,oidcBearerDevOps:null,bearerDevOps:null,devOpsBasicSection:null,devOpsUserName:null,devOpsPassword:null,mainPreAuthenticatedSection:null,dittoPreAuthenticatedUsername:null,mainOidcSection:null,oidcProvider:null,devOpsOidcSection:null,devOpsOidcProvider:null,collapseConnections:null};function e0(e){Object.assign(this,e)}var kl=!1;document.getElementById("authorizationHTML").innerHTML=au;function Wp(e){kl=e,El(kl)}function lu(){return yt.userName.value+":"+yt.password.value}function du(){return yt.bearer.value}function cu(){return yt.oidcBearer.value}function pu(){return yt.devOpsUserName.value+":"+yt.devOpsPassword.value}function uu(){return yt.bearerDevOps.value}function mu(){return yt.oidcBearerDevOps.value}function Np(e){e&&e.length>0&&(yt.userName.value=e.split(":")[0],yt.password.value=e.split(":")[1])}function Fp(e){e&&e.length>0&&(yt.devOpsUserName.value=e.split(":")[0],yt.devOpsPassword.value=e.split(":")[1])}function Ea(e){yt.oidcBearer.value=e}function gu(e){yt.oidcBearerDevOps.value=e}function hu(){ht(yt),document.getElementById("authorize").onclick=()=>{let e=Q(),t=e.authSettings?.main?.method,r=e.authSettings?.devops?.method;t||(yt.dittoPreAuthenticatedUsername.value&&yt.dittoPreAuthenticatedUsername.value.length>0?t="pre":yt.bearer.value&&yt.bearer.value.length>0?t="bearer":yt.userName.value&&yt.userName.value.length>0&&(t="basic")),r||(yt.bearerDevOps.value&&yt.bearerDevOps.value.length>0?r="bearer":yt.devOpsUserName.value&&yt.devOpsUserName.value.length>0&&(r="basic")),Array.from(document.querySelectorAll('input[name="main-auth-method"]')).forEach(d=>{d.checked=Vo[d.value]===t}),Array.from(document.querySelectorAll('input[name="devops-auth-method"]')).forEach(d=>{d.checked=Vo[d.value]===r})},document.getElementById("authorizeSubmit").onclick=async e=>{e.preventDefault();let t=document.querySelector('input[name="main-auth-method"]:checked'),r=t?t.value:void 0,d=document.querySelector('input[name="devops-auth-method"]:checked'),p=d?d.value:void 0,g=Q();g.authSettings.main.method=Vo[r],g.authSettings.devops.method=Vo[p],g.authSettings.main.pre.dittoPreAuthenticatedUsername=yt.dittoPreAuthenticatedUsername.value,g.authSettings.main.oidc.defaultProvider=yt.oidcProvider.value,g.authSettings.devops.oidc.defaultProvider=yt.devOpsOidcProvider.value,await ie(!1)},document.getElementById("main-oidc-login").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.main.oidc.provider=yt.oidcProvider.value,Go(),await _a(!0)&&(t.authSettings.main.method="oidc",tl("You are already logged in")),await ie(!1)},document.getElementById("main-oidc-logout").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.main.oidc.provider=yt.oidcProvider.value,await su(t.authSettings.main.oidc)},document.getElementById("devops-oidc-login").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.devops.oidc.provider=yt.devOpsOidcProvider.value,Go(),await _a(!1)&&(t.authSettings.devops.method="oidc",tl("You are already logged in")),await ie(!1)},document.getElementById("devops-oidc-logout").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.devops.oidc.provider=yt.devOpsOidcProvider.value,await su(t.authSettings.devops.oidc)}}function bu(e){e===void 0&&(e=new URLSearchParams(window.location.search));let t=e.get("code")!==null,r=e.get("state")!==null;return t&&r}async function fu(e){let t=Q(),r=e.get(ba)||t.authSettings?.main?.oidc.provider,d=t.authSettings.oidc.providers[r],p=d;if(p!=null){let g=new ua(p);try{let n=await g.signinCallback(window.location.href);if(n){let u=n.state;u.mainAuth&&(t.authSettings.main.method="oidc",Ea(n[d.extractBearerTokenFrom])),u.devopsAuth&&(t.authSettings.devops.method="oidc",gu(n[d.extractBearerTokenFrom])),window.history.replaceState(null,null,`${p.redirect_uri}?${atob(n.url_state)}`),await ie(!1)}}catch(n){console.error(`Could not login due to: ${n}`)}}}async function _a(e){let t=Q(),r;e?r=t.authSettings?.main?.oidc:r=t.authSettings?.devops?.oidc;let d=t.authSettings?.main?.oidc.provider==t.authSettings?.devops?.oidc.provider,p=t.authSettings.oidc.providers[r.provider],g=p;if(g!=null){let n=new URLSearchParams(window.location.search),u=new ua(g);if(bu(n))return await fu(n),!1;{let o=await u.getUser();if(o?.[p.extractBearerTokenFrom]!==void 0||o?.expired===!0)return d?(Ea(o[p.extractBearerTokenFrom]),gu(o[p.extractBearerTokenFrom])):Ea(o[p.extractBearerTokenFrom]),!0;n.set(Ti,gn()),n.set(ba,r.provider);try{await u.signinRedirect({state:new e0({mainAuth:e||d,devopsAuth:!e||d}),url_state:btoa(n.toString())})}catch(i){return ae(i),!1}}}}async function su(e){let r=Q().authSettings.oidc.providers[e.provider];if(r!=null){let d=new ua(r);try{let p=new URLSearchParams(window.location.search);p.set(Ti,gn());let g;r.post_logout_redirect_uri?g=r.post_logout_redirect_uri:g=`${r.redirect_uri}?${p.toString()}`,await d.signoutRedirect({post_logout_redirect_uri:g})}catch(p){ae(p)}finally{Ea(void 0),Go()}}}function Jr(e,t){!e&&t?t.style.display="none":e&&(t.style.display=null)}async function zp(e){let t=Q();if(yt.dittoPreAuthenticatedUsername.value=t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername?t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername:"",t.authSettings?.oidc?.providers){let n=Object.keys(t.authSettings.oidc.providers).map(u=>({key:u,text:t.authSettings.oidc.providers[u].displayName}));Zs(yt.oidcProvider,n),Zs(yt.devOpsOidcProvider,n),yt.oidcProvider.value=t.authSettings.main.oidc.provider,yt.devOpsOidcProvider.value=t.authSettings.devops.oidc.provider}Jr(t.authSettings.main.oidc.enabled,yt.mainOidcSection),Jr(t.authSettings.main.basic.enabled,yt.mainBasicSection),Jr(t.authSettings.main.bearer.enabled,yt.mainBearerSection),Jr(t.authSettings.main.pre.enabled,yt.mainPreAuthenticatedSection);let r=t.authSettings.main.oidc.enabled||t.authSettings.main.basic.enabled||t.authSettings.main.bearer.enabled||t.authSettings.main.pre.enabled;Jr(r,yt.mainBasicSection.parentElement),Jr(t.authSettings.devops.oidc.enabled,yt.devOpsOidcSection),Jr(t.authSettings.devops.basic.enabled,yt.devOpsBasicSection),Jr(t.authSettings.devops.bearer.enabled,yt.devOpsBearerSection);let d=t.authSettings.devops.oidc.enabled||t.authSettings.devops.basic.enabled||t.authSettings.devops.bearer.enabled;Jr(d,yt.devOpsBasicSection.parentElement);let p=new URLSearchParams(window.location.search);e&&t.authSettings?.main?.method==="oidc"&&t.authSettings?.main?.oidc?.autoSso===!0?(await _a(!0),Go()):e&&t.authSettings?.devops?.method==="oidc"&&t.authSettings?.devops?.oidc?.autoSso===!0?(await _a(!1),Go()):bu(p)&&await fu(p),El(kl);let g=p.get("filter");g&&(yo.lastSearch=g,xl(g))}var r0={things:{listConnections:{path:"/api/2/solutions/{{solutionId}}/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/solutions/{{solutionId}}/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_3:{listConnections:{path:"/api/2/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_2:{listConnections:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval/singleton",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveAllConnectionIds"}},unwrapJsonPath:"?.?.connectionIds"},retrieveConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?.connection"},createConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:createConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:"?.?.connection"},modifyConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:modifyConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:null},deleteConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:deleteConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:null},retrieveStatus:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnectionStatus",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionLogs:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionMetrics:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},connectionCommand:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"{{command}}",connectionId:"{{connectionId}}"}},unwrapJsonPath:null}}},ur,Pe;function El(e){Pe=void 0;let t=Q();if(e){let r=t.authSettings?.devops?.method;if(r==="basic"){let d=pu();d?(ur="Authorization",Pe="Basic "+window.btoa(d)):(ae("DevOps Username/password missing"),document.getElementById("authorize").click())}else if(r==="bearer"){let d=uu();d?(ur="Authorization",Pe="Bearer "+d):(ae("DevOps Bearer token missing"),document.getElementById("authorize").click())}else if(r==="oidc"){let d=mu();d?(ur="Authorization",Pe="Bearer "+d):(ae("DevOps SSO (Bearer) token missing"),document.getElementById("authorize").click())}else ur="Authorization",Pe="Basic"}else{let r=t.authSettings?.main?.method;if(r==="basic"){let d=lu();d?(ur="Authorization",Pe="Basic "+window.btoa(d)):(ae("Username/password missing"),document.getElementById("authorize").click())}else if(r==="pre")t.authSettings.main.pre.dittoPreAuthenticatedUsername?(ur="x-ditto-pre-authenticated",Pe=t.authSettings.main.pre.dittoPreAuthenticatedUsername):(ae("Pre-Authenticated username missing"),document.getElementById("authorize").click());else if(r==="bearer"){let d=du();d?(ur="Authorization",Pe="Bearer "+d):(ae("Bearer token missing"),document.getElementById("authorize").click())}else if(r==="oidc"){let d=cu();d?(ur="Authorization",Pe="Bearer "+d):(ae("SSO (Bearer) token missing"),document.getElementById("authorize").click())}else ur="Authorization",Pe="Basic"}}function o0(e){return e.status===400&&e.error==="jwt:invalid"||e.status===401}function Sa(e,t){e.status&&e.message?(ae(e.description+`
(${e.error})`,e.message,e.status),o0(e)&&document.getElementById("authorize").click()):ae(JSON.stringify(e),"Error",t.status)}async function xt(e,t,r=null,d=null,p=!1,g=!1,n=!1){if(Pe){let u,o=e==="PATCH"?"application/merge-patch+json":"application/json";try{u=await fetch(Q().api_uri+(g?"":"/api/2")+t,{method:e,headers:{"Content-Type":o,[ur]:Pe,...d},...e!=="GET"&&e!=="DELETE"&&r!==void 0&&{body:JSON.stringify(r)}})}catch(i){throw ae(i),i}if(!u.ok){if(n)return p?u:u.json().then(i=>(Sa(i,u),i));throw u.json().then(i=>{Sa(i,u)}).catch(i=>{ae("No error details from Ditto",u.statusText,u.status)}),new Error("An error occurred: "+u.status)}return u.status!==204?p?u:u.json():null}else throw new Error("Authentication missing")}function fl(e,t){if(Pe)return new vu.EventSourcePolyfill(`${Q().api_uri}/api/2/things?ids=${e}${t?"&"+t:""}`,{headers:{[ur]:Pe}});throw new Error("Authentication missing")}async function De(e,t,r="",d=null,p=null){let g=r0[Mi()][e],n,u;if(g.body?u=JSON.stringify(g.body).replace("{{connectionId}}",r).replace('"{{connectionJson}}"',JSON.stringify(d)).replace("{{command}}",p):d?u=JSON.stringify(d):u=p,Pe)try{n=await fetch(Q().api_uri+g.path.replace("{{connectionId}}",r),{method:g.method,headers:{"Content-Type":e==="connectionCommand"?"text/plain":"application/json",[ur]:Pe},...u&&{body:u}})}catch(o){throw ae(o),o}else throw new Error("Authentication missing");if(!n.ok)throw n.json().then(o=>{Sa(o,n)}).catch(o=>{ae("No error details from Ditto",n.statusText,n.status)}),new Error("An error occured: "+n.status);e!=="connectionCommand"&&n.status!==204?(document.body.style.cursor="progress",n.json().then(o=>{if(o&&o["?"]&&o["?"]["?"].status>=400){let i=o["?"]["?"].payload;Sa(i,n)}else g.unwrapJsonPath&&g.unwrapJsonPath.split(".").forEach(function(i){i==="?"&&(i=Object.keys(o)[0]),o=o[i]}),t(o)}).catch(o=>{throw ae("Error calling connections API",o),o}).finally(()=>{document.body.style.cursor="default"})):t&&t()}function Mi(){return Q().ditto_version===2?"ditto_2":"ditto_3"}var wu=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#connectionsEdit">
    Manage Connections
</h5>
<hr />
<div class="collapse show" id="connectionsEdit">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group input-group-sm mt-1 mb-1" role="group">
                <div style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonLoadConnections">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationConnections" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap mb-1">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Live Status</th>
                            <th>Recovery Status</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnections"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <h6>CRUD Connection</h6>
            <crud-toolbar label="Connection Id" id="crudConnection" style="flex-grow: 1;">
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Template</label>
                    <div class="btn-group dropend">
                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                        data-bs-toggle="dropdown" id="buttonConnectionTemplates" disabled></button>
                        <ul id="ulConnectionTemplates" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                    </div>
                    <input type="text" class="form-control form-control-sm" id="inputConnectionTemplate" disabled></input>
                </div>
                <div class="input-group has-validation">
                    <input class="form-control" id="editorValidationConnection" hidden="true"></input>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="row mb-1" style="flex-grow: 1;">
                    <div class="col-md-6 resizable_flex_column">
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionEditor"></div>
                        </div>        
                    </div>
                    <div class="col-md-6 resizable_flex_column">
                        <h6>Incoming JavaScript Mapping</h6>
                        <div class="ace_container mb-3" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionIncomingScript"></div>
                        </div>
                        <h6>Outgoing JavaScript Mapping</h6>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionOutgoingScript"></div>
                        </div>        
                    </div>
                </div>
            </crud-toolbar>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#tabConnectionHelper">
    Connection Status, Metrics and Logs
</h5>
<hr />
<div class="collapse show" id="tabConnectionHelper">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabConnectionMetrics">Metrics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabConnectionStatus">Status</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1; overflow: hidden">
                <div class="tab-pane container active no-margin" id="tabConnectionMetrics">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonResetConnectionMetrics" data-bs-toggle="tooltip"
                                title="Reset connection metrics for the selected connection">
                                <i class="bi bi-x-circle"></i>
                                Reset
                            </button>
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionMetrics" data-bs-toggle="tooltip"
                                title="Refresh connection metrics for the selected connection">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="table-wrap">
                            <table class="table table-striped table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th>Direction</th>
                                        <th>Type</th>
                                        <th>Level</th>
                                        <th>1m</th>
                                        <th>1h</th>
                                        <th>24h</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyConnectionMetrics"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane container fade no-margin" id="tabConnectionStatus">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionStatus" data-bs-toggle="tooltip"
                                title="Refresh connection status">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionStatusDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Logs <span class="badge rounded-pill bg-info" id="badgeConnectionLogsCount"></span></h6>
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonEnableConnectionLogs"
                    data-bs-toggle="tooltip" title="Click to enable connection logs for the selected connection">
                    <i class="bi bi-toggle-off"></i>
                    <span>Enable</span>
                </button>
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetConnectionLogs"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
                <div class="form-control-sm" style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_both" id="buttonRetrieveConnectionLogs"
                    data-bs-toggle="tooltip" title="Refresh connection logs for the selected connection">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <table-filter id="tableFilterConnectionLogs"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm" style="table-layout: fixed;">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>Level</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnectionLogs"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Log Detail</h6>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="connectionLogDetail"></div>
            </div>
        </div>
    </div>
</div>`;var yu=[];document.getElementById("connectionsHTML").innerHTML=wu;function Ca(e){yu.push(e)}function n0(e,t){yu.forEach(r=>r.call(null,e,t))}var qr={tbodyConnections:null,buttonLoadConnections:null,tabConnections:null,collapseConnections:null,tableValidationConnections:null},xo;function xu(){ht(qr),Nr(qr.tabConnections,qr.collapseConnections,s0,"disableConnections"),cr(qr.tbodyConnections,qr.tableValidationConnections),qr.buttonLoadConnections.onclick=Ii,qr.tbodyConnections.addEventListener("click",a0)}function Yo(e,t=!1){xo=e?e.id:null,n0(e,t)}function Ii(){qr.tbodyConnections.textContent="";let e=!1;De("listConnections",t=>{t.forEach(r=>{let d=Mi()==="ditto_2"?r:r.id,p=qr.tbodyConnections.insertRow();p.id=d,Mi()==="ditto_2"?De("retrieveConnection",g=>{p.insertCell(0).textContent=g.name},d):p.insertCell(0).textContent=r.name?r.name:d,De("retrieveStatus",g=>{p.insertCell(-1).textContent=g.liveStatus,p.insertCell(-1).textContent=g.recoveryStatus},d),d===xo&&(p.classList.add("table-active"),e=!0)}),e||(xo=null,Yo(null))})}function a0(e){e.target&&e.target.tagName==="TD"&&(xo===e.target.parentNode.id?(xo=null,Yo(null)):(xo=e.target.parentNode.id,De("retrieveConnection",Yo,xo)))}function s0(e){e&&(xo=null,Yo(null)),Ii()}var Sl={"AMQP 0.9.1":{name:"AMQP 0.9.1",connectionType:"amqp-091",connectionStatus:"closed",failoverEnabled:!0,uri:"amqp://user:password@localhost:5672/vhost",sources:[{addresses:["queueName"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"exchangeName/routingKey",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]},"AMQP 1.0":{name:"AMQP 1.0",connectionType:"amqp-10",connectionStatus:"closed",failoverEnabled:!0,uri:"amqps://user:password@hono.eclipseprojects.io:5671",sources:[{addresses:["telemetry/FOO"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"events/twin",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"]}]},"MQTT 3.1.1":{name:"MQTT 3.1.1",connectionType:"mqtt",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5":{name:"MQTT 5",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5 with JS mapping":{name:"MQTT 5 with JS mapping",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0,enforcement:{input:"{{ source:address }}",filters:["eclipse-ditto-sandbox/{{ thing:name }}/update"]},replyTarget:{enabled:!1},payloadMapping:["javascript"]}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0,payloadMapping:["javascript"]}],mappingDefinitions:{javascript:{mappingEngine:"JavaScript",options:{incomingScript:`/**
 * Maps the passed parameters to a Ditto Protocol message.
 * @param {Object.<string, string>} headers - The headers Object containing all received header values
 * @param {string} [textPayload] - The String to be mapped
 * @param {ArrayBuffer} [bytePayload] - The bytes to be mapped as ArrayBuffer
 * @param {string} [contentType] - The received Content-Type, e.g. "application/json"
 * @returns {(DittoProtocolMessage|Array<DittoProtocolMessage>)} dittoProtocolMessage(s) -
 *  The mapped Ditto Protocol message,
 *  an array of Ditto Protocol messages or
 *  <code>null</code> if the message could/should not be mapped
 */
function mapToDittoProtocolMsg(
  headers,
  textPayload,
  bytePayload,
  contentType
) {

  // ### Insert/adapt your mapping logic here.
  // Use helper function Ditto.buildDittoProtocolMsg to build Ditto protocol message
  // based on incoming payload.
  // See https://www.eclipse.dev/ditto/connectivity-mapping.html#helper-functions for details.

  // ### example code assuming the Ditto protocol content type for incoming messages.
  if (contentType === 'application/vnd.eclipse.ditto+json') {
    // Message is sent as Ditto protocol text payload and can be used directly
    return JSON.parse(textPayload);
  } else if (contentType === 'application/octet-stream') {
    // Message is sent as binary payload; assume Ditto protocol message (JSON).
    try {
      return JSON.parse(Ditto.arrayBufferToString(bytePayload));
    } catch (e) {
      // parsing failed (no JSON document); return null to drop the message
      return null;
    }
  }

  // no mapping logic matched; return null to drop the message
  return null;
}`,outgoingScript:`/**
 * Maps the passed parameters which originated from a Ditto Protocol message to an external message.
 * @param {string} namespace - The namespace of the entity in java package notation, e.g.: "org.eclipse.ditto". Or "_"
 * (underscore) for connection announcements.
 * @param {string} name - The name of the entity, e.g.: "device".
 * @param {string} group - The affected group/entity: "things"|"policies"|"connections".
 * @param {string} channel - The channel for the signal: "twin"|"live"|"none"
 * @param {string} criterion - The criterion to apply: "commands"|"events"|"search"|"messages"|"announcements"|"errors".
 * @param {string} action - The action to perform: "create"|"retrieve"|"modify"|"delete". Or the announcement name:
 * "opened"|"closed"|"subjectDeletion". Or the subject of the message.
 * @param {string} path - The path which is affected by the message (e.g.: "/attributes"), or the destination
 * of a message (e.g.: "inbox"|"outbox").
 * @param {Object.<string, string>} dittoHeaders - The headers Object containing all Ditto Protocol header values.
 * @param {*} [value] - The value to apply / which was applied (e.g. in a "modify" action).
 * @param {number} [status] - The status code that indicates the result of the command. When this field is set,
 * it indicates that the Ditto Protocol Message contains a response.
 * @param {Object} [extra] - The enriched extra fields when selected via "extraFields" option.
 * @returns {(ExternalMessage|Array<ExternalMessage>)} externalMessage - The mapped external message, an array of
 * external messages or <code>null</code> if the message could/should not be mapped.
 */
function mapFromDittoProtocolMsg(
  namespace,
  name,
  group,
  channel,
  criterion,
  action,
  path,
  dittoHeaders,
  value,
  status,
  extra
) {

  // ###
  // Insert your mapping logic here

  // ### example code using the Ditto protocol content type.
  let headers = dittoHeaders;
  let textPayload = JSON.stringify(Ditto.buildDittoProtocolMsg(namespace, name, group, channel, criterion, action,
                                                               path, dittoHeaders, value, status, extra));
  let bytePayload = null;
  let contentType = 'application/vnd.eclipse.ditto+json';

  return Ditto.buildExternalMsg(
      headers, // The external headers Object containing header values
      textPayload, // The external mapped String
      bytePayload, // The external mapped byte[]
      contentType // The returned Content-Type
  );
}`,loadBytebufferJS:"false",loadLongJS:"false"}}}},"HTTP 1.1":{name:"HTTP 1.1",connectionType:"http-push",connectionStatus:"closed",failoverEnabled:!0,uri:"https://webhook.site:443/<YOUR-WEBHOOK-ID>",specificConfig:{parallelism:"1"},sources:[],targets:[{address:"POST:/ditto-event/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],headerMapping:{"content-type":"{{ header:content-type }}","api-key":"this-is-a-secret-api-key-to-send-along"}}]},"Kafka 2.x":{name:"Kafka 2.x",connectionType:"kafka",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://user:password@localhost:9092",specificConfig:{bootstrapServers:"localhost:9092,other.host:9092",saslMechanism:"plain"},sources:[{addresses:["theTopic"],consumerCount:1,qos:1,authorizationContext:["ditto:inbound-auth-subject"],enforcement:{input:"{{ header:device_id }}",filters:["{{ entity:id }}"]},headerMapping:{},payloadMapping:["Ditto"],replyTarget:{enabled:!0,address:"theReplyTopic",headerMapping:{},expectedResponseTypes:["response","error","nack"]},acknowledgementRequests:{includes:[]},declaredAcks:[]}],targets:[{address:"topic/key",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]}};var Zt={buttonConnectionTemplates:null,ulConnectionTemplates:null,inputConnectionTemplate:null,crudConnection:null,editorValidationConnection:null},je,Xo,Jo,Qe,Aa;function Eu(){Ca(Ta),ht(Zt),fo(Zt.ulConnectionTemplates,Object.keys(Sl)),je=Nt("connectionEditor","ace/mode/json",!0),Xo=Nt("connectionIncomingScript","ace/mode/javascript",!0),Jo=Nt("connectionOutgoingScript","ace/mode/javascript",!0),Zt.ulConnectionTemplates.addEventListener("click",g0),Xo.on("blur",ku(Xo,"incomingScript")),Jo.on("blur",ku(Jo,"outgoingScript")),je.on("input",d0),je.getSession().on("changeAnnotation",c0),Zt.crudConnection.addEventListener("onEditToggle",h0),Zt.crudConnection.addEventListener("onCreateClick",m0),Zt.crudConnection.addEventListener("onUpdateClick",p0),Zt.crudConnection.addEventListener("onDeleteClick",u0)}function ku(e,t){return()=>{if(!Zt.crudConnection.isEditing||Aa)return;let d=JSON.parse(je.getValue());r(d),d.mappingDefinitions.javascript.options[t]=e.getValue(),je.setValue(Tt(d),-1)};function r(d){d.mappingDefinitions||(d.mappingDefinitions={javascript:{mappingEngine:"JavaScript",options:{incomingScript:"",outgoingScript:""}}})}}function d0(){je.session.getUndoManager().isClean()||(Zt.inputConnectionTemplate.value=null,Zt.editorValidationConnection.classList.remove("is-invalid"))}function c0(){Aa=je.getSession().getAnnotations().filter(e=>e.type==="error").length>0}function p0(){lt(!Aa,"Errors in connection json",Zt.editorValidationConnection),Qe=JSON.parse(je.getValue()),De("modifyConnection",()=>{Ii(),Zt.crudConnection.toggleEdit()},Zt.crudConnection.idValue,Qe)}function u0(){Ke(`Are you sure you want to delete connection<br>'${Qe.name}'?`,"Delete",()=>{De("deleteConnection",()=>{Yo(null),Ii()},Zt.crudConnection.idValue)})}function m0(){lt(je.getValue()!=="","Please enter a connection configuration (select a template as a basis)",Zt.editorValidationConnection),lt(!Aa,"Errors in connection json",Zt.editorValidationConnection);let e=JSON.parse(je.getValue());Mi()==="ditto_2"?e.id=Math.random().toString(36).replace("0.",""):delete e.id,De("createConnection",t=>{Yo(t,!0),Ii(),Zt.crudConnection.toggleEdit()},null,e)}function g0(e){Zt.inputConnectionTemplate.value=e.target.textContent;let t=JSON.parse(JSON.stringify(Sl[Zt.inputConnectionTemplate.value]));Ta(t),Zt.editorValidationConnection.classList.remove("is-invalid"),je.session.getUndoManager().markClean()}function Ta(e){Qe=e,Xo.setValue(""),Jo.setValue(""),Qe?(Zt.crudConnection.idValue=Qe.id?Qe.id:null,je.setValue(Tt(Qe),-1),Qe.mappingDefinitions&&Qe.mappingDefinitions.javascript&&(Xo.setValue(Qe.mappingDefinitions.javascript.options.incomingScript,-1),Jo.setValue(Qe.mappingDefinitions.javascript.options.outgoingScript,-1))):(Zt.crudConnection.idValue=null,je.setValue(""))}function h0(e){let t=e.detail.isEditing;Zt.buttonConnectionTemplates.disabled=!t,je.setReadOnly(!t),je.renderer.setShowGutter(t),Xo.setReadOnly(!t),Xo.renderer.setShowGutter(t),Jo.setReadOnly(!t),Jo.renderer.setShowGutter(t),t||(Zt.crudConnection.idValue&&Zt.crudConnection.idValue!==""?Ta(Qe):Ta(null))}var vn=(r=>(r[r.PROP_LIKE=0]="PROP_LIKE",r[r.PROP_EQ=1]="PROP_EQ",r))(vn||{}),Ne=class e{constructor(t,r,d="@",p){console.assert(!(d==="@"&&t!==0)),this.type=t,this.key=d,this.values=[r],this.keyDisplay=p}add(t){this.values=[...new Set([...t,...this.values])]}toJsonPath(){switch(this.type){case 1:return this.values.map(t=>`@.${this.key}=="${t}"`).join("||");case 0:return this.key==="@"?`/${this.values[0].toString().replace(/\//g,"\\/")}/.test(JSON.stringify(@))`:this.values.map(t=>`/${t.replace(/\//g,"\\/")}/.test(@.${this.key})`).join("||")}}static fromString(t){let r=/^([^:~]+)(:|~)?(.*)/gm.exec(t.replace(/\s/g,""));return r[2]===":"?new e(1,r[3],r[1]):r[2]==="~"?new e(0,r[3],r[1]):new e(0,r[1])}static fromJSON(t){return console.assert(t.values.length===1),new e(t.type,t.values[0],t.key,t.keyDisplay)}toString(){switch(this.type){case 1:return`${this.keyDisplay??this.key}:${this.values.toString().replace(/\\/g,"")}`;case 0:return this.key==="@"?this.values[0]:`${this.keyDisplay??this.key}~${this.values.toString().replace(/\\/g,"")}`}}},wn=class{constructor(){this.terms=[];this.addPropEq=(t,r)=>(this.addOrUpdate(new Ne(1,r,t)),this);this.addPropLike=(t,r)=>(this.addOrUpdate(new Ne(0,r,t)),this);this.addFromString=t=>{let r=Ne.fromString(t);return this.addOrUpdate(r),this};this.addOrUpdate=t=>{let r=this.terms.find(d=>d.type===t.type&&d.key===t.key);return r?r.add(t.values):this.terms.push(t),this};this.getAllUIs=()=>this.terms.map(t=>this.createChipUIForTerm(t));this.deleteFilterCallback=t=>{let r=t.target.getAttribute("data-key"),d=vn[t.target.getAttribute("data-type")];this.terms=this.terms.filter(p=>p.key!==r||p.type!==d),this.onFilterChange&&this.onFilterChange.filterChanged()}}setAllLike(t){return this.addOrUpdate(new Ne(0,t)),this}clear(){this.terms=[]}createChipUIForTerm(t){let r=document.createElement("span");r.classList.add("badge","rounded-pill","bg-info","mb-1","me-1"),r.innerText=t.toString();let d=document.createElement("button");return d.type="button",d.classList.add("btn-close"),d.style.fontSize="0.75em",d.setAttribute("data-key",t.key),d.setAttribute("data-type",vn[t.type]),d.onclick=this.deleteFilterCallback,r.appendChild(d),r}createJsonPath(){let t=this.terms.map(r=>r.toJsonPath());return t.length>1?`$[?(${t.map(r=>`(${r})`).join("&&")})]`:t.length>0?`$[?(${t})]`:null}};var Bt={tbodyConnectionLogs:null,tbodyConnectionMetrics:null,buttonRetrieveConnectionStatus:null,buttonRetrieveConnectionLogs:null,buttonEnableConnectionLogs:null,buttonResetConnectionLogs:null,buttonRetrieveConnectionMetrics:null,buttonResetConnectionMetrics:null,tableValidationConnections:null,tableFilterConnectionLogs:null,badgeConnectionLogsCount:null},Cl=[],La,Oi,$a,Ze;async function Su(){Ca(E0),ht(Bt),Oi=Nt("connectionLogDetail","ace/mode/json",!0),Oi.session.setUseWrapMode(!0),$a=Nt("connectionStatusDetail","ace/mode/json",!0),Bt.buttonRetrieveConnectionStatus.onclick=_u,document.querySelector('a[data-bs-target="#tabConnectionStatus"]').onclick=_u,Bt.buttonEnableConnectionLogs.onclick=x0,Bt.buttonResetConnectionLogs.onclick=y0,Bt.buttonRetrieveConnectionLogs.onclick=Ra,Bt.tbodyConnectionLogs.addEventListener("click",v0),Bt.tableFilterConnectionLogs.addEventListener("filterChange",_0),Bt.tableFilterConnectionLogs.filterOptions=S0(),Bt.buttonRetrieveConnectionMetrics.onclick=Tl,document.querySelector('a[data-bs-target="#tabConnectionMetrics"]').onclick=Tl,Bt.buttonResetConnectionMetrics.onclick=f0,Bt.tbodyConnectionMetrics.addEventListener("click",w0)}function f0(){lt(Ze,"Please select a connection",Bt.tableValidationConnections),De("connectionCommand",Tl,Ze,null,"connectivity.commands:resetConnectionMetrics")}function v0(e){Oi.setValue(Tt(La[e.target.parentNode.rowIndex-1]),-1),Oi.session.getUndoManager().reset()}function w0(e){}function y0(){lt(Ze,"Please select a connection",Bt.tableValidationConnections),De("connectionCommand",Ra,Ze,null,"connectivity.commands:resetConnectionLogs")}function x0(){lt(Ze,"Please select a connection",Bt.tableValidationConnections),De("connectionCommand",Ra,Ze,null,"connectivity.commands:enableConnectionLogs")}function Tl(){lt(Ze,"Please select a connection",Bt.tableValidationConnections),Bt.tbodyConnectionMetrics.textContent="",De("retrieveConnectionMetrics",e=>{e.connectionMetrics&&Object.keys(e.connectionMetrics).forEach(t=>{e.connectionMetrics[t]&&Object.keys(e.connectionMetrics[t]).forEach(r=>{let d=e.connectionMetrics[t][r];Ut(Bt.tbodyConnectionMetrics,t,!1,null,r,"success",d.success.PT1M,d.success.PT1H,d.success.PT24H);let g=Ut(Bt.tbodyConnectionMetrics,t,!1,null,r,"failure",d.failure.PT1M,d.failure.PT1H,d.failure.PT24H).lastElementChild;for(let n=0;n<3;n++)g.innerHTML!=="0"&&g.classList.add("text-danger"),g=g.previousElementSibling})})},Ze)}function _u(){lt(Ze,"Please select a connection",Bt.tableValidationConnections),De("retrieveStatus",e=>{$a.setValue(Tt(e),-1),$a.session.getUndoManager().reset()},Ze)}function Ra(){lt(Ze,"Please select a connection",Bt.tableValidationConnections),De("retrieveConnectionLogs",e=>{Cl=e.connectionLogs,k0(e),Cu()},Ze)}function Cu(){Bt.tbodyConnectionLogs.textContent="",Oi.setValue(""),La=Bt.tableFilterConnectionLogs.filterItems(Cl),La.forEach(e=>{Ut(Bt.tbodyConnectionLogs,un(e.timestamp,!0),!1,null,e.category,e.type,e.level)}),mn(Bt.badgeConnectionLogsCount,Cl,La),Bt.tbodyConnectionLogs.scrollTop=Bt.tbodyConnectionLogs.scrollHeight-Bt.tbodyConnectionLogs.clientHeight}function k0(e){e.enabledUntil?(Bt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-off","bi-toggle-on"),Bt.buttonEnableConnectionLogs.setAttribute("title",`Enabled until ${un(e.enabledUntil)}`)):(Bt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-on","bi-toggle-off"),Bt.buttonEnableConnectionLogs.setAttribute("title","Click to enable connection logs for the selected connection"))}function E0(e,t=!0){Ze=e?e.id:null,$a.setValue(""),Oi.setValue(""),Bt.tbodyConnectionMetrics.textContent="",Bt.tbodyConnectionLogs.textContent="",!t&&e&&e.id&&Ra()}function _0(e){Cu()}function S0(){let e=[];return["consumed","mapped","dropped","enforced","acknowledged","throttled","dispatched","filtered","published"].forEach(t=>e.push(new Ne(1,t,"type"))),["source","target","response"].forEach(t=>e.push(new Ne(1,t,"category"))),["success","failure"].forEach(t=>e.push(new Ne(1,t,"level"))),["thing"].forEach(t=>e.push(new Ne(1,t,"entityType"))),e}var Tu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#piggyBackCommands">
    Piggyback Commands
</h5>
<hr />
<div class="collapse show" id="piggyBackCommands">
    <div class="row-cols-md-auto" style="height: 80vh;">
        <div class="col-md-auto resizable_flex_column">
            <div class="row mb-1" style="flex-grow: 1;">
                <div class="col-md-6 resizable_flex_column">
                    <div class="col-md-auto resizable_flex_column">
                        <div class="row mb-1">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button id="showTemplates" class="btn btn-outline-primary btn-sm button_round_right"
                                        data-bs-toggle="modal" data-bs-target="#templatesModal">
                                        Insert Template
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button class="btn btn-outline-primary btn-sm button_round_right"
                                        style="float: right;" id="buttonSubmit">
                                        Submit
                                    </button>
                                    <button hidden class="btn btn-outline-secondary btn-sm button_round_right"
                                        style="float: right;" id="buttonCancel">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Service</label>
                            <select class="form-select-sm" id="serviceSelector"></select>
                            <button class="btn btn-outline-primary btn-sm button_round_right"
                                id="buttonLoadServiceInstances">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                            <div class="invalid-feedback"></div>
                        </div>

                        <div class="input-group input-group-sm mb-1" hidden id="instanceContainer">
                            <a class="input-group-text">Instance:</a>
                            <select class="form-select-sm" id="instanceSelector"></select>
                        </div>

                        <div class="input-group input-group-sm mb-1 has-validation" style="width: 20%;">
                            <label class="input-group-text">Timeout in sec</label>
                            <input type="text" class="form-control form-control-sm" id="timeout"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Actor path</label>
                            <input type="text" class="form-control form-control-sm" id="targetActorSelection"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="headerValidationElement">Header</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 0.2;">
                            <div class="script_editor" id="aceHeaders"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="commandValidationElement">Command</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="aceCommand"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 resizable_flex_column">
                    <div class="row mb-1">
                        <div class="col-md-auto resizable_flex_column">
                            <h6>Request status:</h6>
                        </div>
                        <div class="col-md-auto resizable_flex_column">
                            <div id="responseStatus">no request made</div>
                        </div>
                    </div>
                    <h6>Result</h6>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div class="script_editor" id="acePiggybackResponse"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
`;var Ma={targetActorSelection:"/user/gateway/proxy",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"things.commands:retrieveThing",thingID:"com.acme:foobar1"}};var Au={Overall:{"Modify SBR enabled":{service:"Overall",timeout:5,targetActorSelection:"/system/cluster/core/daemon/downingProvider",headers:{aggregate:!0,"ditto-sudo":!0},command:{type:"ditto.sbr:modify",enabled:!0}}},connectivity:{"sudo: retrieve connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connection.id}}"}},"sudo: retrieve all connection IDs":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveAllConnectionIds"}},"sudo: retrieve all connection IDs by tag":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionIdsByTag",tag:"{{tag}}"}},"sudo: retrieve connection tags":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionTags",connectionId:"{{connection.id}}"}},"sudo: retrieve connection metrics":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connection.id}}"}},"sudo: retrieve connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: enable connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:enableConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: close connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:closeConnection",connectionId:"{{connection.id}}"}},"sudo: open connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:openConnection",connectionId:"{{connection.id}}"}},"create connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"sudo: modify connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"connectivity: retrieve cleanup progress":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"connectivity: retrieve cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"connectivity: modify cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},gateway:{},policies:{"retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"sudo: modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: delete policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:deletePolicy",policyId:"{{policy.id}}"}},"unblock namespace":{service:"policies",timeout:5,targetActorSelection:"/user/blockedNamespacesUpdater/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"namespaces.commands:unblockNamespace",namespace:"{{namespace}}"}},"policies: retrieve cleanup progress":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"policies: retrieve cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"policies: modify cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},things:{"retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"sudo: retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"sudo: create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: delete thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:deleteThing",thingId:"{{thing.id}}"}},"thing: retrieve cleanup progress":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"thing: retrieve cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"thing: modify cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},search:{"retrieve sync progress":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"reset sync events":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:resetHealthEvents"}},"retrieve sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"modify sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!0,"idle-timeout":"5m",keep:{events:"2"},"max-backoff":"2m","max-restarts":180,"min-backoff":"1s","policy-ask-timeout":"10s","quiet-period":"8m",recovery:"5m",throttle:{period:"10s",throughput:100},"tolerance-window":"20m"}}},"force update thing in index":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/thingsUpdater",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0},command:{type:"thing-search.sudo.commands:sudoUpdateThing",thingId:"<THING-ID>",invalidateThing:!1,invalidatePolicy:!1,updateReason:"UNKNOWN"}},"force update for complete namespaces":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSyncProxy",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0,namespaces:["namespace1","namespace2"]},command:{type:"common.commands:shutdown"}}}};var Lu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="templatesModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Templates
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Service: </a>
                    <select class="form-select-sm" id="templateServiceSelector"></select>
                </div>

                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Template:</a>
                    <select class="form-select-sm" id="templateSelector"></select>
                </div>

                <pre class="ace_container" id="commandPreview"></pre>

                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" id="insertTemplate"
                        data-bs-toggle="tooltip" data-bs-dismiss="modal">Insert</button>
                </div>
            </div>
        </div>
    </div>
</div>`;var Je={templateServiceSelector:null,templateSelector:null,commandPreview:null,insertTemplate:null,templatesModal:null},Al="Overall",Ll,$l=new Map,yn=new Map;document.getElementById("templatesHTML").innerHTML=Lu;async function $u(){ht(Je),R0(),Je.templateServiceSelector.onchange=Mu,Je.templateSelector.onchange=Iu,Je.insertTemplate.onclick=M0}function Ru(e){Je.templateServiceSelector.value=e,Mu()}function Rl(e,t,r){return{targetActorSelection:e,headers:t,piggybackCommand:r}}function R0(){let e=[];for(let[t,r]of Object.entries(Au).sort()){e.push(t),yn.set(t,[]);for(let[d,p]of Object.entries(r))yn.get(t).push(d),$l.set(d,p),p.service!==Al&&yn.get(Al).push(d)}Ge(Je.templateServiceSelector,e),Ge(Je.templateSelector,yn.get(Al))}function Mu(){if(Je.templateServiceSelector.value!==Ll){Ll=Je.templateServiceSelector.value;let e=yn.get(Ll);Ge(Je.templateSelector,e),Iu()}}function Iu(){let e=$l.get(Je.templateSelector.value);if(e){let t=Rl(e.targetActorSelection,e.headers,e.command);Je.commandPreview.textContent=Tt(t)}else Je.commandPreview.textContent=""}async function M0(){let e=$l.get(Je.templateSelector.value);e&&Pu(e)}var Ml="Invalid json!",I0="Headers field is required!",O0="Command field is required!",Bu="Timeout field is required!",Uu="Actor path field is required!",Hu="No services available!",Pl="Loading...",P0="request in progress",Nu="error",Qr,Ia="Overall",Pi={},Er,ju="All",qo,Zr,to,Qo,Il=new Map,pt={showTemplates:null,serviceSelector:null,instanceContainer:null,instanceSelector:null,timeout:null,buttonLoadServiceInstances:null,targetActorSelection:null,buttonSubmit:null,buttonCancel:null,responseStatus:null,commandValidationElement:null,headerValidationElement:null,tabOperations:null,collapseOperations:null};document.getElementById("piggybackHTML").innerHTML=Tu;async function Wu(){ht(pt),pt.showTemplates.onclick=function(){let e=pt.serviceSelector.value;e===Pl&&(e=Ia),Ru(e)},Nr(pt.tabOperations,pt.collapseOperations,Fu,"disableOperations"),D0(),pt.targetActorSelection.placeholder=Ma.targetActorSelection,pt.buttonLoadServiceInstances.onclick=Fu,pt.buttonSubmit.onclick=N0,pt.serviceSelector.onchange=Dl,pt.instanceSelector.onchange=F0,pt.timeout.onchange=z0,pt.targetActorSelection.onchange=B0}function Pu(e){Qr=e,pt.serviceSelector.value=Qr.service,qo=void 0,Dl(),pt.timeout.value=Qr.timeout,pt.targetActorSelection.value=Qr.targetActorSelection,Zr.setValue(Tt(Qr.headers),-1),to.setValue(Tt(Qr.command),-1)}async function Fu(){Pi[Ia]=[],Ge(pt.serviceSelector,[Pl]),await xt("GET","/devops/logging",null,null,!1,!0).then(t=>{let r=Object.entries(t).sort();r.length>0?r.forEach(d=>{let g=Object.values(d[1]).map(n=>n.instance).sort();g.unshift(ju),Pi[d[0]]=g}):Pi=[]}).catch(t=>{Pi=[]}),e(Pi);function e(t){let r=Object.keys(t);Er?r.indexOf(Er)==-1&&(Er=void 0):Qr&&r.indexOf(Qr.service)!==-1?Er=Qr.service:r.length>0&&(Er=r[0]),Ge(pt.serviceSelector,r),pt.serviceSelector.value=Er,Dl()}}function Dl(){!pt.serviceSelector.value!==Er&&(kr(pt.serviceSelector.value!=="",Hu,pt.serviceSelector),Er=pt.serviceSelector.value,Er&&Er!==Ia?(pt.instanceContainer.removeAttribute("hidden",""),e(Pi[Er])):pt.instanceContainer.setAttribute("hidden",""));function e(t){qo?t.indexOf(qo)==-1&&(qo=void 0):t.length>0&&(qo=t[0]),Ge(pt.instanceSelector,t),pt.instanceSelector.value=qo}}function D0(){Zr=Nt("aceHeaders","ace/mode/json"),Zr.setOption("wrap",!0),Il.set(Zr.getSession(),pt.headerValidationElement),to=Nt("aceCommand","ace/mode/json"),to.setOption("wrap",!0),Il.set(to.getSession(),pt.commandValidationElement),Qo=Nt("acePiggybackResponse","ace/mode/json"),Qo.setReadOnly(!0),Qo.setOption("wrap",!0),Zr.setOption("placeholder",Tt(Ma.headers)),to.setOption("placeholder",Tt(Ma.command)),Zr.getSession().on("changeAnnotation",zu),to.getSession().on("changeAnnotation",zu)}function zu(e,t){kr(!Ol(t),Ml,Il.get(t))}function Ol(e){return e.getAnnotations().filter(t=>t.type==="error").length>0}async function N0(){if(e()){pt.responseStatus.textContent=P0,Qo.setValue("",-1);let p=t(pt.serviceSelector.value,pt.instanceSelector.value,pt.timeout.value),g=Rl(pt.targetActorSelection.value,JSON.parse(Zr.getValue()),JSON.parse(to.getValue()));new Promise((u,o)=>{r(o);try{xt("POST",p,g,null,!0,!0).then(i=>u(i)).catch(i=>o(i))}catch(i){d(),Qo.setValue(i.message,-1),pt.responseStatus.textContent=Nu}}).then(u=>{d(),u.json().then(o=>{Qo.setValue(Tt(o),-1),pt.responseStatus.textContent=u.status})}).catch(u=>{d(),Qo.setValue(u.message,-1),pt.responseStatus.textContent=Nu})}function e(){let p=kr(pt.timeout.value.trim()!=="",Bu,pt.timeout),g=kr(pt.serviceSelector.value!==""&&pt.serviceSelector.value!==Pl,Hu,pt.serviceSelector),n=kr(pt.targetActorSelection.value.trim()!=="",Uu,pt.targetActorSelection),u=kr(Zr.getValue().trim()!=="",I0,pt.headerValidationElement);u&&=kr(!Ol(Zr.getSession()),Ml,pt.headerValidationElement);let o=kr(to.getValue().trim()!=="",O0,pt.commandValidationElement);return o&&=kr(!Ol(to.getSession()),Ml,pt.commandValidationElement),p&&g&&n&&u&&o}function t(p,g,n){let u="";return p&&p!==Ia&&(u=`/${p}`,g&&g!=ju&&(u+=`/${g}`)),`/devops/piggyback${u}?timeout=${n}`}function r(p){pt.buttonCancel.onclick=function(){p({message:"Cancelled"})},pt.buttonCancel.removeAttribute("hidden",""),pt.buttonSubmit.setAttribute("hidden","")}function d(){pt.buttonCancel.setAttribute("hidden",""),pt.buttonSubmit.removeAttribute("hidden",""),pt.buttonCancel.onclick=void 0}}function F0(){qo=pt.instanceSelector.value}function z0(){kr(pt.timeout.value.trim()!=="",Bu,pt.timeout)}function B0(){kr(pt.targetActorSelection.value.trim()!=="",Uu,pt.targetActorSelection)}function kr(e,t,r){try{lt(e,t,r)}catch{return!1}return!0}var Vu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
-->

<h5 data-bs-toggle="collapse" data-bs-target="#servicesLogging">Ditto Services Logging</h5>
<hr />
<div class="collapse show" id="servicesLogging">
    <div class="input-group input-group-sm mt-1 mb-1" role="group">
        <div style="flex-grow: 1;"></div>
        <button class="btn btn-outline-primary btn-sm button_round_left" id="buttonLoadAllLogLevels">
            <i class="bi bi-arrow-clockwise"></i>
            Refresh
        </button>
    </div>
    <div class="row resizable_pane" style="height: 80vh">
        <div class="col-md-12 resizable_flex_column">
            <div id="divLoggers"></div>
            <template id="templateLogger">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
                      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
                <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
                    rel="stylesheet"
                    integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
                    crossorigin="anonymous" referrerpolicy="no-referrer" />
                <link href="./dist/main.css" rel="stylesheet" />

                <div class="input-group input-group-sm mb-1 has-validation">
                    <input class="form-control me-1" type="text" disabled id="inputLogger" spellcheck="false"></input>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="btnLevel" id="debug" autocomplete="off">
                        <label class="btn btn-sm btn-outline-secondary" for="debug">DEBUG</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="info" autocomplete="off">
                        <label class="btn btn-sm btn-outline-success" for="info">INFO</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="warn" autocomplete="off">
                        <label class="btn btn-sm btn-outline-warning" for="warn">WARN</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="error" autocomplete="off">
                        <label class="btn btn-sm btn-outline-danger" for="error">ERROR</label>
                    </div>
                    <div class="invalid-feedback"></div>
                </div>
            </template>
        </div>
    </div>
</div>
`;var _r={buttonLoadAllLogLevels:null,divLoggers:null,templateLogger:null,tabOperations:null,collapseOperations:null};document.getElementById("servicesLoggingHTML").innerHTML=Vu;async function Ku(){ht(_r),Nr(_r.tabOperations,_r.collapseOperations,Nl,"disableOperations"),_r.buttonLoadAllLogLevels.onclick=Nl}function Gu(e,t){xt("PUT","/devops/logging/"+e,t,null,!1,!0).then(()=>{Nl()})}function Nl(){xt("GET","/devops/logging",null,null,!1,!0).then(e=>H0(e)).catch(e=>{_r.divLoggers.textContent=""})}function H0(e){_r.divLoggers.textContent="",Object.keys(e).sort().forEach((p,g)=>{t(p,g),Object.values(e[p])[0].loggerConfigs.forEach(n=>{r(p,n)}),d(p)});function t(p,g){let n=document.createElement("h6");n.innerText=p,g>0&&n.classList.add("mt-3"),_r.divLoggers.append(n)}function r(p,g){let n=document.createElement("div");n.attachShadow({mode:"open"}),n.shadowRoot.append(_r.templateLogger.content.cloneNode(!0)),n.shadowRoot.getElementById("inputLogger").value=g.logger,n.shadowRoot.getElementById(g.level).setAttribute("checked",""),Array.from(n.shadowRoot.querySelectorAll(".btn-check")).forEach(u=>{u.addEventListener("click",o=>Gu(p,{logger:g.logger,level:o.target.id}))}),_r.divLoggers.append(n)}function d(p){let g=document.createElement("div");g.attachShadow({mode:"open"}),g.shadowRoot.append(_r.templateLogger.content.cloneNode(!0));let n=g.shadowRoot.getElementById("inputLogger");n.disabled=!1,n.placeholder="Add new logger name and choose log level",n.addEventListener("change",u=>{u.target.classList.remove("is-invalid")}),Array.from(g.shadowRoot.querySelectorAll(".btn-check")).forEach(u=>{u.addEventListener("click",o=>{lt(n.value&&n.value.trim()!=="","Logger name must not be empty",n),Gu(p,{logger:n.value,level:o.target.id})})}),_r.divLoggers.append(g)}}var Yu=`<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"
  integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="./dist/main.css" rel="stylesheet" />
<div class="resizable_flex_column px-1" id="divRoot">
  <div class="input-group input-group-sm mb-1 mt-1 has-validation">
    <label class="input-group-text" id="label">Default</label>
    <input type="text" class="form-control" spellcheck="false" disabled id="inputIdValue">
    <button class="btn btn-outline-primary btn-sm" id="buttonEdit" data-bs-toggle="tooltip" title="Edit">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonCreate" data-bs-toggle="tooltip" title="Create">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonUpdate" data-bs-toggle="tooltip" title="Update">
      Update
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonDelete" data-bs-toggle="tooltip" title="Delete">
      Delete
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonCancel" data-bs-toggle="tooltip" title="Cancel">
      Cancel
    </button>
    <button type="button" id="buttonFullscreen" hidden class="btn btn-outline-secondary btn-sm button_round_both ms-1" title="Toggle fullscreen">
        <i class="bi bi-arrows-fullscreen"></i>
    </button>
    <div class="invalid-feedback"></div>
  </div>
  <slot></slot>
</div>`;var V0="editBackground",Oa="editForground",Fl="editForgroundBig",G0="bi-arrows-fullscreen",K0="bi-fullscreen-exit",Pa="fullscreen";var zl=class extends HTMLElement{constructor(){super();this.isEditing=!1;this.isEditDisabled=!1;this.isCreateDisabled=!1;this.isDeleteDisabled=!1;this.dom={label:null,inputIdValue:null,buttonEdit:null,buttonCreate:null,buttonUpdate:null,buttonDelete:null,buttonCancel:null,buttonFullscreen:null,divRoot:null};this.attachShadow({mode:"open"})}get idValue(){return this.dom.inputIdValue.value}set idValue(r){let d=this.shadowRoot.getElementById("inputIdValue");d.value=r,d.classList.remove("is-invalid");let p=this.shadowRoot.getElementById("buttonEdit");r&&r!==""?p.innerText="Edit":p.innerText="Create";let g=this.shadowRoot.getElementById("buttonDelete");!this.isEditing&&!this.isDeleteDisabled&&r&&r!==""?g.removeAttribute("hidden"):g.setAttribute("hidden","")}get editDisabled(){return this.isEditDisabled}set createDisabled(r){this.isCreateDisabled=r,this.lazyInit(this.dom.buttonCreate),this.setButtonState(this.dom.buttonCreate,r)}set deleteDisabled(r){this.isDeleteDisabled=r,this.lazyInit(this.dom.buttonDelete),this.setButtonState(this.dom.buttonDelete,r)}set editDisabled(r){this.isEditDisabled=r,this.isEditing||(this.lazyInit(this.dom.buttonEdit),this.setButtonState(this.dom.buttonEdit,r))}lazyInit(r){r||ht(this.dom,this.shadowRoot)}setButtonState(r,d){d?r.setAttribute("hidden",""):r.removeAttribute("hidden")}get validationElement(){return this.dom.inputIdValue}connectedCallback(){this.shadowRoot.innerHTML=Yu,setTimeout(()=>{ht(this.dom,this.shadowRoot),this.dom.buttonEdit.onclick=()=>this.toggleEdit(!1),this.dom.buttonCancel.onclick=()=>this.toggleEdit(!0),this.dom.label.innerText=this.getAttribute("label")||"Label",this.dom.buttonCreate.onclick=this.eventDispatcher("onCreateClick"),this.dom.buttonUpdate.onclick=this.eventDispatcher("onUpdateClick"),this.dom.buttonDelete.onclick=this.eventDispatcher("onDeleteClick"),this.dom.buttonFullscreen.onclick=()=>this.toggleFullscreen(),this.dom.inputIdValue.addEventListener("change",r=>{r.target.classList.remove("is-invalid"),this.dispatchEvent(new CustomEvent("onIdValueChange",{composed:!0}))})})}eventDispatcher(r){return()=>{this.dispatchEvent(new CustomEvent(r,{composed:!0}))}}toggleEdit(r){this.isEditing=!this.isEditing,document.getElementById("modalCrudEdit").classList.toggle(V0),document.body.classList.toggle("modal-open"),document.body.style.overflow=this.isEditing&&this.hasAttribute(Pa)?"hidden":"",this.dom.divRoot.classList.toggle(this.hasAttribute(Pa)?Fl:Oa),this.setButtonState(this.dom.buttonEdit,this.isEditing||this.isEditDisabled),this.setButtonState(this.dom.buttonFullscreen,!this.isEditing),this.dom.buttonCancel.toggleAttribute("hidden"),this.isEditing?this.dom.inputIdValue.value?this.dom.buttonUpdate.toggleAttribute("hidden"):this.isCreateDisabled||this.dom.buttonCreate.toggleAttribute("hidden"):(this.dom.buttonCreate.setAttribute("hidden",""),this.dom.buttonUpdate.setAttribute("hidden","")),(this.isEditing||!this.dom.inputIdValue.value)&&this.dom.buttonDelete.setAttribute("hidden","");let d=this.isEditing&&(!this.dom.inputIdValue.value||this.hasAttribute("allowIdChange"));this.dom.inputIdValue.disabled=!d,this.dispatchEvent(new CustomEvent("onEditToggle",{composed:!0,detail:{isEditing:this.isEditing,isCancel:r}}))}toggleFullscreen(){this.toggleAttribute(Pa),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(G0),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(K0),document.body.style.overflow=this.isEditing&&this.hasAttribute(Pa)?"hidden":"",this.dom.divRoot.classList.contains(Oa)?this.dom.divRoot.classList.replace(Oa,Fl):this.dom.divRoot.classList.replace(Fl,Oa)}};customElements.define("crud-toolbar",zl);function Da(){let e=[];return{addChangeListener:t,notifyAll:r};function t(d){e.push(d)}function r(d){e.forEach(p=>p.call(null,d))}}var Xu=`<div>
    <h5>Policies</h5>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <h6>Load a policy</h6>
            <form class="input-group input-group-sm mb-1 mt-1 has-validation" role="group" autocomplete="off">
                <label class="input-group-text">Policy Id</label>
                <input autocomplete="false" name="hidden" type="text" style="display:none;">
                <input type="search" class="form-control form-control-sm" id="inputPolicyId"></input>
                <button id="buttonLoadPolicy" class="btn btn-outline-primary btn-sm"
                    title="Load policy with the given ID">
                    Load
                </button>
                <div class="invalid-feedback"></div>
            </form>
            <h6>Recent policies</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyRecentPolicies"></tbody>
                </table>
            </div>
            <h6>Who am I</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyWhoami"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8">
            <div class="resizable_flex_column">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabPolicyEntries">Entries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyImports">Imports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyJson">JSON</a>
                    </li>
                </ul>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container active no-margin" id="tabPolicyEntries">
                        <h5>Policy Entries</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationEntries" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyEntries"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Entry" id="crudEntry">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Importable</label>
                                        <select class="form-select form-select-sm" id="selectImportable" disabled>
                                            <option selected value="implicit">implicit</option>
                                            <option value="explicit">explicit</option>
                                            <option value="never">never</option>
                                        </select>
                                    </div>    
                                </crud-toolbar>
                            </div>
                        </div>                
                        <h6>Subjects</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationSubjects" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicySubjects"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Subject" id="crudSubject" style="flex-grow: 1;">
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="subjectEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                            <!-- <div class="row flex_column_part">
                            </div> -->
                        </div>
                        <h6>Resources</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationResources" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyResources"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Resource" id="crudResource" style="flex-grow: 1;">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Template</label>
                                        <select class="form-select form-select-sm" id="selectResourceTemplates" disabled></select>
                                    </div>
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="resourceEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container no-margin" id="tabPolicyImports">
                        <h5>Policy Imports</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 75vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyImports"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Imported Policy Id" id="crudImport" style="flex-grow: 1;">
                                    <div class="table-wrap">
                                        <table class="table table-striped table-hover table-sm">
                                            <tbody id="tbodyPolicyImportEntries"></tbody>
                                        </table>
                                    </div>
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden; height: 80vh;">
                    <div class="tab-pane container no-margin" id="tabPolicyJson">
                        <crud-toolbar label="PolicyId" id="crudPolicyJson">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text">Template</label>
                                <select class="form-select form-select-sm" id="selectPolicyJSONTemplate" disabled></select>
                            </div>    
                            <div class="ace_container" style="flex-grow: 1;">
                                <div>
                                    <div class="script_editor" id="policyEditor"></div>
                                </div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;var Zo=Da(),$t,Ju,Te={inputPolicyId:null,tbodyRecentPolicies:null,tbodyWhoami:null,buttonLoadPolicy:null,collapsePolicies:null,tabPolicies:null};document.getElementById("policyHTML").innerHTML=Xu;function qu(){Ye(Z0),ht(Te),Ju=Nr(Te.tabPolicies,Te.collapsePolicies,q0,"disablePolicies"),Te.tbodyRecentPolicies.addEventListener("click",ty),Te.buttonLoadPolicy.onclick=e=>{e.preventDefault(),lt(Te.inputPolicyId.value,"Please enter a policyId",Te.inputPolicyId),Di(Te.inputPolicyId.value)},Te.tbodyWhoami.onclick=e=>{},Ce(X0)}function X0(e){Te.inputPolicyId.value=e&&e.policyId,Ju.viewDirty=!0}function J0(){Te.tbodyWhoami.textContent="",xt("GET","/whoami").then(e=>{e.subjects.forEach(t=>{Ut(Te.tbodyWhoami,t,!1,t,t===e.defaultSubject?"default":"")})}).catch(e=>{})}function Di(e){xt("GET","/policies/"+e).then(t=>ko(t)).catch(()=>ko(null))}async function ko(e){$t=e,$t?await Q0($t.policyId):Te.inputPolicyId.value=null,Zo.notifyAll($t)}async function q0(e){J0(),e&&await ko(null),Te.inputPolicyId.value&&Di(Te.inputPolicyId.value)}async function Q0(e){let t=Q().recentPolicyIds.indexOf(e);t>=0&&Q().recentPolicyIds.splice(t,1),Q().recentPolicyIds.unshift(e),Q().recentPolicyIds.length>=10&&Q().recentPolicyIds.pop(),await ie(!1,"recentPolicyIds")}function Z0(e){Q().recentPolicyIds=Q().recentPolicyIds||[],Te.tbodyRecentPolicies.textContent="",Q().recentPolicyIds.forEach(t=>{Ut(Te.tbodyRecentPolicies,t,$t&&$t.policyId===t,t)})}function ty(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;$t&&$t.policyId===t.id?ko(null):(Te.inputPolicyId.value=t.id,Di(t.id))}}function Ae(e,t){return()=>{t in[0,1]&&e.toggleEdit(!1),Di($t.policyId)}}var kn=Da(),Kt,Ht={tbodyPolicyEntries:null,tableValidationEntries:null,selectImportable:null,crudEntry:null};function Qu(){ht(Ht),Zo.addChangeListener(ay),cr(Ht.tbodyPolicyEntries,Ht.tableValidationEntries),Ht.crudEntry.editDisabled=!0,Ht.crudEntry.addEventListener("onCreateClick",oy),Ht.crudEntry.addEventListener("onDeleteClick",ny),Ht.crudEntry.addEventListener("onUpdateClick",iy),Ht.crudEntry.addEventListener("onEditToggle",ey),Ht.tbodyPolicyEntries.onclick=ry}function ey(e){Ht.selectImportable.disabled=!e.detail.isEditing,e.detail.isCancel&&Zu(Kt)}function ry(e){Kt===e.target.textContent?Kt=null:Kt=e.target.textContent,Na(Kt)}function oy(){lt(Ht.crudEntry.idValue,"Please enter a label for the entry",Ht.crudEntry.validationElement),lt(!Object.keys($t.entries).includes(Ht.crudEntry.idValue),`Entry with label ${Ht.crudEntry.idValue} already exists`,Ht.crudEntry.validationElement),Kt=Ht.crudEntry.idValue,Bl(Ht.crudEntry.idValue,{subjects:{},resources:{},importable:Ht.selectImportable.value},Ae(Ht.crudEntry,0))}function iy(){$t.entries[Kt].importable=Ht.selectImportable.value,Bl(Kt,$t.entries[Kt],Ae(Ht.crudEntry,1))}function ny(){eo(),Ke(`Are you sure you want to delete policy entry<br>'${Ht.crudEntry.idValue}'?`,"Delete",()=>{Bl(Kt,null,Ae(Ht.crudEntry,2))})}function Bl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${e}`,t).then(r)}function ay(e){if(Ht.tbodyPolicyEntries.textContent="",Ht.crudEntry.idValue=null,Ht.crudEntry.editDisabled=e===null,e){let t=!1;Object.keys(e.entries).forEach(r=>{Ut(Ht.tbodyPolicyEntries,r,r===Kt),r===Kt&&(Na(r),t=!0)}),t||(Kt=null,Na(null))}else Na(null)}function Na(e){Zu(e),kn.notifyAll(Kt)}function Zu(e){Ht.crudEntry.idValue=e,Ht.selectImportable.value=e&&$t.entries[e].importable}function eo(){lt(Kt,"Please select an entry",Ht.tableValidationEntries)}var mr,ge={tbodyPolicyImports:null,tbodyPolicyImportEntries:null,crudImport:null};function tm(){ht(ge),Zo.addChangeListener(my),ge.tbodyPolicyImports.onclick=ly,ge.crudImport.editDisabled=!0,ge.crudImport.addEventListener("onCreateClick",dy),ge.crudImport.addEventListener("onUpdateClick",cy),ge.crudImport.addEventListener("onDeleteClick",py),ge.crudImport.addEventListener("onEditToggle",uy),ge.crudImport.addEventListener("onIdValueChange",sy)}async function sy(){await Fi(ge.crudImport.idValue),rm(!1)}function ly(e){let t=e.target;mr===t.parentElement.id?mr=null:mr=t.parentElement.id,Fi(mr)}function Hl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/imports/${e}`,t).then(r)}function dy(){mr=ge.crudImport.idValue,Hl(mr,em(),Ae(ge.crudImport,0))}function cy(){Hl(mr,em(),Ae(ge.crudImport,1))}function py(){Ke(`Are you sure you want to delete policy import<br>'${ge.crudImport.idValue}'?`,"Delete",()=>{Hl(mr,null,Ae(ge.crudImport,2))})}function em(){let e={},t=document.querySelectorAll('#tbodyPolicyImportEntries input:checked[data-importable="explicit"]');return t.length>0&&(e.entries=Array.from(t).map(r=>r.id)),e}function uy(e){rm(!e.detail.isEditing),e.detail.isCancel&&Fi(mr)}function rm(e){document.querySelectorAll('#tbodyPolicyImportEntries input[data-importable="explicit"]').forEach(t=>t.disabled=e)}async function my(e){if(ge.tbodyPolicyImports.textContent="",ge.crudImport.idValue=null,ge.crudImport.editDisabled=e===null,e){let r=!1;for(let d of Object.keys(e.imports)){let p=Ut(ge.tbodyPolicyImports,d,d===mr);Qs(p,"bi-arrow-up-right-square",t(d),"Open policy"),d===mr&&(await Fi(d),r=!0)}r||(mr=null,await Fi(null))}else await Fi(null);function t(r){return d=>{xt("GET","/policies/"+r).then(async p=>{await ko(p)})}}}async function Fi(e){if(ge.crudImport.idValue=e,ge.tbodyPolicyImportEntries.textContent="",e){let r=await xt("GET","/policies/"+e);Object.keys(r.entries).forEach(d=>{let p=ge.tbodyPolicyImportEntries.insertRow(),g=Si(p,d,t(d,r),!0);g.dataset.importable=r.entries[d].importable,bo(p,d,JSON.stringify(r.entries[d],null,4)),bo(p,r.entries[d].importable)})}function t(r,d){let p=$t.imports[e],g=p&&p.entries&&p.entries.includes(r),n=d.entries[r].importable==="implicit";return g||n}}var jl={"Standard Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]},"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]}}}}},"Imports Importing Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}}}},imports:{"ditto:imported-policy":{entries:["EXPLICIT"]},"ditto:another-imported-policy":{}}},"Imports Exporting Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"},IMPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"implicit"},EXPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"explicit"},NEVER:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"}}}};var ve={crudPolicyJson:null,selectPolicyJSONTemplate:null},ro;function om(){ht(ve),Zo.addChangeListener(im),ro=Nt("policyEditor","ace/mode/json",!0),ve.crudPolicyJson.addEventListener("onCreateClick",vy),ve.crudPolicyJson.addEventListener("onDeleteClick",yy),ve.crudPolicyJson.addEventListener("onUpdateClick",wy),ve.crudPolicyJson.addEventListener("onEditToggle",fy),Ge(ve.selectPolicyJSONTemplate,["Select an example",...Object.keys(jl)]),ve.selectPolicyJSONTemplate.addEventListener("change",by),document.querySelector('a[data-bs-target="#tabPolicyJson"]').addEventListener("shown.bs.tab",e=>{ro.renderer.updateFull()})}function by(e){ro.setValue(JSON.stringify(jl[e.target.value],null,2),-1)}function fy(e){ro.setReadOnly(!e.detail.isEditing),ro.renderer.setShowGutter(e.detail.isEditing),ve.selectPolicyJSONTemplate.disabled=!e.detail.isEditing,ve.selectPolicyJSONTemplate.selectedIndex=0,e.detail.isCancel&&im($t)}function vy(){lt(ve.crudPolicyJson.idValue,"PolicyId must not be empty",ve.crudPolicyJson.validationElement),Wl(ve.crudPolicyJson.idValue,JSON.parse(ro.getValue()),()=>{ve.crudPolicyJson.toggleEdit(!1),Di(ve.crudPolicyJson.idValue)})}function wy(){Wl(ve.crudPolicyJson.idValue,JSON.parse(ro.getValue()),Ae(ve.crudPolicyJson,1))}async function yy(){Ke(`Are you sure you want to delete policy<br>'${ve.crudPolicyJson.idValue}'?`,"Delete",()=>{Wl(ve.crudPolicyJson.idValue,null,()=>{e(ve.crudPolicyJson.idValue),ko(null)})});async function e(t){let r=Q().recentPolicyIds.indexOf(t);r>=0&&Q().recentPolicyIds.splice(r,1),await ie(!1,"recentPolicyIds")}}function Wl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${e}`,t).then(r)}function im(e){ve.crudPolicyJson.idValue=e&&e.policyId,e?ro.setValue(JSON.stringify(e,null,2),-1):ro.setValue("")}var Vl={resources:{"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]},"policy:/":{grant:["READ","WRITE"],revoke:[]}}};var Ie,zt={tbodyPolicyResources:null,selectResourceTemplates:null,tableValidationResources:null,crudResource:null},tr;function nm(){ht(zt),kn.addChangeListener(Ly),cr(zt.tbodyPolicyResources,zt.tableValidationResources),tr=Nt("resourceEditor","ace/mode/json",!0),zt.tbodyPolicyResources.onclick=_y,zt.crudResource.editDisabled=!0,zt.crudResource.addEventListener("onCreateClick",Sy),zt.crudResource.addEventListener("onUpdateClick",Cy),zt.crudResource.addEventListener("onDeleteClick",Ty),zt.crudResource.addEventListener("onEditToggle",Ay),Ge(zt.selectResourceTemplates,["Select a resource template",...Object.keys(Vl.resources)]),zt.selectResourceTemplates.addEventListener("change",Ey)}function Ey(e){zt.crudResource.idValue=e.target.value,tr.setValue(JSON.stringify(Vl.resources[e.target.value],null,2),-1)}function _y(e){Ie===e.target.parentNode.id?(Ie=null,zt.crudResource.idValue=null,tr.setValue("")):(Ie=e.target.parentNode.id,zt.crudResource.idValue=Ie,tr.setValue(JSON.stringify($t.entries[Kt].resources[Ie],null,2),-1)),zt.crudResource.idValue=Ie}function Sy(){eo(),lt(zt.crudResource.idValue,"Please enter a resource",zt.crudResource.validationElement),lt(!Object.keys($t.entries[Kt].resources).includes(zt.crudResource.idValue),"Resource already exists",zt.crudResource.validationElement),Ie=zt.crudResource.idValue,Gl(zt.crudResource.idValue,tr.getValue()!==""?JSON.parse(tr.getValue()):{grant:["READ","WRITE"],revoke:[]},Ae(zt.crudResource,0))}function Cy(){eo(),lt(Ie,"Please select a resource",zt.tableValidationResources),Gl(Ie,JSON.parse(tr.getValue()),Ae(zt.crudResource,1))}function Ty(){eo(),lt(Ie,"Please select a resource",zt.tableValidationResources),Gl(Ie,null,Ae(zt.crudResource,2))}function Gl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${Kt}/resources/${e}`,t).then(r)}function Ay(e){zt.selectResourceTemplates.disabled=!e.detail.isEditing,zt.selectResourceTemplates.selectedIndex=0,tr.setReadOnly(!e.detail.isEditing),tr.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(zt.crudResource.idValue=Ie,$t&&Kt&&Ie?tr.setValue(JSON.stringify($t.entries[Kt].resources[Ie],null,2),-1):tr.setValue(""))}function Ly(e){Ie=null,zt.tbodyPolicyResources.textContent="",zt.crudResource.idValue=null,tr.setValue(""),zt.crudResource.editDisabled=e===null,$t&&e&&Object.keys($t.entries[e].resources).forEach(t=>{Ut(zt.tbodyPolicyResources,t,t===Ie,null,JSON.stringify($t.entries[e].resources[t])),t===Ie&&(zt.crudResource.idValue=t,tr.setValue(JSON.stringify($t.entries[e].resources[t],null,2),-1))})}var Fe,Yt={tbodyPolicySubjects:null,tableValidationSubjects:null,crudSubject:null},gr;function am(){ht(Yt),kn.addChangeListener(Dy),cr(Yt.tbodyPolicySubjects,Yt.tableValidationSubjects),gr=Nt("subjectEditor","ace/mode/json",!0),Yt.tbodyPolicySubjects.onclick=Ry,Yt.crudSubject.editDisabled=!0,Yt.crudSubject.addEventListener("onCreateClick",My),Yt.crudSubject.addEventListener("onUpdateClick",Iy),Yt.crudSubject.addEventListener("onDeleteClick",Oy),Yt.crudSubject.addEventListener("onEditToggle",Py)}function Ry(e){let t=e.target;Fe===t.parentElement.id?(Fe=null,gr.setValue("")):(Fe=t.parentElement.id,gr.setValue(JSON.stringify($t.entries[Kt].subjects[Fe],null,2),-1)),Yt.crudSubject.idValue=Fe}function My(){eo(),lt(Yt.crudSubject.idValue,"Please enter a subject or select one above",Yt.crudSubject.validationElement),lt(!Object.keys($t.entries[Kt].subjects).includes(Yt.crudSubject.idValue),"Subject already exists",Yt.crudSubject.validationElement),Fe=Yt.crudSubject.idValue,Kl(Yt.crudSubject.idValue,gr.getValue()!==""?JSON.parse(gr.getValue()):{type:"generated"},Ae(Yt.crudSubject,0))}function Kl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${Kt}/subjects/${e}`,t).then(r)}function Iy(){eo(),lt(Fe,"Please select a subject",Yt.tableValidationSubjects),Kl(Fe,JSON.parse(gr.getValue()),Ae(Yt.crudSubject,1))}function Oy(){eo(),lt(Fe,"Please select a subject",Yt.tableValidationSubjects),Kl(Fe,null,Ae(Yt.crudSubject,2))}function Py(e){gr.setReadOnly(!e.detail.isEditing),gr.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(Yt.crudSubject.idValue=Fe,$t&&Kt&&Fe?gr.setValue(JSON.stringify($t.entries[Kt].subjects[Fe],null,2),-1):gr.setValue(""))}function Dy(e){Fe=null,Yt.tbodyPolicySubjects.textContent="",Yt.crudSubject.idValue=null,Yt.crudSubject.editDisabled=e===null,gr.setValue(""),$t&&e&&Object.keys($t.entries[e].subjects).forEach(t=>{Ut(Yt.tbodyPolicySubjects,t,t===Fe,null,JSON.stringify($t.entries[e].subjects[t])),t===Fe&&(Yt.crudSubject.idValue=t,gr.setValue(JSON.stringify($t.entries[e].subjects[t],null,2),-1))})}var Wt={tbodyAttributes:null,crudAttribute:null,badgeAttributeCount:null},sm,oo;function lm(){Ce(Hy),ht(Wt),Wt.tbodyAttributes.onclick=Uy,Wt.crudAttribute.addEventListener("onCreateClick",Fy),Wt.crudAttribute.addEventListener("onUpdateClick",zy),Wt.crudAttribute.addEventListener("onDeleteClick",By),Wt.crudAttribute.addEventListener("onEditToggle",Wy),oo=Nt("attributeEditor","ace/mode/json",!0),document.querySelector('a[data-bs-target="#tabCrudAttribute"]').addEventListener("shown.bs.tab",e=>{oo.renderer.updateFull()})}function Fy(){lt(Wt.crudAttribute.idValue,"Attribute path must not be empty",Wt.crudAttribute.validationElement),lt(!St.attributes||!Object.keys(St.attributes).includes(Wt.crudAttribute.idValue),`Attribute path ${Wt.crudAttribute.idValue} already exists in Thing`,Wt.crudAttribute.validationElement),Yl("PUT",!0)}function zy(){Yl("PUT")}function By(){Ke(`Are you sure you want to delete attribute<br>'${Wt.crudAttribute.idValue}'?`,"Delete",()=>{Yl("DELETE")})}function Uy(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode.children[0].innerText;Wt.crudAttribute.idValue===t?En(null):En(St,t)}}function Yl(e,t=!1){let r=JSON.parse(oo.getValue());xt(e,`/things/${St.thingId}/attributes/${Wt.crudAttribute.idValue}`,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?sm:"*"}).then(()=>{e==="PUT"&&Wt.crudAttribute.toggleEdit(),yr(St.thingId)})}function En(e,t=null){Wt.crudAttribute.isEditing||(e?(Wt.crudAttribute.idValue=t,e.attributes&&oo.setValue(Tt(e.attributes[t]),-1)):(Wt.crudAttribute.idValue=null,oo.setValue("")))}function Hy(e){Wt.crudAttribute.editDisabled=e===null,Wt.tbodyAttributes.textContent="";let t=0,r=!1;e&&e.attributes&&Object.keys(St.attributes).forEach(d=>{d===Wt.crudAttribute.idValue&&(En(St,d),r=!0),Ut(Wt.tbodyAttributes,d,d===Wt.crudAttribute.idValue,null,jy(St.attributes[d])),t++}),Wt.badgeAttributeCount.innerText=t>0?t:"",r||En(null)}function jy(e){return typeof e=="object"?JSON.stringify(e):e.toString()}function Wy(e){let t=e.detail.isEditing;t&&Wt.crudAttribute.idValue&&Wt.crudAttribute.idValue!==""?xt("GET",`/things/${St.thingId}/attributes/${Wt.crudAttribute.idValue}`,null,null,!0).then(d=>(sm=d.headers.get("ETag").replace("W/",""),d.json())).then(d=>{r(),oo.setValue(Tt(d),-1)}):(r(),En(St,Wt.crudAttribute.idValue),St.attributes&&oo.setValue(Tt(St.attributes[Wt.crudAttribute.idValue]),-1));function r(){oo.setReadOnly(!t),oo.renderer.setShowGutter(t)}}var dm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonMessageSend" disabled>
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayload"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponse"></div>
            </div>
        </div>

    </div>
</div>`;var cm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseFeatures">
    Features <span class="badge rounded-pill bg-info" id="badgeFeatureCount"></span></h5>
<hr />
<div class="collapse show" id="collapseFeatures">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationFeature" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyFeatures"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill" id="tabItemsFeatures">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudFeature">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentFeatures">
                <div class="tab-pane container active no-margin" id="tabCrudFeature">
                    <crud-toolbar id="crudFeature" label="Feature ID">
                        <div class="input-group input-group-sm mb-1">
                            <label class="input-group-text">Definition</label>
                            <input type="text" class="form-control" id="inputFeatureDefinition" disabled></input>
                        </div>
                        <div class="input-group input-group-sm mb-1" style="flex-grow: 1; display: flex;">
                            <label class="input-group-text">Properties<br>and<br>Desired<br>Properties</label>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featurePropertiesEditor"></div>
                            </div>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featureDesiredPropertiesEditor"></div>
                            </div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>`;var pm=[];document.getElementById("featuresHTML").innerHTML=cm;function Fa(e){pm.push(e)}function Yy(){pm.forEach(e=>e.call(null,At.crudFeature.idValue))}var hr,io,um,At={crudFeature:null,inputFeatureDefinition:null,badgeFeatureCount:null,tbodyFeatures:null,tableValidationFeature:null};function mm(){Ce(tx),ht(At),cr(At.tbodyFeatures,At.tableValidationFeature),At.tbodyFeatures.onclick=Zy,At.crudFeature.editDisabled=!0,At.crudFeature.addEventListener("onCreateClick",Qy),At.crudFeature.addEventListener("onUpdateClick",Xy),At.crudFeature.addEventListener("onDeleteClick",Jy),At.crudFeature.addEventListener("onEditToggle",ex),hr=Nt("featurePropertiesEditor","ace/mode/json",!0),io=Nt("featureDesiredPropertiesEditor","ace/mode/json",!0),hr.on("dblclick",qy),document.querySelector('a[data-bs-target="#tabCrudFeature"]').addEventListener("shown.bs.tab",e=>{hr.renderer.updateFull(),io.renderer.updateFull()})}function Xy(){Jl("PUT")}function Jy(){Ke(`Are you sure you want to delete feature<br>'${At.crudFeature.idValue}'?`,"Delete",()=>{Jl("DELETE")})}function qy(e){e.domEvent.shiftKey&&setTimeout(()=>{let t=hr.getSelectedText();if(t){let r="$.."+t.replace(/['"]+/g,"").trim(),d=Rt({json:JSON.parse(hr.getValue()),path:r,resultType:"pointer"});Hp("features/"+At.crudFeature.idValue+"/properties"+d)}},10)}function Qy(){lt(At.crudFeature.idValue,"Feature ID must not be empty",At.crudFeature.validationElement),lt(!St.features||!Object.keys(St.features).includes(At.crudFeature.idValue),`Feature ID ${At.crudFeature.idValue} already exists in Thing`,At.crudFeature.validationElement),Jl("PUT",!0)}function Zy(e){e.target&&e.target.nodeName==="TD"&&(At.crudFeature.idValue===e.target.textContent?zi(null):zi(St,e.target.textContent))}function Jl(e,t=!1){lt(St,"No Thing selected"),lt(At.crudFeature.idValue,"No Feature selected");let r={},d=hr.getValue(),p=io.getValue();At.inputFeatureDefinition.value&&(r.definition=At.inputFeatureDefinition.value.split(",")),d&&(r.properties=JSON.parse(d)),p&&(r.desiredProperties=JSON.parse(p)),xt(e,"/things/"+St.thingId+"/features/"+At.crudFeature.idValue,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?um:"*"}).then(()=>{e==="PUT"&&At.crudFeature.toggleEdit(),yr(St.thingId)}).catch()}function Xl(e){e?(At.inputFeatureDefinition.value=e.definition?e.definition:null,e.properties?hr.setValue(Tt(e.properties),-1):hr.setValue(""),e.desiredProperties?io.setValue(Tt(e.desiredProperties),-1):io.setValue("")):(At.inputFeatureDefinition.value=null,hr.setValue(""),io.setValue("")),hr.session.getUndoManager().reset(),io.session.getUndoManager().reset()}function zi(e,t=null){At.crudFeature.isEditing||(e&&e.features&&t?(At.crudFeature.idValue=t,Xl(e.features[t])):(At.crudFeature.idValue=null,Xl(null)),Yy())}function tx(e){At.crudFeature.editDisabled=e===null,At.tbodyFeatures.textContent="";let t=0,r=!1;if(e&&e.features)for(let d of Object.keys(e.features))d===At.crudFeature.idValue&&(zi(e,d),r=!0),Ut(At.tbodyFeatures,d,d===At.crudFeature.idValue),t++;At.badgeFeatureCount.textContent=t>0?t:"",r||zi(e,null)}function ex(e){let t=e.detail.isEditing;t&&At.crudFeature.idValue&&At.crudFeature.idValue!==""?xt("GET",`/things/${St.thingId}/features/${At.crudFeature.idValue}`,null,null,!0).then(p=>(um=p.headers.get("ETag").replace("W/",""),p.json())).then(p=>{r(),Xl(p)}):(r(),d(),At.crudFeature.validationElement.classList.remove("is-invalid"));function r(){At.inputFeatureDefinition.disabled=!t,hr.setReadOnly(!t),hr.renderer.setShowGutter(t),io.setReadOnly(!t),io.renderer.setShowGutter(t)}function d(){At.crudFeature.idValue?zi(St,At.crudFeature.idValue):zi(null)}}var Cr,Et={inputMessageSubject:null,inputMessageTimeout:null,inputMessageTemplate:null,buttonMessageSend:null,buttonMessageFavorite:null,ulMessageTemplates:null,favIconMessage:null,tableValidationFeature:null},Sr,_n;async function hm(){Ye(ox),Fa(ix),Ci(document.getElementById("tabItemsFeatures"),document.getElementById("tabContentFeatures"),"Send Message",dm),ht(Et),Sr=Nt("acePayload","ace/mode/json"),_n=Nt("aceResponse","ace/mode/json",!0),Et.buttonMessageSend.onclick=()=>{lt(Cr,"Please select a Feature",Et.tableValidationFeature),lt(Et.inputMessageSubject.value,"Please give a Subject",Et.inputMessageSubject),lt(Et.inputMessageTimeout.value,"Please give a timeout",Et.inputMessageTimeout),Et.buttonMessageSend.classList.add("busy"),Et.buttonMessageSend.disabled=!0,rx()},Et.buttonMessageFavorite.onclick=async()=>{let e=Et.inputMessageTemplate.value,t=Cr,r=Sr.getValue();lt(t,"Please select a Feature",Et.tableValidationFeature),lt(e,"Please give a name for the template",Et.inputMessageTemplate),Q().messageTemplates[t]=Q().messageTemplates[t]||{},Object.keys(Q().messageTemplates[t]).includes(e)&&Et.favIconMessage.classList.contains("bi-star-fill")?(Et.favIconMessage.classList.replace("bi-star-fill","bi-star"),delete Q().messageTemplates[t][e]):(Et.favIconMessage.classList.replace("bi-star","bi-star-fill"),Q().messageTemplates[t][e]={subject:Et.inputMessageSubject.value,timeout:Et.inputMessageTimeout.value,...r&&{payload:JSON.parse(r)}},Sr.session.getUndoManager().markClean()),await ie(!1,"messageTemplates")},Et.ulMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){Et.favIconMessage.classList.replace("bi-star","bi-star-fill");let t=Q().messageTemplates[Cr][e.target.textContent];Et.inputMessageTemplate.value=e.target.textContent,Et.inputMessageSubject.value=t.subject,Et.inputMessageTimeout.value=t.timeout,Sr.setValue(Tt(t.payload),-1),Sr.session.getUndoManager().markClean()}}),[Et.inputMessageTemplate,Et.inputMessageSubject,Et.inputMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{Et.favIconMessage.classList.replace("bi-star-fill","bi-star")})}),Sr.on("input",()=>{Sr.session.getUndoManager().isClean()||Et.favIconMessage.classList.replace("bi-star-fill","bi-star")})}function rx(){let e;Sr&&Sr.getValue().length>0?e=JSON.parse(Sr.getValue()):e=null,_n.setValue(""),xt("POST","/things/"+St.thingId+"/features/"+Cr+"/inbox/messages/"+Et.inputMessageSubject.value+"?timeout="+Et.inputMessageTimeout.value,e,null,!1,!1,!0).then(t=>{Et.buttonMessageSend.classList.remove("busy"),Et.buttonMessageSend.disabled=!1,Et.inputMessageTimeout.value>0&&_n.setValue(Tt(t),-1)}).catch(t=>{Et.buttonMessageSend.classList.remove("busy"),Et.buttonMessageSend.disabled=!1,_n.setValue(`Error: ${t}`)})}function ox(e){Q().messageTemplates=Q().messageTemplates||{},e||bm(),e==="messageTemplates"&&fm()}function bm(){Et.favIconMessage.classList.replace("bi-star-fill","bi-star"),Et.inputMessageTemplate.value=null,Et.inputMessageSubject.value=null,Et.inputMessageTimeout.value="10",Sr.setValue(""),_n.setValue(""),Et.ulMessageTemplates.textContent="",Et.buttonMessageSend.disabled=!Cr||Cr===""}function fm(){Et.ulMessageTemplates.textContent="",Wo(Et.ulMessageTemplates,"Saved message templates",!0),Cr&&Q().messageTemplates[Cr]&&fo(Et.ulMessageTemplates,Object.keys(Q().messageTemplates[Cr]))}function ix(e){e!==Cr&&(Cr=e,bm(),fm())}var vm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseMessages">
    Incoming Thing Updates <span class="badge rounded-pill bg-info" id="badgeMessageIncomingCount"></span></h5>
<hr />
<div class="collapse" id="collapseMessages">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-7 resizable_flex_column">
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetMessagesIncoming"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
            </div>
            <table-filter id="tableFilterMessagesIncoming"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Revision</th>
                            <th>Action</th>
                            <th>Path</th>
                            <th>Field(s)</th>
                            <th>Modified</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyMessagesIncoming"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-5 resizable_flex_column">
            <h6>Thing Update Detail</h6>
            <div class="input-group input-group-sm mb-1 mt-1">
                <label class="input-group-text" for="selectThingUpdateMessageContent">Show</label>
                <select class="form-select form-select-sm" id="selectThingUpdateMessageContent">
                    <option value="ONLY_CONTEXT" selected>Only context</option>
                    <option value="ONLY_CONTEXT_WITH_METADATA">Only context with metadata</option>
                    <option value="FULL_THING">Only full Thing JSON</option>
                    <option value="FULL_THING_WITH_CONTEXT">Full Thing JSON with context and metadata</option>
                </select>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="messageIncomingDetail"></div>
            </div>
        </div>
    </div>
</div>`;var ze={badgeMessageIncomingCount:null,buttonResetMessagesIncoming:null,selectThingUpdateMessageContent:null,tbodyMessagesIncoming:null,tableFilterMessagesIncoming:null},Sn=[],Tr=[],Bi,Eo,wm,ym="ONLY_CONTEXT";document.getElementById("messagesIncomingHTML").innerHTML=vm;function xm(){ya(dx),Ce(cx),ht(ze),Eo=Nt("messageIncomingDetail","ace/mode/json",!0),ze.buttonResetMessagesIncoming.onclick=Em,ze.selectThingUpdateMessageContent.onchange=lx,ze.tbodyMessagesIncoming.addEventListener("click",sx),ze.tableFilterMessagesIncoming.addEventListener("filterChange",px),ze.tableFilterMessagesIncoming.filterOptions=Sm()}function sx(e){Bi=e.target.parentNode.rowIndex-1,km(),Eo.session.getUndoManager().reset()}function km(){switch(ym){case"FULL_THING_WITH_CONTEXT":{Eo.setValue(Tt(Tr[Bi]),-1);break}case"FULL_THING":{let t=Object.entries(Tr[Bi]).filter(([d,p])=>!d.startsWith("_")),r=Object.fromEntries(t);Eo.setValue(Tt(r),-1);break}case"ONLY_CONTEXT_WITH_METADATA":{let t=Object.entries(Tr[Bi]).filter(([d,p])=>d.startsWith("_")),r=Object.fromEntries(t);Eo.setValue(Tt(r),-1);break}case"ONLY_CONTEXT":{let t=Object.entries(Tr[Bi]).filter(([d,p])=>d.startsWith("_")).filter(([d,p])=>d!=="_metadata"),r=Object.fromEntries(t);Eo.setValue(Tt(r),-1);break}default:Eo.setValue(Tt(Tr[Bi]),-1)}}function Em(){Sn=[],Tr=[],ze.badgeMessageIncomingCount.textContent="",ze.tbodyMessagesIncoming.textContent="",Eo.setValue("")}function lx(){ym=ze.selectThingUpdateMessageContent.value,km()}function dx(e){Sn.push(e);let t=ze.tableFilterMessagesIncoming.filterItems([e]);t.length>0&&(Tr.push(t[0]),_m(t[0])),mn(ze.badgeMessageIncomingCount,Sn,Tr)}function _m(e){let t=e._context.topic.substring(e._context.topic.lastIndexOf("/")+1);Ut(ze.tbodyMessagesIncoming,e._revision,!1,null,t,e._context.path,r(t).join(`
`),un(e._modified,!0));function r(d){return d==="deleted"?[]:e._context?.value?[...e._context.value.features?Object.keys(e._context.value.features):[],...e._context.value.attributes?Object.keys(e._context.value.attributes):[]]:[...e.features?Object.keys(e.features):[],...e.attributes?Object.keys(e.attributes):[]]}}function cx(e){(!e||e.thingId!==wm)&&(wm=e?e.thingId:null,Em(),ze.tableFilterMessagesIncoming.filterOptions=Sm(e))}function Sm(e){let t=[];return["created","modified","merged","deleted"].forEach(r=>t.push(new Ne(0,`/${r}`,"_context.topic","Action"))),e&&["features","attributes"].forEach(r=>{e[r]&&Object.keys(e[r]).forEach(d=>{t.push(new Ne(0,`/${r}/${d}`,"_context.path","Path"))})}),t}function px(e){ze.tbodyMessagesIncoming.textContent="",Tr=ze.tableFilterMessagesIncoming.filterItems(Sn),Tr.forEach(t=>_m(t)),mn(ze.badgeMessageIncomingCount,Sn,Tr)}var Cm=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputThingMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputThingMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonThingMessageSend">
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonThingMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconThingMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulThingMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputThingMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayloadThingMessage"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponseThingMessage"></div>
            </div>
        </div>

    </div>
</div>`;var Ct={inputThingMessageSubject:null,inputThingMessageTimeout:null,inputThingMessageTemplate:null,buttonThingMessageSend:null,buttonThingMessageFavorite:null,ulThingMessageTemplates:null,favIconThingMessage:null},Ar,Cn;async function Tm(){Ye(hx),Ce(fx),Ci(document.getElementById("tabItemsThing"),document.getElementById("tabContentThing"),"Send Message",Cm),ht(Ct),Ar=Nt("acePayloadThingMessage","ace/mode/json"),Cn=Nt("aceResponseThingMessage","ace/mode/json",!0),Ct.buttonThingMessageSend.onclick=()=>{lt(Ct.inputThingMessageSubject.value,"Please give a Subject",Ct.inputThingMessageSubject),lt(Ct.inputThingMessageTimeout.value,"Please give a timeout",Ct.inputThingMessageTimeout),Ct.buttonThingMessageSend.classList.add("busy"),Ct.buttonThingMessageSend.disabled=!0,gx()},Ct.buttonThingMessageFavorite.onclick=async()=>{let e=Ct.inputThingMessageTemplate.value,t=Ar.getValue();lt(e,"Please give a name for the template",Ct.inputThingMessageTemplate),Q().messageTemplates["/"]=Q().messageTemplates["/"]||{},Object.keys(Q().messageTemplates["/"]).includes(e)&&Ct.favIconThingMessage.classList.contains("bi-star-fill")?(Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),delete Q().messageTemplates["/"][e]):(Ct.favIconThingMessage.classList.replace("bi-star","bi-star-fill"),Q().messageTemplates["/"][e]={subject:Ct.inputThingMessageSubject.value,timeout:Ct.inputThingMessageTimeout.value,...t&&{payload:JSON.parse(t)}},Ar.session.getUndoManager().markClean()),await ie(!1,"messageTemplates")},Ct.ulThingMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){Ct.favIconThingMessage.classList.replace("bi-star","bi-star-fill");let t=Q().messageTemplates["/"][e.target.textContent];Ct.inputThingMessageTemplate.value=e.target.textContent,Ct.inputThingMessageSubject.value=t.subject,Ct.inputThingMessageTimeout.value=t.timeout,Ar.setValue(Tt(t.payload),-1),Ar.session.getUndoManager().markClean()}}),[Ct.inputThingMessageTemplate,Ct.inputThingMessageSubject,Ct.inputThingMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}),Ar.on("input",()=>{Ar.session.getUndoManager().isClean()||Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}function gx(){let e;Ar&&Ar.getValue().length>0?e=JSON.parse(Ar.getValue()):e=null,Cn.setValue(""),xt("POST","/things/"+St.thingId+"/inbox/messages/"+Ct.inputThingMessageSubject.value+"?timeout="+Ct.inputThingMessageTimeout.value,e,null,!1,!1,!0).then(t=>{Ct.buttonThingMessageSend.classList.remove("busy"),Ct.buttonThingMessageSend.disabled=!1,Ct.inputThingMessageTimeout.value>0&&Cn.setValue(Tt(t),-1)}).catch(t=>{Ct.buttonThingMessageSend.classList.remove("busy"),Ct.buttonThingMessageSend.disabled=!1,Cn.setValue(`Error: ${t}`)})}function hx(e){Q().messageTemplates=Q().messageTemplates||{},e||Am(),bx()}function Am(){Ct.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),Ct.inputThingMessageTemplate.value=null,Ct.inputThingMessageSubject.value=null,Ct.inputThingMessageTimeout.value="10",Ar.setValue(""),Cn.setValue(""),Ct.ulThingMessageTemplates.textContent="",Ct.buttonThingMessageSend.disabled=St===null}function bx(){Ct.ulThingMessageTemplates.textContent="",Wo(Ct.ulThingMessageTemplates,"Saved message templates",!0),Q().messageTemplates["/"]&&fo(Ct.ulThingMessageTemplates,Object.keys(Q().messageTemplates["/"]))}function fx(e,t){(!e||t)&&Am()}var ql={"(empty thing)":{},"WoT ThingModel 'floor-lamp' 1.0.0":{definition:"https://eclipse-ditto.github.io/ditto-examples/wot/models/floor-lamp-1.0.0.tm.jsonld"},"com.acme:coffeebrewer:0.1.0":{definition:"com.acme:coffeebrewer:0.1.0",attributes:{manufacturer:"ACME demo corp.",location:"Berlin, main floor",serialno:"42",model:"Speaking coffee machine"},features:{"coffee-brewer":{definition:["com.acme:coffeebrewer:0.1.0"],properties:{"brewed-coffees":0}},"water-tank":{properties:{configuration:{smartMode:!0,brewingTemp:87,tempToHold:44,timeoutSeconds:6e3},status:{waterAmount:731,temperature:44}}}}}};var er,Lm,Ot={tbodyThingDetails:null,crudThings:null,buttonThingDefinitions:null,inputThingDefinition:null,ulThingDefinitions:null};async function $m(){Ce(_x),ht(Ot),er=Nt("thingJsonEditor","ace/mode/json",!0),fo(Ot.ulThingDefinitions,Object.keys(ql)),Ot.ulThingDefinitions.addEventListener("click",Ex),Ot.crudThings.addEventListener("onCreateClick",kx),Ot.crudThings.addEventListener("onUpdateClick",xx),Ot.crudThings.addEventListener("onDeleteClick",yx),Ot.crudThings.addEventListener("onEditToggle",Sx),document.querySelector('a[data-bs-target="#tabModifyThing"]').addEventListener("shown.bs.tab",e=>{er.renderer.updateFull()})}function yx(){Ke(`Are you sure you want to delete thing<br>'${Ot.crudThings.idValue}'?`,"Delete",()=>{xt("DELETE",`/things/${Ot.crudThings.idValue}`,null,{"if-match":"*"}).then(()=>{fa()})})}function xx(){xt("PATCH",`/things/${Ot.crudThings.idValue}`,JSON.parse(er.getValue()),{"if-match":Lm||"*","if-equal":"skip-minimizing-merge"}).then(()=>{Ot.crudThings.toggleEdit(),yr(Ot.crudThings.idValue,null)})}async function kx(){let e=er.getValue();Ot.crudThings.idValue!==void 0&&Ot.crudThings.idValue!==""?xt("PUT","/things/"+Ot.crudThings.idValue,e===""?{}:JSON.parse(e),{"if-none-match":"*"}).then(t=>{Ot.crudThings.toggleEdit(),yr(t.thingId,()=>{fn([t.thingId])})}):xt("POST","/things",e===""?{}:JSON.parse(e)).then(t=>{Ot.crudThings.toggleEdit(),yr(t.thingId,()=>{fn([t.thingId])})})}function Ex(e){Fr(null),Ot.inputThingDefinition.value=e.target.textContent,er.setValue(Tt(ql[e.target.textContent]),-1)}function _x(e){if(Ot.crudThings.isEditing)return;t(),r();function t(){Ot.tbodyThingDetails.textContent="",e&&(Ut(Ot.tbodyThingDetails,"thingId",!1,e.thingId,e.thingId),Ut(Ot.tbodyThingDetails,"policyId",!1,e.policyId,e.policyId),Ut(Ot.tbodyThingDetails,"definition",!1,e.definition??" ",e.definition??""),Ut(Ot.tbodyThingDetails,"revision",!1,e._revision,e._revision),Ut(Ot.tbodyThingDetails,"created",!1,e._created,e._created),Ut(Ot.tbodyThingDetails,"modified",!1,e._modified,e._modified))}function r(){if(e){Ot.crudThings.idValue=e.thingId,Ot.inputThingDefinition.value=e.definition??"";let d=JSON.parse(JSON.stringify(e));delete d._revision,delete d._created,delete d._modified,delete d._context,er.setValue(Tt(d),-1),er.session.getUndoManager().reset()}else Ot.crudThings.idValue=null,Ot.inputThingDefinition.value=null,er.setValue(""),er.session.getUndoManager().reset()}}function Sx(e){let t=e.detail.isEditing;t&&St?xt("GET",`/things/${St.thingId}`,null,null,!0).then(g=>(Lm=g.headers.get("ETag").replace("W/",""),g.json())).then(g=>{r(),d(g)}):(r(),p());function r(){Ot.buttonThingDefinitions.disabled=!t,Ot.inputThingDefinition.disabled=!t,er.setReadOnly(!t),er.renderer.setShowGutter(t)}function d(g){Ot.inputThingDefinition.value=g.definition??"",er.setValue(Tt(g),-1)}function p(){Ot.crudThings.idValue&&Ot.crudThings.idValue!==""?yr(Ot.crudThings.idValue,null):(Ot.inputThingDefinition.value=null,er.setValue(""))}}var Rm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="ace_container" style="flex-grow: 1;">
            <div class="script_editor" id="aceDescription"></div>
        </div>
    </div>
</div>`;function Ql(e,t){let r,d,p=!1,g=t,n;return{ready:async()=>{let l=Ci(document.getElementById(e.itemsId),document.getElementById(e.contentId),"WoT TD",Rm,"Generated WoT Thing Description. This requires a valid reference to a WoT Thing Model in the "+(t?"Feature":"Thing")+" definition. The Ditto environment must have WoT support enabled.");r=document.querySelector(`a[data-bs-target="#${l}"]`),r.onclick=i;let s=Math.random().toString(36).replace("0.","");document.getElementById("aceDescription").id=s,d=Nt(s,"ace/mode/json",!0)},onReferenceChanged:l=>{g&&(n=l),r&&r.classList.contains("active")?a():p=!0}};function i(){p&&(a(),p=!1)}function a(){let l=g?"/features/"+n:"";d.setValue(""),St&&(!g||n)&&xt("GET","/things/"+St.thingId+l,null,{accept:"application/td+json"}).then(s=>{d.setValue(Tt(s),-1)}).catch()}}var Mm=`<!--
  ~ Copyright (c) 2024 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<form class="input-group input-group-sm has-validation mb-1" autocomplete="off">
  <label class="input-group-text" hidden>Filter</label>
  <div class="btn-group dropend">
      <button type="button" class="btn btn-outline-secondary btn-sm dropdown-toggle"
          data-bs-toggle="dropdown" aria-expanded="false"></button>
      <ul id="ulFilterOptions" class="dropdown-menu">
          <input type="text" name="dropdown" class="form-control form-control-sm" placeholder="Filter entries..." spellcheck="false" autocomplete="off">
      </ul>                                    
  </div>
  <input autocomplete="false" name="hidden" type="text" style="display:none;">
  <input type="search" name="main" class="form-control form-control-sm me-1"
    placeholder="Add basic filter..." autocomplete="off" spellcheck="false"></input>
  <div class="form-check form-switch">
    <input class="form-check-input mt-2" type="checkbox" role="switch"
        data-bs-toggle="tooltip" title="Toggle advanced search">
  </div>
  <div class="invalid-feedback"></div>
</form>
<div data-bs-theme="dark">
</div>

`;var Zl=class extends HTMLElement{constructor(){super();this.basicFilters=new wn;this.mode=0;this.basicFilters.onFilterChange=this}connectedCallback(){this.innerHTML=Mm,this.mainInput=this.querySelector('input[name="main"]'),this.mainInput.addEventListener("keyup",this.mainInputChangedCallback(this)),this.mainInput.addEventListener("search",this.mainInputChangedCallback(this)),this.dropDownInput=this.querySelector('input[name="dropdown"]'),this.dropDownInput.addEventListener("keyup",this.filterDropdown(this)),this.dropDownInput.addEventListener("search",this.filterDropdown(this)),this.querySelector("button").addEventListener("click",this.onDropDownToggle(this)),this.querySelector("ul").addEventListener("click",this.filterSelectedCallback(this)),this.querySelector('input[role="switch"').addEventListener("click",this.toggleModeCallback(this))}set filterOptions(r){let d=this.querySelector("ul"),p=d.firstElementChild;d.replaceChildren(p),r.forEach(g=>{Wo(d,g.toString(),!1,JSON.stringify(g))})}get filter(){return this.validatedFilter}filterItems(r){let d=r;if(this.validatedFilter)try{d=Rt({path:this.validatedFilter,json:r})}catch(p){console.log(p.message)}return d}fillUIChips(){let r=this.querySelector('[data-bs-theme="dark"]');r.textContent="",this.basicFilters.getAllUIs().forEach(d=>r.appendChild(d))}toggleModeCallback(r){return d=>{switch(r.mode){case 0:r.mainInput.value=r.filter,r.mainInput.placeholder="Enter JSONPath to filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!0,r.mode=1;break;case 1:r.mainInput.value="",r.mainInput.placeholder="Add basic filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!1,r.mode=0,this.basicFilters.clear(),this.filterChanged()}}}filterSelectedCallback(r){return d=>{let p=d.target;if(p&&p.classList.contains("dropdown-item")){let g=Ne.fromJSON(JSON.parse(p.dataset.value));r.mode===0?r.basicFilters.addOrUpdate(g):r.mainInput.value=new wn().addOrUpdate(g).createJsonPath()}r.filterChanged()}}mainInputChangedCallback(r){return d=>{if(d.type==="search"||d.key==="Enter"||d.code==="Enter")switch(r.mode){case 0:r.basicFilters.addFromString(r.mainInput.value),r.filterChanged(),r.mainInput.value="";break;case 1:try{let p=Rt({path:r.mainInput.value,json:[{_context:{topic:"test",path:"test"}}]});r.filterChanged()}catch(p){lt(!1,p.message,r.mainInput)}}}}filterDropdown(r){return d=>{r.querySelectorAll(".dropdown-menu li").forEach(p=>{let g=d.target.value.toLowerCase();p.hidden=p.textContent.toLowerCase().indexOf(g)<0})}}filterChanged(){switch(this.mode){case 0:this.validatedFilter=this.basicFilters.createJsonPath(),this.fillUIChips();break;case 1:this.validatedFilter=this.mainInput.value}this.dispatchEvent(new CustomEvent("filterChange",{composed:!0,detail:{filter:this.validatedFilter}}))}onDropDownToggle(r){return()=>{r.dropDownInput.value="",r.dropDownInput.dispatchEvent(new Event("keyup")),r.dropDownInput.focus()}}};customElements.define("table-filter",Zl);var td=!1,ed;document.addEventListener("DOMContentLoaded",async function(){Ep(),await Kp(),await Qp(),await $m(),await Tm(),await Yp(),xm(),lm(),await jp(),await iu(),mm(),await hm(),qu(),om(),tm(),Qu(),am(),nm(),xu(),Eu(),await Su(),await Ku(),hu(),await Dp(),await Wu(),await $u();let e=Ql({itemsId:"tabItemsThing",contentId:"tabContentThing"},!1);Ce(e.onReferenceChanged),await e.ready();let t=Ql({itemsId:"tabItemsFeatures",contentId:"tabContentFeatures"},!0);Fa(t.onReferenceChanged),await t.ready(),new Mr(document.querySelector(".dropdown-toggle"),{popperConfig:{strategy:"fixed"}}),ed=document.getElementById("mainNavbar"),ed.querySelectorAll(".nav-link").forEach(g=>{g.addEventListener("click",n=>{ed.querySelectorAll(".nav-link,.active").forEach(u=>u.classList.remove("active")),n.currentTarget.classList.add("active")})}),document.querySelectorAll(".table").forEach(g=>{g.addEventListener("click",n=>{let u=n.target;u&&u.tagName==="TD"&&(Array.from(u.parentNode.parentNode.children).forEach(o=>{o!==u.parentNode&&o.classList.remove("table-active")}),u.parentElement.classList.toggle("table-active"))})});let r=new ResizeObserver(()=>{td=!0});document.querySelectorAll(".resizable_pane").forEach(g=>{r.observe(g),g.addEventListener("mouseup",()=>{td&&(window.dispatchEvent(new Event("resize")),td=!1)})});let{get:d,set:p}=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");document.querySelectorAll("input").forEach(g=>{g.addEventListener("change",n=>{n.target.classList.remove("is-invalid")}),Object.defineProperty(g,"value",{get(){return d.call(this)},set(n){return g.classList.remove("is-invalid"),p.call(this,n)}})})});})();
/*! Bundled license information:

event-source-polyfill/src/eventsource.js:
  (** @license
   * eventsource.js
   * Available under MIT License (MIT)
   * https://github.com/Yaffle/EventSource/
   *)

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
